{"config":{"lang":["en"],"separator":"[\\s\\u200b\\u3000\\-\u3001\u3002\uff0c\uff0e\uff1f\uff01\uff1b]+","pipeline":["stemmer"]},"docs":[{"location":"","title":"\ud83c\udfe1\u200b\u4e3b\u9875","text":""},{"location":"#_1","title":"\ud83d\udc4b\u200b\u6b22\u8fce","text":"<p>0X10CC\u200b\u7684\u200b\u4ee3\u7801\u200b\u7a7a\u95f4\u200b</p> <p> \u200b\u592a\u9633\u200b\u603b\u662f\u200b\u80fd\u200b\u6e29\u6696\u200b\u5411\u65e5\u8475\u200b <p> </p>"},{"location":"#_2","title":"\ud83d\udcd2\u200b\u5173\u4e8e\u200b\u7b14\u8bb0","text":"<p>\u200b\u8fd9\u4e2a\u200b\u7b14\u8bb0\u672c\u200b\u66f4\u200b\u50cf\u200b\u4e00\u4e2a\u200b\u52a9\u8bb0\u200b\u7c3f\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u4e00\u4e9b\u200b\u81ea\u5df1\u200b\u5b66\u4e60\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u89c9\u5f97\u200b\u5341\u5206\u200b\u91cd\u8981\u200b\u7684\u200b\u77e5\u8bc6\u200b\uff0c\u200b\u65b9\u4fbf\u200b\u81ea\u5df1\u200b\u67e5\u9605\u200b\u3002</p> \ud83d\udcda\u200b\u5185\u5bb9\u200b\u5206\u7c7b\u200b <ul> <li>Langs<ul> <li>C++\u200b\u96f6\u788e\u200b\u6742\u8bb0\u200b</li> <li>Effective Modern C++ \u200b\u9605\u8bfb\u200b\u7b14\u8bb0\u200b\uff08\u200b\u6709\u7a7a\u200b\u4e00\u5b9a\u200b\u8bfb\u5b8c\u200b\uff09</li> </ul> </li> <li>\u200b\u8ba1\u7b97\u673a\u200b\u57fa\u7840\u200b<ul> <li>CMU15-213\uff1aCSAPP</li> </ul> </li> <li>Tools</li> </ul> <p> \u200b\u672c\u7ad9\u200b\u5df2\u7ecf\u200b\u8fd0\u884c\u200b </p>"},{"location":"liuyanban/","title":"\u7545\u6240\u6b32\u8a00\u200b\u7559\u8a00\u677f","text":"<p>\u200b\u6708\u843d\u4e4c\u557c\u200b\u971c\u200b\u6ee1\u5929\u200b \u200b\u6c5f\u67ab\u200b\u6e14\u706b\u200b\u5bf9\u6101\u200b\u7720\u200b</p> <p> \u300a\u200b\u67ab\u6865\u200b\u591c\u6cca\u200b\u300b\u3010\u200b\u5510\u4ee3\u200b\u3011\u200b\u5f20\u7ee7\u200b</p>"},{"location":"about/geren/","title":"Geren","text":"<p> <p> </p>"},{"location":"about/geren/#_1","title":"\u4eca\u65e5\u200b\u8bd7\u8bcd","text":"<p>Wcowin</p> <p>A college student in Chongqing</p> <p>About me</p> <ul> <li> Hey, I'm Wcowin!</li> <li> \u200b\u6e05\u9192\u200b\uff0c\u200b\u77e5\u8da3\u200b\uff0c\u200b\u660e\u200b\u5f97\u5931\u200b\uff0c\u200b\u77e5\u200b\u8fdb\u9000\u200b</li> <li> \u200b\u5496\u5561\u200b\u91cd\u5ea6\u200b\u7231\u597d\u8005\u200b </li> <li> \u200b\u70ed\u7231\u200b(xi\u0101)\u200b\u6298\u817e\u200b\u6280\u672f\u200b/Math</li> <li> \u200b\u8bfb\u4e66\u200b\u660e\u5fd7\u200b\u53ef\u8bc6\u200b\u6625\u79cb\u200b;\u200b\u8bd7\u8bcd\u200b\u7231\u597d\u8005\u200b,\u200b\u559c\u6b22\u200b\u6751\u4e0a\u6625\u6811\u200b\uff0c\u200b\u64c5\u957f\u200b\u7fbd\u6bdb\u7403\u200b</li> </ul> <p></p>"},{"location":"about/geren/#_2","title":"\u8054\u7cfb\u200b\u6211","text":"<p> \u200b\u6211\u200b\u7684\u200b\u540d\u7247\u200b </p> <p> </p> \u200b\u516c\u4f17\u200b\u53f7"},{"location":"about/geren/#_3","title":"\u4e2a\u4eba\u7b80\u5386","text":"<p>\u200b\u4e2a\u4eba\u7b80\u5386\u200b(\u200b\u5728\u7ebf\u200b)</p>"},{"location":"about/geren/#_4","title":"\u4e2a\u4eba\u200b\u6280\u80fd","text":"<p>\u200b\u672c\u4eba\u200b\u64c5\u957f\u200b Ai\u3001Fw\u3001Fl\u3001Br\u3001Ae\u3001Pr\u3001Id\u3001Ps \u200b\u7b49\u200b\u8f6f\u4ef6\u200b\u7684\u200b\u5b89\u88c5\u200b\u4e0e\u200b\u5378\u8f7d\u200b\u3002 \u200b\u7cbe\u901a\u200b CSS\u3001JavaScript\u3001PHP\u3001ASP\u3001C\u3001C++\u3001C#\u3001Java\u3001Ruby\u3001Perl\u3001Lisp\u3001Python\u3001Objective-C\u3001ActionScript\u3001Pascal \u200b\u7b49\u200b\u5355\u8bcd\u200b\u7684\u200b\u62fc\u5199\u200b\u3002 \u200b\u719f\u6089\u200b Windows\u3001Linux\u3001OS X\u3001Android\u3001iOS\u3001WP8 \u3001harmony\u3001hyper\u200b\u7b49\u200b\u7cfb\u7edf\u200b\u7684\u200b\u5f00\u5173\u673a\u200b\u3002</p>"},{"location":"about/geren/#_5","title":"\u4e2a\u4eba\u200b\u8363\u8a89","text":"<p> <p></p>"},{"location":"about/geren/#_6","title":"\u987b\u77e5","text":"<p>\u200b\u5982\u679c\u200b\u4f60\u200b\u5728\u200b\u6d4f\u89c8\u200b\u535a\u5ba2\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u53d1\u73b0\u200b\u4e86\u200b\u4efb\u4f55\u200b\u95ee\u9898\u200b\uff0c\u200b\u6b22\u8fce\u200b\u524d\u5f80\u200b GitHub \u200b\u7684\u200b\u4ee3\u7801\u200b\u4ed3\u5e93\u200b\u63d0\u4ea4\u200b Issues \u200b\u6216\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u76f8\u5173\u200b\u6587\u4ef6\u200b\u540e\u200b\u63d0\u4ea4\u200b Pull Requests\u3002\u200b\u5982\u679c\u200b\u4f60\u200b\u6709\u200b\u5176\u4ed6\u200b\u4e8b\u60c5\u200b\u60f3\u8981\u200b\u54a8\u8be2\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e0b\u65b9\u200b\u6309\u94ae\u200b\u4f7f\u7528\u200b\u90ae\u4ef6\u200b\u8054\u7cfb\u200b\u6211\u200b,\u200b\u8bf7\u200b\u4e0d\u8981\u200b\u6ee5\u7528\u200b\u535a\u5ba2\u200b\u7684\u200b\u8bc4\u8bba\u200b\u529f\u80fd\u200b\u53d1\u8868\u200b\u4e0e\u200b\u4e3b\u9898\u200b\u65e0\u5173\u200b\u8a00\u8bba\u200b\u3002</p> <p>Send Email </p>"},{"location":"about/link/","title":"\u53cb\u94fe","text":""},{"location":"about/link/#_1","title":"\u6b22\u8fce\u200b\u52a0\u5165\u200b\u53cb\u94fe\u200b(\u200b\u4e0d\u200b\u5206\u200b\u5148\u540e\u200b)","text":"Wcowin's Web         \u201c\u200b\u5faa\u6b64\u200b\u82e6\u65c5\u200b\uff0c\u200b\u4ee5\u8fbe\u200b\u661f\u8fb0\u200b\u201d        \u200b\u5c0f\u738b\u200b\u548c\u200b\u738b\u8001\u5e08\u200b\u7684\u200b\u5c0f\u7ad9\u200b          \u200b\u65e0\u4e00\u662f\u200b\u4f60\u200b\uff0c\u200b\u65e0\u4e00\u4e0d\u662f\u200b\u4f60\u200b        Xpm's Robot Lab         \u200b\u661f\u661f\u4e4b\u706b\u200b\u53ef\u4ee5\u200b\u71ce\u539f\u200b        Crant         \u200b\u7528\u5fc3\u200b\u8bb0\u5f55\u200b\uff0c\u200b\u7f8e\u597d\u751f\u6d3b\u200b        Finisky Garden         \u200b\u4e92\u8054\u7f51\u200b\u6280\u672f\u200b\u90a3\u4e9b\u200b\u4e8b\u513f\u200b        Munger yang's Blog         Mungeryang\u200b\u5199\u5b57\u200b\u7684\u200b\u5730\u65b9\u200b        Myhexo         Wcowin\u200b\u7684\u200b\u4e2a\u4eba\u200bHexo\u200b\u7f51\u7ad9\u200b        \u200b\u968f\u9047\u800c\u5b89\u200b         \u200b\u751f\u6d3b\u200b\u5410\u69fd\u200b\uff06\u200b\u5b66\u4e60\u200b\u8bb0\u5f55\u200b        Qiuyuair\u200b\u7684\u200b\u81ea\u7559\u5730\u200b         Airyu\u2019s Site        \u200b\u6781\u5ba2\u200b\u85cf\u6e90\u200b         \u200b\u63a2\u7d22\u200b\u4e92\u8054\u7f51\u200b\u65b0\u5927\u9646\u200b in N ways.        \u200b\u9e8b\u9e7f\u200b\u9c81\u54df\u200b         \u200b\u5927\u9053\u81f3\u7b80\u200b\uff0c\u200b\u77e5\u6613\u884c\u96be\u200b        obaby@mars         \u200b\u7231\u597d\u200b\u5e7f\u6cdb\u200b\u7684\u200b\u706b\u661f\u200b\u5c0f\u5996\u7cbe\u200b        \u200b\u96c5\u6545\u200b\u5c0f\u7b51\u200b         \u200b\u5bfb\u200b\u4e00\u5904\u200b\u5c0f\u7b51\u200b\uff0c\u200b\u4e0d\u9047\u200b\u8f66\u9a6c\u200b\u55a7\u5668\u200b        \u200b\u675c\u200b\u8001\u5e08\u200b\u8bf4\u200b \u200b\u65e7\u68a6\u200b         \u200b\u51b0\u51bb\u4e09\u5c3a\u975e\u4e00\u65e5\u4e4b\u5bd2\u200b        \u200b\u6ef4\u6c34\u7a7f\u77f3\u200b\u975e\u200b\u4e00\u65e5\u4e4b\u529f\u200b        \u200b\u5de6\u773c\u200b\u4f1a\u200b\u966a\u200b\u53f3\u773c\u200b\u54ed\u200b\u306e\u200b\u535a\u5ba2\u200b         \u200b\u5e72\u561b\u200b\u8fd9\u4e48\u200b\u60f3\u4e0d\u5f00\u200b\uff0c\u200b\u8981\u200b\u5728\u200b\u8138\u4e0a\u200b\u8d34\u4e2a\u200b\u8f93\u5b57\u200b\uff01        \u200b\u4ee5\u592a\u200b\u5de5\u574a\u200b         \u200b\u5206\u4eab\u200b\u6211\u200b\u7684\u200b\u5b66\u4e60\u200b\u7b14\u8bb0\u200b\u3001\u200b\u7ecf\u9a8c\u200b\u4e0e\u200b\u6709\u8da3\u200b\u7684\u200b\u5c0f\u73a9\u610f\u200b.        \u200b\u6ca1\u7528\u200b\u7684\u200b\u5c0f\u200b\u5e9f\u9f20\u200b\u7684\u200bBlog         \u200b\u505a\u5b66\u95ee\u200b\u53ef\u4e0d\u662f\u200b\u8d76\u6f6e\u6d41\u200b\u3001\u200b\u6ca1\u6709\u200b\u51b7\u95e8\u200b\u70ed\u95e8\u200b\u4e4b\u200b\u8bf4\u200b\u3002        \u200b\u5929\u84bc\u4eba\u200b\u9821\u200b         \u200b\u767c\u6398\u200b\u597d\u73a9\u200b\u4e8b\u7269\u200b        JayHrn         \u200b\u767c\u6398\u200b\u597d\u73a9\u200b\u4e8b\u7269\u200b        \u200b\u6d6a\u6d77\u200b\u5bfc\u822a\u200b         \u200b\u6d6a\u6d77\u200b\u5bfc\u822a\u200b ~ \u200b\u6536\u5f55\u200b\u5404\u79cd\u7c7b\u578b\u200b\u7684\u200b\u535a\u5ba2\u200b        Moraxyc\u2019s Rhapsody         \u200b\u6c38\u8fdc\u200b\u70ed\u7231\u200b\uff01        XIAOMING'S BLOG    \u200b\u8bb0\u5f55\u200b\u751f\u6d3b\u200b\u70b9\u6ef4\u200b\uff0c\u200b\u8c31\u5199\u200b\u7cbe\u5f69\u200b\u751f\u6d3b\u200b\uff01        WKK &amp; Blog        \u200b\u5929\u751f\u6211\u6750\u5fc5\u6709\u7528\u200b\uff0c\u200b\u5343\u91d1\u200b\u6563\u5c3d\u200b\u8fd8\u200b\u590d\u6765\u200b\u3002        \u200b\u5f20\u6d2a\u200bHeo        \u200b\u5206\u4eab\u200b\u8bbe\u8ba1\u200b\u4e0e\u200b\u79d1\u6280\u200b\u751f\u6d3b\u200b        \u200b\u6545\u4e8b\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u733f\u200b        \u200b\u597d\u597d\u5b66\u4e60\u200b\uff0c\u200b\u5929\u5929\u5411\u4e0a\u200b\u2191        btwoa        \u200b\u4e16\u754c\u200b\u4e3a\u200b\u4f60\u200b\u7b80\u5355\u200b        L1nSn0w's Blog        \u200b\u65e0\u9650\u200b\u8fdb\u6b65\u200b.\ud83c\udf88        IsshikiHugh's Notebook        \u200b\u6211\u4eec\u200b\u767b\u4e0a\u200b\u9ad8\u5854\u200b\uff0c\u200b\u770b\u5230\u200b\u7684\u200b\u5374\u200b\u53ea\u6709\u200b\u9ed1\u591c\u200b\u2026\u2026        Whisper        \u200b\u6211\u4eec\u200b\u7684\u200b\u5fe7\u6101\u200b\u5c06\u4f1a\u200b\u5d29\u89e3\u200b\u7075\u9b42\u200b\u5c06\u4f1a\u200b\u7a7f\u68ad\u200b\u5982\u98ce\u200b        Kegongteng        Blogger / Technophile / Student        Lenny's Web        \u200b\u5929\u5730\u200b\u4e0d\u200b\u4ec1\u200b\uff0c\u200b\u4ee5\u200b\u4e07\u7269\u200b\u4e3a\u200b\u520d\u72d7\u200b        tkqtang\u2019s Web        \u200b\u6240\u8c13\u200b\u81ea\u7531\u200b\uff0c\u200b\u4e0d\u662f\u200b\u968f\u5fc3\u6240\u6b32\u200b\uff0c\u200b\u800c\u662f\u200b\u81ea\u6211\u200b\u4e3b\u5bb0\u200b        Anshul Raj Verma        Introduction: Let's learn together and Build together.        \u200b\u767e\u91cc\u200b\u98de\u6d0b\u200b\u306e\u200b\u535a\u5ba2\u200b        \u200b\u661f\u6cb3\u200b\u6eda\u70eb\u200b\uff0c\u200b\u65e0\u95ee\u200b\u897f\u4e1c\u200b        \u200b\u552f\u4e4b\u4e3a\u200b\u4e4b\u200b        \u200b\u65f6\u5149\u200b\u7b14\u58a8\u200b        \u200b\u8033\u6735\u200b\u7684\u200b\u4e3b\u4eba\u200b        \u200b\u8033\u6735\u200b\u7535\u53f0\u200b\uff0c\u200b\u5e86\u5e78\u200b\u6211\u4eec\u200b\u8fd8\u6709\u200b\u8033\u6735\u200b        \u200b\u5c0f\u5b59\u200b\u540c\u5b66\u200b        \u200b\u8def\u200b\u867d\u200b\u8fdc\u884c\u200b\u5219\u200b\u5c06\u200b\u81f3\u200b\uff0c\u200b\u4e8b\u200b\u968f\u96be\u200b\u505a\u200b\u5219\u200b\u5fc5\u6210\u200b\uff01        \u200b\u767d\u200b\u96fe\u832b\u832b\u200b\u4e36\u200b        \u200b\u8bb0\u5f55\u200b\u5b66\u4e60\u200b\u3001\u200b\u751f\u6d3b\u200b\u548c\u200b\u6709\u8da3\u200b\u7684\u200b\u4e8b\u200b        W1ndys\u306e\u200b\u5c0f\u5c4b\u200b        \u200b\u6b32\u200b\u6234\u200b\u7687\u51a0\u200b\uff0c\u200b\u5fc5\u627f\u5176\u91cd\u200b        \u200b\u4e18\u5361\u200b\u996e\u54c1\u200b\u5e97\u200b        \u200b\u8981\u6765\u200b\u70b9\u200b\u559d\u200b\u7684\u200b\u5417\u200b\uff1f        Echo \u200b\u7684\u200b\u5c0f\u7a9d\u200b        \u200b\u6f02\u6cca\u200b\u4e8e\u200b\u4e92\u8054\u7f51\u200b\u4e2d\u200b\u7684\u200b\u5c0f\u7a9d\u200b        \u200b\u5b89\u77e5\u200b\u9c7c\u200b        \u200b\u751f\u6d3b\u200b\u660e\u6717\u200b\uff0c\u200b\u4e07\u7269\u200b\u53ef\u7231\u200b        \u200b\u5c0f\u5609\u200b\u7684\u200b\u90e8\u843d\u200b\u683c\u200b        \u200b\u4e00\u4e2a\u200b\u7231\u200b\u6298\u817e\u200b\u7684\u200bJava\u200b\u5f00\u53d1\u200b\u5de5\u7a0b\u5e08\u200b        \u200b\u5c0f\u57ce\u200b\u6545\u4e8b\u200b        \u200b\u6b22\u8fce\u5149\u4e34\u200b\u5c0f\u57ce\u200b\u6545\u4e8b\u200b!        \u200b\u6e29\u5cad\u200b\u6148\u5584\u200b\u4e49\u5de5\u200b\u77f3\u5858\u200b\u670d\u52a1\u961f\u200b         \u200b\u6148\u5584\u200b\u4e49\u5de5\u200b\u5728\u200b\u884c\u52a8\u200b        \u200b\u51cc\u4e91\u200b\u00b7LinYun         \u201c\u200b\u56e0\u4e3a\u200b\u70ed\u7231\u200b\u800c\u751f\u200b\u201d        iCKG \u200b\u6e1d\u200b\u89c1\u200b         \u200b\u6211\u200b\u548c\u200b\u91cd\u5e86\u200b\u6709\u4e2a\u200b\u7ea6\u4f1a\u200b        AsyncX         \ud83c\udf0c Per Aspera Ad Astra         Meekdai         \u200b\u7ae5\u8bdd\u200b\u662f\u200b\u4e00\u79cd\u200b\u751f\u6d3b\u6001\u5ea6\u200b\uff0c\u200b\u4ec5\u6b64\u800c\u5df2\u200b\u3002        \u200b\u7121\u540d\u200b\u5c0f\u6808\u200b         \u200b\u5206\u4eab\u200b\u6280\u672f\u200b\u4e0e\u200b\u79d1\u6280\u200b\u751f\u6d3b\u200b        pantheon RyanJoy's Web         \ud83c\udf1f\u200b\u4e14\u89c6\u200b\u4ed6\u4eba\u200b\u4e4b\u7591\u200b\u76ee\u5982\u76cf\u200b\u76cf\u200b\u9b3c\u706b\u200b\uff0c\u200b\u5927\u80c6\u200b\u5730\u53bb\u200b\u8d70\u200b\u81ea\u5df1\u200b\u7684\u200b\u591c\u8def\u200b\u5427\u200b        Frankoxer        \u200b\u522b\u6025\u200b\uff0c\u200b\u8fc7\u4f1a\u513f\u200b\u5c31\u200b\u66f4\u65b0"},{"location":"about/link/#_2","title":"\u5931\u8054\u200b\u4eba\u5458","text":"\u90dd\u5b87\u200b\u535a\u5ba2\u200b         \u200b\u8bb0\u5f55\u200b\u6211\u200b\u7684\u200b\u6210\u957f\u200b\u548c\u200b\u9752\u6625\u200b        \u200b\u4ea4\u6362\u200b\u53cb\u94fe\u200b\uff0c\u200b\u8bf7\u200b\u6dfb\u52a0\u200b\u672c\u200b\u7ad9\u53cb\u200b\u94fe\u540e\u200b\u4e0b\u65b9\u200b\u7559\u8a00\u200b\u7533\u8bf7\u200b\uff0c\u200b\u671f\u671b\u200b\u60a8\u200b\u7684\u200b\u7ad9\u70b9\u200b: <ul> <li>\u200b\u72ec\u7acb\u200b\u535a\u5ba2\u200b(\u200b\u4e0d\u200b\u8981\u6c42\u200b\u72ec\u7acb\u200b\u57df\u540d\u200b)\uff0chttps\uff0c\u200b\u8bbf\u95ee\u200b\u6d41\u7545\u200b</li> <li>\u200b\u539f\u521b\u200b\u5185\u5bb9\u200b\u4e3a\u4e3b\u200b\uff0c\u200b\u539f\u521b\u200b\u5185\u5bb9\u200b3\u200b\u7bc7\u200b\u4ee5\u4e0a\u200b</li> <li>\u200b\u5904\u4e8e\u200b\u6d3b\u8dc3\u200b\u72b6\u6001\u200b\uff0c\u200b\u6709\u200b\u4e00\u5b9a\u200b\u7684\u200b\u66f4\u65b0\u200b\u9891\u7387\u200b</li> <li>\u200b\u5efa\u200b\u7ad9\u200b\u4e00\u4e2a\u6708\u200b\u4ee5\u4e0a\u200b</li> <li>\u200b\u672a\u200b\u6dfb\u52a0\u200b\u53cb\u94fe\u200b\u6216\u200b\u7533\u8bf7\u200b\u672a\u200b\u901a\u8fc7\u200b\uff0c\u200b\u8bc4\u8bba\u200b\u7559\u8a00\u200b\u4f1a\u200b\u88ab\u200b\u9690\u85cf\u200b\u3002</li> </ul> <p>\u200b\u672c\u7ad9\u200b\u5df2\u7ecf\u200b\u52a0\u5165\u200b\u5341\u5e74\u200b\u4e4b\u7ea6\u200b\uff1a  \u200b\u8bf7\u200b\u653e\u5fc3\u200b\u6dfb\u52a0\u200b\u672c\u200b\u7ad9\u53cb\u200b\u94fe\u200b</p> <p>\u200b\u53cb\u94fe\u200b\u683c\u5f0f\u200b\u793a\u4f8b\u200b/\u200b\u672c\u7ad9\u200b\u4fe1\u606f\u200b:</p> TxtHTML(\u200b\u63a8\u8350\u200b)Butterfly\u200b\u901a\u7528\u200b <p>\u200b\u540d\u79f0\u200b: Wcowin's Web \u200b\u94fe\u63a5\u200b: https://wcowin.work/ \u200b\u5934\u50cf\u200b: https://s2.loli.net/2024/02/01/gaE47y5fKM6kosV.png \u200b\u7b80\u4ecb\u200b: \u200b\u5faa\u6b64\u200b\u82e6\u65c5\u200b\uff0c\u200b\u4ee5\u8fbe\u200b\u661f\u8fb0\u200b</p> <p>\u200b\u63a8\u8350\u200b\u5728\u200b\u8bc4\u8bba\u200b\u533a\u200b\u53d1\u9001\u200b\u8fd9\u79cd\u200b\u683c\u5f0f\u200b\uff0c*\u200b\u53f7\u200b\u7684\u200b\u9700\u8981\u200b\u586b\u5199\u200b\u81ea\u5df1\u200b\u7684\u200b\u4fe1\u606f\u200b</p> <pre><code>&lt;div class=\"card\"&gt; \n &lt;img class=\"ava\" src=\"*\u200b\u4f60\u200b\u7684\u200b\u5934\u50cf\u200b\u94fe\u63a5\u200b*\" /&gt; \n &lt;div class=\"card-header\"&gt; \n  &lt;div&gt; \n   &lt;a href=\"*\u200b\u4f60\u200b\u7684\u200b\u7f51\u7ad9\u200b\u5730\u5740\u200b* \" target=\"_blank\"&gt;*\u200b\u4f60\u200b\u7684\u200b\u7ad9\u70b9\u200b\u540d\u79f0\u200b*&lt;/a&gt; \n  &lt;/div&gt; \n  &lt;div class=\"info\"&gt;\n   *\u200b\u4f60\u200b\u7684\u200b\u7ad9\u70b9\u200b\u63cf\u8ff0\u200b*\n  &lt;/div&gt; \n &lt;/div&gt; \n&lt;/div&gt;\n</code></pre> <pre><code>- name: Wcowin's Web\n  link: https://wcowin.work/\n  avatar: https://s2.loli.net/2024/02/01/gaE47y5fKM6kosV.png \n  descr: \u200b\u5faa\u6b64\u200b\u82e6\u65c5\u200b\uff0c\u200b\u4ee5\u8fbe\u200b\u661f\u8fb0\u200b\n</code></pre> <p>\u200b\u70b9\u51fb\u200b\u586b\u5199\u200b\u53cb\u94fe\u200b\u7533\u8bf7\u200b\u95ee\u5377\u200b </p> <p></p>"},{"location":"about/test/","title":"Test","text":"<p>Info</p> <p>\u200b\u6d4b\u8bd5\u200b\u4e2d\u200b\u7684\u200b\u5c0f\u7ec4\u200b\u4ef6\u200b\uff0c\u200b\u53ef\u200b\u770b\u200b\u6e90\u4ee3\u7801\u200b\u81ea\u884c\u200b\u53d6\u7528\u200b</p> <p>\u201c\u200b\u5faa\u6b64\u200b\u82e6\u65c5\u200b \u200b\u4ee5\u8fbe\u200b\u661f\u8fb0\u200b\u201d</p> <ul> <li> <p> \u200b\u5173\u4e8e\u200b</p> <ul> <li>\u200b\u6548\u7387\u200b</li> </ul> </li> </ul> <ul> <li> <p> \u200b\u63a8\u8350\u200b</p> <p> Wcowin - \u200b\u6280\u672f\u200b\u535a\u5ba2\u200b</p> </li> </ul> <ul> <li> <p> Release</p> <p>\u200b\u66f4\u65b0\u200b\u4e2d\u200b...</p> <p>\u2192 \u200b\u6240\u6709\u200b\u7248\u672c\u200b</p> </li> <li> <p> Wcowin</p> <p>\u200b\u66f4\u65b0\u200b\u4e2d\u200b...</p> <p>\u2192 \u200b\u4e86\u89e3\u200b\u66f4\u200b\u591a\u200b</p> </li> </ul> <p> </p> Image caption <p> <p>\\(\\overset{w\u00e1ng}{\u200b\u738b\u200b}\\overset{k\u0113}{\u200b\u79d1\u200b}\\overset{w\u00e9n}{\u200b\u6587\u200b}\\)</p> <ul> <li>H<sub>2</sub>O</li> <li>A<sup>T</sup>A</li> <li>This was marked</li> <li>This was inserted</li> <li>This was deleted</li> </ul> <p></p> <p></p>"},{"location":"about/test/#01","title":"01","text":"<ul> <li> HTML for content and structure</li> <li> JavaScript for interactivity</li> <li> CSS for text running out of boxes</li> <li> Internet Explorer ... huh?</li> </ul> <ul> <li> <p> Set up in 5 minutes</p> <p>Install <code>mkdocs-material</code> with <code>pip</code> and get up and running in minutes</p> <p> Getting started</p> </li> <li> <p> It's just Markdown</p> <p>Focus on your content and generate a responsive and searchable static site</p> <p> Reference</p> </li> <li> <p> Made to measure</p> <p>Change the colors, fonts, language, icons, logo and more with a few lines</p> <p> Customization</p> </li> <li> <p> Open Source, MIT</p> <p>Material for MkDocs is licensed under MIT and available on [GitHub]</p> <p> License</p> </li> </ul> <p>\u200b\u8fd9\u662f\u200b\u6d4b\u8bd5\u200b\u5e76\u4e14\u200b\u88ab\u200b\u63a9\u76d6\u200b\u7684\u200b\u6587\u5b57\u200b\uff01</p> \u200b\u5929\u6c14\u200b\u63d2\u4ef6\u200b CC++ <pre><code>#include &lt;stdio.h&gt;\n\nint main(void) {\n  printf(\"Hello world!\\n\");\n  return 0;\n}\n</code></pre> <pre><code>#include &lt;iostream&gt;\n\nint main(void) {\n  std::cout &lt;&lt; \"Hello world!\" &lt;&lt; std::endl;\n  return 0;\n}\n</code></pre> <pre><code>def bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <p>Note</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Phasellus posuere in sem ut cursus</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> Tip <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Info</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Subscribe to our newsletter</p> <p>Send </p> Method Description <code>GET</code>      Fetch resource <code>PUT</code>  Update resource <code>DELETE</code>      Delete resource <ul> <li> Lorem ipsum dolor sit amet, consectetur adipiscing elit</li> <li> Vestibulum convallis sit amet nisi a tincidunt<ul> <li> In hac habitasse platea dictumst</li> <li> In scelerisque nibh non dolor mollis congue sed et metus</li> <li> Praesent sed risus massa</li> </ul> </li> <li> Aenean pretium efficitur erat, donec pharetra, ligula non scelerisque</li> </ul> \\[ \\operatorname{ker} f=\\{g\\in G:f(g)=e_{H}\\}{\\mbox{.}} \\] <p>\u200b\u5de6\u200b\u5bf9\u9f50\u200b\uff0c\u200b\u53f3\u200b\u5bf9\u9f50\u200b </p> <p> </p> \u200b\u56fe\u7247\u8bf4\u660e\u200b <p>\u200b\u660e\u6697\u200b</p> <p></p> <p></p> <pre><code>graph LR\n  A[Start] --&gt; B{Error?};\n  B --&gt;|Yes| C[Hmm...];\n  C --&gt; D[Debug];\n  D --&gt; B;\n  B ----&gt;|No| E[Yay!];</code></pre> <pre><code>sequenceDiagram\n  Alice-&gt;&gt;John: Hello John, how are you?\n  loop Healthcheck\n      John-&gt;&gt;John: Fight against hypochondria\n  end\n  Note right of John: Rational thoughts!\n  John--&gt;&gt;Alice: Great!\n  John-&gt;&gt;Bob: How about you?\n  Bob--&gt;&gt;John: Jolly good!</code></pre> <p>Pied Piper</p> <p>Lorem ipsum dolor sit amet, consectetur adipiscing elit. Nulla et euismod nulla. Curabitur feugiat, tortor non consequat finibus, justo purus auctor massa, nec semper lorem quam in massa.</p> <p>Ctrl+Alt+Del </p> <p> \u200b\u70b9\u200b\u6211\u200b\u56de\u5230\u200b\u9876\u90e8\u200b </p> <p>Hover me</p> <p>Hover me</p> <p>The HTML specification is maintained by the W3C.</p> <p></p> <p><pre><code>def bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> <pre><code>def bubble_sort(items):\n    for i in range(len(items)):\n        for j in range(len(items) - 1 - i):\n            if items[j] &gt; items[j + 1]:\n                items[j], items[j + 1] = items[j + 1], items[j]\n</code></pre> .browserslistrc<pre><code>Wcowin\n</code></pre></p> <pre>\n  graph LR\n      A --- B\n      B--&gt;C[fa:fa-ban forbidden]\n      B--&gt;D(fa:fa-spinner);\n    </pre> <p>\u200b\u6765\u200b\u770b\u770b\u200b\u4e24\u4e2a\u200b\u91cd\u8981\u200b\u6781\u9650\u200b  </p> \\[\\displaystyle\\lim_{x \\rightarrow 0}\\frac{\\sin x}{x} = 1\\] \\[\\displaystyle\\lim_{x \\rightarrow + \\infty}(1 + \\frac{1}{x})^x = e\\] <p>\u200b\u6309\u94ae\u200b Green</p> \u200b\u6211\u200b\u662f\u200b\u4f1a\u200b\u9690\u85cf\u200b\u7684\u200b\u5143\u7d20\u200b\u3002 \u200b\u5934\u90e8\u200b \u200b\u83dc\u5355\u200b \u200b\u4e3b\u8981\u200b\u5185\u5bb9\u200b\u533a\u57df\u200b \u200b\u53f3\u4fa7\u200b \u200b\u5e95\u90e8\u200b <p> \u200b\u8fd9\u662f\u200b\u4e00\u4e2a\u200b\u7535\u5b50\u90ae\u4ef6\u200b\u94fe\u63a5\u200b\uff1a  \u200b\u53d1\u9001\u200b\u90ae\u4ef6\u200b </p> 100 200 300 400 500 600 000000 000033 000066 000099 0000CC 0000FF 003300 003333 003366 003399 0033CC 0033FF 006600 006633 006666 006699 0066CC 0066FF 009900 009933 009966 009999 0099CC 0099FF 00CC00 00CC33 00CC66 00CC99 00CCCC 00CCFF 00FF00 00FF33 00FF66 00FF99 00FFCC 00FFFF 330000 330033 330066 330099 3300CC 3300FF 333300 333333 333366 333399 3333CC 3333FF 336600 336633 336666 336699 3366CC 3366FF 339900 339933 339966 339999 3399CC 3399FF 33CC00 33CC33 33CC66 33CC99 33CCCC 33CCFF 33FF00 33FF33 33FF66 33FF99 33FFCC 33FFFF 660000 660033 660066 660099 6600CC 6600FF 663300 663333 663366 663399 6633CC 6633FF 666600 666633 666666 666699 6666CC 6666FF 669900 669933 669966 669999 6699CC 6699FF 66CC00 66CC33 66CC66 66CC99 66CCCC 66CCFF 66FF00 66FF33 66FF66 66FF99 66FFCC 66FFFF 990000 990033 990066 990099 9900CC 9900FF 993300 993333 993366 993399 9933CC 9933FF 996600 996633 996666 996699 9966CC 9966FF 999900 999933 999966 999999 9999CC 9999FF 99CC00 99CC33 99CC66 99CC99 99CCCC 99CCFF 99FF00 99FF33 99FF66 99FF99 99FFCC 99FFFF CC0000 CC0033 CC0066 CC0099 CC00CC CC00FF CC3300 CC3333 CC3366 CC3399 CC33CC CC33FF CC6600 CC6633 CC6666 CC6699 CC66CC CC66FF CC9900 CC9933 CC9966 CC9999 CC99CC CC99FF CCCC00 CCCC33 CCCC66 CCCC99 CCCCCC CCCCFF CCFF00 CCFF33 CCFF66 CCFF99 CCFFCC CCFFFF FF0000 FF0033 FF0066 FF0099 FF00CC FF00FF FF3300 FF3333 FF3366 FF3399 FF33CC FF33FF FF6600 FF6633 FF6666 FF6699 FF66CC FF66FF FF9900 FF9933 FF9966 FF9999 FF99CC FF99FF FFCC00 FFCC33 FFCC66 FFCC99 FFCCCC FFCCFF FFFF00 FFFF33 FFFF66 FFFF99 FFFFCC FFFFFF <p></p> <p> </p> <p>      Email me!    </p> <p> </p>"},{"location":"core/csapp/ch1/","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u6f2b\u6e38","text":""},{"location":"core/csapp/ch1/#bits-context","title":"\u4fe1\u606f\u200b\u5c31\u662f\u200b Bits + Context","text":"<p>\u200b\u4e00\u5806\u200b\u4e8c\u8fdb\u5236\u4f4d\u200b\uff08Bits\uff09\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5305\u62ec\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6\u200b\u3001\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u548c\u200b\u7528\u6237\u200b\u6570\u636e\u200b\u4ee5\u53ca\u200b\u7f51\u7edc\u200b\u4e2d\u200b\u4f20\u8f93\u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u552f\u4e00\u200b\u53ef\u4ee5\u200b\u533a\u5206\u200b\u5b83\u4eec\u200b\u7684\u200b\u4fbf\u662f\u200b\u6211\u4eec\u200b\u67e5\u770b\u200b\u8fd9\u4e9b\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u65f6\u6240\u5904\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff08Context\uff09\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u76f8\u540c\u200b\u7684\u200b\u4e00\u4e32\u200b\u4e8c\u8fdb\u5236\u4f4d\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u53ef\u80fd\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u6574\u6570\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u6d6e\u70b9\u6570\u200b\uff0c\u200b\u751a\u81f3\u200b\u5b57\u7b26\u4e32\u200b\u3002</p>"},{"location":"core/csapp/ch1/#_2","title":"\u7a0b\u5e8f\u200b\u7684\u200b\u8f6c\u5316\u200b\u8fc7\u7a0b","text":"<p>\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b<code>hello.c</code>\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n    printf(\"hello world\\n\");\n    return 0;\n}\n</code></pre> <p>\u200b\u9ad8\u7ea7\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u6587\u4ef6\u200b<code>hello.c</code>\u200b\u88ab\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u4e00\u7cfb\u5217\u200b\u4f4e\u7ea7\u200b\u7684\u200b\u673a\u5668\u8bed\u8a00\u200b\u6307\u4ee4\u200b\uff0c\u200b\u6700\u540e\u200b\u4ee5\u200b\u4e8c\u8fdb\u5236\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u5b58\u50a8\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u3002</p> <ul> <li>\u200b\u9884\u5904\u7406\u200b\u9636\u6bb5\u200b\uff08Preprocessor\uff09\uff1a\u200b\u9884\u200b\u5904\u7406\u5668\u200b\u4fee\u6539\u200b C \u200b\u7a0b\u5e8f\u200b\u6587\u4ef6\u200b\u4e2d\u4ee5\u200b<code>#</code>\u200b\u53f7\u200b\u5f00\u5934\u200b\u7684\u200b\u547d\u4ee4\u200b\u3002\u200b\u5982\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b<code>#include &lt;stdio.h&gt;</code>\u200b\u6307\u793a\u200b\u9884\u200b\u5904\u7406\u5668\u200b\u7cfb\u7edf\u200b\u8bfb\u53d6\u200b\u5934\u6587\u4ef6\u200b<code>stdio.h</code>\u200b\u7684\u200b\u5185\u5bb9\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u76f4\u63a5\u63d2\u5165\u200b\u5230\u200b\u7a0b\u5e8f\u200b\u6587\u672c\u200b\u4e2d\u200b\u3002\u200b\u751f\u6210\u200b\u7684\u200b\u65b0\u200b\u7a0b\u5e8f\u200b\u6587\u4ef6\u200b\u4e3a\u200b<code>hello.i</code>\uff1b</li> <li>\u200b\u7f16\u8bd1\u200b\u9636\u6bb5\u200b\uff08Compilation\uff09\uff1a\u200b\u7f16\u8bd1\u5668\u200b\u5c06\u200b<code>hello.i</code>\u200b\u6587\u4ef6\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u7531\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u7ec4\u6210\u200b\u7684\u200b<code>hello.s</code>\u200b\u6587\u4ef6\u200b\u3002\u200b\u6bcf\u6761\u200b\u6c47\u7f16\u200b\u8bed\u53e5\u200b\u90fd\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u4e00\u6761\u200b\u4f4e\u7ea7\u200b\u7684\u200b\u673a\u5668\u8bed\u8a00\u200b\u6307\u4ee4\u200b\uff0c\u200b\u4e0d\u540c\u200b\u9ad8\u7ea7\u200b\u8bed\u8a00\u200b\u7f16\u8bd1\u200b\u540e\u200b\u7684\u200b\u6c47\u7f16\u200b\u8bed\u53e5\u200b\u662f\u200b\u901a\u7528\u200b\u7684\u200b\uff1b</li> <li>\u200b\u6c47\u7f16\u200b\u9636\u6bb5\u200b\uff08Assembly\uff09\uff1a\u200b\u6c47\u7f16\u5668\u200b\u5c06\u200b<code>hello.s</code>\u200b\u6587\u4ef6\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u7531\u200b\u4e8c\u8fdb\u5236\u200b\u673a\u5668\u8bed\u8a00\u200b\u6307\u4ee4\u200b\u7684\u200b<code>hello.o</code>\u200b\u6587\u4ef6\u200b\u3002\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u7528\u200b\u6587\u672c\u7f16\u8f91\u200b\u5668\u200b\u6253\u5f00\u200b\u8be5\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5c06\u4f1a\u200b\u51fa\u73b0\u200b\u4e00\u5806\u200b\u4e71\u7801\u200b\uff1b</li> <li>\u200b\u94fe\u63a5\u200b\u9636\u6bb5\u200b\uff08Linking\uff09\uff1a\u200b\u7531\u4e8e\u200b\u6211\u4eec\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u8c03\u7528\u200b\u4e86\u200b<code>printf</code>\u200b\u51fd\u6570\u200b\uff0c\u200b\u800c\u200b\u5b83\u200b\u5b58\u5728\u200b\u4e8e\u200b\u4e00\u4e2a\u200b\u540d\u4e3a\u200b<code>printf.o</code>\u200b\u7684\u200b\u9884\u200b\u7f16\u8bd1\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u3002\u200b\u94fe\u63a5\u200b\u5668\u200b\u8d1f\u8d23\u200b\u5c06\u200b\u8be5\u200b\u6587\u4ef6\u200b\u5e76\u5165\u200b\uff0c\u200b\u5f97\u5230\u200b\u6700\u7ec8\u200b\u7684\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b<code>hello</code>\u3002</li> </ul> <p></p>"},{"location":"core/csapp/ch1/#_3","title":"\u7cfb\u7edf\u200b\u7684\u200b\u786c\u4ef6\u200b\u7ec4\u6210","text":"<ul> <li>\u200b\u603b\u7ebf\u200b\uff08Buses\uff09\uff1a\u200b\u8d2f\u7a7f\u200b\u6574\u4e2a\u200b\u7cfb\u7edf\u200b\u7684\u200b\u4e00\u7ec4\u200b\u7535\u5b50\u7ba1\u200b\u9053\u200b\uff0c\u200b\u8d1f\u8d23\u200b\u5728\u200b\u5404\u4e2a\u200b\u7ec4\u4ef6\u200b\u4e4b\u95f4\u200b\u4f20\u9012\u200b\u7ed9\u5b9a\u200b\u5927\u5c0f\u200b\u7684\u200b\u5b57\u8282\u200b\u5757\u200b\uff08\u200b\u4e5f\u200b\u79f0\u200b Word\uff09\u3002Word \u200b\u7684\u200b\u5927\u5c0f\u200b\u662f\u200b\u7cfb\u7edf\u200b\u7684\u200b\u57fa\u672c\u53c2\u6570\u200b\uff0c\u200b\u4e00\u822c\u200b\u6709\u200b 4 \u200b\u5b57\u8282\u200b\uff0832 \u200b\u4f4d\u200b\uff09\u200b\u6216\u200b 8 \u200b\u5b57\u8282\u200b\uff0864 \u200b\u4f4d\u200b\uff09\u200b\u4e24\u79cd\u200b\uff1b</li> <li>I/O \u200b\u8bbe\u5907\u200b\uff1a\u200b\u7cfb\u7edf\u200b\u4e0e\u200b\u5916\u90e8\u200b\u4e16\u754c\u200b\u8fde\u63a5\u200b\u7684\u200b\u6865\u6881\u200b\u3002\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b I/O \u200b\u8bbe\u5907\u200b\u5305\u62ec\u200b\u7528\u4e8e\u200b\u7528\u6237\u200b\u8f93\u5165\u200b\u7684\u200b\u952e\u76d8\u200b\u548c\u200b\u9f20\u6807\u200b\u3001\u200b\u7528\u4e8e\u200b\u5c55\u793a\u200b\u7684\u200b\u7528\u6237\u200b\u8f93\u51fa\u200b\u4ee5\u53ca\u200b\u7528\u4e8e\u200b\u957f\u671f\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\u548c\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u78c1\u76d8\u200b\u9a71\u52a8\u200b\uff0c\u200b\u6bcf\u4e2a\u200b I/O \u200b\u8bbe\u5907\u200b\u90fd\u200b\u901a\u8fc7\u200b\u63a7\u5236\u5668\u200b\uff08Controller\uff09\u200b\u6216\u200b\u9002\u914d\u5668\u200b\uff08Adapter\uff09\u200b\u4e0e\u200b I/O \u200b\u603b\u7ebf\u200b\u76f8\u8fde\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0c\u200b\u63a7\u5236\u5668\u200b\u662f\u200b\u8bbe\u5907\u200b\u81ea\u8eab\u200b\u6216\u200b\u7cfb\u7edf\u200b\u4e3b\u677f\u200b\uff08Motherboard\uff09\u200b\u4e0a\u200b\u7684\u200b\u82af\u7247\u7ec4\u200b\uff0c\u200b\u800c\u200b\u9002\u914d\u5668\u200b\u5219\u200b\u662f\u200b\u63d2\u200b\u5728\u200b\u4e3b\u677f\u200b\u63d2\u69fd\u200b\u4e0a\u200b\u7684\u200b\u5361\u200b\uff1b</li> <li>\u200b\u4e3b\u5b58\u50a8\u5668\u200b\uff08Main Memory\uff09\uff1a\u200b\u5904\u7406\u5668\u200b\u6267\u884c\u7a0b\u5e8f\u200b\u65f6\u200b\u5b58\u653e\u7a0b\u5e8f\u200b\u548c\u200b\u6570\u636e\u200b\u7684\u200b\u4e34\u65f6\u200b\u5b58\u50a8\u200b\uff0c\u200b\u7b80\u79f0\u200b\u4e3b\u5b58\u200b\u3002\u200b\u4ece\u200b\u7269\u7406\u200b\u4e0a\u200b\u6765\u8bf4\u200b\uff0c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u662f\u200b\u7531\u200b \u200b\u52a8\u6001\u200b\u968f\u673a\u5b58\u53d6\u200b\u5b58\u50a8\u5668\u200b\uff08Dynamic Random Access Memory\uff0cDRAM\uff09\u200b\u82af\u7247\u200b\u7ec4\u6210\u200b\u7684\u200b\u96c6\u5408\u200b\u3002\u200b\u800c\u200b\u5b83\u200b\u5728\u200b\u903b\u8f91\u200b\u4e0a\u200b\u5219\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7ebf\u6027\u200b\u7684\u200b\u5b57\u8282\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5b57\u8282\u200b\u90fd\u200b\u6709\u200b\u5176\u200b\u552f\u4e00\u200b\u5730\u5740\u200b\uff1b</li> <li>CPU\uff08Central Processing Unit \uff09: \u200b\u89e3\u91ca\u200b\u6216\u200b\u6267\u884c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u6307\u4ee4\u200b\u7684\u200b\u5f15\u64ce\u200b\u3002</li> <li>PC\uff1aCPU \u200b\u7684\u200b\u6838\u5fc3\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u4e0e\u200b Word \u200b\u76f8\u540c\u200b\u7684\u200b\u5b58\u50a8\u8bbe\u5907\u200b\uff08\u200b\u6216\u200b\u5bc4\u5b58\u5668\u200b\uff09\uff0c\u200b\u5b83\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08Program Counter\uff0cPC\uff09\u3002PC \u200b\u59cb\u7ec8\u200b\u6307\u5411\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u67d0\u6761\u200b\u673a\u5668\u8bed\u8a00\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5373\u200b\u5185\u542b\u200b\u5176\u200b\u5730\u5740\u200b\u3002CPU \u200b\u4f1a\u200b\u4e0d\u65ad\u200b\u5730\u200b\u91cd\u590d\u200b\u6267\u884c\u200b PC \u200b\u6307\u5411\u200b\u7684\u200b\u673a\u5668\u6307\u4ee4\u200b\uff0c\u200b\u5e76\u200b\u66f4\u65b0\u200b PC \u200b\u4f7f\u200b\u5176\u200b\u6307\u5411\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\uff1b</li> <li>Register File\uff1a\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7531\u200b\u4e00\u7ec4\u200b\u4ee5\u200b Word \u200b\u4e3a\u200b\u5927\u5c0f\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u7ec4\u6210\u200b\u7684\u200b\u5c0f\u578b\u200b\u5b58\u50a8\u8bbe\u5907\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u90fd\u200b\u6709\u200b\u5176\u200b\u552f\u4e00\u200b\u540d\u79f0\u200b\uff1b</li> <li>ALU\uff1a \u200b\u7b97\u672f\u200b/\u200b\u903b\u8f91\u200b\u5355\u5143\u200b\uff08Arithmetic/Logic Unit\uff09\uff0c\u200b\u80fd\u591f\u200b\u8ba1\u7b97\u200b\u65b0\u200b\u7684\u200b\u6570\u636e\u200b\u548c\u200b\u5730\u5740\u200b\u503c\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch1/#_4","title":"\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u8fc7\u7a0b","text":"<p>\u200b\u4ece\u200b\u952e\u76d8\u200b\u4e0a\u200b\u8bfb\u53d6\u200b\u547d\u4ee4\u200b\uff1a\u200b\u5f53\u200b\u6211\u4eec\u200b\u5728\u200b\u7ec8\u7aef\u200b\u4e2d\u200b\u8f93\u5165\u200b\u547d\u4ee4\u200b<code>./hello</code>\u200b\u540e\u200b\uff0cBash \u200b\u7a0b\u5e8f\u200b\u5c06\u200b\u9010\u4e00\u200b\u8bfb\u53d6\u200b\u547d\u4ee4\u200b\u5b57\u7b26\u4e32\u200b\u5230\u200b\u5bc4\u5b58\u5668\u200b\uff08Register\uff09\uff0c\u200b\u7136\u540e\u200b\u5b58\u50a8\u200b\u4e8e\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\uff1b</p> <p></p> <p>\u200b\u4ece\u200b\u78c1\u76d8\u200b\u52a0\u8f7d\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u5230\u200b\u4e3b\u5b58\u200b\uff1a\u200b\u5f53\u200b\u6211\u4eec\u200b\u8f93\u5165\u200b\u56de\u8f66\u952e\u200b\u540e\u200b\uff0cBash \u200b\u7a0b\u5e8f\u200b\u5f97\u77e5\u200b\u8f93\u5165\u200b\u7ed3\u675f\u200b\uff0c\u200b\u4e8e\u662f\u200b\u5f00\u59cb\u200b\u52a0\u8f7d\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b<code>hello</code>\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u5c06\u200b\u901a\u8fc7\u200b \u200b\u76f4\u63a5\u200b\u5b58\u50a8\u5668\u200b\u8bbf\u95ee\u200b\u6280\u672f\u200b\uff08DMA, Direct Memory Access\uff09\u200b\u4ece\u200b\u78c1\u76d8\u200b\u62f7\u8d1d\u5230\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\uff1b</p> <p></p> <p>\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u4e2d\u5c06\u200b\u7ed3\u679c\u200b\u8f93\u51fa\u200b\u5230\u200b\u663e\u793a\u5668\u200b\uff1a\u200b\u5904\u7406\u5668\u200b\u6267\u884c\u200b<code>hello</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u673a\u5668\u8bed\u8a00\u200b\u6307\u4ee4\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b<code>hello world\\n</code>\u200b\u5b57\u7b26\u4e32\u200b\u4e2d\u200b\u7684\u200b\u5b57\u8282\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u6700\u7ec8\u200b\u4f20\u8f93\u200b\u5230\u200b\u7528\u4e8e\u200b\u5c55\u793a\u200b\u7684\u200b\u5c4f\u5e55\u200b\u4e0a\u200b\u3002</p> <p></p>"},{"location":"core/csapp/ch1/#_5","title":"\u9ad8\u901f\u200b\u7f13\u51b2\u200b\u5b58\u50a8","text":"<p>\u200b\u5728\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u82b1\u8d39\u200b\u4e86\u200b\u5927\u91cf\u200b\u65f6\u95f4\u200b\u5c06\u200b\u4fe1\u606f\u200b\u4ece\u200b\u4e00\u4e2a\u200b\u5730\u65b9\u200b\u62f7\u8d1d\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u5730\u65b9\u200b\uff0cCPU \u200b\u4ece\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u8bfb\u53d6\u6570\u636e\u200b\u8981\u200b\u6bd4\u200b\u4ece\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u5feb\u8fd1\u200b\u767e\u500d\u200b\u3002\u200b\u56e0\u6b64\u200b\u7cfb\u7edf\u200b\u8bbe\u8ba1\u8005\u200b\u5f15\u5165\u200b\u4e86\u200b\u4e00\u79cd\u200b\u66f4\u200b\u5c0f\u200b\u3001\u200b\u66f4\u5feb\u200b\u7684\u200b\u5b58\u50a8\u8bbe\u5907\u200b\uff0c\u200b\u5373\u200b\u9ad8\u901f\u200b\u7f13\u51b2\u200b\u5b58\u50a8\u200b\uff08Cache Memories \u200b\u6216\u200b Caches\uff09\uff0c\u200b\u5b83\u4f1a\u200b\u6682\u5b58\u200b CPU \u200b\u5728\u77ed\u671f\u5185\u200b\u9700\u8981\u200b\u7528\u5230\u200b\u7684\u200b\u6570\u636e\u200b\u3002</p> <p></p> <p>L1 \u200b\u7ea7\u522b\u200b\u7684\u200b Caches \u200b\u4f4d\u4e8e\u200b CPU \u200b\u82af\u7247\u200b\u4e4b\u4e0a\u200b\uff0c\u200b\u5bb9\u91cf\u200b\u4e3a\u200b\u4e0a\u4e07\u200b\u5b57\u8282\u200b\u5e76\u4e14\u200b\u62e5\u6709\u200b\u548c\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u76f8\u5f53\u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u3002\u200b\u800c\u200b L2 \u200b\u7ea7\u522b\u200b\u7684\u200b Caches \u200b\u5219\u200b\u901a\u8fc7\u200b\u4e00\u6761\u200b\u7279\u6b8a\u200b\u603b\u7ebf\u200b\u8fde\u63a5\u200b\u5230\u200b CPU\uff0c\u200b\u5bb9\u91cf\u200b\u53ef\u200b\u8fbe\u200b\u5341\u4e07\u200b\u5230\u200b\u767e\u4e07\u200b\u5b57\u8282\u200b\u3002\u200b\u867d\u7136\u200b\u5176\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u6bd4\u200b L1 Cache \u200b\u6162\u200b\u4e94\u500d\u200b\u5de6\u53f3\u200b\uff0c\u200b\u4f46\u200b\u4f9d\u7136\u200b\u6bd4\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u8981\u200b\u5feb\u200b\u4e94\u5230\u200b\u5341\u500d\u200b\u3002\u200b\u5728\u200b\u67d0\u4e9b\u200b\u5148\u8fdb\u200b\u7684\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u4f7f\u7528\u200b L3 \u200b\u7ea7\u522b\u200b\u7684\u200b Cache\uff0c\u200b\u5b83\u4eec\u200b\u5747\u200b\u662f\u200b\u901a\u8fc7\u200b \u200b\u9759\u6001\u200b\u968f\u673a\u5b58\u53d6\u200b\u5b58\u50a8\u5668\u200b\uff08SRAM, Static Random Access Memory\uff09\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002</p> <p>\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u5b58\u50a8\u5668\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4f4e\u5c42\u6b21\u200b\u7684\u200b\u5b58\u50a8\u8bbe\u5907\u200b\u4f5c\u4e3a\u200b\u76f8\u90bb\u200b\u9ad8\u5c42\u6b21\u200b\u8bbe\u5907\u200b\u7684\u200b\u7f13\u5b58\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch1/#_6","title":"\u64cd\u4f5c\u7cfb\u7edf\u200b\u5bf9\u200b\u786c\u4ef6\u200b\u7684\u200b\u7ba1\u7406","text":"<p>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u662f\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u548c\u200b\u786c\u4ef6\u200b\u7684\u200b\u4e2d\u95f4\u5c42\u200b\uff0c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5bf9\u200b\u786c\u4ef6\u200b\u7684\u200b\u6240\u6709\u200b\u64cd\u4f5c\u200b\u5fc5\u987b\u200b\u901a\u8fc7\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5b9e\u73b0\u200b\u3002</p> <p></p> <p>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u6709\u200b\u4e24\u4e2a\u200b\u4e3b\u8981\u200b\u529f\u80fd\u200b\uff1a\u200b\u9632\u6b62\u200b\u786c\u4ef6\u200b\u88ab\u200b\u5931\u63a7\u200b\u7684\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u6240\u200b\u6ee5\u7528\u200b\uff1b\u200b\u4e3a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u4e00\u79cd\u200b\u7b80\u5355\u200b\u800c\u200b\u7edf\u4e00\u200b\u7684\u200b\u673a\u5236\u200b\u6765\u200b\u5904\u7406\u200b\u590d\u6742\u200b\u4e14\u200b\u901a\u5e38\u200b\u5dee\u5f02\u200b\u5f88\u5927\u200b\u7684\u200b\u4f4e\u7ea7\u200b\u786c\u4ef6\u200b\u8bbe\u5907\u200b\u3002\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u529f\u80fd\u200b\u662f\u200b\u901a\u8fc7\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u51e0\u4e2a\u200b\u57fa\u672c\u200b\u62bd\u8c61\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff1a</p> <p></p> <p>\u200b\u6587\u4ef6\u200b\uff08Files\uff09\u200b\u662f\u200b\u5bf9\u200b I/O \u200b\u8bbe\u5907\u200b\u7684\u200b\u62bd\u8c61\u200b\uff0c\u200b\u865a\u62df\u5185\u5b58\u200b (Virtual Memory) \u200b\u662f\u200b\u5bf9\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u548c\u200b I/O \u200b\u8bbe\u5907\u200b\u7684\u200b\u62bd\u8c61\u200b\uff0c\u200b\u800c\u200b\u8fdb\u7a0b\u200b\uff08Processes\uff09\u200b\u5219\u200b\u662f\u200b\u5bf9\u200b\u5904\u7406\u5668\u200b\uff0c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u548c\u200b I/O \u200b\u8bbe\u5907\u200b\u7684\u200b\u62bd\u8c61\u200b\u3002</p>"},{"location":"core/csapp/ch1/#_7","title":"\u8fdb\u7a0b","text":"<p>\u200b\u8fdb\u7a0b\u200b\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5bf9\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u62bd\u8c61\u200b\uff0c\u200b\u5b83\u200b\u8ba9\u200b\u6211\u4eec\u200b\u7684\u200b<code>hello</code>\u200b\u7a0b\u5e8f\u200b\u770b\u8d77\u6765\u200b\u50cf\u662f\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u552f\u4e00\u200b\u8fd0\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u3002\u200b\u591a\u4e2a\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u5e76\u53d1\u200b\u5730\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u8fd0\u884c\u200b\uff0c\u200b\u540c\u65f6\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u597d\u50cf\u200b\u5728\u200b\u72ec\u5360\u200b\u786c\u4ef6\u200b\u7684\u200b\u4f7f\u7528\u6743\u200b\u3002\u200b\u800c\u200b\u5b9e\u9645\u4e0a\u200b\u4e0d\u540c\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u662f\u200b\u4ea4\u9519\u200b\u6267\u884c\u200b\u7684\u200b\uff0c\u200b\u57fa\u4e8e\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\uff1a</p> <p></p> <p>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4f1a\u200b\u8ddf\u8e2a\u200b\u8fdb\u7a0b\u200b\u8fd0\u884c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u6240\u6709\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5373\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u5b83\u200b\u5305\u62ec\u200b\u4e86\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b PC \u200b\u7684\u200b\u5f53\u524d\u200b\u503c\u200b\uff0c\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u548c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u7684\u200b\u5185\u5bb9\u200b\u4e4b\u7c7b\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002 \u200b\u5728\u200b\u4efb\u4f55\u200b\u65f6\u95f4\u200b\u70b9\u200b\uff0c\u200b\u5355\u200b\u5904\u7406\u5668\u200b\u7cfb\u7edf\u200b\u53ea\u80fd\u200b\u4e3a\u200b\u5355\u4e2a\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u3002 \u200b\u5f53\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u51b3\u5b9a\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u4ece\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u8f6c\u79fb\u200b\u5230\u200b\u67d0\u4e2a\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u9700\u8981\u200b\u9996\u5148\u200b\u4fdd\u5b58\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u7136\u540e\u200b\u8fd8\u539f\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u6700\u540e\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u4f20\u9012\u200b\u7ed9\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u4ee5\u200b\u5b8c\u6210\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u3002</p> <p>\u200b\u8fdb\u7a0b\u200b\u95f4\u200b\u7684\u200b\u8f6c\u6362\u200b\u662f\u200b\u7531\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5185\u6838\u200b\uff08Kernel\uff09\u200b\u7ba1\u7406\u200b\u7684\u200b\u3002\u200b\u5185\u6838\u200b\u5e76\u200b\u4e0d\u662f\u200b\u4e00\u4e2a\u200b\u5355\u72ec\u200b\u7684\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u800c\u662f\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4ee3\u7801\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u59cb\u7ec8\u200b\u5b58\u5728\u200b\u4e8e\u200b\u5185\u5b58\u200b\u4e2d\u200b\u3002\u200b\u5f53\u200b\u4e00\u4e2a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5b8c\u6210\u200b\u4e00\u4e9b\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u6bd4\u5982\u200b\u8bfb\u5199\u200b\u6587\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u4fbf\u200b\u4f1a\u200b\u6267\u884c\u200b\u4e00\u4e2a\u200b\u7279\u6b8a\u200b\u7684\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u6307\u4ee4\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u79fb\u4ea4\u200b\u7ed9\u200b\u5185\u6838\u200b\u3002\u200b\u5185\u6838\u200b\u8d1f\u8d23\u200b\u5b9e\u73b0\u200b\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u7ed3\u679c\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"core/csapp/ch1/#_8","title":"\u7ebf\u7a0b","text":"<p>\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u7531\u200b\u591a\u4e2a\u200b\u6267\u884c\u200b\u5355\u5143\u200b\uff08\u200b\u7ebf\u7a0b\u200b\uff09\u200b\u7ec4\u6210\u200b\u3002\u200b\u7531\u4e8e\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u8fd0\u884c\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\uff0c\u200b\u4e14\u200b\u4e0d\u540c\u200b\u7ebf\u7a0b\u200b\u4e4b\u95f4\u200b\u53ef\u4ee5\u200b\u5171\u4eab\u200b\u8fdb\u7a0b\u200b\u5185\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u5168\u5c40\u200b\u6570\u636e\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7ebf\u7a0b\u200b\u8981\u200b\u6bd4\u200b\u8fdb\u7a0b\u200b\u66f4\u52a0\u200b\u9ad8\u6548\u200b\u3002</p>"},{"location":"core/csapp/ch1/#_9","title":"\u865a\u62df\u5185\u5b58","text":"<p>\u200b\u865a\u62df\u5185\u5b58\u200b\u8ba9\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u770b\u4f3c\u200b\u72ec\u5360\u200b\u4e86\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u7684\u200b\u4f7f\u7528\u6743\u200b\u3002\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u7ed3\u6784\u200b\u5747\u200b\u76f8\u540c\u200b\uff0c\u200b\u5b83\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff08Virtual Address Space\uff09\uff0c\u200b\u5176\u200b\u7ec4\u6210\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <ul> <li>\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\uff1a\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4ee3\u7801\u200b\u90fd\u200b\u59cb\u4e8e\u200b\u76f8\u540c\u200b\u7684\u200b\u56fa\u5b9a\u200b\u5730\u5740\u200b\uff0c\u200b\u968f\u540e\u200b\u5219\u200b\u662f\u200b\u4e0e\u200b\u5168\u5c40\u53d8\u91cf\u200b\u76f8\u5173\u200b\u7684\u200b\u6570\u636e\u200b\u533a\u200b\u3002\u200b\u5b83\u4eec\u200b\u7684\u200b\u5927\u5c0f\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u5f00\u59cb\u8fd0\u884c\u200b\u65f6\u200b\u56fa\u5b9a\u200b\uff1b</li> <li>\u200b\u5806\u200b\uff08Heap\uff09\uff1a\u200b\u8c03\u7528\u200b <code>malloc</code>\u200b\u6216\u200b<code>free</code> \u200b\u8fd9\u6837\u200b\u7684\u200b C \u200b\u6807\u51c6\u200b\u5e93\u51fd\u6570\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u5176\u200b\u5927\u5c0f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u65f6\u200b\u52a8\u6001\u200b\u6269\u7f29\u5bb9\u200b\uff1b</li> <li>\u200b\u5171\u4eab\u200b\u5e93\u200b\uff08Share Libraries\uff09\uff1a\u200b\u5b58\u653e\u200b\u5982\u200b C \u200b\u6807\u51c6\u200b\u5e93\u200b\u3001\u200b\u6570\u5b66\u200b\u5e93\u200b\u8fd9\u6837\u200b\u7684\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u7684\u200b\u533a\u57df\u200b\uff1b</li> <li>\u200b\u6808\u200b\uff08Stack\uff09\uff1a\u200b\u7f16\u8bd1\u5668\u200b\u5b9e\u73b0\u200b\u51fd\u6570\u8c03\u7528\u200b\u7684\u200b\u533a\u57df\u200b\uff0c\u200b\u5176\u200b\u5927\u5c0f\u200b\u540c\u6837\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u52a8\u6001\u200b\u6269\u7f29\u5bb9\u200b\u3002\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u8c03\u7528\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u6808\u200b\u5c31\u200b\u4f1a\u200b\u589e\u957f\u200b\u3002\u200b\u800c\u200b\u6bcf\u5f53\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u6808\u200b\u4fbf\u200b\u4f1a\u200b\u7f29\u5c0f\u200b\uff1b</li> <li>\u200b\u5185\u6838\u200b\u865a\u62df\u5185\u5b58\u200b\uff1a\u200b\u4e3a\u200b\u5185\u6838\u200b\u9884\u7559\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch1/#_10","title":"\u6587\u4ef6","text":"<p>\u200b\u6587\u4ef6\u200b\u662f\u200b\u7531\u200b\u5b57\u8282\u200b\u7ec4\u6210\u200b\u7684\u200b\u5e8f\u5217\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6240\u6709\u200b\u7684\u200b I/O \u200b\u8bbe\u5907\u200b\uff08\u200b\u5305\u62ec\u200b\u7f51\u7edc\u200b\uff09\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u770b\u4f5c\u200b\u6587\u4ef6\u200b\u3002\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b Unix I/O\uff08\u200b\u4e00\u7ec4\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff09\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u200b\u6765\u200b\u5b9e\u73b0\u200b\u3002</p>"},{"location":"core/csapp/ch1/#_11","title":"\u591a\u5904\u7406\u5668\u200b\u7cfb\u7edf","text":"<p>\u200b\u7531\u200b\u5355\u4e00\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5185\u6838\u200b\u63a7\u5236\u200b\u7684\u200b\u591a\u4e2a\u200b\u5904\u7406\u5668\u200b\u53ef\u4ee5\u200b\u5171\u540c\u200b\u7ec4\u6210\u200b\u4e00\u4e2a\u200b\u591a\u5904\u7406\u5668\u200b\u7cfb\u7edf\u200b\uff08Multiprocessor System\uff09\uff0c\u200b\u5b83\u200b\u57fa\u4e8e\u200b\u591a\u6838\u200b\uff08Multi-core\uff09\u200b\u5904\u7406\u5668\u200b\u4ee5\u53ca\u200b\u8d85\u7ebf\u7a0b\u200b\u6280\u672f\u200b\uff08Hyperthreading\uff09\u3002</p>"},{"location":"core/csapp/ch1/#_12","title":"\u591a\u6838\u200b\u5904\u7406\u5668","text":"<p>\u200b\u591a\u6838\u200b\u5904\u7406\u5668\u200b\u5c06\u200b\u591a\u4e2a\u200b CPU \u200b\u96c6\u6210\u200b\u5230\u200b\u5355\u4e2a\u200b\u96c6\u6210\u7535\u8def\u200b\u82af\u7247\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b CPU \u200b\u90fd\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u4e00\u4e2a\u200b\u6838\u200b\uff08Cores\uff09\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5178\u578b\u200b\u7684\u200b\u591a\u200b\u6838\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u67b6\u6784\u200b\u3002\u200b\u5176\u4e2d\u200b L1 \u200b\u7ea7\u522b\u200b\u7684\u200b Cache \u200b\u88ab\u200b\u5206\u6210\u200b\u4e86\u200b\u4e24\u200b\u90e8\u5206\u200b\uff0c\u200b\u5206\u522b\u200b\u5b58\u50a8\u200b\u77ed\u671f\u5185\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u7684\u200b\u6307\u4ee4\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201ci-cache\u201d\uff09\u200b\u548c\u200b\u6570\u636e\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201cd-cache\u201d\uff09\uff1a</p> <p></p>"},{"location":"core/csapp/ch1/#_13","title":"\u8d85\u7ebf\u7a0b\u200b\u6280\u672f","text":"<p>\u200b\u8d85\u7ebf\u7a0b\u200b\u6280\u672f\u200b\u5141\u8bb8\u200b\u5355\u4e2a\u200b CPU \u200b\u6267\u884c\u200b\u591a\u4e2a\u200b\u63a7\u5236\u6d41\u200b\uff0c\u200b\u6709\u65f6\u200b\u4e5f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u540c\u6b65\u200b\u591a\u7ebf\u7a0b\u200b\uff08Simultaneous Multi-threading\uff09\u3002\u200b\u901a\u8fc7\u200b\u5bf9\u200b CPU \u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u3001\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\u7b49\u200b\u786c\u4ef6\u8d44\u6e90\u200b\u8fdb\u884c\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u7269\u7406\u200b CPU \u200b\u865a\u62df\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u903b\u8f91\u200b CPU\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u884c\u8ba1\u7b97\u200b\u3002\u200b\u5e38\u89c4\u200b\u7684\u200b CPU \u200b\u9700\u8981\u200b\u5927\u7ea6\u200b\u4e24\u4e07\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\uff08Clock Cycle\uff09\u200b\u5b8c\u6210\u200b\u4e0d\u540c\u200b\u7ebf\u7a0b\u200b\u95f4\u200b\u7684\u200b\u5207\u6362\u200b\uff0c\u200b\u800c\u200b\u8d85\u7ebf\u7a0b\u200b\u7684\u200b CPU \u200b\u53ef\u4ee5\u200b\u5728\u200b\u5355\u4e2a\u200b\u65f6\u949f\u200b\u5468\u671f\u200b\u5185\u200b\u51b3\u5b9a\u200b\u8981\u200b\u6267\u884c\u200b\u54ea\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\uff0c\u200b\u8fd9\u200b\u4f7f\u5f97\u200b CPU \u200b\u80fd\u591f\u200b\u66f4\u597d\u200b\u5730\u200b\u5229\u7528\u200b\u5b83\u200b\u7684\u200b\u6267\u884c\u200b\u8d44\u6e90\u200b\u3002\u200b\u6bd4\u5982\u200b\u4e00\u4e2a\u200b\u903b\u8f91\u200b CPU \u200b\u6267\u884c\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u9700\u8981\u200b\u7b49\u5f85\u200b\u6570\u636e\u200b\u52a0\u8f7d\u200b\u5230\u200b Cache \u200b\u4e2d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u903b\u8f91\u200b CPU \u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5411\u200b\u5176\u200b\u501f\u7528\u200b\u6267\u884c\u200b\u8d44\u6e90\u200b\u7ee7\u7eed\u6267\u884c\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u3002</p> <p>\u200b\u4e0e\u200b\u4f7f\u7528\u200b\u591a\u4e2a\u200b\u7269\u7406\u200b CPU \u200b\u7684\u200b\u4f20\u7edf\u200b\u591a\u5904\u7406\u5668\u200b\u7cfb\u7edf\u200b\u4e0d\u540c\u200b\uff0c\u200b\u8d85\u7ebf\u7a0b\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u903b\u8f91\u200b CPU \u200b\u5171\u4eab\u200b\u6267\u884c\u200b\u8d44\u6e90\u200b\u3002\u200b\u56e0\u6b64\u200b\u5f53\u200b\u4e24\u4e2a\u200b\u7ebf\u7a0b\u200b\u540c\u65f6\u200b\u9700\u8981\u200b\u67d0\u4e2a\u200b\u6267\u884c\u200b\u8d44\u6e90\u200b\u65f6\u200b\uff0c\u200b\u5176\u4e2d\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u5fc5\u987b\u200b\u8ba9\u51fa\u200b\u8d44\u6e90\u200b\u6682\u65f6\u200b\u6302\u200b\u8d77\u200b\uff0c\u200b\u76f4\u5230\u200b\u8fd9\u4e9b\u200b\u8d44\u6e90\u200b\u7a7a\u95f2\u200b\u540e\u200b\u624d\u80fd\u200b\u7ee7\u7eed\u6267\u884c\u200b\u3002</p>"},{"location":"core/csapp/ch10/","title":"\u7cfb\u7edf\u200b\u7ea7\u200bI/O","text":"<p>\u200b\u8f93\u5165\u200b/\u200b\u8f93\u51fa\u200b (I/O) \u200b\u662f\u200b\u5728\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u548c\u200b\u5916\u90e8\u8bbe\u5907\u200b\uff08\u200b\u5982\u200b\u78c1\u76d8\u200b\u9a71\u52a8\u200b\u3001\u200b\u7ec8\u7aef\u200b\u548c\u200b\u7f51\u7edc\u200b\u7b49\u200b\uff09\u200b\u4e4b\u95f4\u200b\u590d\u5236\u200b\u6570\u636e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u3002\u200b\u8f93\u5165\u200b\u64cd\u4f5c\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b I/O \u200b\u8bbe\u5907\u200b\u590d\u5236\u5230\u200b\u4e3b\u5b58\u200b\uff0c\u200b\u8f93\u51fa\u200b\u64cd\u4f5c\u200b\u5219\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u590d\u5236\u5230\u200b\u8bbe\u5907\u200b\u3002</p>"},{"location":"core/csapp/ch10/#unix-io","title":"Unix I/O","text":"<p>Linux \u200b\u6587\u4ef6\u200b\u662f\u200b\u7531\u200b m \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7ec4\u6210\u200b\u7684\u200b\u5e8f\u5217\u200b\uff1a</p> \\[B_0, B_1, ..., B_k, ..., B_{m-1}\\] <p>\u200b\u6240\u6709\u200b\u7684\u200b I/O \u200b\u8bbe\u5907\u200b\u5747\u200b\u88ab\u200b\u5efa\u6a21\u200b\u4e3a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\u662f\u200b\u901a\u8fc7\u200b\u8bfb\u5199\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6587\u4ef6\u200b\u6765\u200b\u5b8c\u6210\u200b\u7684\u200b\u3002Linux \u200b\u5185\u6838\u200b\u57fa\u4e8e\u200b\u8fd9\u79cd\u200b\u8bbe\u5907\u200b\u4e0e\u200b\u6587\u4ef6\u200b\u4e4b\u95f4\u200b\u7684\u200b\u4f18\u96c5\u200b\u6620\u5c04\u200b\u4e3a\u200b\u6211\u4eec\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u800c\u200b\u4f4e\u7ea7\u200b\u7684\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u63a5\u53e3\u200b\uff0c\u200b\u5373\u200b Unix I/O\uff0c\u200b\u5b83\u200b\u4f7f\u5f97\u200b\u6240\u6709\u200b\u7684\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\u90fd\u200b\u80fd\u200b\u4ee5\u200b\u4e00\u81f4\u200b\u7684\u200b\u65b9\u5f0f\u200b\u6267\u884c\u200b\uff1a</p> <ul> <li>\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\uff1a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u901a\u8fc7\u200b\u5411\u200b\u5185\u6838\u200b\u53d1\u8d77\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8bf7\u6c42\u200b\u4ee5\u200b\u8bbf\u95ee\u200b I/O \u200b\u8bbe\u5907\u200b\u3002\u200b\u5185\u6838\u200b\u5c06\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u5c0f\u200b\u7684\u200b\u975e\u8d1f\u200b\u6574\u6570\u200b\uff0c\u200b\u5373\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff08File Descriptor\uff09\uff0c\u200b\u5b83\u200b\u5c06\u200b\u5728\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u7684\u200b\u540e\u7eed\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\u6807\u8bc6\u200b\u8be5\u200b\u6587\u4ef6\u200b\u3002\u200b\u5185\u6838\u200b\u8ddf\u8e2a\u200b\u4e0e\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u76f8\u5173\u200b\u7684\u200b\u6240\u6709\u200b\u4fe1\u606f\u200b\uff0c\u200b\u800c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5219\u200b\u53ea\u200b\u8ddf\u8e2a\u200b\u63cf\u8ff0\u7b26\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u7531\u200b Linux Shell \u200b\u521b\u5efa\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u4f1a\u200b\u6253\u5f00\u200b\u4e09\u4e2a\u200b\u6587\u4ef6\u200b\uff1a\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\uff08<code>STDIN_ FILENO</code>\uff0c\u200b\u63cf\u8ff0\u7b26\u200b 0\uff09\u3001\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\uff08<code>STDOUT_FILENO</code>\uff0c\u200b\u63cf\u8ff0\u7b26\u200b 1\uff09\u200b\u548c\u200b\u6807\u51c6\u200b\u9519\u8bef\u200b\uff08<code>STDERR_FILENO</code>\uff0c\u200b\u63cf\u8ff0\u7b26\u200b 2\uff09\uff1b</li> <li>\u200b\u6539\u53d8\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\uff1a\u200b\u5185\u6838\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u6253\u5f00\u200b\u6587\u4ef6\u7ef4\u62a4\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\uff08File Position\uff09k\uff0c\u200b\u521d\u59cb\u503c\u200b\u4e3a\u200b 0\u3002\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u662f\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u5373\u5c06\u200b\u88ab\u200b\u8bfb\u53d6\u200b\u6216\u200b\u5199\u5165\u200b\u7684\u200b\u5b57\u7b26\u200b\u5230\u200b\u6587\u4ef6\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u5b57\u8282\u200b\u504f\u79fb\u91cf\u200b\uff0c\u200b\u5e76\u975e\u200b\u6307\u8be5\u200b\u6587\u4ef6\u200b\u5728\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u6267\u884c\u200b Seek \u200b\u64cd\u4f5c\u200b\u6765\u200b\u663e\u5f0f\u200b\u5730\u200b\u8bbe\u7f6e\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b k\uff1b</li> <li>\u200b\u8bfb\u5199\u200b\u6587\u4ef6\u200b\uff1a\u200b\u8bfb\u53d6\u200b\u64cd\u4f5c\u200b\u4ece\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b k \u200b\u5f00\u59cb\u200b\uff0c\u200b\u590d\u5236\u200b n \u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u968f\u540e\u200b\u4ee4\u200b k \u200b\u589e\u52a0\u200b n\u3002\u200b\u5f53\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u5927\u4e8e\u200b\u6216\u200b\u7b49\u4e8e\u200b\u6587\u4ef6\u5927\u5c0f\u200b\u65f6\u200b\uff0c\u200b\u8bfb\u53d6\u200b\u64cd\u4f5c\u200b\u4f1a\u200b\u89e6\u53d1\u200b EOF\uff08End-of-File\uff09\u3002\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u4ece\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b k \u200b\u5f00\u59cb\u200b\uff0c\u200b\u590d\u5236\u200b n \u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5e76\u200b\u66f4\u65b0\u200b k \u200b\u7684\u200b\u503c\u200b\uff1b</li> <li>\u200b\u5173\u95ed\u200b\u6587\u4ef6\u200b\uff1a\u200b\u5f53\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7ed3\u675f\u200b\u5bf9\u200b\u6587\u4ef6\u200b\u7684\u200b\u8bbf\u95ee\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5411\u200b\u5185\u6838\u200b\u53d1\u8d77\u200b\u5173\u95ed\u200b\u6587\u4ef6\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u5185\u6838\u200b\u91ca\u653e\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u65f6\u200b\u521b\u5efa\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u5e76\u200b\u5c06\u200b\u63cf\u8ff0\u7b26\u200b\u653e\u200b\u56de\u200b\u53ef\u7528\u200b\u63cf\u8ff0\u7b26\u200b\u6c60\u200b\u3002\u200b\u82e5\u200b\u8fdb\u7a0b\u200b\u56e0\u200b\u67d0\u4e9b\u200b\u539f\u56e0\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5185\u6838\u200b\u5c06\u200b\u5173\u95ed\u200b\u6240\u6709\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u5e76\u200b\u91ca\u653e\u200b\u76f8\u5e94\u200b\u7684\u200b\u5185\u5b58\u200b\u8d44\u6e90\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch10/#_1","title":"\u6587\u4ef6","text":"<p>\u200b\u6bcf\u4e2a\u200b Linux \u200b\u6587\u4ef6\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u8868\u5f81\u200b\u5176\u200b\u5728\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u89d2\u8272\u200b\u7684\u200b\u7c7b\u578b\u200b\uff1a</p> <ul> <li>\u200b\u5e38\u89c4\u200b\u6587\u4ef6\u200b\uff08Regular File\uff09\uff1a\u200b\u5bf9\u4e8e\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u6765\u8bf4\u200b\uff0c\u200b\u5e38\u89c4\u200b\u6587\u4ef6\u200b\u5206\u4e3a\u200b\u4ec5\u200b\u5305\u542b\u200b ASCII \u200b\u6216\u200b Unicode \u200b\u5b57\u7b26\u200b\u7684\u200b\u6587\u672c\u6587\u4ef6\u200b\uff08Text File\uff09\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\uff08Binary File\uff09\uff1b\u200b\u4f46\u200b\u5bf9\u4e8e\u200b\u5185\u6838\u200b\u800c\u8a00\u200b\uff0c\u200b\u4e24\u8005\u200b\u6ca1\u6709\u200b\u533a\u522b\u200b\u3002Linux \u200b\u6587\u672c\u6587\u4ef6\u200b\u7531\u200b\u4e00\u7cfb\u5217\u200b\u6587\u672c\u200b\u884c\u200b\uff08Text Line\uff09\u200b\u7ec4\u6210\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6bcf\u200b\u4e00\u884c\u200b\u90fd\u200b\u4ee5\u200b\u6362\u884c\u7b26\u200b<code>\\n</code>\u200b\u7ed3\u5c3e\u200b\uff1b</li> <li>\u200b\u76ee\u5f55\u200b\uff08Directory\uff09\uff1a\u200b\u76ee\u5f55\u200b\u662f\u200b\u7531\u200b\u94fe\u63a5\u200b\uff08Link\uff09\u200b\u6570\u7ec4\u200b\u6784\u6210\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002\u200b\u94fe\u63a5\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u540d\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u53ef\u80fd\u200b\u662f\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u76ee\u5f55\u200b\uff08\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff09\u3002\u200b\u6bcf\u4e2a\u200b\u76ee\u5f55\u200b\u4e2d\u200b\u81f3\u5c11\u200b\u5305\u542b\u200b\u4e24\u4e2a\u200b\u94fe\u63a5\u200b\uff1a<code>.</code>\u200b\u6307\u5411\u200b\u76ee\u5f55\u200b\u672c\u8eab\u200b\uff0c\u200b\u800c\u200b<code>..</code>\u200b\u6307\u5411\u200b\u4e0a\u7ea7\u200b\u76ee\u5f55\u200b\uff1b</li> <li>Socket\uff1a\u200b\u7528\u4e8e\u200b\u901a\u8fc7\u200b\u7f51\u7edc\u200b\u4e0e\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u901a\u4fe1\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002</li> </ul> <p></p>"},{"location":"core/csapp/ch10/#_2","title":"\u6253\u5f00\u200b\u548c\u200b\u5173\u95ed\u200b\u6587\u4ef6","text":"<p>\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u51fd\u6570\u200b<code>open</code>\u200b\u6765\u200b\u6253\u5f00\u200b\u4e00\u4e2a\u200b\u5df2\u200b\u5b58\u5728\u200b\u7684\u200b\u6587\u4ef6\u200b\u6216\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u6587\u4ef6\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/stat.h&gt;\n#include &lt;fcntl.h&gt;\nint open(char *filename, int flags, mode_t mode);\n// Returns: new file descriptor if OK, \u22121 on error\n</code></pre> <p>\u200b\u8fd4\u56de\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u662f\u200b\u8fdb\u7a0b\u200b\u5f53\u524d\u200b\u672a\u200b\u6253\u5f00\u200b\u7684\u200b\u6700\u5c0f\u200b\u63cf\u8ff0\u7b26\u200b\u3002\u200b\u53c2\u6570\u200b<code>flags</code>\u200b\u6307\u793a\u200b\u8fdb\u7a0b\u200b\u5982\u4f55\u200b\u8bbf\u95ee\u200b\u6587\u4ef6\u200b\uff1a</p> <ul> <li><code>O_RDONLY</code>\uff1a\u200b\u53ea\u8bfb\u200b</li> <li><code>O_WRONLY</code>\uff1a\u200b\u53ea\u200b\u5199\u200b</li> <li><code>O_RDWR</code>\uff1a\u200b\u8bfb\u5199\u200b</li> </ul> <p>\u200b\u8be5\u200b\u53c2\u6570\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u4e0e\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u4f4d\u200b\u63a9\u7801\u200b\u8fdb\u884c\u200b\u6216\u200b\uff08<code>OR</code>\uff09\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u4f4d\u200b\u63a9\u7801\u200b\u63d0\u4f9b\u200b\u5199\u5165\u200b\u7684\u200b\u9644\u52a0\u200b\u8bf4\u660e\u200b\uff1a</p> <ul> <li><code>O_CREAT</code>\uff1a\u200b\u5982\u679c\u200b\u6587\u4ef6\u200b\u4e0d\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u7a7a\u200b\u6587\u4ef6\u200b\uff1b</li> <li><code>O_TRUNC</code>\uff1a\u200b\u5982\u679c\u200b\u6587\u4ef6\u200b\u5df2\u7ecf\u200b\u5b58\u5728\u200b\uff0c\u200b\u5219\u200b\u6e05\u7a7a\u200b\u6587\u4ef6\u200b\u5185\u5bb9\u200b\uff1b</li> <li><code>O_APPEND</code>\uff1a\u200b\u5728\u200b\u6bcf\u6b21\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u4e4b\u524d\u200b\uff0c\u200b\u5c06\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u6587\u4ef6\u200b\u672b\u5c3e\u200b\u3002</li> </ul> <p>\u200b\u82e5\u200b\u6587\u4ef6\u200b\u5df2\u200b\u5b58\u5728\u200b\uff0c\u200b\u53c2\u6570\u200b<code>mode</code>\u200b\u5e94\u8bbe\u200b\u4e3a\u200b 0\uff1b\u200b\u53cd\u4e4b\u200b\uff0c\u200b\u5219\u200b\u8bbe\u4e3a\u200b\u65b0\u200b\u6587\u4ef6\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u4f4d\u200b\uff0c\u200b\u53ef\u9009\u9879\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a  \u200b\u4f5c\u4e3a\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u901a\u8fc7\u200b<code>umask</code>\u200b\u51fd\u6570\u200b\u8bbe\u7f6e\u200b\u7684\u200b<code>umask</code>\u200b\u63a9\u7801\u200b\u3002\u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b<code>open</code>\u200b\u51fd\u6570\u200b\u521b\u5efa\u200b\u65b0\u200b\u6587\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u6587\u4ef6\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u4f4d\u4f1a\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b<code>mode &amp; ~umask</code>\u3002\u200b\u5982\u4e0b\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u5c06\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u6240\u6709\u8005\u200b\u62e5\u6709\u200b\u8bfb\u5199\u200b\u6743\u9650\u200b\u3001\u200b\u5176\u4ed6\u200b\u7528\u6237\u200b\u90fd\u200b\u6709\u200b\u8bfb\u53d6\u200b\u6743\u9650\u200b\u7684\u200b\u65b0\u200b\u6587\u4ef6\u200b\uff1a</p> <pre><code>#define DEF_MODE   S_IRUSR|S_IWUSR|S_IRGRP|S_IWGRP|S_IROTH|S_IWOTH\n#define DEF_UMASK  S_IWGRP|S_IWOTH\n\numask(DEF_UMASK);\nfd = Open(\"foo.txt\", O_CREAT|O_TRUNC|O_WRONLY, DEF_MODE);\n</code></pre> <p>\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b<code>close</code>\u200b\u51fd\u6570\u200b\u6765\u200b\u5173\u95ed\u200b\u4e00\u4e2a\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u82e5\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u5df2\u200b\u5173\u95ed\u200b\u5c06\u200b\u5f15\u53d1\u200b\u9519\u8bef\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nint close(int fd);\n// Returns: 0 if OK, \u22121 on error\n</code></pre>"},{"location":"core/csapp/ch10/#_3","title":"\u8bfb\u5199\u200b\u6587\u4ef6","text":"<p>\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u548c\u200b<code>write</code>\u200b\u51fd\u6570\u200b\u6765\u200b\u6267\u884c\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nssize_t read(int fd, void *buf, size_t n);\n// Returns: number of bytes read if OK, 0 on EOF, \u22121 on error\nssize_t write(int fd, const void *buf, size_t n);\n// Returns: number of bytes written if OK, \u22121 on error\n</code></pre> <p><code>read</code>\u200b\u51fd\u6570\u200b\u4ece\u200b\u53c2\u6570\u200b<code>fd</code>\u200b\u7684\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u590d\u5236\u200b\u6700\u200b\u591a\u200b<code>n</code>\u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b<code>buf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c<code>write</code>\u200b\u51fd\u6570\u200b\u5219\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b<code>buf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u590d\u5236\u200b\u6700\u200b\u591a\u200b<code>n</code>\u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u53c2\u6570\u200b<code>fd</code>\u200b\u7684\u200b\u5f53\u524d\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u51fd\u6570\u200b\u5c06\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u4ee5\u200b\u5b57\u8282\u200b\u4e3a\u200b\u5355\u4f4d\u200b\u590d\u5236\u5230\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nint main(void) \n{\n    char c;\n    while(Read(STDIN_FILENO, &amp;c, 1) != 0) \n        Write(STDOUT_FILENO, &amp;c, 1);\n    exit(0);\n}\n</code></pre> <p>\u200b\u5728\u200b\u67d0\u4e9b\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\u4f20\u8f93\u200b\u7684\u200b\u5b57\u8282\u6570\u200b\u5c0f\u4e8e\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u7684\u200b\u5b57\u8282\u6570\u200b\u3002\u200b\u4e0d\u8db3\u200b\u6570\u200b\uff08Short Count\uff09\u200b\u7684\u200b\u4ea7\u751f\u200b\u5e76\u200b\u4e0d\u200b\u4ee3\u8868\u200b\u53d1\u751f\u200b\u4e86\u200b\u9519\u8bef\u200b\uff0c\u200b\u5b83\u200b\u53ef\u80fd\u200b\u7531\u200b\u591a\u79cd\u200b\u539f\u56e0\u200b\u5bfc\u81f4\u200b\uff1a</p> <ul> <li>\u200b\u8bfb\u53d6\u200b\u65f6\u200b\u9047\u5230\u200b EOF\uff1a\u200b\u82e5\u200b\u6211\u4eec\u200b\u5bf9\u200b\u4e00\u4e2a\u200b 20 \u200b\u5b57\u8282\u200b\u7684\u200b\u6587\u4ef6\u200b\u6267\u884c\u200b<code>read(fd, *buf, 50)</code>\uff0c\u200b\u90a3\u4e48\u200b\u7b2c\u4e00\u6b21\u200b\u8c03\u7528\u200b\u5c06\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b 20 \u200b\u7684\u200b\u4e0d\u8db3\u200b\u6570\u200b\uff0c\u200b\u7b2c\u4e8c\u6b21\u200b\u8c03\u7528\u200b\u5219\u200b\u8fd4\u56de\u200b 0\uff08EOF\uff09\uff1b</li> <li>\u200b\u4ece\u200b\u7ec8\u7aef\u200b\u8bfb\u53d6\u200b\u6587\u672c\u200b\u884c\u200b\uff1a\u200b\u82e5\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u662f\u200b\u7ec8\u7aef\u8bbe\u5907\u200b\uff08\u200b\u5373\u200b\u952e\u76d8\u200b\u548c\u200b\u663e\u793a\u5668\u200b\uff09\uff0c\u200b\u90a3\u4e48\u200b\u6bcf\u6b21\u200b<code>read</code>\u200b\u8c03\u7528\u200b\u90fd\u200b\u5c06\u200b\u4f20\u8f93\u200b\u4e00\u4e2a\u200b\u6587\u672c\u200b\u884c\u200b\u5e76\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u6587\u672c\u200b\u884c\u200b\u5927\u5c0f\u200b\u76f8\u7b49\u200b\u7684\u200b\u4e0d\u8db3\u200b\u6570\u200b\uff1b</li> <li>\u200b\u8bfb\u5199\u200b Socket\uff1a\u200b\u82e5\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u662f\u200b Socket\uff0c\u200b\u90a3\u4e48\u200b\u5185\u90e8\u200b\u7f13\u51b2\u533a\u200b\u9650\u5236\u200b\u548c\u200b\u7f51\u7edc\u200b\u5ef6\u8fdf\u200b\u5c06\u200b\u4f7f\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\u8fd4\u56de\u200b\u4e0d\u8db3\u200b\u6570\u200b\u3002</li> </ul> <p>\u200b\u56e0\u6b64\u200b\u9664\u200b\u9047\u5230\u200b EOF \u200b\u5916\u200b\uff0c\u200b\u8bfb\u5199\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\u4e0d\u4f1a\u200b\u5bfc\u81f4\u200b\u4e0d\u8db3\u200b\u6570\u200b\u7684\u200b\u4ea7\u751f\u200b\u3002\u200b\u4f46\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u60f3\u8981\u200b\u6784\u5efa\u200b\u5065\u58ee\u200b\u800c\u200b\u53ef\u9760\u200b\u7684\u200b\u7f51\u7edc\u5e94\u7528\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5c31\u200b\u5fc5\u987b\u200b\u91cd\u590d\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u548c\u200b<code>write</code>\u200b\u4ee5\u200b\u4fdd\u8bc1\u200b\u6240\u6709\u200b\u8bf7\u6c42\u200b\u7684\u200b\u5b57\u8282\u200b\u5747\u200b\u5df2\u200b\u88ab\u200b\u4f20\u8f93\u200b\u3002</p>"},{"location":"core/csapp/ch10/#r_io","title":"\u4f7f\u7528\u200b \\(R_{IO}\\) \u200b\u5305\u200b\u5b9e\u73b0\u200b\u5065\u58ee\u200b\u8bfb\u5199","text":"<p>\\(R_{IO}\\) \u200b\u5305\u4e3a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u65b9\u4fbf\u200b\u3001\u200b\u5065\u58ee\u200b\u4e14\u200b\u9ad8\u6548\u200b\u7684\u200b I/O\uff0c\u200b\u53ef\u4ee5\u200b\u89e3\u51b3\u200b\u7f16\u5199\u200b\u7f51\u7edc\u200b\u7a0b\u5e8f\u200b\u65f6\u200b\u9047\u5230\u200b\u7684\u200b\u4e0d\u8db3\u200b\u6570\u200b\u95ee\u9898\u200b\uff1a</p> <ul> <li>\u200b\u65e0\u200b\u7f13\u51b2\u200b\u7684\u200b\u8f93\u5165\u200b/\u200b\u8f93\u5165\u200b\u51fd\u6570\u200b\uff1a\u200b\u76f4\u63a5\u200b\u5728\u200b\u5185\u5b58\u200b\u548c\u200b\u6587\u4ef6\u200b\u4e4b\u95f4\u200b\u4f20\u8f93\u6570\u636e\u200b\uff0c\u200b\u9002\u7528\u200b\u4e8e\u200b\u4ece\u200b\u7f51\u7edc\u200b\u4e2d\u200b\u8bfb\u5199\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\uff1b</li> <li>\u200b\u6709\u200b\u7f13\u51b2\u200b\u7684\u200b\u8f93\u5165\u200b\u51fd\u6570\u200b\uff1a\u200b\u4ece\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7ea7\u522b\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u6587\u672c\u200b\u884c\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\uff0c\u200b\u4e0e\u200b\u6807\u51c6\u200b I/O\uff08\u200b\u5982\u200b<code>printf</code>\uff09\u200b\u51fd\u6570\u200b\u7c7b\u4f3c\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u662f\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\uff08Thread-safe\uff09\u200b\u7684\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u540c\u4e00\u200b\u63cf\u8ff0\u7b26\u200b\u4efb\u610f\u200b\u4ea4\u9519\u200b\uff08Interleave\uff09\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u63cf\u8ff0\u7b26\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e00\u4e9b\u200b\u6587\u672c\u200b\u884c\u200b\uff0c\u200b\u7136\u540e\u200b\u8bfb\u53d6\u200b\u4e00\u4e9b\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\uff0c\u200b\u6700\u540e\u200b\u518d\u200b\u8bfb\u53d6\u200b\u4e00\u4e9b\u200b\u6587\u672c\u200b\u884c\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch10/#_4","title":"\u65e0\u200b\u7f13\u51b2\u200b\u7684\u200b\u8f93\u5165\u200b/\u200b\u8f93\u5165\u200b\u51fd\u6570","text":"<pre><code>#include \"csapp.h\"\nssize_t rio_readn(int fd, void *usrbuf, size_t n);\nssize_t rio_writen(int fd, void *usrbuf, size_t n);\n// Returns: number of bytes transferred if OK, 0 on EOF (rio_readn only), \u22121 on error\n</code></pre> <p><code>rio_readn</code>\u200b\u51fd\u6570\u200b\u4ece\u200b\u53c2\u6570\u200b<code>fd</code>\u200b\u7684\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u590d\u5236\u200b\u6700\u200b\u591a\u200b<code>n</code>\u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b<code>usrbuf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c<code>rio_writen</code>\u200b\u51fd\u6570\u200b\u5219\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b<code>usrbuf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u590d\u5236\u200b\u6700\u200b\u591a\u200b<code>n</code>\u200b\u4e2a\u200b\u5b57\u8282\u200b\u5230\u200b\u53c2\u6570\u200b<code>fd</code>\u200b\u7684\u200b\u5f53\u524d\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u524d\u8005\u200b\u53ea\u6709\u200b\u5728\u200b\u9047\u5230\u200b EOF \u200b\u65f6\u200b\u8fd4\u56de\u200b\u4e0d\u8db3\u200b\u6570\u200b\uff0c\u200b\u540e\u8005\u200b\u5219\u200b\u4ece\u4e0d\u200b\u8fd4\u56de\u200b\u4e0d\u8db3\u200b\u6570\u200b\u3002</p> <p>\u200b\u82e5\u200b\u4e0a\u8ff0\u200b\u51fd\u6570\u200b\u88ab\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8fd4\u56de\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u91cd\u65b0\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u548c\u200b<code>write</code>\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>ssize_t rio_readn(int fd, void *usrbuf, size_t n)\n{\n    size_t nleft = n;\n    ssize_t nread;\n    char *bufp = usrbuf;\n    while (nleft &gt; 0)\n    {\n        if ((nread = read(fd, bufp, nleft)) &lt; 0)\n        {\n            if (errno == EINTR) /* Interrupted by sig handler return */\n                nread = 0;      /* and call read() again */\n            else\n                return -1;      /* errno set by read() */\n        }\n        else if (nread == 0)\n            break;              /* EOF */\n        nleft -= nread;\n        bufp += nread;\n    }\n    return (n - nleft);         /* Return &gt;= 0 */\n}\n\nssize_t rio_writen(int fd, void *usrbuf, size_t n)\n{\n    size_t nleft = n;\n    ssize_t nwritten;\n    char *bufp = usrbuf;\n    while (nleft &gt; 0)\n    {\n        if ((nwritten = read(fd, bufp, nleft)) &lt; 0)\n        {\n            if (errno == EINTR) /* Interrupted by sig handler return */\n                nwritten = 0;   /* and call write() again */\n            else\n                return -1;      /* errno set by write() */\n        }\n        nleft -= nwritten;\n        bufp += nwritten;\n    }\n    return n;\n}\n</code></pre>"},{"location":"core/csapp/ch10/#_5","title":"\u6709\u200b\u7f13\u51b2\u200b\u7684\u200b\u8f93\u5165\u200b\u51fd\u6570","text":"<p>\u200b\u5047\u8bbe\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u7f16\u5199\u200b\u4e00\u4e2a\u200b\u8ba1\u7b97\u200b\u6587\u672c\u6587\u4ef6\u200b\u884c\u6570\u200b\u7684\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u65b9\u6cd5\u200b\u4fbf\u662f\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u51fd\u6570\u200b\u6bcf\u6b21\u200b\u8bfb\u53d6\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u5e76\u200b\u68c0\u67e5\u200b\u662f\u5426\u200b\u6709\u200b\u6362\u884c\u7b26\u200b\u3002\u200b\u4f46\u200b\u7531\u4e8e\u200b<code>read</code>\u200b\u662f\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff0c\u200b\u9891\u7e41\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u5c06\u200b\u5bfc\u81f4\u200b\u7a0b\u5e8f\u200b\u6548\u7387\u200b\u4f4e\u4e0b\u200b\u3002</p> <p>\u200b\u66f4\u597d\u200b\u7684\u200b\u65b9\u6cd5\u200b\u662f\u200b\u8c03\u7528\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b<code>rio_readlineb</code>\u200b\u4ece\u200b\u5185\u90e8\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\uff08Read Buffer\uff09\u200b\u590d\u5236\u200b\u6587\u672c\u200b\u884c\u200b\uff0c\u200b\u53ea\u6709\u200b\u5f53\u200b\u7f13\u51b2\u533a\u200b\u4e3a\u200b\u7a7a\u65f6\u200b\u624d\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u4ee5\u200b\u91cd\u65b0\u200b\u586b\u5145\u200b\u7f13\u51b2\u533a\u200b\u3002\\(R_{IO}\\) \u200b\u5305\u200b\u8fd8\u200b\u4e3a\u200b\u540c\u65f6\u200b\u5305\u542b\u200b\u6587\u672c\u200b\u884c\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\u7684\u200b\u6587\u4ef6\u200b\uff08\u200b\u5982\u200b HTTP \u200b\u54cd\u5e94\u200b\uff09\u200b\u63d0\u4f9b\u200b\u4e86\u200b<code>rio_readn</code>\u200b\u51fd\u6570\u200b\u7684\u200b\u6709\u200b\u7f13\u51b2\u200b\u7248\u672c\u200b\uff0c\u200b\u5373\u200b<code>rio_readnb</code>\uff1a</p> <pre><code>#include \"csapp.h\"\nssize_t rio_readlineb(rio_t *rp, void *usrbuf, size_t maxlen);\nssize_t rio_readnb(rio_t *rp, void *usrbuf, size_t n);\n// Returns: number of bytes read if OK, 0 on EOF, \u22121 on error\n</code></pre> <p>\u200b\u5728\u200b\u8c03\u7528\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u6709\u200b\u7f13\u51b2\u200b\u7684\u200b\u8f93\u5165\u200b\u51fd\u6570\u200b\u524d\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u8c03\u7528\u200b\u4e00\u6b21\u200b<code>rio_readinitb</code>\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u63cf\u8ff0\u7b26\u200b<code>fd</code>\u200b\u4e0e\u200b\u5730\u5740\u200b<code>rp</code>\u200b\u5904\u200b\u7684\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\uff08\u200b\u7c7b\u578b\u200b\u4e3a\u200b<code>rio_t</code>\uff09\u200b\u76f8\u5173\u8054\u200b\uff1a</p> <pre><code>#define RIO_BUFSIZE 8192\ntypedef struct {\n    int rio_fd;                /* Descriptor for this internal buf */\n    int rio_cnt;               /* Unread bytes in internal buf */\n    char *rio_bufptr;          /* Next unread byte in internal buf */\n    char rio_buf[RIO_BUFSIZE]; /* Internal buffer */\n} rio_t;\n\nvoid rio_readinitb(rio_t *rp, int fd) \n{\n    rp-&gt;rio_fd = fd;  \n    rp-&gt;rio_cnt = 0;  \n    rp-&gt;rio_bufptr = rp-&gt;rio_buf;\n}\n</code></pre> <p>\\(R_{IO}\\) \u200b\u5305\u200b\u8bfb\u53d6\u200b\u4f8b\u7a0b\u200b\u7684\u200b\u6838\u5fc3\u200b\u662f\u200b<code>rio_read</code>\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u200b\u5176\u5b9e\u200b\u662f\u200b<code>read</code>\u200b\u51fd\u6570\u200b\u7684\u200b\u6709\u200b\u7f13\u51b2\u200b\u7248\u672c\u200b\u3002\u200b\u82e5\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u7684\u200b\u672a\u8bfb\u200b\u5b57\u8282\u6570\u200b<code>rp-&gt;rio_cnt</code>\u200b\u4e3a\u200b 0\uff0c\u200b\u5219\u200b\u5728\u200b\u5faa\u73af\u200b\u5185\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u51fd\u6570\u200b\u5bf9\u200b\u5176\u200b\u586b\u5145\u200b\uff1b\u200b\u82e5\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u975e\u7a7a\u200b\uff0c\u200b\u5219\u200b\u8c03\u7528\u200b<code>memcpy</code>\u200b\u51fd\u6570\u200b\u5c06\u200b<code>min(n, rp-&gt;rio_cnt)</code>\u200b\u5b57\u8282\u200b\u4ece\u200b\u7f13\u51b2\u533a\u200b\u590d\u5236\u5230\u200b<code>usrbuf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u5185\u5b58\u200b\u4f4d\u7f6e\u200b\uff1a</p> <pre><code>static ssize_t rio_read(rio_t *rp, char *usrbuf, size_t n)\n{\n    int cnt;\n\n    while (rp-&gt;rio_cnt &lt;= 0)\n    { /* Refill if buf is empty */\n        rp-&gt;rio_cnt = read(rp-&gt;rio_fd, rp-&gt;rio_buf,\n                           sizeof(rp-&gt;rio_buf));\n        if (rp-&gt;rio_cnt &lt; 0)\n        {\n            if (errno != EINTR)           /* Interrupted by sig handler return */\n                return -1;\n        }\n        else if (rp-&gt;rio_cnt == 0)        /* EOF */\n            return 0;\n        else\n            rp-&gt;rio_bufptr = rp-&gt;rio_buf; /* Reset buffer ptr */\n    }\n\n    /* Copy min(n, rp-&gt;rio_cnt) bytes from internal buf to user buf */\n    cnt = n;\n    if (rp-&gt;rio_cnt &lt; n)\n        cnt = rp-&gt;rio_cnt;\n    memcpy(usrbuf, rp-&gt;rio_bufptr, cnt);\n    rp-&gt;rio_bufptr += cnt;\n    rp-&gt;rio_cnt -= cnt;\n    return cnt;\n}\n</code></pre> <p>\u200b\u5728\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u770b\u6765\u200b\uff0c<code>rio_read</code>\u200b\u51fd\u6570\u200b\u4e0e\u200b<code>read</code>\u200b\u51fd\u6570\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u8bed\u4e49\u200b\uff1a\u200b\u6267\u884c\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u8fd4\u56de\u200b -1 \u200b\u5e76\u200b\u8bbe\u7f6e\u200b errno\uff1b\u200b\u6267\u884c\u200b\u9047\u5230\u200b EOF \u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u8fd4\u56de\u200b 0\uff1b\u200b\u5f53\u200b\u8bf7\u6c42\u200b\u7684\u200b\u5b57\u8282\u6570\u200b\u5927\u4e8e\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u7684\u200b\u672a\u8bfb\u200b\u5b57\u8282\u6570\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u4e0d\u8db3\u200b\u6570\u200b\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5c06\u200b<code>read</code>\u200b\u66ff\u6362\u200b\u4e3a\u200b<code>rio_read</code>\u200b\u6765\u200b\u6784\u5efa\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u6709\u200b\u7f13\u51b2\u200b\u8bfb\u53d6\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u5b9e\u9645\u4e0a\u200b\uff0c<code>rio_readnb</code>\u200b\u4e0e\u200b<code>rio_readn</code>\u200b\u5177\u6709\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u7ed3\u6784\u200b\uff0c\u200b\u53ea\u4e0d\u8fc7\u200b\u6211\u4eec\u200b\u7528\u200b<code>rio_read</code>\u200b\u66ff\u6362\u200b\u4e86\u200b<code>read</code>\uff1a</p> <pre><code>ssize_t rio_readnb(rio_t *rp, void *usrbuf, size_t n)\n{\n    size_t nleft = n;\n    ssize_t nread;\n    char *bufp = usrbuf;\n\n    while (nleft &gt; 0)\n    {\n        if ((nread = rio_read(rp, bufp, nleft)) &lt; 0)\n            return -1;  /* errno set by read() */\n        else if (nread == 0)\n            break; /* EOF */\n        nleft -= nread;\n        bufp += nread;\n    }\n    return (n - nleft); /* return &gt;= 0 */\n}\n</code></pre> <p>\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c<code>rio_readlineb</code>\u200b\u51fd\u6570\u200b\u4ece\u6587\u4ef6\u200b<code>rp</code>\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e00\u4e2a\u200b\u6587\u672c\u200b\u884c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u590d\u5236\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b<code>usrbuf</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5faa\u73af\u200b\u5185\u200b\u6bcf\u6b21\u200b\u5bf9\u200b<code>rio_read</code>\u200b\u7684\u200b\u8c03\u7528\u200b\u90fd\u200b\u4f1a\u200b\u628a\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u7684\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u590d\u5236\u5230\u200b<code>&amp;c</code>\uff0c\u200b\u7136\u540e\u200b\u68c0\u67e5\u200b\u5b83\u200b\u662f\u5426\u662f\u200b\u6362\u884c\u7b26\u200b\uff1a</p> <pre><code>ssize_t rio_readlineb(rio_t *rp, void *usrbuf, size_t maxlen)\n{\n    int n, rc;\n    char c, *bufp = usrbuf;\n\n    for (n = 1; n &lt; maxlen; n++)\n    {\n        if ((rc = rio_read(rp, &amp;c, 1)) == 1)\n        {\n            *bufp++ = c;  /* Copy rp to user buf */\n            if (c == '\\n')\n            {\n                n++;\n                break;\n            }\n        }\n        else if (rc == 0)\n        {\n            if (n == 1)\n                return 0; /* EOF, no data read */\n            else\n                break;    /* EOF, some data was read */\n        }\n        else\n            return -1;    /* Error */\n    }\n    *bufp = 0;\n    return n - 1;\n}\n</code></pre>"},{"location":"core/csapp/ch10/#_6","title":"\u8bfb\u53d6\u200b\u6587\u4ef6\u200b\u5143\u200b\u6570\u636e","text":"<p>\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>stat</code>\u200b\u548c\u200b<code>fstat</code>\u200b\u51fd\u6570\u200b\u83b7\u53d6\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u7684\u200b\u5143\u200b\u6570\u636e\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/stat.h&gt;\nint stat(const char *filename, struct stat *buf);\nint fstat(int fd, struct stat *buf);\n// Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u51fd\u6570\u200b<code>stat</code>\u200b\u4f7f\u7528\u200b\u6587\u4ef6\u540d\u200b<code>*filename</code>\u200b\u4f5c\u4e3a\u200b\u8f93\u5165\u200b\uff0c\u200b\u5c06\u200b\u4fe1\u606f\u200b\u586b\u5199\u200b\u5230\u200b<code>stat</code>\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u3002<code>fstat</code>\u200b\u4e0e\u200b\u4e4b\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4f46\u200b\u5b83\u200b\u7684\u200b\u53c2\u6570\u200b\u662f\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b<code>fd</code>\u3002\u200b\u7ed3\u6784\u200b\u4f53\u200b<code>stat</code>\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ea\u200b\u9700\u200b\u5173\u6ce8\u200b\u5b57\u200b\u6bb5\u200b<code>st_mode</code>\u200b\u548c\u200b<code>st_size</code>\uff1a</p> <p> <code>st_size</code>\u200b\u5305\u542b\u200b\u4e86\u200b\u6587\u4ef6\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u800c\u200b<code>st_mode</code>\u200b\u5219\u200b\u5305\u542b\u200b\u4e86\u200b\u6587\u4ef6\u200b\u7684\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u548c\u200b\u7c7b\u578b\u200b\u3002</p>"},{"location":"core/csapp/ch10/#_7","title":"\u8bfb\u53d6\u200b\u76ee\u5f55\u200b\u5185\u5bb9","text":"<p>\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>opendir</code>\u200b\u548c\u200b<code>readdir</code>\u200b\u51fd\u6570\u200b\u8bfb\u53d6\u200b\u76ee\u5f55\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;dirent.h&gt;\nDIR *opendir(const char *name);\n// Returns: pointer to handle if OK, NULL on error\n#include &lt;dirent.h&gt;\nstruct dirent *readdir(DIR *dirp);\n// Returns: pointer to next directory entry if OK, NULL if no more entries or error\n</code></pre> <p>\u200b\u51fd\u6570\u200b<code>opendir</code>\u200b\u4ee5\u200b\u76ee\u5f55\u200b\u7684\u200b\u8def\u5f84\u540d\u200b\u4e3a\u200b\u53c2\u6570\u200b\uff0c\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b\u76ee\u5f55\u200b\u6d41\u200b\uff08Directory Stream\uff09\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u6d41\u662f\u200b\u5bf9\u200b\u6709\u5e8f\u200b\u9879\u76ee\u200b\u5217\u8868\u200b\u7684\u200b\u62bd\u8c61\u200b\uff0c\u200b\u6b64\u5904\u200b\u6307\u200b\u7684\u200b\u662f\u200b\u76ee\u5f55\u200b\u4e2d\u200b\u6761\u200b\u76ee\u7684\u200b\u5217\u8868\u200b\u3002\u200b\u51fd\u6570\u200b<code>readdir</code>\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u76ee\u5f55\u200b\u6d41\u4e2d\u4e0b\u200b\u4e00\u4e2a\u200b\u6761\u200b\u76ee\u7684\u200b\u6307\u9488\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b\u90fd\u200b\u662f\u200b\u4e00\u4e2a\u200b<code>dirent</code>\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff1a</p> <pre><code>struct dirent {\n    ino_t d_ino;       /* inode number */\n    char  d_name[256]; /* Filename */\n};\n</code></pre> <p><code>d_name</code>\u200b\u662f\u200b\u6587\u4ef6\u540d\u200b\uff0c<code>d_ino</code>\u200b\u662f\u200b\u6587\u4ef6\u200b\u7684\u200b inode \u200b\u6570\u200b\u3002\u200b\u5f53\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u65f6\u200b\uff0c<code>readdir</code>\u200b\u8fd4\u56de\u200b<code>NULL</code>\u200b\u5e76\u200b\u8bbe\u7f6e\u200b<code>errno</code>\u3002</p> <p>\u200b\u51fd\u6570\u200b<code>closedir</code>\u200b\u5173\u95ed\u200b\u76ee\u5f55\u200b\u6d41\u200b\u5e76\u200b\u91ca\u653e\u200b\u6240\u6709\u200b\u76f8\u5173\u200b\u8d44\u6e90\u200b\uff1a</p> <pre><code>#include &lt;dirent.h&gt;\nint closedir(DIR *dirp);\n// Returns: 0 on success, \u22121 on error\n</code></pre>"},{"location":"core/csapp/ch10/#_8","title":"\u5171\u4eab\u200b\u6587\u4ef6","text":"<p>\u200b\u5185\u6838\u200b\u4f7f\u7528\u200b\u4e09\u79cd\u200b\u6570\u636e\u7ed3\u6784\u200b\u6765\u200b\u8868\u793a\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\uff1a</p> <ul> <li>\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\uff08Descriptor Table\uff09\uff1a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b\u5747\u200b\u6307\u5411\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u4e2d\u200b\u7684\u200b\u6761\u76ee\u200b\uff0c\u200b\u5176\u200b\u7d22\u5f15\u200b\u662f\u200b\u8fdb\u7a0b\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff1b</li> <li>\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\uff08Open File Table\uff09\uff1a\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u5171\u4eab\u200b\u4e00\u4e2a\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\uff0c\u200b\u5b83\u200b\u8868\u793a\u200b\u4e86\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u7684\u200b\u96c6\u5408\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b\u7531\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201cFile pos\u201d\uff09\u3001\u200b\u5f53\u524d\u200b\u6307\u5411\u200b\u5b83\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u6761\u76ee\u200b\u6570\u91cf\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201crefcnt\u201d\uff09\u200b\u548c\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b v-node \u200b\u8868\u6761\u200b\u76ee\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u53ea\u6709\u200b\u5f53\u200b<code>refcnt</code>\u200b\u4e3a\u200b 0 \u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u624d\u200b\u4f1a\u200b\u5220\u9664\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b\uff1b</li> <li>v-node \u200b\u8868\u200b\uff08V-node Table\uff09\uff1a\u200b\u4e0e\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u4e00\u6837\u200b\uff0cv-node \u200b\u8868\u7531\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u5171\u4eab\u200b\u3002\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b\u90fd\u200b\u5305\u542b\u200b\u4e86\u200b<code>stat</code>\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5982\u200b<code>st_mode</code>\u200b\u548c\u200b<code>st_size</code>\u200b\u7b49\u200b\u3002v-node \u200b\u4e0e\u200b i-node \u200b\u7684\u200b\u533a\u522b\u200b\u8be6\u89c1\u200b\uff1aInode vs Vnode Difference\u3002</li> </ul> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u63cf\u8ff0\u7b26\u200b 1 \u200b\u548c\u200b 4 \u200b\u901a\u8fc7\u200b\u4e0d\u540c\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b\u5f15\u7528\u200b\u4e0d\u540c\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002\u200b\u8fd9\u200b\u662f\u200b\u6700\u200b\u5178\u578b\u200b\u7684\u200b\u60c5\u51b5\u200b\uff0c\u200b\u6587\u4ef6\u200b\u5e76\u672a\u200b\u5171\u4eab\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u5bf9\u5e94\u200b\u4e00\u4e2a\u200b\u4e0d\u540c\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002</p> <p>\u200b\u591a\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e0d\u540c\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b\u5f15\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u4f8b\u5982\u200b\u5bf9\u200b\u540c\u4e00\u200b\u6587\u4ef6\u200b\u591a\u6b21\u200b\u8c03\u7528\u200b<code>open</code>\u200b\u51fd\u6570\u200b\uff1a</p> <p> \u200b\u63cf\u8ff0\u7b26\u200b 1 \u200b\u548c\u200b 4 \u200b\u6307\u5411\u200b\u4e0d\u540c\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\u4e0d\u540c\u200b\u3002\u200b\u5047\u8bbe\u200b\u6587\u4ef6\u200b<code>foobar.txt</code>\u200b\u4e2d\u200b\u5305\u542b\u200b 6 \u200b\u4e2a\u200b ASCII \u200b\u5b57\u7b26\u200b<code>foobar</code>\uff0c\u200b\u90a3\u4e48\u200b\u5982\u4e0b\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u4e3a\u200b<code>f</code>\uff1a</p> <pre><code>#include \"csapp.h\"\n\nint main()\n{\n    int fd1, fd2;\n    char c;\n    fd1 = Open(\"foobar.txt\", O_RDONLY, 0);\n    fd2 = Open(\"foobar.txt\", O_RDONLY, 0);\n    Read(fd1, &amp;c, 1);\n    Read(fd2, &amp;c, 1);\n    printf(\"c = %c\\n\", c);\n    exit(0);\n}\n</code></pre> <p>\u200b\u82e5\u7236\u200b\u8fdb\u7a0b\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u5982\u4e0a\u56fe\u200b10.12\u200b\u6240\u793a\u200b\uff0c\u200b\u5219\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b<code>fork</code>\u200b\u51fd\u6570\u200b\u540e\u200b\u60c5\u51b5\u200b\u53d8\u4e3a\u200b\uff1a</p> <p> \u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5f97\u5230\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u526f\u672c\u200b\uff0c\u200b\u4e24\u8005\u200b\u5171\u4eab\u200b\u76f8\u540c\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u548c\u200b\u6587\u4ef6\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5982\u4e0b\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u4e3a\u200b<code>o</code>\uff1a</p> <pre><code>#include \"csapp.h\"\nint main()\n{\n    int fd;\n    char c;\n    fd = Open(\"foobar.txt\", O_RDONLY, 0);\n    if (Fork() == 0)\n    {\n        Read(fd, &amp;c, 1);\n        exit(0);\n    }\n    Wait(NULL);\n    Read(fd, &amp;c, 1);\n    printf(\"c = %c\\n\", c);\n    exit(0);\n}\n</code></pre>"},{"location":"core/csapp/ch10/#io_1","title":"I/O \u200b\u91cd\u5b9a\u5411","text":"<p><code>dup2</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\u6761\u76ee\u200b<code>oldfd</code>\u200b\u590d\u5236\u5230\u200b<code>newfd</code>\u200b\u5e76\u200b\u8986\u76d6\u200b\u5176\u200b\u539f\u59cb\u200b\u5185\u5bb9\u200b\u3002\u200b\u5982\u679c\u200b<code>newfd</code>\u200b\u5df2\u7ecf\u200b\u6253\u5f00\u200b\uff0c\u200b\u5219\u200b\u8be5\u200b\u51fd\u6570\u200b\u5728\u200b\u590d\u5236\u200b<code>oldfd</code>\u200b\u4e4b\u524d\u200b\u4f1a\u5148\u200b\u5173\u95ed\u200b<code>newfd</code>\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nint dup2(int oldfd, int newfd);\n// Returns: nonnegative descriptor if OK, \u22121 on error\n</code></pre> <p>\u200b\u5047\u8bbe\u200b\u67d0\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u6570\u636e\u7ed3\u6784\u200b\u5982\u4e0a\u56fe\u200b10.12\u200b\u6240\u793a\u200b\u3002\u200b\u63cf\u8ff0\u7b26\u200b 1\uff08\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\uff09\u200b\u6307\u5411\u200b\u6587\u4ef6\u200b A\uff08\u200b\u5982\u200b\u7ec8\u7aef\u200b\uff09\uff0c\u200b\u63cf\u8ff0\u7b26\u200b 4 \u200b\u6307\u5411\u200b\u6587\u4ef6\u200b B\uff08\u200b\u5982\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u6587\u4ef6\u200b\uff09\uff0c\u200b\u6587\u4ef6\u200b A \u200b\u548c\u200b B \u200b\u7684\u200b<code>refcnt</code>\u200b\u5747\u200b\u4e3a\u200b 1\u3002\u200b\u90a3\u4e48\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u51fd\u6570\u200b<code>dup2(4, 1)</code>\u200b\u540e\u200b\u60c5\u51b5\u200b\u53d8\u4e3a\u200b\uff1a</p> <p> \u200b\u6587\u4ef6\u200b A \u200b\u88ab\u200b\u5173\u95ed\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u200b\u5220\u9664\u200b\u5176\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u548c\u200b v-node \u200b\u8868\u200b\u6761\u76ee\u200b\u3002\u200b\u4e24\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u5747\u200b\u6307\u5411\u200b\u6587\u4ef6\u200b B\uff0c\u200b\u5176\u200b<code>refcnt</code>\u200b\u5df2\u200b\u589e\u52a0\u200b\u4e3a\u200b 2\u3002\u200b\u4ece\u200b\u73b0\u5728\u200b\u5f00\u59cb\u200b\uff0c\u200b\u4efb\u4f55\u200b\u5199\u5165\u200b\u5230\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\u7684\u200b\u6570\u636e\u200b\u90fd\u200b\u4f1a\u200b\u88ab\u200b\u91cd\u5b9a\u5411\u200b\u5230\u200b\u6587\u4ef6\u200b B\u3002</p>"},{"location":"core/csapp/ch10/#io_2","title":"\u6807\u51c6\u200b I/O","text":"<p>C \u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u66f4\u200b\u9ad8\u7ea7\u200b\u522b\u7684\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\u51fd\u6570\u200b\uff0c\u200b\u5373\u200b\u6807\u51c6\u200b I/O \u200b\u5e93\u200b\uff0c\u200b\u5b83\u200b\u4e3a\u200b\u7a0b\u5e8f\u5458\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u6bd4\u200b Unix I/O \u200b\u66f4\u200b\u9ad8\u7ea7\u200b\u522b\u7684\u200b\u66ff\u4ee3\u200b\u65b9\u6848\u200b\u3002<code>libc</code>\u200b\u5e93\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u7528\u4e8e\u200b\u6253\u5f00\u200b\u548c\u200b\u5173\u95ed\u200b\u6587\u4ef6\u200b\uff08<code>fopen</code>\u200b\u548c\u200b<code>fclose</code>\uff09\u3001\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b\u5b57\u8282\u200b\uff08<code>fread</code>\u200b\u548c\u200b<code>fwrite</code>\uff09\u3001\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b\u5b57\u7b26\u4e32\u200b\uff08<code>fgets</code>\u200b\u548c\u200b<code>fputs</code>\uff09\u200b\u4ee5\u53ca\u200b\u590d\u6742\u200b\u7684\u200b\u683c\u5f0f\u5316\u200b I/O\uff08<code>scanf</code>\u200b\u548c\u200b<code>printf</code>\uff09\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u6807\u51c6\u200b I/O \u200b\u5e93\u200b\u5c06\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u5efa\u6a21\u200b\u4e3a\u6d41\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u7a0b\u5e8f\u5458\u200b\u6765\u8bf4\u200b\uff0c\u200b\u6d41\u662f\u200b\u6307\u5411\u200b<code>FILE</code>\u200b\u7c7b\u578b\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u6bcf\u4e2a\u200b ANSI C \u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u4ee5\u200b\u4e09\u4e2a\u200b\u6253\u5f00\u200b\u7684\u200b\u200b\u200b\u200b\u6d41\u200b<code>stdin</code>\u3001<code>stdout</code>\u200b\u548c\u200b<code>stderr</code>\u200b\u5f00\u5934\u200b\uff0c\u200b\u5206\u522b\u200b\u4e0e\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u3001\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\u548c\u200b\u6807\u51c6\u200b\u9519\u8bef\u200b\u5bf9\u5e94\u200b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\nextern FILE *stdin;  /* Standard input (descriptor 0) */\nextern FILE *stdout; /* Standard output (descriptor 1) */\nextern FILE *stderr; /* Standard error (descriptor 2) */\n</code></pre> <p><code>FILE</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u6d41\u200b\u662f\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u548c\u200b\u6d41\u200b\u7f13\u51b2\u533a\u200b\uff08Stream Buffer\uff09\u200b\u7684\u200b\u62bd\u8c61\u200b\u3002\u200b\u4e0e\u200b \\(R_{io}\\) \u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u76f8\u540c\u200b\uff0c\u200b\u6d41\u200b\u7f13\u51b2\u533a\u200b\u53ef\u4ee5\u200b\u6700\u5927\u200b\u9650\u5ea6\u200b\u5730\u200b\u51cf\u5c11\u200b\u6602\u8d35\u200b\u7684\u200b Linux I/O \u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u7684\u200b\u6b21\u6570\u200b\u3002</p>"},{"location":"core/csapp/ch10/#io_3","title":"\u6211\u4eec\u200b\u5e94\u5f53\u200b\u4f7f\u7528\u200b\u54ea\u200b\u79cd\u200b I/O \u200b\u51fd\u6570\u200b\uff1f","text":"<p>Unix I/O\u3001\u200b\u6807\u51c6\u200b I/O \u200b\u548c\u200b \\(R_{io}\\) \u200b\u5305\u200b\u51fd\u6570\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5173\u7cfb\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u4f7f\u7528\u200b\u54ea\u200b\u79cd\u200b I/O \u200b\u51fd\u6570\u200b\u5462\u200b\uff1f\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u4e00\u4e9b\u200b\u5efa\u8bae\u200b\uff1a</p> <ul> <li>\u200b\u5c3d\u53ef\u80fd\u200b\u4f7f\u7528\u200b\u6807\u51c6\u200b I/O \u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u4eec\u200b\u662f\u200b\u5728\u200b\u78c1\u76d8\u200b\u548c\u200b\u7ec8\u7aef\u200b\u4e0a\u200b\u6267\u884c\u200b I/O \u200b\u64cd\u4f5c\u200b\u7684\u200b\u6700\u4f73\u200b\u9009\u62e9\u200b\uff1b</li> <li>\u200b\u4e0d\u8981\u200b\u4f7f\u7528\u200b<code>scanf</code>\u200b\u6216\u200b<code>rio_readlineb</code>\u200b\u51fd\u6570\u200b\u8bfb\u53d6\u200b\u4e8c\u8fdb\u5236\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5b83\u4eec\u200b\u662f\u200b\u4e13\u95e8\u200b\u4e3a\u200b\u8bfb\u53d6\u200b\u6587\u672c\u6587\u4ef6\u200b\u8bbe\u8ba1\u200b\u7684\u200b\uff1b</li> <li>\u200b\u5c06\u200b\u6807\u51c6\u200b I/O \u200b\u51fd\u6570\u200b\u7528\u4e8e\u200b Socket \u200b\u65f6\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u4e00\u4e9b\u200b\u4ee4\u4eba\u8ba8\u538c\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u5728\u200b\u7f51\u7edc\u200b\u7f16\u7a0b\u200b\u65f6\u200b\u4f7f\u7528\u200b \\(R_{io}\\) \u200b\u5305\u200b\u51fd\u6570\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch11/","title":"\u7f51\u7edc\u200b\u7f16\u7a0b","text":"<p>\u200b\u6240\u6709\u200b\u7684\u200b\u7f51\u7edc\u5e94\u7528\u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u57fa\u4e8e\u200b\u76f8\u540c\u200b\u7684\u200b\u57fa\u672c\u200b\u7f16\u7a0b\u200b\u6a21\u578b\u200b\uff0c\u200b\u5177\u6709\u200b\u76f8\u4f3c\u200b\u7684\u200b\u6574\u4f53\u200b\u903b\u8f91\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5e76\u4e14\u200b\u4f9d\u8d56\u4e8e\u200b\u76f8\u540c\u200b\u7684\u200b\u7f16\u7a0b\u200b\u63a5\u53e3\u200b\u3002</p>"},{"location":"core/csapp/ch11/#-","title":"\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b\u7f16\u7a0b\u200b\u6a21\u578b","text":"<p>\u200b\u6bcf\u4e2a\u200b\u7f51\u7edc\u5e94\u7528\u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u57fa\u4e8e\u200b\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b\u6a21\u578b\u200b\uff08Client-Server Model\uff09\uff0c\u200b\u5e76\u200b\u7531\u200b\u4e00\u4e2a\u200b\u670d\u52a1\u5668\u200b\u8fdb\u7a0b\u200b\u548c\u200b\u591a\u4e2a\u200b\u5ba2\u6237\u7aef\u200b\u8fdb\u7a0b\u200b\u7ec4\u6210\u200b\u3002\u200b\u670d\u52a1\u5668\u200b\u7ba1\u7406\u200b\u8d44\u6e90\u200b\uff0c\u200b\u64cd\u4f5c\u200b\u5b83\u4eec\u200b\u4ee5\u5411\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u3002</p> <p>\u200b\u5ba2\u6237\u7aef\u200b-\u200b\u670d\u52a1\u5668\u200b\u6a21\u578b\u200b\u4e2d\u200b\u7684\u200b\u57fa\u672c\u64cd\u4f5c\u200b\u662f\u200b\u4e8b\u52a1\u200b\uff08Transaction\uff09\uff0c\u200b\u5b83\u200b\u7531\u200b\u4ee5\u4e0b\u200b\u56db\u4e2a\u200b\u6b65\u9aa4\u200b\u7ec4\u6210\u200b\uff1a</p> <p> \u200b\u8bf7\u200b\u6ce8\u610f\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u6307\u200b\u7684\u200b\u662f\u200b\u8fdb\u7a0b\u200b\u800c\u200b\u975e\u200b\u673a\u5668\u200b\u6216\u200b\u4e3b\u673a\u200b\uff08Host\uff09\u3002\u200b\u5355\u53f0\u200b\u4e3b\u673a\u200b\u80fd\u591f\u200b\u540c\u65f6\u200b\u8fd0\u884c\u200b\u591a\u4e2a\u200b\u4e0d\u540c\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u4e8b\u52a1\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u76f8\u540c\u200b\u6216\u200b\u4e0d\u540c\u200b\u7684\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u6267\u884c\u200b\u3002</p>"},{"location":"core/csapp/ch11/#_2","title":"\u7f51\u7edc","text":"<p>\u200b\u4e0d\u8fc7\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u901a\u5e38\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u8fd0\u884c\u200b\uff0c\u200b\u4e24\u8005\u200b\u4f7f\u7528\u200b\u8ba1\u7b97\u673a\u7f51\u7edc\u200b\u7684\u200b\u8f6f\u786c\u4ef6\u200b\u8d44\u6e90\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u4e3b\u673a\u200b\u6765\u8bf4\u200b\uff0c\u200b\u7f51\u7edc\u200b\u53ea\u662f\u200b\u4e00\u79cd\u200b I/O \u200b\u8bbe\u5907\u200b\u3002\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e3b\u673a\u200b\u4f7f\u7528\u200b DMA \u200b\u6280\u672f\u200b\u5c06\u200b\u7f51\u7edc\u200b\u6570\u636e\u200b\u901a\u8fc7\u200b I/O \u200b\u603b\u7ebf\u200b\u548c\u200b\u5b58\u50a8\u5668\u200b\u603b\u7ebf\u200b\u4ece\u200b\u9002\u914d\u5668\u200b\u590d\u5236\u5230\u200b\u4e3b\u5b58\u200b\uff08\u200b\u53cd\u4e4b\u4ea6\u7136\u200b\uff09\uff1a</p> <p> \u200b\u7f51\u7edc\u200b\u662f\u200b\u6309\u200b\u5730\u7406\u200b\u90bb\u8fd1\u200b\u5ea6\u200b\u7ec4\u7ec7\u200b\u7684\u200b\u5206\u5c42\u200b\u7cfb\u7edf\u200b\uff0c\u200b\u5176\u200b\u6700\u4f4e\u200b\u5c42\u200b\u662f\u200b\u8986\u76d6\u200b\u4e00\u4e2a\u200b\u5efa\u7b51\u7269\u200b\u6216\u200b\u6821\u56ed\u200b\u7684\u200b\u5c40\u57df\u7f51\u200b\uff08Local Area Network\uff0cLAN\uff09\u3002\u200b\u8fc4\u4eca\u4e3a\u6b62\u200b\u6700\u200b\u6d41\u884c\u200b\u7684\u200b\u5c40\u57df\u7f51\u200b\u6280\u672f\u200b\u662f\u200b\u4ee5\u592a\u7f51\u200b\uff08Ethernet\uff09\uff1a</p> <p> \u200b\u5728\u200b\u66f4\u200b\u9ad8\u5c42\u200b\uff0c\u200b\u591a\u4e2a\u200b\u4e92\u4e0d\u200b\u8fde\u901a\u200b\u7684\u200b\u5c40\u57df\u7f51\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8def\u7531\u5668\u200b\u8fde\u63a5\u200b\u4e3a\u200b\u4e92\u8054\u7f51\u200b\uff08Interconnected Network\uff0cInternet\uff09\uff0c\u200b\u800c\u200b\u591a\u4e2a\u200b\u8def\u7531\u5668\u200b\u70b9\u5bf9\u70b9\u200b\u8fde\u63a5\u200b\u4fbf\u200b\u5f62\u6210\u200b\u4e86\u200b\u5e7f\u57df\u7f51\u200b\uff08Wide Area Network\uff0cWAN\uff09\uff1a</p> <p> \u200b\u4e92\u8054\u7f51\u200b\u53ef\u4ee5\u200b\u7531\u200b\u4f7f\u7528\u200b\u5b8c\u5168\u200b\u4e0d\u540c\u200b\u4e14\u200b\u4e0d\u200b\u517c\u5bb9\u200b\u6280\u672f\u200b\u7684\u200b\u5c40\u57df\u7f51\u200b\u548c\u200b\u5e7f\u57df\u7f51\u200b\u7ec4\u6210\u200b\uff0c\u200b\u8fd9\u200b\u662f\u200b\u5b83\u200b\u7684\u200b\u4e00\u4e2a\u200b\u5173\u952e\u200b\u7279\u6027\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u5728\u200b\u6bcf\u53f0\u200b\u4e3b\u673a\u200b\u548c\u200b\u8def\u7531\u5668\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u534f\u8bae\u200b\u8f6f\u4ef6\u200b\uff08Protocol Software\uff09\u200b\u6765\u200b\u6d88\u9664\u200b\u4e0d\u540c\u200b\u7f51\u7edc\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5dee\u5f02\u200b\u3002\u200b\u8be5\u8f6f\u4ef6\u200b\u5b9e\u73b0\u200b\u7684\u200b\u534f\u8bae\u200b\u5c06\u200b\u7ba1\u7406\u200b\u4e3b\u673a\u200b\u548c\u200b\u8def\u7531\u5668\u200b\u5982\u4f55\u200b\u534f\u4f5c\u200b\u4ee5\u200b\u4f20\u8f93\u6570\u636e\u200b\uff0c\u200b\u5b83\u200b\u5fc5\u987b\u200b\u63d0\u4f9b\u200b\u4e24\u4e2a\u200b\u57fa\u672c\u529f\u80fd\u200b\uff1a</p> <ul> <li>\u200b\u547d\u540d\u200b\u65b9\u6848\u200b\uff08Naming Scheme\uff09\uff1a\u200b\u4e3a\u200b\u4e3b\u673a\u200b\u5730\u5740\u200b\u5b9a\u4e49\u200b\u7edf\u4e00\u200b\u7684\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5e76\u200b\u4e3a\u200b\u6bcf\u53f0\u200b\u4e3b\u673a\u200b\u5206\u914d\u200b\u81f3\u5c11\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\u5b83\u200b\u7684\u200b\u4e92\u8054\u7f51\u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u4ea4\u4ed8\u200b\u673a\u5236\u200b\uff08Delivery Mechanism\uff09\uff1a\u200b\u5b9a\u4e49\u200b\u4e00\u79cd\u200b\u7edf\u4e00\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5c06\u200b\u6570\u636e\u4f4d\u200b\u5c01\u88c5\u200b\u4e3a\u200b\u82e5\u5e72\u4e2a\u200b\u5757\u200b\uff0c\u200b\u5373\u200b\u6570\u636e\u5305\u200b\uff08Packet\uff09\u3002\u200b\u5176\u200b\u5927\u5c0f\u200b\u548c\u6e90\u200b/\u200b\u76ee\u7684\u200b\u4e3b\u673a\u200b\u5730\u5740\u200b\u4f4d\u4e8e\u200b\u5305\u200b\u7684\u200b\u5934\u90e8\u200b\uff08Header\uff09\uff0c\u200b\u800c\u6e90\u200b\u4e3b\u673a\u200b\u53d1\u9001\u200b\u7684\u200b\u6570\u636e\u4f4d\u200b\u5219\u200b\u5728\u200b\u6709\u6548\u200b\u8d1f\u8f7d\u200b\uff08Payload\uff09\u200b\u4e4b\u4e2d\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch11/#ip","title":"\u5168\u7403\u200b IP \u200b\u4e92\u8054\u7f51","text":"<p> \u200b\u51e0\u4e4e\u200b\u6240\u6709\u200b\u7684\u200b\u73b0\u4ee3\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u90fd\u200b\u652f\u6301\u200b TCP/IP \u200b\u534f\u8bae\u200b\uff08Transmission Control Protocol/Internet Protocol\uff09\uff0c\u200b\u56e0\u6b64\u200b\u6bcf\u53f0\u200b\u4e92\u8054\u7f51\u200b\u4e3b\u673a\u200b\u4e0a\u5747\u200b\u8fd0\u884c\u200b\u7740\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u8be5\u200b\u534f\u8bae\u200b\u7684\u200b\u8f6f\u4ef6\u200b\u3002\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u4f7f\u7528\u200b Socket \u200b\u63a5\u53e3\u51fd\u6570\u200b\u548c\u200b Unix I/O \u200b\u51fd\u6570\u200b\u6df7\u5408\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\u3002\u200b\u524d\u8005\u200b\u901a\u5e38\u200b\u4e3a\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u8bf7\u6c42\u200b\u5185\u6838\u200b\uff08Trap into Kernel\uff09\u200b\u8c03\u7528\u200b TCP/IP \u200b\u4e2d\u200b\u7684\u200b\u5404\u79cd\u200b\u5185\u6838\u200b\u6001\u51fd\u6570\u200b\u3002</p> <p>\u200b\u5728\u200b\u7a0b\u5e8f\u5458\u200b\u770b\u6765\u200b\uff0c\u200b\u4e92\u8054\u7f51\u200b\u662f\u200b\u5177\u6709\u200b\u4ee5\u4e0b\u200b\u5c5e\u6027\u200b\u7684\u200b\u4e3b\u673a\u200b\u96c6\u5408\u200b\uff1a</p> <ul> <li>\u200b\u6240\u6709\u200b\u4e3b\u673a\u200b\u5747\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u7ec4\u200b 32 \u200b\u4f4d\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u6240\u6709\u200b IP \u200b\u5730\u5740\u200b\u5747\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u7ec4\u200b\u6807\u8bc6\u7b26\u200b\uff0c\u200b\u5373\u200b\u57df\u540d\u200b\uff08Domain Name\uff09\uff1b</li> <li>\u200b\u4e00\u53f0\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8fde\u63a5\u200b\uff08Connection\uff09\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u4efb\u4f55\u200b\u4e3b\u673a\u200b\u4e0a\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u901a\u4fe1\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch11/#ip_1","title":"IP \u200b\u5730\u5740","text":"<p>IP \u200b\u5730\u5740\u200b\u662f\u200b\u4e00\u4e2a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7684\u200b 32 \u200b\u4f4d\u200b\u6574\u6570\u200b\u3002\u200b\u7531\u4e8e\u200b\u5386\u53f2\u200b\u539f\u56e0\u200b\uff0c\u200b\u7f51\u7edc\u200b\u7a0b\u5e8f\u200b\u5c06\u200b\u5176\u200b\u5b58\u50a8\u200b\u5728\u200b\u5982\u4e0b\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\uff1a</p> <pre><code>/* IP address structure */\nstruct in_addr {\n    uint32_t  s_addr; /* Address in network byte order (big-endian) */\n};\n</code></pre> <p>\u200b\u4e92\u8054\u7f51\u200b\u4e2d\u200b\u4e3b\u673a\u200b\u5b58\u50a8\u200b\u5b57\u8282\u200b\u7684\u200b\u987a\u5e8f\u200b\u53ef\u80fd\u200b\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200b TCP/IP \u200b\u5fc5\u987b\u200b\u4e3a\u200b\u6574\u578b\u200b\u6570\u636e\u9879\u200b\uff08\u200b\u5982\u200b\u6570\u636e\u5305\u200b\u5934\u90e8\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\uff09\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u7edf\u4e00\u200b\u7684\u200b\u7f51\u7edc\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\uff08\u200b\u5927\u200b\u7aef\u200b\uff09\u3002\u200b\u5373\u4f7f\u200b\u4e3b\u673a\u200b\u7684\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\u662f\u200b\u5c0f\u7aef\u200b\uff0c<code>in_addr</code>\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u7684\u200b IP \u200b\u5730\u5740\u200b\u4e5f\u200b\u4f1a\u200b\u4ee5\u200b\u7f51\u7edc\u200b\u5b57\u8282\u200b\u987a\u5e8f\u5b58\u50a8\u200b\u3002Unix \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u7528\u4e8e\u200b\u8f6c\u6362\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>#include &lt;arpa/inet.h&gt;\n// host to network\nuint32_t htonl(uint32_t hostlong);\nuint16_t htons(uint16_t hostshort);\n// Returns: value in network byte order\n\n// network to host\nuint32_t ntohl(uint32_t netlong);\nuint16_t ntohs(unit16_t netshort);\n// Returns: value in host byte order\n</code></pre> <p>\u200b\u4e3a\u4e86\u200b\u4fbf\u4e8e\u200b\u4eba\u7c7b\u200b\u9605\u8bfb\u200b\uff0cIP \u200b\u5730\u5740\u200b\u901a\u5e38\u200b\u4ee5\u70b9\u200b\u5206\u200b\u5341\u8fdb\u5236\u200b\uff08Dotted-Decimal\uff09\u200b\u7684\u200b\u5f62\u5f0f\u200b\u8868\u793a\u200b\u3002\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u51fd\u6570\u200b<code>inet_pton</code>\u200b\u548c\u200b<code>inet_ntop</code>\u200b\u5bf9\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u65b9\u5f0f\u200b\u8fdb\u884c\u200b\u8f6c\u6362\u200b\uff1a</p> <pre><code>#include &lt;arpa/inet.h&gt;\nint inet_pton(AF_INET, const char *src, void *dst);\n// Returns: 1 if OK, 0 if src is invalid dotted decimal, \u22121 on error\n\nconst char *inet_ntop(AF_INET, const void *src, char *dst,\n                      socklen_t size);\n// Returns: pointer to a dotted-decimal string if OK, NULL on error\n</code></pre>"},{"location":"core/csapp/ch11/#_3","title":"\u57df\u540d","text":"<p>\u200b\u50cf\u200b IP \u200b\u5730\u5740\u200b\u8fd9\u6837\u200b\u8f83\u5927\u200b\u7684\u200b\u6574\u6570\u200b\u5f88\u96be\u200b\u8ba9\u200b\u4eba\u200b\u8bb0\u4f4f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e92\u8054\u7f51\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u66f4\u52a0\u200b\u4eba\u6027\u5316\u200b\u7684\u200b\u57df\u540d\u200b\u96c6\u5408\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u4e0e\u200b IP \u200b\u5730\u5740\u6620\u5c04\u200b\u3002\u200b\u57df\u540d\u200b\u662f\u200b\u7531\u200b\u53e5\u70b9\u200b\u5206\u9694\u200b\u7684\u200b\u5355\u8bcd\u200b\uff08\u200b\u5b57\u6bcd\u200b\u3001\u200b\u6570\u5b57\u200b\u548c\u200b\u7834\u6298\u53f7\u200b\uff09\u200b\u5e8f\u5217\u200b\uff0c\u200b\u5982\u200b<code>whaleshark.ics.cs.cmu.edu</code>\u3002\u200b\u57df\u540d\u200b\u7684\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch11/#_4","title":"\u8fde\u63a5","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u901a\u8fc7\u200b\u8fde\u63a5\u200b\u6765\u200b\u6536\u53d1\u200b\u5b57\u8282\u200b\u6d41\u200b\u5e76\u200b\u8fdb\u884c\u200b\u901a\u4fe1\u200b\u3002\u200b\u8fde\u63a5\u200b\u662f\u200b\u70b9\u5bf9\u70b9\u200b\uff0c\u200b\u5168\u53cc\u5de5\u200b\uff08\u200b\u6570\u636e\u200b\u53ef\u4ee5\u200b\u540c\u65f6\u200b\u5728\u200b\u4e24\u4e2a\u200b\u65b9\u5411\u200b\u4e0a\u200b\u4f20\u8f93\u200b\uff09\u200b\u4e14\u200b\u53ef\u9760\u200b\u7684\u200b\u2014\u2014\u200b\u9664\u975e\u200b\u53d1\u751f\u200b\u4e00\u4e9b\u200b\u707e\u96be\u6027\u200b\u7684\u200b\u6545\u969c\u200b\u3002</p> <p>Socket \u200b\u662f\u200b\u8fde\u63a5\u200b\u7684\u200b\u7aef\u70b9\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Socket \u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e86\u200b\u4e00\u4e2a\u200b Socket \u200b\u5730\u5740\u200b\u3002\u200b\u8be5\u200b\u5730\u5740\u200b\u7531\u200b IP \u200b\u5730\u5740\u200b\u548c\u200b 16 \u200b\u4f4d\u200b\u6574\u578b\u200b\u7684\u200b\u7aef\u53e3\u200b\uff08Port\uff09\u200b\u7ec4\u6210\u200b\uff0c\u200b\u8868\u793a\u200b\u4e3a\u200b\uff1a<code>address:port</code>\u3002</p> <p>\u200b\u5ba2\u6237\u7aef\u200b Socket \u200b\u5730\u5740\u200b\u4e2d\u200b\u7684\u200b\u7aef\u53e3\u200b\u901a\u5e38\u200b\u662f\u200b\u5176\u200b\u53d1\u8d77\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u65f6\u200b\u7531\u200b\u5185\u6838\u200b\u81ea\u52a8\u200b\u5206\u914d\u200b\u7684\u200b\uff0c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u4e34\u65f6\u200b\u7aef\u53e3\u200b\uff08Ephemeral Port\uff09\uff1b\u200b\u800c\u200b\u670d\u52a1\u5668\u200b Socket \u200b\u5730\u5740\u200b\u4e2d\u200b\u7684\u200b\u7aef\u53e3\u200b\u5219\u200b\u901a\u5e38\u200b\u4e0e\u200b\u670d\u52a1\u200b\u6c38\u4e45\u200b\u5173\u8054\u200b\uff0c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u77e5\u540d\u200b\u7aef\u53e3\u200b\uff08Well-known Port\uff09\u3002</p> <p>\u200b\u8fde\u63a5\u200b\u7531\u200b\u4e24\u4e2a\u200b\u7aef\u70b9\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\uff08\u200b\u5373\u200b Socket Pair\uff09\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5143\u7ec4\u200b\u8868\u793a\u200b\u4e3a\u200b\uff1a<code>(cliaddr:cliport, servaddr:servport)</code>\u3002</p> <p></p>"},{"location":"core/csapp/ch11/#socket","title":"Socket \u200b\u63a5\u53e3","text":"<p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0cSocket \u200b\u63a5\u53e3\u200b\u662f\u200b\u4e00\u7ec4\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4e0e\u200b Unix I/O \u200b\u51fd\u6570\u200b\u4e00\u540c\u200b\u7528\u4e8e\u200b\u6784\u5efa\u200b\u7f51\u7edc\u5e94\u7528\u200b\u7a0b\u5e8f\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch11/#socket_1","title":"Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53","text":"<p>\u200b\u4ece\u200b Linux \u200b\u5185\u6838\u200b\u7684\u200b\u89d2\u5ea6\u200b\u6765\u770b\u200b\uff0cSocket \u200b\u662f\u200b\u8fde\u63a5\u200b\u7684\u200b\u4e00\u4e2a\u200b\u7aef\u70b9\u200b\uff1b\u200b\u800c\u200b\u4ece\u200b Linux \u200b\u7a0b\u5e8f\u200b\u7684\u200b\u89d2\u5ea6\u200b\u6765\u770b\u200b\uff0cSocket \u200b\u5219\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u63cf\u8ff0\u7b26\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u3002IPv4 Socket \u200b\u5730\u5740\u200b\u5b58\u50a8\u200b\u5728\u200b <code>sockaddr_in</code>\u200b\u7c7b\u578b\u200b\u7684\u200b 16 \u200b\u5b57\u8282\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\uff1a</p> <pre><code>/* IP socket address structure */\nstruct sockaddr_in  {\n    uint16_t        sin_family;  /* Protocol family (always AF_INET) */\n    uint16_t        sin_port;    /* Port number in network byte order */\n    struct in_addr  sin_addr;    /* IP address in network byte order */\n    unsigned char   sin_zero[8]; /* Pad to sizeof(struct sockaddr) */\n};\n</code></pre> <p><code>sin_family</code>\u200b\u5b57\u6bb5\u200b\u4e3a\u200b<code>AF_INET</code>\uff0c<code>sin_port</code>\u200b\u5b57\u6bb5\u200b\u4e3a\u200b 16 \u200b\u4f4d\u200b\u7aef\u53e3\u53f7\u200b\uff0c<code>sin_addr</code>\u200b\u5b57\u6bb5\u200b\u4e2d\u200b\u5305\u542b\u200b 32 \u200b\u4f4d\u200b IP \u200b\u5730\u5740\u200b\u3002IP \u200b\u5730\u5740\u200b\u548c\u200b\u7aef\u53e3\u53f7\u200b\u59cb\u7ec8\u200b\u4ee5\u200b\u7f51\u7edc\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\uff08\u200b\u5927\u200b\u7aef\u200b\uff09\u200b\u5b58\u50a8\u200b\u3002</p> <p>\u200b\u5728\u200b\u8c03\u7528\u51fd\u6570\u200b<code>connect</code>\u3001<code>bind</code>\u200b\u548c\u200b<code>accept</code>\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u4f20\u5165\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u7531\u4e8e\u200b Socket \u200b\u6709\u200b\u591a\u79cd\u7c7b\u578b\u200b\uff0c\u200b\u4e0d\u540c\u200b\u534f\u8bae\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7c7b\u578b\u200b\u4e5f\u200b\u6709\u6240\u4e0d\u540c\u200b\u3002\u200b\u5982\u200b IPv6 Socket \u200b\u5730\u5740\u200b\u5b58\u50a8\u200b\u5728\u200b<code>sockaddr_in6</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\uff0c<code>sin_family</code>\u200b\u5b57\u6bb5\u200b\u4e3a\u200b<code>AF_INET6</code>\uff1bUnix Domain Socket \u200b\u5730\u5740\u200b\u5b58\u50a8\u200b\u5728\u200b<code>sockaddr_un</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\uff0c<code>sin_family</code>\u200b\u5b57\u6bb5\u200b\u4e3a\u200b<code>AF_UNIX</code>\u3002\u200b\u7136\u800c\u200b\u5728\u200b Socket \u200b\u63a5\u53e3\u200b\u8bbe\u8ba1\u8005\u200b\u6240\u5904\u200b\u7684\u200b\u65f6\u4ee3\u200b\uff0cC \u200b\u8fd8\u200b\u5e76\u200b\u4e0d\u200b\u652f\u6301\u200b\u4f7f\u7528\u200b<code>void *</code>\u200b\u6307\u9488\u200b\u3002\u200b\u4e8e\u662f\u200b\u4ed6\u4eec\u200b\u53ea\u597d\u200b\u91cd\u65b0\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u9002\u7528\u200b\u4e8e\u200b\u6240\u6709\u200b\u534f\u8bae\u200b\u7684\u200b<code>sockaddr</code>\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c\u200b\u7136\u540e\u200b\u8981\u6c42\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5c06\u200b\u4efb\u4f55\u200b\u4e0e\u200b\u534f\u8bae\u200b\u6709\u5173\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6307\u9488\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u8fd9\u79cd\u200b\u901a\u7528\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6307\u9488\u200b\uff1a</p> <pre><code>/* Generic socket address structure (for connect, bind, and accept) */\nstruct sockaddr {\n    uint16_t  sa_family;    /* Protocol family */\n    char      sa_data[14];  /* Address data  */\n};\n</code></pre>"},{"location":"core/csapp/ch11/#socket_2","title":"<code>socket</code>\u200b\u51fd\u6570","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u4f7f\u7528\u200b<code>socket</code>\u200b\u51fd\u6570\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b Socket \u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\nint socket(int domain, int type, int protocol);\n// Returns: nonnegative descriptor if OK, \u22121 on erro\n</code></pre> <p>\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u5e0c\u671b\u200b Socket \u200b\u6210\u4e3a\u200b\u8fde\u63a5\u200b\u7684\u200b\u7aef\u70b9\u200b\uff0c\u200b\u90a3\u4e48\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u53c2\u6570\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>clientfd = Socket(AF_INET, SOCK_STREAM, 0);\n</code></pre> <p>\u200b\u5176\u4e2d\u200b\uff0c<code>AF_INET</code>\u200b\u4ee3\u8868\u200b\u4f7f\u7528\u200b 32 \u200b\u4f4d\u200b IP \u200b\u5730\u5740\u200b\uff0c<code>SOCK_STREAM</code>\u200b\u8868\u793a\u200b Socket \u200b\u5c06\u200b\u6210\u4e3a\u200b\u8fde\u63a5\u200b\u7684\u200b\u7aef\u70b9\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b<code>clientfd</code>\u200b\u53ea\u662f\u200b\u90e8\u5206\u200b\u6253\u5f00\u200b\uff0c\u200b\u8fd8\u200b\u4e0d\u80fd\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u200b\u3002</p>"},{"location":"core/csapp/ch11/#connect","title":"<code>connect</code>\u200b\u51fd\u6570","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u8c03\u7528\u200b<code>connect</code>\u200b\u51fd\u6570\u200b\u4e0e\u200b\u670d\u52a1\u5668\u200b\u5efa\u7acb\u200b\u8fde\u63a5\u200b\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\nint connect(int clientfd, const struct sockaddr *addr,\n            socklen_t addrlen);\n//Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c1d\u8bd5\u200b\u8fde\u63a5\u200b Socket \u200b\u5730\u5740\u200b\u4e3a\u200b<code>addr</code>\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u53c2\u6570\u200b<code>addrlen</code>\u200b\u662f\u200b\u7ed3\u6784\u200b\u4f53\u200b<code>sockaddr_in</code>\u200b\u7684\u200b\u5927\u5c0f\u200b\u3002<code>connect</code>\u200b\u51fd\u6570\u200b\u5728\u200b\u8fde\u63a5\u200b\u5efa\u7acb\u200b\u6216\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\u524d\u4f1a\u200b\u4e00\u76f4\u200b\u963b\u585e\u200b\uff0c\u200b\u82e5\u200b\u5efa\u7acb\u200b\u6210\u529f\u200b\u5219\u200b Socket \u200b\u63cf\u8ff0\u7b26\u200b<code>clientfd</code>\u200b\u4fbf\u200b\u53ef\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u200b\u3002</p>"},{"location":"core/csapp/ch11/#bind","title":"<code>bind</code>\u200b\u51fd\u6570","text":"<p><code>bind</code>\u200b\u51fd\u6570\u200b\u8bf7\u6c42\u200b\u5185\u6838\u200b\u5c06\u200b\u53c2\u6570\u200b<code>addr</code>\u200b\u4e2d\u200b\u7684\u200b\u670d\u52a1\u5668\u200b Socket \u200b\u5730\u5740\u200b\u4e0e\u200b Socket \u200b\u63cf\u8ff0\u7b26\u200b<code>sockfd</code>\u200b\u76f8\u5173\u8054\u200b\uff0c\u200b\u53c2\u6570\u200b<code>addrlen</code>\u200b\u662f\u200b\u7ed3\u6784\u200b\u4f53\u200b<code>sockaddr_in</code>\u200b\u7684\u200b\u5927\u5c0f\u200b\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\nint bind(int sockfd, const struct sockaddr *addr,\n         socklen_t addrlen);\n// Returns: 0 if OK, \u22121 on error\n</code></pre>"},{"location":"core/csapp/ch11/#listen","title":"<code>listen</code>\u200b\u51fd\u6570","text":"<p>\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5185\u6838\u200b\u5047\u5b9a\u200b<code>socket</code>\u200b\u51fd\u6570\u200b\u521b\u5efa\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u662f\u200b\u7528\u4e8e\u200b\u5ba2\u6237\u7aef\u200b\u8fde\u63a5\u200b\u7684\u200b\u3002\u200b\u56e0\u6b64\u200b\u670d\u52a1\u5668\u200b\u9700\u8981\u200b\u8c03\u7528\u200b<code>listen</code>\u200b\u51fd\u6570\u200b\u544a\u8bc9\u200b\u5185\u6838\u200b\u53c2\u6570\u200b<code>sockfd</code>\u200b\u7528\u4e8e\u200b\u670d\u52a1\u5668\u200b\u800c\u200b\u975e\u200b\u5ba2\u6237\u7aef\u200b\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\nint listen(int sockfd, int backlog);\n// Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>backlog</code>\u200b\u662f\u200b\u5185\u6838\u200b\u5f00\u59cb\u200b\u62d2\u7edd\u8bf7\u6c42\u200b\u524d\u200b\u5e94\u5f53\u200b\u6392\u961f\u200b\u7684\u200b\u672a\u200b\u5b8c\u6210\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u6570\u200b\uff0c\u200b\u901a\u5e38\u200b\u8bbe\u200b\u4e3a\u200b 1024\u3002</p>"},{"location":"core/csapp/ch11/#accept","title":"<code>accept</code>\u200b\u51fd\u6570","text":"<p>\u200b\u670d\u52a1\u5668\u200b\u8c03\u7528\u200b<code>accept</code>\u200b\u51fd\u6570\u200b\u7b49\u5f85\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u5230\u8fbe\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b<code>listenfd</code>\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5ba2\u6237\u7aef\u200b Socket \u200b\u5730\u5740\u200b\u5199\u5165\u200b\u5230\u200b<code>addr</code>\u200b\u4e2d\u200b\uff0c\u200b\u6700\u540e\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u53ef\u200b\u4f7f\u7528\u200b Unix I/O \u200b\u51fd\u6570\u200b\u4e0e\u200b\u5ba2\u6237\u7aef\u200b\u901a\u4fe1\u200b\u7684\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\nint accept(int listenfd, struct sockaddr *addr, int *addrlen);\n// Returns: nonnegative connected descriptor if OK, \u22121 on error\n</code></pre> <p>\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b\u4f5c\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u53d1\u8d77\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u7684\u200b\u7aef\u70b9\u200b\uff0c\u200b\u901a\u5e38\u200b\u53ea\u4f1a\u200b\u521b\u5efa\u200b\u4e00\u6b21\u200b\uff0c\u200b\u5728\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u751f\u547d\u5468\u671f\u200b\u5185\u200b\u5b58\u5728\u200b\uff1b\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u662f\u200b\u5ba2\u6237\u7aef\u200b\u4e0e\u200b\u670d\u52a1\u5668\u4e4b\u95f4\u200b\u5df2\u200b\u5efa\u7acb\u200b\u7684\u200b\u8fde\u63a5\u200b\u7684\u200b\u7aef\u70b9\u200b\uff0c\u200b\u5728\u200b\u6bcf\u6b21\u200b\u670d\u52a1\u5668\u200b\u63a5\u53d7\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u65f6\u200b\u521b\u5efa\u200b\uff0c\u200b\u5e76\u4e14\u200b\u4ec5\u200b\u5728\u200b\u670d\u52a1\u5668\u200b\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u65f6\u200b\u5b58\u5728\u200b\uff1a</p> <p> \u200b\u5728\u200b\u8fde\u63a5\u200b\u5efa\u7acb\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u53ef\u4ee5\u200b\u5206\u522b\u200b\u901a\u8fc7\u200b\u8bfb\u5199\u200b<code>clientfd</code>\u200b\u548c\u200b<code>connfd</code>\u200b\u6765\u200b\u4f20\u8f93\u6570\u636e\u200b\u3002</p>"},{"location":"core/csapp/ch11/#_5","title":"\u4e3b\u673a\u200b\u548c\u200b\u670d\u52a1\u200b\u8f6c\u6362","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b<code>getaddrinfo</code>\u200b\u548c\u200b<code>getnameinfo</code>\u200b\u51fd\u6570\u200b\u4e0e\u200b Socket \u200b\u63a5\u53e3\u51fd\u6570\u200b\u7ed3\u5408\u200b\uff0c\u200b\u7f16\u5199\u200b\u9002\u7528\u200b\u4e8e\u200b\u4efb\u4f55\u200b\u7248\u672c\u200b IP \u200b\u534f\u8bae\u200b\u7684\u200b\u7f51\u7edc\u200b\u7a0b\u5e8f\u200b\u3002</p>"},{"location":"core/csapp/ch11/#getaddrinfo","title":"<code>getaddrinfo</code>\u200b\u51fd\u6570","text":"<p><code>getaddrinfo</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u4e3b\u673a\u540d\u200b\uff08\u200b\u6216\u200b\u4e3b\u673a\u200b\u5730\u5740\u200b\uff09\u200b\u548c\u200b\u670d\u52a1\u200b\u540d\u200b\uff08\u200b\u6216\u200b\u7aef\u53e3\u53f7\u200b\uff09\u200b\u8f6c\u6362\u200b\u4e3a\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\n\nstruct addrinfo {\n    int     ai_flags;           /* Hints argument flags */\n    int     ai_family;          /* First arg to socket function */\n    int     ai_socktype;        /* Second arg to socket function */\n    char    ai_protocol;        /* Third arg to socket function  */\n    char    *ai_canonname;      /* Canonical hostname */\n    size_t  ai_addrlen;         /* Size of ai_addr struct */\n    struct  sockaddr *ai_addr;  /* Ptr to socket address structure */\n    struct  addrinfo *ai_next;  /* Ptr to next item in linked list */      \n}\n\nint getaddrinfo(const char *host, const char *service,\n                const struct addrinfo *hints,\n                struct addrinfo **result);\n// Returns: 0 if OK, nonzero error code on error\n</code></pre> <p>\u200b\u8be5\u200b\u51fd\u6570\u200b\u4f1a\u200b\u6839\u636e\u200b<code>hints</code>\u200b\u6307\u5b9a\u200b\u7684\u200b\u89c4\u8303\u200b\u5206\u914d\u200b\u5e76\u200b\u521d\u59cb\u5316\u200b\u4e00\u4e2a\u200b<code>addrinfo</code>\u200b\u7ed3\u6784\u200b\u4f53\u200b\u94fe\u8868\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6bcf\u4e2a\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b<code>ai_addr</code>\u200b\u5b57\u6bb5\u200b\u90fd\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u4e0e\u200b<code>host</code>\u200b\u548c\u200b<code>service</code>\u200b\u5bf9\u5e94\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\uff0c<code>result</code>\u200b\u6307\u5411\u200b\u94fe\u8868\u200b\u5934\u90e8\u200b\uff1a</p> <p> \u200b\u53c2\u6570\u200b<code>host</code>\u200b\u53ef\u4ee5\u200b\u662f\u200b\u57df\u540d\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u6570\u5b57\u200b\u5730\u5740\u200b\uff08\u200b\u5982\u70b9\u200b\u5206\u200b\u5341\u8fdb\u5236\u200b IP \u200b\u5730\u5740\u200b\uff09\uff1b\u200b\u53c2\u6570\u200b<code>service</code>\u200b\u53ef\u4ee5\u200b\u662f\u200b\u670d\u52a1\u200b\u540d\u79f0\u200b\uff08\u200b\u5982\u200b <code>http</code>\uff09\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5341\u8fdb\u5236\u200b\u7aef\u53e3\u53f7\u200b\u3002\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u4e0d\u200b\u9700\u8981\u200b Socket \u200b\u5730\u5740\u200b\u4e2d\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c06\u200b<code>host</code>\u200b\u8bbe\u200b\u4e3a\u200b<code>NULL</code>\u3002\u200b\u5bf9\u4e8e\u200b\u670d\u52a1\u200b\u540d\u200b\u6765\u8bf4\u200b\u4e5f\u200b\u662f\u200b\u5982\u6b64\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u4e24\u8005\u200b\u4e0d\u80fd\u200b\u540c\u65f6\u200b\u4e3a\u200b<code>NULL</code>\u3002</p> <p>\u200b\u5ba2\u6237\u7aef\u200b\u5728\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u540e\u200b\u4f1a\u200b\u904d\u5386\u200b\u4e0a\u8ff0\u200b\u94fe\u8868\u200b\uff0c\u200b\u4f9d\u6b21\u200b\u4f7f\u7528\u200b\u6bcf\u4e2a\u200b Socket \u200b\u5730\u5740\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u200b\u8c03\u7528\u200b<code>socket</code>\u200b\u548c\u200b<code>connect</code>\u200b\u76f4\u81f3\u200b\u6210\u529f\u200b\u5e76\u200b\u5efa\u7acb\u200b\u8fde\u63a5\u200b\uff1b\u200b\u670d\u52a1\u5668\u200b\u5728\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u540e\u200b\u4f1a\u200b\u904d\u5386\u200b\u4e0a\u8ff0\u200b\u94fe\u8868\u200b\uff0c\u200b\u4f9d\u6b21\u200b\u4f7f\u7528\u200b\u6bcf\u4e2a\u200b Socket \u200b\u5730\u5740\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u200b\u8c03\u7528\u200b<code>socket</code>\u200b\u548c\u200b<code>bind</code>\u200b\u76f4\u81f3\u200b\u6210\u529f\u200b\u4e14\u200b\u63cf\u8ff0\u7b26\u200b\u88ab\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u4e00\u4e2a\u200b\u6709\u6548\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u7ec6\u5fc3\u200b\u7684\u200b\u8bfb\u8005\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u7591\u60d1\u200b\u4e3a\u4ec0\u4e48\u200b<code>getaddrinfo</code>\u200b\u4f1a\u4e3a\u200b\u540c\u4e00\u4e2a\u200b<code>host</code>\u200b\u548c\u200b<code>service</code>\u200b\u521d\u59cb\u5316\u200b\u591a\u4e2a\u200b<code>addrinfo</code>\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\uff1a\u200b\u4e3b\u673a\u200b\u53ef\u80fd\u200b\u662f\u200b\u591a\u200b\u5bbf\u4e3b\u200b\u7684\u200b\uff08Multihomed\uff09\uff0c\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u591a\u79cd\u200b\u534f\u8bae\u200b\uff08\u200b\u5982\u200b IPv4 \u200b\u548c\u200b IPv6\uff09\u200b\u8bbf\u95ee\u200b\uff1b\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e0d\u540c\u200b\u7684\u200b Socket \u200b\u7c7b\u578b\u200b\uff08\u200b\u5982\u200b<code>SOCK_STREAM</code>\u200b\u548c\u200b<code>SOCK_DGRAM</code>\uff09\u200b\u8bbf\u95ee\u200b\u76f8\u540c\u200b\u7684\u200b\u670d\u52a1\u200b\u3002\u200b\u56e0\u6b64\u200b\u901a\u5e38\u200b\u6211\u4eec\u200b\u4f1a\u200b\u6839\u636e\u200b\u9700\u6c42\u200b\u8bbe\u7f6e\u200b<code>hints</code>\u200b\u53c2\u6570\u200b\uff0c\u200b\u4ee5\u200b\u4f7f\u200b\u51fd\u6570\u200b\u751f\u6210\u200b\u6211\u4eec\u200b\u671f\u671b\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u5f53\u200b<code>hints</code>\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u4f20\u9012\u200b\u65f6\u200b\uff0c\u200b\u53ea\u6709\u200b<code>ai_family</code>\u3001<code>ai_socktype</code>\u3001<code>ai_protocol</code>\u200b\u548c\u200b<code>ai_flags</code>\u200b\u5b57\u200b\u6bb5\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\uff0c\u200b\u5176\u4ed6\u200b\u5b57\u200b\u6bb5\u200b\u5fc5\u987b\u200b\u4e3a\u200b 0 \u200b\u6216\u200b<code>NULL</code>\u3002\u200b\u5728\u200b\u5b9e\u9645\u200b\u4f7f\u7528\u200b\u4e2d\u200b\uff0c\u200b\u6211\u4eec\u200b\u8c03\u7528\u200b <code>memset</code> \u200b\u51fd\u6570\u200b\u5c06\u200b<code>hints</code>\u200b\u5f52\u96f6\u200b\uff0c\u200b\u7136\u540e\u200b\u8bbe\u7f6e\u200b\u4ee5\u4e0b\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <ul> <li><code>ai_family</code>\u200b\u4e3a\u200b<code>AF_INET</code>\u200b\u65f6\u200b\uff0c\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u751f\u6210\u200b IPv4 Socket \u200b\u5730\u5740\u200b\uff1b<code>ai_family</code>\u200b\u4e3a\u200b<code>AF_INET6</code>\u200b\u65f6\u200b\uff0c\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u751f\u6210\u200b IPv6 Socket \u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u5bf9\u4e8e\u200b\u9762\u5411\u200b\u8fde\u63a5\u200b\u7684\u200b\u7f51\u7edc\u5e94\u7528\u200b\u7a0b\u5e8f\u200b\uff0c<code>ai_socktype</code>\u200b\u5e94\u5f53\u200b\u8bbe\u200b\u4e3a\u200b<code>SOCK_STREAM</code>\uff1b</li> <li><code>ai_flags</code>\u200b\u662f\u200b\u80fd\u591f\u200b\u4fee\u6539\u200b\u51fd\u6570\u200b\u9ed8\u8ba4\u200b\u884c\u4e3a\u200b\u7684\u200b\u4f4d\u200b\u63a9\u7801\u200b\uff0c\u200b\u4e3b\u8981\u200b\u5305\u62ec\u200b\uff1a</li> <li><code>AI_ADDRCONFIG</code>\uff1a\u200b\u4ec5\u5f53\u200b\u672c\u5730\u200b\u4e3b\u673a\u200b\u4f7f\u7528\u200b IPv4 \u200b\u65f6\u200b\u751f\u6210\u200b IPv4 Socket \u200b\u5730\u5740\u200b\uff1b</li> <li><code>AI_CANONNAME</code>\uff1a\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c<code>addrinfo</code>\u200b\u7ed3\u6784\u200b\u4f53\u5185\u200b\u7684\u200b<code>ai_canonname</code>\u200b\u5b57\u6bb5\u200b\u4e3a\u200b<code>NULL</code>\u3002\u200b\u82e5\u200b\u8bbe\u7f6e\u200b\u8be5\u200b\u63a9\u7801\u200b\uff0c\u200b\u51fd\u6570\u200b\u4f1a\u200b\u5c06\u200b\u94fe\u8868\u200b\u4e2d\u200b\u7b2c\u4e00\u4e2a\u200b<code>addrinfo</code>\u200b\u7ed3\u6784\u200b\u4f53\u5185\u200b\u7684\u200b<code>ai_canonname</code>\u200b\u5b57\u200b\u6bb5\u200b\u6307\u5411\u200b\u4e3b\u673a\u200b\u7684\u200b\u89c4\u8303\u200b\uff08\u200b\u5b98\u65b9\u200b\uff09\u200b\u540d\u79f0\u200b\uff08\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff09\uff1b</li> <li><code>AI_NUMERICSERV</code>\uff1a\u200b\u5f3a\u5236\u200b\u53c2\u6570\u200b<code>service</code>\u200b\u4f7f\u7528\u200b\u7aef\u53e3\u53f7\u200b\uff1b</li> <li><code>AI_PASSIVE</code>\uff1a\u200b\u670d\u52a1\u5668\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u751f\u6210\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u521b\u5efa\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u53c2\u6570\u200b<code>host</code>\u200b\u5e94\u5f53\u200b\u8bbe\u200b\u4e3a\u200b<code>NULL</code>\uff0c\u200b\u8868\u793a\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u6240\u6709\u200b IP \u200b\u5730\u5740\u200b\u5747\u200b\u53ef\u200b\u7528\u4e8e\u200b\u8fde\u63a5\u200b\uff08\u200b\u5373\u200b<code>INADDR_ANY</code>\u200b\u6216\u200b 0.0.0.0\uff09\uff1b</li> </ul> <p>\u200b\u5f53\u200b<code>getaddrinfo</code>\u200b\u521d\u59cb\u5316\u200b<code>addrinfo</code>\u200b\u7ed3\u6784\u200b\u4f53\u200b\u94fe\u8868\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u586b\u5145\u200b\u9664\u200b<code>ai_flags</code>\u200b\u4e4b\u5916\u200b\u7684\u200b\u6240\u6709\u200b\u5b57\u200b\u6bb5\u200b\u3002<code>ai_family</code>\u3001<code>ai_socktype</code>\u200b\u548c\u200b<code>ai_protocol</code>\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f20\u9012\u200b\u7ed9\u200b<code>socket</code>\u200b\u51fd\u6570\u200b\uff0c<code>ai_addr</code>\u200b\u548c\u200b<code>ai_addrlen</code>\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f20\u9012\u200b\u7ed9\u200b<code>connect</code>\u200b\u548c\u200b<code>bind</code>\u200b\u51fd\u6570\u200b\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u80fd\u591f\u200b\u4f7f\u7528\u200b\u5b83\u200b\u7f16\u5199\u200b\u9002\u7528\u200b\u4e8e\u200b\u4efb\u4f55\u200b\u7248\u672c\u200b IP \u200b\u534f\u8bae\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u3002</p> <p>\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\uff0c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u6700\u7ec8\u200b\u5fc5\u987b\u200b\u8c03\u7528\u200b<code>freeaddrinfo</code>\u200b\u51fd\u6570\u200b\u91ca\u653e\u200b\u94fe\u8868\u200b\uff1a</p> <pre><code>void freeaddrinfo(struct addrinfo *result);\n// Returns: nothing\n</code></pre> <p><code>getaddrinfo</code>\u200b\u51fd\u6570\u200b\u4f1a\u200b\u8fd4\u56de\u200b\u975e\u96f6\u200b\u9519\u8bef\u7801\u200b\uff0c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>gai_strerror</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u5176\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u6d88\u606f\u200b\u5b57\u7b26\u4e32\u200b\uff1a</p> <pre><code>const char *gai_strerror(int errcode);\n// Returns: error message\n</code></pre>"},{"location":"core/csapp/ch11/#getnameinfo","title":"<code>getnameinfo</code>\u200b\u51fd\u6570","text":"<p><code>getnameinfo</code>\u200b\u51fd\u6570\u200b\u662f\u200b<code>getaddrinfo</code>\u200b\u7684\u200b\u9006\u51fd\u6570\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b\u548c\u200b\u670d\u52a1\u200b\u540d\u200b\uff1a</p> <pre><code>#include &lt;sys/socket.h&gt;\n#include &lt;netdb.h&gt;\nint getnameinfo(const struct sockaddr *sa, socklen_t salen,\n                char *host, size_t hostlen,\n                char *service, size_t servlen, int flags);\n// Returns: 0 if OK, nonzero error code on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>sa</code>\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u4e3a\u200b<code>salen</code>\u200b\u5b57\u8282\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c<code>host</code>\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u4e3a\u200b<code>hostlen</code>\u200b\u5b57\u8282\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u800c\u200b<code>service</code>\u200b\u5219\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u4e3a\u200b<code>servlen</code>\u200b\u5b57\u8282\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b<code>sa</code>\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e3b\u673a\u540d\u200b\u548c\u200b\u670d\u52a1\u200b\u540d\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5b83\u4eec\u200b\u590d\u5236\u5230\u200b<code>host</code>\u200b\u548c\u200b<code>service</code>\u200b\u6307\u5411\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u3002\u200b\u5982\u679c\u200b\u8be5\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u975e\u96f6\u200b\u9519\u8bef\u4ee3\u7801\u200b\uff0c\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>gai_strerror</code>\u200b\u5c06\u200b\u5176\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u6d88\u606f\u200b\u5b57\u7b26\u4e32\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u4e0d\u200b\u9700\u8981\u200b\u4e3b\u673a\u540d\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c06\u200b<code>host</code>\u200b\u8bbe\u200b\u4e3a\u200b<code>NULL</code>\u3002\u200b\u5bf9\u4e8e\u200b\u670d\u52a1\u200b\u540d\u200b\u6765\u8bf4\u200b\u4e5f\u200b\u662f\u200b\u5982\u6b64\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u4e24\u8005\u200b\u4e0d\u80fd\u200b\u540c\u65f6\u200b\u4e3a\u200b<code>NULL</code>\u3002</p> <p>\u200b\u53c2\u6570\u200b<code>flags</code>\u200b\u662f\u200b\u4fee\u6539\u200b\u51fd\u6570\u200b\u9ed8\u8ba4\u200b\u884c\u4e3a\u200b\u7684\u200b\u4f4d\u200b\u63a9\u7801\u200b\uff0c\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li><code>NI_NUMERICHOST</code>\uff1a\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u51fd\u6570\u200b\u5c06\u200b\u5728\u200b<code>host</code>\u200b\u6307\u5411\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u57df\u540d\u200b\u3002\u200b\u82e5\u200b\u8bbe\u7f6e\u200b\u8be5\u200b\u63a9\u7801\u200b\uff0c\u200b\u51fd\u6570\u200b\u4f1a\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u6570\u5b57\u200b\u5730\u5740\u200b\u5b57\u7b26\u4e32\u200b\uff1b</li> <li><code>NI_NUMERICSERV</code>\uff1a\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u51fd\u6570\u200b\u5c06\u200b\u5728\u200b<code>/etc/services</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u67e5\u627e\u200b\u5e76\u200b\u751f\u6210\u200b\u670d\u52a1\u200b\u540d\u200b\u3002\u200b\u82e5\u200b\u8bbe\u7f6e\u200b\u8be5\u200b\u63a9\u7801\u200b\uff0c\u200b\u51fd\u6570\u200b\u4f1a\u200b\u8df3\u200b\u8fc7\u200b\u67e5\u627e\u200b\u5e76\u200b\u751f\u6210\u200b\u7aef\u53e3\u53f7\u200b\u3002</li> </ul> <p>\u200b\u5982\u4e0b\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b<code>getaddrinfo</code>\u200b\u548c\u200b<code>getnameinfo</code>\u200b\u51fd\u6570\u200b\u5b9e\u73b0\u200b\u57df\u540d\u89e3\u6790\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\nint main(int argc, char **argv)\n{\n    struct addrinfo *p, *listp, hints;\n    char buf[MAXLINE];\n    int rc, flags;\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;domain name&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    /* Get a list of addrinfo records */\n    memset(&amp;hints, 0, sizeof(struct addrinfo));\n    hints.ai_family = AF_INET;       /* IPv4 only */\n    hints.ai_socktype = SOCK_STREAM; /* Connections only */\n    if ((rc = getaddrinfo(argv[1], NULL, &amp;hints, &amp;listp)) != 0)\n    {\n        fprintf(stderr, \"getaddrinfo error: %s\\n\", gai_strerror(rc));\n        exit(1);\n    }\n\n    /* Walk the list and display each IP address */\n    flags = NI_NUMERICHOST; /* Display address string instead of domain name */\n    for (p = listp; p; p = p-&gt;ai_next)\n    {\n        getnameinfo(p-&gt;ai_addr, p-&gt;ai_addrlen, buf, MAXLINE, NULL, 0, flags);\n        printf(\"%s\\n\", buf);\n    }\n\n    /* Clean up */\n    freeaddrinfo(listp);\n    exit(0);\n}\n</code></pre>"},{"location":"core/csapp/ch11/#socket_3","title":"Socket \u200b\u63a5\u53e3\u200b\u7684\u200b\u8f85\u52a9\u200b\u51fd\u6570","text":"<p><code>getaddrinfo</code>\u200b\u548c\u200b Socket \u200b\u63a5\u53e3\u51fd\u6570\u200b\u5e76\u200b\u4e0d\u200b\u6613\u4e8e\u200b\u4f7f\u7528\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u66f4\u200b\u9ad8\u7ea7\u200b\u7684\u200b\u8f85\u52a9\u200b\u51fd\u6570\u200b<code>open_clientfd</code>\u200b\u548c\u200b<code>open_listenfd</code>\u200b\u5305\u88c5\u200b\u5b83\u4eec\u200b\u3002</p>"},{"location":"core/csapp/ch11/#open_clientfd","title":"<code>open_clientfd</code>\u200b\u51fd\u6570","text":"<p>\u200b\u5ba2\u6237\u7aef\u200b\u8c03\u7528\u200b<code>open_clientfd</code>\u200b\u51fd\u6570\u200b\u4e0e\u200b\u670d\u52a1\u5668\u200b\u5efa\u7acb\u200b\u8fde\u63a5\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\nint open_clientfd(char *hostname, char *port);\n// Returns: descriptor if OK, \u22121 on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>hostname</code>\u200b\u662f\u200b\u670d\u52a1\u5668\u200b\u6240\u5728\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b\uff0c\u200b\u53c2\u6570\u200b<code>port</code>\u200b\u662f\u200b\u670d\u52a1\u5668\u200b\u76d1\u542c\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b\u3002\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u6253\u5f00\u200b\u7684\u200b Socket \u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b Unix I/O \u200b\u51fd\u6570\u200b\u5bf9\u200b\u5176\u200b\u8bfb\u5199\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u7684\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>int open_clientfd(char *hostname, char *port)\n{\n    int clientfd;\n    struct addrinfo hints, *listp, *p;\n\n    /* Get a list of potential server addresses */\n    memset(&amp;hints, 0, sizeof(struct addrinfo));\n    hints.ai_socktype = SOCK_STREAM; /* Open a connection */\n    hints.ai_flags = AI_NUMERICSERV; /* ... using a numeric port arg. */\n    hints.ai_flags |= AI_ADDRCONFIG; /* Recommended for connections */\n    getaddrinfo(hostname, port, &amp;hints, &amp;listp);\n\n    /* Walk the list for one that we can successfully connect to */\n    for (p = listp; p; p = p-&gt;ai_next)\n    {\n        /* Create a socket descriptor */\n        if ((clientfd = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol)) &lt; 0)\n            continue; /* Socket failed, try the next */\n        /* Connect to the server */\n        if (connect(clientfd, p-&gt;ai_addr, p-&gt;ai_addrlen) != -1)\n            break;       /* Success */\n        Close(clientfd); /* Connect failed, try another */\n    }\n\n    /* Clean up */\n    freeaddrinfo(listp);\n    if (!p) /* All connects failed */\n        return -1;\n    else    /* The last connect succeeded */\n        return clientfd;\n}\n</code></pre> <p><code>open_clientfd</code>\u200b\u4e2d\u200b\u4e0d\u200b\u5b58\u5728\u200b\u4efb\u4f55\u200b\u4f9d\u8d56\u4e8e\u200b\u7279\u5b9a\u200b\u7248\u672c\u200b\u534f\u8bae\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u8c03\u7528\u200b<code>socket</code>\u200b\u548c\u200b<code>connect</code>\u200b\u65f6\u200b\u4f7f\u7528\u200b\u7684\u200b\u53c2\u6570\u200b\u662f\u200b\u7531\u200b<code>getaddrinfo</code>\u200b\u81ea\u52a8\u200b\u751f\u6210\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8be5\u200b\u51fd\u6570\u200b\u5e72\u51c0\u200b\u4e14\u200b\u53ef\u79fb\u690d\u200b\u3002</p>"},{"location":"core/csapp/ch11/#open_listenfd","title":"<code>open_listenfd</code>\u200b\u51fd\u6570","text":"<p>\u200b\u670d\u52a1\u5668\u200b\u8c03\u7528\u200b<code>open_listenfd</code>\u200b\u51fd\u6570\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u80fd\u591f\u200b\u63a5\u53d7\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u7684\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\nint open_listenfd(char *port);\n// Returns: descriptor if OK, \u22121 on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>port</code>\u200b\u662f\u200b\u670d\u52a1\u5668\u200b\u76d1\u542c\u200b\u7684\u200b\u7aef\u53e3\u53f7\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u7684\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>int open_listenfd(char *port)\n{\n    struct addrinfo hints, *listp, *p;\n    int listenfd, optval = 1;\n\n    /* Get a list of potential server addresses */\n    memset(&amp;hints, 0, sizeof(struct addrinfo));\n    hints.ai_socktype = SOCK_STREAM;             /* Accept connections */\n    hints.ai_flags = AI_PASSIVE | AI_ADDRCONFIG; /* ... on any IP address */\n    hints.ai_flags |= AI_NUMERICSERV;            /* ... using port number */\n    getaddrinfo(NULL, port, &amp;hints, &amp;listp);\n\n    /* Walk the list for one that we can bind to */\n    for (p = listp; p; p = p-&gt;ai_next)\n    {\n        /* Create a socket descriptor */\n        if ((listenfd = socket(p-&gt;ai_family, p-&gt;ai_socktype, p-&gt;ai_protocol)) &lt; 0)\n            continue; /* Socket failed, try the next */\n        /* Eliminates \"Address already in use\" error from bind */\n        Setsockopt(listenfd, SOL_SOCKET, SO_REUSEADDR,\n                   (const void *)&amp;optval, sizeof(int));\n        /* Bind the descriptor to the address */\n        if (bind(listenfd, p-&gt;ai_addr, p-&gt;ai_addrlen) == 0)\n            break;       /* Success */\n        Close(listenfd); /* Bind failed, try the next */\n    }\n    /* Clean up */\n    freeaddrinfo(listp);\n    if (!p) /* No address worked */\n        return -1;\n    /* Make it a listening socket ready to accept connection requests */\n    if (listen(listenfd, LISTENQ) &lt; 0)\n    {\n        Close(listenfd);\n        return -1;\n    }\n    return listenfd;\n}\n</code></pre> <p>\u200b\u5728\u200b\u7b2c\u200b 20 \u200b\u884c\u4e2d\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b<code>Setsockopt</code>\u200b\u51fd\u6570\u200b\uff08\u200b\u89c1\u200b csapp.c\uff09\u200b\u914d\u7f6e\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u80fd\u591f\u200b\u5728\u200b\u91cd\u65b0\u542f\u52a8\u200b\u540e\u200b\u7acb\u5373\u200b\u5f00\u59cb\u200b\u63a5\u53d7\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u3002\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u91cd\u65b0\u542f\u52a8\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\u4f1a\u200b\u5728\u200b\u5927\u7ea6\u200b 30 \u200b\u79d2\u200b\u5185\u200b\u62d2\u7edd\u200b\u6765\u81ea\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u4e25\u91cd\u200b\u5f71\u54cd\u200b\u8c03\u8bd5\u200b\u3002</p>"},{"location":"core/csapp/ch11/#echo","title":"\u793a\u4f8b\u200b Echo \u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668","text":"<p>\u200b\u5b66\u4e60\u200b Socket \u200b\u63a5\u53e3\u51fd\u6570\u200b\u7684\u200b\u6700\u4f73\u200b\u65b9\u6cd5\u200b\u4fbf\u662f\u200b\u9605\u8bfb\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b\u5ba2\u6237\u7aef\u7a0b\u5e8f\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nint main(int argc, char **argv)\n{\n    int clientfd;\n    char *host, *port, buf[MAXLINE];\n    rio_t rio;\n\n    if (argc != 3)\n    {\n        fprintf(stderr, \"usage: %s &lt;host&gt; &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    host = argv[1];\n    port = argv[2];\n    clientfd = Open_clientfd(host, port);\n    Rio_readinitb(&amp;rio, clientfd);\n    while (Fgets(buf, MAXLINE, stdin) != NULL)\n    {\n        Rio_writen(clientfd, buf, strlen(buf));\n        Rio_readlineb(&amp;rio, buf, MAXLINE);\n        Fputs(buf, stdout);\n    }\n    Close(clientfd);\n    exit(0);\n}\n</code></pre> <p>\u200b\u5728\u200b\u4e0e\u200b\u670d\u52a1\u5668\u200b\u5efa\u7acb\u200b\u8fde\u63a5\u200b\u4e4b\u540e\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u8fdb\u5165\u200b While \u200b\u5faa\u73af\u200b\u3002\u200b\u5b83\u200b\u4e0d\u65ad\u200b\u4ece\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u6587\u672c\u200b\u884c\u200b\uff08<code>Fgets</code>\uff09\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u6587\u672c\u200b\u884c\u200b\u53d1\u9001\u5230\u200b\u670d\u52a1\u5668\u200b\uff08<code>Rio_writen</code>\uff09\u3002\u200b\u63a5\u4e0b\u6765\u200b\u518d\u200b\u8bfb\u53d6\u200b\u670d\u52a1\u5668\u200b\u7684\u200b\u8fd4\u56de\u200b\uff08<code>Rio_readlineb</code>\uff09\uff0c\u200b\u6700\u7ec8\u200b\u5c06\u200b\u7ed3\u679c\u200b\u6253\u5370\u200b\u5230\u200b\u6807\u51c6\u200b\u8f93\u51fa\u200b\uff08<code>Fputs</code>\uff09\u3002\u200b\u5f53\u200b\u7528\u6237\u200b\u952e\u5165\u200b Ctrl+D \u200b\u65f6\u200b\uff0c\u200b\u5faa\u73af\u200b\u4e2d\u6b62\u200b\uff0c\u200b\u5ba2\u6237\u7aef\u200b\u968f\u540e\u200b\u5173\u95ed\u200b\u63cf\u8ff0\u7b26\u200b<code>clientfd</code>\u3002</p> <p>\u200b\u8be5\u200b\u5ba2\u6237\u7aef\u200b\u8fde\u63a5\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\ntypedef struct sockaddr SA;\n\nvoid echo(int connfd)\n{\n    size_t n;\n    char buf[MAXLINE];\n    rio_t rio;\n\n    Rio_readinitb(&amp;rio, connfd);\n    while ((n = Rio_readlineb(&amp;rio, buf, MAXLINE)) != 0)\n    {\n        printf(\"server received %d bytes\\n\", (int)n);\n        Rio_writen(connfd, buf, n);\n    }\n}\n\nint main(int argc, char **argv)\n{\n    int listenfd, connfd;\n    socklen_t clientlen;\n    struct sockaddr_storage clientaddr; /* Enough space for any address */\n    char client_hostname[MAXLINE], client_port[MAXLINE];\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    listenfd = Open_listenfd(argv[1]);\n    while (1)\n    {\n        clientlen = sizeof(struct sockaddr_storage);\n        connfd = accept(listenfd, (SA *)&amp;clientaddr, &amp;clientlen);\n        getnameinfo((SA *)&amp;clientaddr, clientlen, client_hostname, MAXLINE,\n                    client_port, MAXLINE, 0);\n        printf(\"Connected to (%s, %s)\\n\", client_hostname, client_port);\n        echo(connfd);\n        Close(connfd);\n    }\n    exit(0);\n}\n</code></pre> <p>\u200b\u4ee3\u7801\u200b\u7b2c\u200b 23 \u200b\u884c\u200b\u58f0\u660e\u200b\u7684\u200b\u53d8\u91cf\u200b<code>clientaddr</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b<code>sockaddr_storage</code>\u200b\u7c7b\u578b\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c<code>accept</code>\u200b\u51fd\u6570\u200b\u4f1a\u200b\u5728\u200b\u8fd4\u56de\u200b\u524d\u200b\u5c06\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\u586b\u5165\u200b\u5176\u4e2d\u200b\u3002\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b<code>sockaddr_storage</code>\u200b\u800c\u200b\u975e\u200b<code>sockaddr_in</code>\u200b\u7684\u200b\u539f\u56e0\u200b\u5728\u4e8e\u200b\u524d\u8005\u200b\u8db3\u591f\u200b\u5927\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u4fdd\u5b58\u200b\u4efb\u4f55\u200b\u7c7b\u578b\u200b\u7684\u200b Socket \u200b\u5730\u5740\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u200b\u4ee3\u7801\u200b\u4e0e\u200b\u534f\u8bae\u200b\u72ec\u7acb\u200b\uff08\u200b\u8be6\u89c1\u200b\uff1aReasoning behind C sockets sockaddr and sockaddr_storage\uff09\u3002</p> <p>\u200b\u670d\u52a1\u5668\u200b\u6253\u5f00\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b\u540e\u200b\u8fdb\u5165\u200b\u65e0\u9650\u200b\u5faa\u73af\u200b\u3002\u200b\u5b83\u200b\u7b49\u5f85\u200b\u6765\u81ea\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u6253\u5370\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u4e3b\u673a\u540d\u200b\u548c\u200b\u7aef\u53e3\u200b\uff0c\u200b\u7136\u540e\u200b\u8c03\u7528\u200b<code>echo</code>\u200b\u51fd\u6570\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u91cd\u590d\u200b\u8bfb\u53d6\u200b\u5e76\u200b\u5199\u5165\u200b\u6587\u672c\u200b\u884c\u200b\uff0c\u200b\u76f4\u5230\u200b<code>Rio_readlineb</code>\u200b\u9047\u5230\u200b EOF\uff08\u200b\u5bf9\u4e8e\u200b\u7f51\u7edc\u8fde\u63a5\u200b\uff0c\u200b\u5f53\u200b\u4e00\u7aef\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u5173\u95ed\u200b\u8fde\u63a5\u200b\uff0c\u200b\u53e6\u4e00\u7aef\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u5c1d\u8bd5\u200b\u8bfb\u53d6\u200b\u6d41\u4e2d\u200b\u7684\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u65f6\u200b\u5c06\u200b\u68c0\u6d4b\u200b\u5230\u200b EOF\uff09\u3002\u200b\u4e00\u65e6\u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\u5747\u200b\u5173\u95ed\u200b\u4e86\u200b\u5404\u81ea\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u8fde\u63a5\u200b\u4fbf\u4f1a\u200b\u7ec8\u6b62\u200b\u3002</p> <p>\u200b\u8bf7\u200b\u6ce8\u610f\u200b\uff0c\u200b\u793a\u4f8b\u200b\u7684\u200b\u7b80\u5355\u200b\u670d\u52a1\u5668\u200b\u4e00\u6b21\u200b\u53ea\u80fd\u200b\u5904\u7406\u200b\u4e00\u4e2a\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u200b\u8fd9\u79cd\u200b\u7c7b\u578b\u200b\u7684\u200b\u670d\u52a1\u5668\u200b\u4e3a\u200b\u8fed\u4ee3\u200b\u670d\u52a1\u5668\u200b\uff08Iterative Server\uff09\u3002\u200b\u66f4\u52a0\u200b\u590d\u6742\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\uff08Concurrent Server\uff09\u200b\u5219\u200b\u53ef\u4ee5\u200b\u540c\u65f6\u200b\u5904\u7406\u200b\u591a\u4e2a\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u3002</p>"},{"location":"core/csapp/ch11/#web","title":"Web \u200b\u670d\u52a1\u5668","text":""},{"location":"core/csapp/ch11/#web_1","title":"Web \u200b\u5185\u5bb9","text":"<p>\u200b\u5bf9\u4e8e\u200b Web \u200b\u5ba2\u6237\u7aef\u200b\u548c\u200b\u670d\u52a1\u5668\u200b\uff0c\u200b\u5185\u5bb9\u200b\uff08Content\uff09\u200b\u662f\u200b\u4e0e\u200b\u67d0\u79cd\u200b MIME\uff08Multipurpose Internet Mail Extensions\uff09\u200b\u7c7b\u578b\u200b\u5173\u8054\u200b\u7684\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\uff1a  Web \u200b\u670d\u52a1\u5668\u200b\u901a\u8fc7\u200b\u4e24\u79cd\u200b\u4e0d\u540c\u200b\u65b9\u5f0f\u200b\u5411\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u5185\u5bb9\u200b\uff1a</p> <ul> <li>\u200b\u83b7\u53d6\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\uff08\u200b\u9759\u6001\u200b\u5185\u5bb9\u200b\uff09\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5ba2\u6237\u7aef\u200b\uff1b</li> <li>\u200b\u8fd0\u884c\u200b\u4e00\u4e2a\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\uff08\u200b\u52a8\u6001\u200b\u5185\u5bb9\u200b\uff09\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5ba2\u6237\u7aef\u200b\u3002</li> </ul> <p>Web \u200b\u670d\u52a1\u5668\u8fd4\u56de\u200b\u7684\u200b\u6bcf\u6761\u200b\u5185\u5bb9\u200b\u90fd\u200b\u4e0e\u5176\u200b\u7ba1\u7406\u200b\u7684\u200b\u67d0\u4e2a\u200b\u6587\u4ef6\u200b\u76f8\u5173\u8054\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u6587\u4ef6\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u540d\u79f0\u200b\uff0c\u200b\u5373\u200b URL\uff08Universal Resource Locator\uff09\u3002</p>"},{"location":"core/csapp/ch11/#http","title":"HTTP \u200b\u4e8b\u52a1","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>telnet</code>\u200b\u547d\u4ee4\u200b\u4e0e\u200b\u4e92\u8054\u7f51\u200b\u4e0a\u200b\u4efb\u610f\u200b Web \u200b\u670d\u52a1\u5668\u200b\u5efa\u7acb\u200b\u4e8b\u52a1\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch12/","title":"\u5e76\u53d1\u200b\u7f16\u7a0b","text":"<p>\u200b\u6839\u636e\u200b Chapter8 \u200b\u4ecb\u7ecd\u200b\u7684\u200b\u5185\u5bb9\u200b\uff0c\u200b\u4e24\u4e2a\u200b\u5728\u200b\u65f6\u95f4\u200b\u4e0a\u200b\u91cd\u53e0\u200b\u7684\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u662f\u200b\u5e76\u53d1\u200b\u7684\u200b\u3002\u200b\u786c\u4ef6\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u3001\u200b\u8fdb\u7a0b\u200b\u548c\u200b Linux \u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u7b49\u200b\u90fd\u200b\u662f\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u5728\u200b\u4e0d\u540c\u200b\u5c42\u7ea7\u200b\u4e0a\u200b\u5bf9\u200b\u5e76\u53d1\u200b\u7684\u200b\u5e94\u7528\u200b\u3002\u200b\u73b0\u4ee3\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e3a\u200b\u6784\u5efa\u200b\u5e76\u53d1\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e09\u79cd\u200b\u57fa\u672c\u200b\u65b9\u6cd5\u200b\uff1a</p> <ul> <li>\u200b\u8fdb\u7a0b\u200b</li> <li>I/O \u200b\u591a\u8def\u590d\u7528\u200b\uff08Multiplexing\uff09</li> <li>\u200b\u7ebf\u7a0b\u200b\uff08Thread\uff09</li> </ul>"},{"location":"core/csapp/ch12/#_2","title":"\u4f7f\u7528\u200b\u8fdb\u7a0b\u200b\u5b9e\u73b0\u200b\u5e76\u53d1","text":"<p>\u200b\u6784\u5efa\u200b\u5e76\u53d1\u7a0b\u5e8f\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u65b9\u6cd5\u200b\u662f\u200b\u4f7f\u7528\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u5982\u5728\u7236\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u63a5\u53d7\u200b\u5ba2\u6237\u7aef\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u7136\u540e\u200b\u521b\u5efa\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u3002</p> <p>\u200b\u5047\u8bbe\u200b\u670d\u52a1\u5668\u200b\u5728\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b<code>listenfd(3)</code>\u200b\u4e0a\u200b\u63a5\u53d7\u200b\u6765\u81ea\u200b\u5ba2\u6237\u7aef\u200b 1 \u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u5e76\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b<code>connfd(4)</code>\uff1a  \u200b\u670d\u52a1\u5668\u200b\u5c06\u200b\u8c03\u7528\u200b<code>fork</code>\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201cChild 1\u201d\uff09\uff0c\u200b\u5b83\u200b\u83b7\u5f97\u200b\u670d\u52a1\u5668\u200b \u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b \u200b\u7684\u200b\u5b8c\u6574\u200b\u526f\u672c\u200b\u3002\u200b\u7531\u4e8e\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4e0d\u518d\u200b\u9700\u8981\u200b\u76d1\u542c\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u800c\u7236\u200b\u8fdb\u7a0b\u200b\u4e0d\u518d\u200b\u9700\u8981\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u5c06\u200b\u5b83\u4eec\u200b\u5173\u95ed\u200b\uff1a</p> <p> \u200b\u968f\u540e\u200b\u670d\u52a1\u5668\u200b\u63a5\u53d7\u200b\u6765\u81ea\u200b\u5ba2\u6237\u7aef\u200b 2 \u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u5e76\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b<code>connfd(5)</code>\uff1a</p> <p> \u200b\u670d\u52a1\u5668\u200b\u518d\u6b21\u200b\u8c03\u7528\u200b<code>fork</code>\u200b\u521b\u5efa\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201cChild 2\u201d\uff09\u3002\u200b\u6b64\u65f6\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u6b63\u5728\u200b\u7b49\u5f85\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u4e24\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5219\u200b\u5e76\u53d1\u200b\u5730\u4e3a\u200b\u5404\u81ea\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch12/#_3","title":"\u57fa\u4e8e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668","text":"<p>\u200b\u4e00\u4e2a\u200b\u57fa\u4e8e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7b2c\u200b 32 \u200b\u884c\u200b\u8c03\u7528\u200b\u7684\u200b<code>echo</code>\u200b\u51fd\u6570\u200b\u6765\u81ea\u200b\u4e8e\u200b\u4e0a\u200b\u4e00\u7ae0\u200b\u4ecb\u7ecd\u200b\u7684\u200b echo.c\uff1a</p> <pre><code>#include \"csapp.h\"\nvoid echo(int connfd);\n\nvoid sigchld_handler(int sig)\n{\n    while (waitpid(-1, 0, WNOHANG) &gt; 0)\n        ;\n    return;\n}\n\nint main(int argc, char **argv)\n{\n    int listenfd, connfd;\n    socklen_t clientlen;\n    struct sockaddr_storage clientaddr;\n\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n\n    Signal(SIGCHLD, sigchld_handler);\n    listenfd = Open_listenfd(argv[1]);\n    while (1)\n    {\n        clientlen = sizeof(struct sockaddr_storage);\n        connfd = Accept(listenfd, (SA *)&amp;clientaddr, &amp;clientlen);\n        if (Fork() == 0)\n        {\n            Close(listenfd); /* Child closes its listening socket */\n            echo(connfd);    /* Child services client */\n            Close(connfd);   /* Child closes connection with client */\n            exit(0);         /* Child exits */\n        }\n        Close(connfd); /* Parent closes connected socket (important!) */\n    }\n}\n</code></pre> <p>\u200b\u8003\u8651\u200b\u5230\u200b\u670d\u52a1\u5668\u200b\u5c06\u200b\u8fd0\u884c\u200b\u5f88\u200b\u957f\u65f6\u95f4\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u5b89\u88c5\u200b\u4e00\u4e2a\u200b SIGCHLD \u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u6765\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u7b2c\u200b 4\uff5e9 \u200b\u884c\u200b\uff09\uff0c\u200b\u8be6\u89c1\u200b \u200b\u6b63\u786e\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406\u200b\u3002</p> <p>\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5fc5\u987b\u200b\u5173\u95ed\u200b<code>connfd</code>\uff08\u200b\u7b2c\u200b 36 \u200b\u884c\u200b\uff09\uff0c\u200b\u5426\u5219\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u6307\u5411\u200b\u7684\u200b \u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\u6761\u76ee\u200b \u200b\u6c38\u8fdc\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u91ca\u653e\u200b\uff0c\u200b\u4ece\u800c\u200b\u5bfc\u81f4\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\u3002\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5219\u200b\u4e0d\u200b\u9700\u8981\u200b\u5173\u95ed\u200b<code>connfd</code>\uff08\u200b\u7b2c\u200b 33 \u200b\u884c\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\uff09\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u4f1a\u200b\u5728\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u65f6\u200b\u7531\u200b\u5185\u6838\u200b\u81ea\u52a8\u200b\u5173\u95ed\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_4","title":"\u8fdb\u7a0b\u200b\u7684\u200b\u4f18\u7f3a\u70b9","text":"<p>\u200b\u7236\u5b50\u200b\u8fdb\u7a0b\u200b\u5171\u4eab\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u8868\u200b\uff0c\u200b\u4f46\u200b\u5e76\u200b\u4e0d\u200b\u5171\u4eab\u200b\u7528\u6237\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff08\u200b\u865a\u62df\u5185\u5b58\u200b\uff09\uff0c\u200b\u56e0\u6b64\u200b\u8fdb\u7a0b\u200b\u4e4b\u95f4\u200b\u5fc5\u987b\u200b\u663e\u5f0f\u200b\u5730\u200b\u4f7f\u7528\u200b IPC\uff08Interprocess Communications\uff09\u200b\u673a\u5236\u200b\u6765\u200b\u5171\u4eab\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\u3002\u200b\u7531\u4e8e\u200b\u8fdb\u7a0b\u200b\u63a7\u5236\u200b\u548c\u200b IPC \u200b\u7684\u200b\u5f00\u9500\u200b\u5f88\u200b\u9ad8\u200b\uff0c\u200b\u57fa\u4e8e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u7a0b\u5e8f\u200b\u5f80\u5f80\u200b\u5f88\u200b\u6162\u200b\u3002</p>"},{"location":"core/csapp/ch12/#io","title":"\u4f7f\u7528\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u5b9e\u73b0\u200b\u5e76\u53d1","text":"<p>I/O \u200b\u591a\u8def\u590d\u7528\u200b\u6280\u672f\u200b\u7684\u200b\u57fa\u672c\u200b\u601d\u60f3\u200b\u662f\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>select</code>\u200b\u51fd\u6570\u200b\u76d1\u89c6\u200b\u591a\u4e2a\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u7b49\u5f85\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u51c6\u5907\u200b\u597d\u200b\u7528\u4e8e\u200b\u67d0\u79cd\u200b I/O \u200b\u64cd\u4f5c\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u5341\u5206\u590d\u6742\u200b\u5e76\u200b\u6709\u200b\u591a\u79cd\u200b\u4f7f\u7528\u200b\u573a\u666f\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u6211\u4eec\u200b\u53ea\u200b\u8ba8\u8bba\u200b I/O \u200b\u64cd\u4f5c\u200b\u4e3a\u200b\u8bfb\u53d6\u200b\u7684\u200b\u60c5\u51b5\u200b\uff1a</p> <pre><code>#include &lt;sys/select.h&gt;\nint select(int n, fd_set *fdset, NULL, NULL, NULL);\n// Returns: nonzero count of ready descriptors, \u22121 on error\n\n// Macros for manipulating descriptor sets\nFD_ZERO(fd_set *fdset);          /* Clear all bits in fdset */\nFD_CLR(int fd, fd_set *fdset);   /* Clear bit fd in fdset */\nFD_SET(int fd, fd_set *fdset);   /* Turn on bit fd in fdset */\nFD_ISSET(int fd, fd_set *fdset); /* Is bit fd in fdset on? */\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>fd_set</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u96c6\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b\u903b\u8f91\u200b\u4e0a\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4f4d\u200b\u5411\u91cf\u200b\uff08\u200b\u56fa\u5b9a\u200b\u957f\u5ea6\u200b\u7684\u200b 0\uff0c1 \u200b\u5e8f\u5217\u200b\uff09\uff1a</p> \\[b_{n - 1},..., b_1, b_0\\] <p>\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u4f4d\u200b \\(b_k\\) \u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b \\(k\\)\u3002\u200b\u5f53\u4e14\u200b\u4ec5\u200b\u5f53\u200b \\(b_k\\) \u200b\u7b49\u4e8e\u200b 1 \u200b\u65f6\u200b\uff0c\u200b\u63cf\u8ff0\u7b26\u200b \\(k\\) \u200b\u5c5e\u4e8e\u200b\u8be5\u200b\u63cf\u8ff0\u7b26\u200b\u96c6\u200b\u3002</p> <p>\u200b\u5728\u200b\u6211\u4eec\u200b\u7684\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u4e2d\u200b\uff0c\u200b\u53c2\u6570\u200b<code>fd_set</code>\u200b\u662f\u200b\u8bfb\u53d6\u200b\u63cf\u8ff0\u7b26\u200b\u96c6\u200b\uff08Read Set\uff09\uff0c\u200b\u53c2\u6570\u200b<code>n</code>\u200b\u662f\u200b\u8bfb\u53d6\u200b\u96c6\u200b\u7684\u200b\u57fa\u6570\u200b\uff08Cardinality\uff09\u3002\u200b\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>select</code>\u200b\u51fd\u6570\u200b\u540e\u200b\u4f1a\u200b\u4e00\u76f4\u200b\u963b\u585e\u200b\uff0c\u200b\u76f4\u5230\u200b\u8bfb\u53d6\u200b\u96c6\u4e2d\u200b\u81f3\u5c11\u200b\u6709\u200b\u4e00\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u51c6\u5907\u200b\u597d\u200b\u88ab\u200b\u8bfb\u53d6\u200b\uff08\u200b\u5373\u200b\u4ece\u200b\u8be5\u200b\u63cf\u8ff0\u7b26\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u8bf7\u6c42\u200b\u4e0d\u4f1a\u200b\u963b\u585e\u200b\uff09\u3002</p> <p>\u200b\u6211\u4eec\u200b\u5c06\u200b\u8bfb\u53d6\u200b\u96c6\u4e2d\u200b\u5df2\u200b\u51c6\u5907\u200b\u597d\u200b\u88ab\u200b\u8bfb\u53d6\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u96c6\u5408\u200b\u79f0\u4e3a\u200b\u5c31\u7eea\u200b\u96c6\u200b\uff08Ready Set\uff09\u3002<code>select</code>\u200b\u51fd\u6570\u200b\u4f1a\u200b\u5c06\u200b<code>fdset</code>\u200b\u4fee\u6539\u200b\u4e3a\u200b\u5c31\u7eea\u200b\u96c6\u200b\uff0c\u200b\u5e76\u200b\u8fd4\u56de\u200b\u5c31\u7eea\u200b\u96c6\u200b\u7684\u200b\u57fa\u6570\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u6211\u4eec\u200b\u5728\u200b\u6bcf\u6b21\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\u524d\u200b\u90fd\u200b\u5e94\u5f53\u200b\u5148\u200b\u66f4\u65b0\u200b\u8bfb\u53d6\u200b\u96c6\u200b\u3002</p>"},{"location":"core/csapp/ch12/#io_1","title":"\u57fa\u4e8e\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668","text":"<p>\u200b\u4e00\u4e2a\u200b\u57fa\u4e8e\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\ntypedef struct\n{                                /* represents a pool of connected descriptors */\n    int maxfd;                   /* largest descriptor in read_set */\n    fd_set read_set;             /* set of all active descriptors */\n    fd_set ready_set;            /* subset of descriptors ready for reading  */\n    int nready;                  /* number of ready descriptors from select */\n    int maxi;                    /* highwater index into client array */\n    int clientfd[FD_SETSIZE];    /* set of active descriptors */\n    rio_t clientrio[FD_SETSIZE]; /* set of active read buffers */\n} pool;\n\nint byte_cnt = 0; /* counts total bytes received by server */\n\nint main(int argc, char **argv)\n{\n    int listenfd, connfd;\n    socklen_t clientlen;\n    struct sockaddr_storage clientaddr;\n    static pool pool;\n\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    listenfd = Open_listenfd(argv[1]);\n    init_pool(listenfd, &amp;pool);\n\n    while (1)\n    {\n        /* Wait for listening/connected descriptor(s) to become ready */\n        pool.ready_set = pool.read_set;\n        pool.nready = Select(pool.maxfd + 1, &amp;pool.ready_set, NULL, NULL, NULL);\n\n        /* If listening descriptor ready, add new client to pool */\n        if (FD_ISSET(listenfd, &amp;pool.ready_set))\n        {\n            clientlen = sizeof(struct sockaddr_storage);\n            connfd = Accept(listenfd, (SA *)&amp;clientaddr, &amp;clientlen);\n            add_client(connfd, &amp;pool);\n        }\n\n        /* Echo a text line from each ready connected descriptor */\n        check_clients(&amp;pool);\n    }\n}\n</code></pre> <p>\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b<code>pool</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff08\u200b\u7b2c\u200b 3\uff5e12 \u200b\u884c\u200b\uff09\u200b\u4fdd\u5b58\u200b\u6d3b\u8dc3\u200b\u7684\u200b\u5ba2\u6237\u7aef\u200b\uff0c\u200b\u5e76\u200b\u4f7f\u7528\u200b<code>init_pool</code>\u200b\u51fd\u6570\u200b\u521d\u59cb\u5316\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u200b\uff08\u200b\u7b2c\u200b 29 \u200b\u884c\u200b\uff09\u3002\u200b\u5728\u200b\u65e0\u9650\u200b\u5faa\u73af\u200b\u7684\u200b\u6bcf\u6b21\u200b\u8fed\u4ee3\u200b\u4e2d\u200b\uff0c\u200b\u670d\u52a1\u5668\u200b\u8c03\u7528\u200b<code>select</code>\u200b\u51fd\u6570\u200b\u68c0\u6d4b\u200b\u4e24\u79cd\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u8f93\u5165\u200b\u4e8b\u4ef6\u200b\uff1a\u200b\u6765\u81ea\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\uff1b\u200b\u4e3a\u200b\u73b0\u6709\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u7684\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u5df2\u200b\u51c6\u5907\u200b\u597d\u200b\u88ab\u200b\u8bfb\u53d6\u200b\u3002\u200b\u5f53\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u5230\u8fbe\u200b\u65f6\u200b\uff08\u200b\u7b2c\u200b 38 \u200b\u884c\u200b\uff09\uff0c\u200b\u670d\u52a1\u5668\u200b\u6253\u5f00\u200b\u8fde\u63a5\u200b\uff08\u200b\u7b2c\u200b 41 \u200b\u884c\u200b\uff09\u200b\u5e76\u200b\u5c06\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u52a0\u5165\u200b\u5230\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u4e2d\u200b\uff08\u200b\u7b2c\u200b 42 \u200b\u884c\u200b\uff09\u3002\u200b\u6700\u540e\u200b\uff0c\u200b\u670d\u52a1\u5668\u200b\u8c03\u7528\u200b<code>check_clients</code>\u200b\u51fd\u6570\u200b\u5411\u200b\u6bcf\u4e2a\u200b\u5df2\u200b\u8fde\u63a5\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\u5199\u5165\u200b\u6587\u672c\u200b\u884c\u200b\uff08\u200b\u7b2c\u200b 46 \u200b\u884c\u200b\uff09\u3002</p> <pre><code>void init_pool(int listenfd, pool *p)\n{\n    /* Initially, there are no connected descriptors */\n    int i;\n    p-&gt;maxi = -1;\n    for (i = 0; i &lt; FD_SETSIZE; i++)\n        p-&gt;clientfd[i] = -1;\n\n    /* Initially, listenfd is only member of select read set */\n    p-&gt;maxfd = listenfd;\n    FD_ZERO(&amp;p-&gt;read_set);\n    FD_SET(listenfd, &amp;p-&gt;read_set);\n}\n</code></pre> <p><code>init_pool</code>\u200b\u51fd\u6570\u200b\u521d\u59cb\u5316\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u200b\u3002<code>p-&gt;clientfd</code>\u200b\u6570\u7ec4\u200b\u5305\u542b\u200b\u4e86\u200b\u6240\u6709\u200b\u5df2\u200b\u8fde\u63a5\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u4e00\u200b\u5f00\u59cb\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b -1 \u200b\u586b\u5145\u200b\u5b83\u200b\uff08\u200b\u7b2c\u200b 5\uff5e7 \u200b\u884c\u200b\uff09\u3002\u200b\u6b64\u65f6\u200b<code>listenfd</code>\u200b\u662f\u200b\u8bfb\u53d6\u200b\u96c6\u200b<code>p-&gt;read_set</code>\u200b\u4e2d\u200b\u552f\u4e00\u200b\u7684\u200b\u63cf\u8ff0\u7b26\u200b\uff08\u200b\u7b2c\u200b 10\uff5e12 \u200b\u884c\u200b\uff09\u3002</p> <pre><code>void add_client(int connfd, pool *p)\n{\n    int i;\n    p-&gt;nready--;\n    for (i = 0; i &lt; FD_SETSIZE; i++) /* Find an available slot */\n        if (p-&gt;clientfd[i] &lt; 0)\n        {\n            /* Add connected descriptor to the pool */\n            p-&gt;clientfd[i] = connfd;\n            Rio_readinitb(&amp;p-&gt;clientrio[i], connfd);\n\n            /* Add the descriptor to descriptor set */\n            FD_SET(connfd, &amp;p-&gt;read_set);\n\n            /* Update max descriptor and pool highwater mark */\n            if (connfd &gt; p-&gt;maxfd)\n                p-&gt;maxfd = connfd;\n            if (i &gt; p-&gt;maxi)\n                p-&gt;maxi = i;\n            break;\n        }\n    if (i == FD_SETSIZE) /* Couldn't find an empty slot */\n        app_error(\"add_client error: Too many clients\");\n}\n</code></pre> <p><code>add_client</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u6dfb\u52a0\u200b\u5230\u200b\u6d3b\u8dc3\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u4e2d\u200b\u3002\u200b\u5982\u679c\u200b<code>p-&gt;clientfd</code>\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u8fd8\u6709\u200b\u7a7a\u4f4d\u200b\uff08\u200b\u7b2c\u200b 6 \u200b\u884c\u200b\uff09\uff0c\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c31\u200b\u5c06\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b<code>connfd</code>\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8be5\u200b\u6570\u7ec4\u200b\u5e76\u200b\u521d\u59cb\u5316\u200b\u4e00\u4e2a\u200b\u8bfb\u53d6\u200b\u7f13\u51b2\u533a\u200b\u4ee5\u200b\u8c03\u7528\u200b <code>rio_readlineb</code>\uff08\u200b\u7b2c\u200b 9\uff5e10 \u200b\u884c\u200b\uff09\u3002\u200b\u968f\u540e\u200b\u51fd\u6570\u200b\u5c06\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b<code>connfd</code>\u200b\u6dfb\u52a0\u200b\u5230\u200b\u8bfb\u53d6\u200b\u96c6\u200b\uff08\u200b\u7b2c\u200b 13 \u200b\u884c\u200b\uff09\uff0c\u200b\u5e76\u200b\u66f4\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u200b\u7684\u200b\u4e00\u4e9b\u200b\u5c5e\u6027\u200b\uff1a\u200b\u53d8\u91cf\u200b<code>maxfd</code>\u200b\u4ee3\u8868\u200b<code>select</code>\u200b\u51fd\u6570\u200b\u76d1\u89c6\u200b\u7684\u200b\u6700\u5927\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\uff1b\u200b\u53d8\u91cf\u200b<code>maxi</code>\u200b\u4ee3\u8868\u200b<code>p-&gt;clientfd</code>\u200b\u6570\u7ec4\u200b\u7684\u200b\u6700\u5927\u200b\u7d22\u5f15\u200b\uff08\u200b\u8fd9\u6837\u200b<code>check_clients</code>\u200b\u51fd\u6570\u200b\u5c31\u200b\u4e0d\u200b\u9700\u8981\u200b\u904d\u5386\u200b\u6574\u4e2a\u200b\u6570\u7ec4\u200b\uff09\u3002</p> <pre><code>void check_clients(pool *p)\n{\n    int i, connfd, n;\n    char buf[MAXLINE];\n    rio_t rio;\n\n    for (i = 0; (i &lt;= p-&gt;maxi) &amp;&amp; (p-&gt;nready &gt; 0); i++)\n    {\n        connfd = p-&gt;clientfd[i];\n        rio = p-&gt;clientrio[i];\n\n        /* If the descriptor is ready, echo a text line from it */\n        if ((connfd &gt; 0) &amp;&amp; (FD_ISSET(connfd, &amp;p-&gt;ready_set)))\n        {\n            p-&gt;nready--;\n            if ((n = Rio_readlineb(&amp;rio, buf, MAXLINE)) != 0)\n            {\n                byte_cnt += n;\n                printf(\"Server received %d (%d total) bytes on fd %d\\n\",\n                       n, byte_cnt, connfd);\n                Rio_writen(connfd, buf, n);\n            }\n\n            /* EOF detected, remove descriptor from pool */\n            else\n            {\n                Close(connfd);\n                FD_CLR(connfd, &amp;p-&gt;read_set);\n                p-&gt;clientfd[i] = -1;\n            }\n        }\n    }\n}\n</code></pre> <p><code>check_clients</code>\u200b\u51fd\u6570\u200b\u904d\u5386\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u4e2d\u200b\u6240\u6709\u200b\u5df2\u200b\u5c31\u7eea\u200b\u7684\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u5982\u679c\u200b\u4ece\u200b\u63cf\u8ff0\u7b26\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u6587\u672c\u200b\u884c\u200b\u6210\u529f\u200b\uff08\u200b\u7b2c\u200b 16 \u200b\u884c\u200b\uff09\uff0c\u200b\u5c31\u200b\u5c06\u200b\u8be5\u884c\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5ba2\u6237\u7aef\u200b\uff08\u200b\u7b2c\u200b 18-21 \u200b\u884c\u200b\uff09\u3002\u200b\u4e00\u65e6\u200b\u5ba2\u6237\u7aef\u200b\u5173\u95ed\u200b\u8fde\u63a5\u200b\u4e14\u200b\u670d\u52a1\u5668\u200b\u68c0\u6d4b\u200b\u5230\u200b EOF\uff0c\u200b\u670d\u52a1\u5668\u200b\u4fbf\u200b\u5173\u95ed\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\uff08\u200b\u7b2c\u200b 27 \u200b\u884c\u200b\uff09\u200b\u5e76\u200b\u5c06\u200b\u8be5\u200b\u63cf\u8ff0\u7b26\u200b\u4ece\u200b\u8bfb\u53d6\u200b\u96c6\u200b\u548c\u200b\u5ba2\u6237\u7aef\u200b\u6c60\u4e2d\u200b\u5220\u9664\u200b\uff08\u200b\u7b2c\u200b 28-29 \u200b\u884c\u200b\uff09\u3002</p> <p>I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u672c\u8d28\u200b\u662f\u200b\u5c06\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u5efa\u6a21\u200b\u4e3a\u200b\u72b6\u6001\u673a\u200b\uff08State Machines\uff09\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u57fa\u4e8e\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b \\(k\\) \u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u72b6\u6001\u673a\u200b \\(s_k\\) \u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u4e0e\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b \\(d_k\\) \u200b\u5173\u8054\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u72b6\u6001\u673a\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u72b6\u6001\u200b\uff08\u200b\u7b49\u5f85\u200b\u63cf\u8ff0\u7b26\u200b \\(d_k\\) \u200b\u51c6\u5907\u200b\u597d\u200b\u88ab\u200b\u8bfb\u53d6\u200b\uff09\uff0c\u200b\u4e00\u4e2a\u200b\u8f93\u5165\u200b\u4e8b\u4ef6\u200b\uff08\u200b\u63cf\u8ff0\u7b26\u200b \\(d_k\\) \u200b\u5df2\u200b\u51c6\u5907\u200b\u597d\u200b\u88ab\u200b\u8bfb\u53d6\u200b\uff09\u200b\u548c\u200b\u4e00\u4e2a\u200b\u72b6\u6001\u200b\u8f6c\u6362\u200b\uff08\u200b\u4ece\u200b\u63cf\u8ff0\u7b26\u200b \\(d_k\\) \u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u6587\u672c\u200b\u884c\u200b\uff09\u3002</p> <p>\u200b\u5728\u200b\u793a\u4f8b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u4e2d\u200b\uff0c<code>select</code>\u200b\u51fd\u6570\u200b\u68c0\u6d4b\u200b\u8f93\u5165\u200b\u4e8b\u4ef6\u200b\uff0c<code>add_client</code>\u200b\u51fd\u6570\u200b\u521b\u5efa\u200b\u65b0\u200b\u7684\u200b\u72b6\u6001\u673a\u200b\uff08\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\uff09\u3002<code>check_clients</code>\u200b\u51fd\u6570\u200b\u901a\u8fc7\u200b\u8bfb\u5199\u200b\u6587\u672c\u200b\u884c\u6765\u200b\u6267\u884c\u200b\u72b6\u6001\u200b\u8f6c\u6362\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u5ba2\u6237\u7aef\u200b\u53d1\u9001\u200b\u5b8c\u200b\u6587\u672c\u200b\u884c\u540e\u200b\u5220\u9664\u200b\u72b6\u6001\u673a\u200b\u3002</p>"},{"location":"core/csapp/ch12/#io_2","title":"I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u4f18\u7f3a\u70b9","text":"<p>\u200b\u57fa\u4e8e\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u5e94\u7528\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u5728\u200b\u5355\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6bcf\u4e2a\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6574\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u8fd9\u200b\u4f7f\u5f97\u200b\u63a7\u5236\u6d41\u200b\u4e4b\u95f4\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u53d8\u5f97\u200b\u975e\u5e38\u5bb9\u6613\u200b\u3002\u200b\u7531\u4e8e\u200b\u5b83\u200b\u4e0d\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u7ba1\u7406\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u6548\u7387\u200b\u8f83\u200b\u9ad8\u200b\u3002\u200b\u50cf\u200b Node.js\u3001Nginx \u200b\u548c\u200b Tornado \u200b\u7b49\u200b\u73b0\u4ee3\u200b\u9ad8\u6027\u80fd\u200b\u670d\u52a1\u5668\u200b\u5747\u200b\u4f7f\u7528\u200b I/O \u200b\u591a\u8def\u590d\u7528\u200b\u5b9e\u73b0\u200b\u3002</p> <p>I/O \u200b\u591a\u8def\u590d\u7528\u200b\u7684\u200b\u7f3a\u70b9\u200b\u662f\u200b\u7f16\u7801\u200b\u5341\u5206\u590d\u6742\u200b\uff0c\u200b\u5e76\u4e14\u200b\u65e0\u6cd5\u200b\u5145\u5206\u5229\u7528\u200b\u591a\u6838\u200b\u5904\u7406\u5668\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_5","title":"\u4f7f\u7528\u200b\u7ebf\u7a0b\u200b\u5b9e\u73b0\u200b\u5e76\u53d1","text":"<p>\u200b\u7ebf\u7a0b\u200b\u662f\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\uff0c\u200b\u5b83\u200b\u7531\u200b\u5185\u6838\u200b\u81ea\u52a8\u200b\u8c03\u5ea6\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u5305\u62ec\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u7ebf\u7a0b\u200b ID\uff08TID\uff09\u3001\u200b\u6808\u200b\u3001\u200b\u6808\u200b\u6307\u9488\u200b\u3001\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u3001\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\u548c\u200b\u6761\u4ef6\u200b\u7801\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u5185\u200b\u8fd0\u884c\u200b\u7684\u200b\u6240\u6709\u200b\u7ebf\u7a0b\u200b\u5171\u4eab\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u5168\u90e8\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_6","title":"\u7ebf\u7a0b\u200b\u6267\u884c\u200b\u6a21\u578b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6267\u884c\u200b\u6a21\u578b\u200b\u4e0e\u200b\u8fdb\u7a0b\u200b\u7c7b\u4f3c\u200b\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\uff08Main Thread\uff09\u200b\u662f\u200b\u8fdb\u7a0b\u200b\u751f\u547d\u5468\u671f\u200b\u7684\u200b\u5f00\u59cb\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b\u67d0\u200b\u4e00\u200b\u65f6\u523b\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\uff08Peer Thread\uff09\u3002\u200b\u4e24\u7ebf\u200b\u7a0b\u200b\u540c\u65f6\u200b\u8fd0\u884c\u200b\uff0c\u200b\u63a7\u5236\u6743\u200b\u901a\u8fc7\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u4f20\u9012\u200b\u3002</p> <p>\u200b\u7ebf\u7a0b\u200b\u6267\u884c\u200b\u4e0e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u533a\u522b\u200b\u5728\u4e8e\u200b\uff1a</p> <ul> <li>\u200b\u7ebf\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u6bd4\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u5c0f\u5f97\u591a\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7ebf\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u6bd4\u200b\u8fdb\u7a0b\u200b\u5feb\u200b\uff1b</li> <li>\u200b\u5c5e\u4e8e\u200b\u540c\u4e00\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u6784\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u6c60\u200b\uff0c\u200b\u5b83\u4eec\u200b\u6ca1\u6709\u200b\u7236\u5b50\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u3002\u200b\u7ebf\u7a0b\u200b\u53ef\u4ee5\u200b\u6740\u6b7b\u200b\u4efb\u4f55\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u6216\u200b\u7b49\u5f85\u200b\u4efb\u4f55\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u7ec8\u6b62\u200b\uff1b</li> <li>\u200b\u6bcf\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8bfb\u5199\u200b\u76f8\u540c\u200b\u7684\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch12/#posix","title":"Posix \u200b\u7ebf\u7a0b","text":"<p>Posix \u200b\u7ebf\u7a0b\u200b\uff08Pthread\uff09\u200b\u662f\u200b C \u200b\u7a0b\u5e8f\u200b\u64cd\u4f5c\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6807\u51c6\u63a5\u53e3\u200b\u3002\u200b\u5b83\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u5927\u7ea6\u200b\u516d\u5341\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u5141\u8bb8\u200b\u7a0b\u5e8f\u200b\u521b\u5efa\u200b\u7ebf\u7a0b\u200b\u3001\u200b\u7ec8\u6b62\u200b\u7ebf\u7a0b\u200b\u3001\u200b\u56de\u6536\u200b\u7ebf\u7a0b\u200b\u3001\u200b\u4e0e\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u5730\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u4ee5\u53ca\u200b\u901a\u77e5\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u7cfb\u7edf\u200b\u72b6\u6001\u200b\u7684\u200b\u53d8\u5316\u200b\u7b49\u200b\u3002</p> <pre><code>#include \"csapp/csapp.h\"\nvoid *thread(void *vargp) /* thread routine */\n{\n  printf(\"Hello, world!\\n\");\n  return NULL;\n}\n\nint main() {\n  pthread_t tid;\n  Pthread_create(&amp;tid, NULL, thread, NULL);\n  Pthread_join(tid, NULL);\n  exit(0);\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5e76\u200b\u7b49\u5f85\u200b\u5b83\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5728\u200b\u6253\u5370\u200b<code>Hello, world!\\n</code>\u200b\u540e\u200b\u8fd4\u56de\u200b\u3002</p> <p>\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u5c40\u90e8\u200b\u6570\u636e\u200b\u5c01\u88c5\u200b\u5728\u7ebf\u200b\u7a0b\u200b\u4f8b\u7a0b\u200b\uff08Thread Routine\uff09\u200b\u4e2d\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u901a\u7528\u200b\u6307\u9488\u200b<code>void *</code>\u200b\u4f5c\u4e3a\u200b\u8f93\u5165\u200b\u5e76\u200b\u8fd4\u56de\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u901a\u7528\u200b\u6307\u9488\u200b\uff08\u200b\u7b2c\u200b 2 \u200b\u884c\u200b\uff09\u3002\u200b\u5982\u679c\u200b\u9700\u8981\u200b\u5411\u200b\u7ebf\u7a0b\u200b\u4f8b\u7a0b\u200b\u4f20\u9012\u200b\u591a\u4e2a\u200b\u53c2\u6570\u200b\uff0c\u200b\u5219\u200b\u5e94\u200b\u5c06\u200b\u5b83\u4eec\u200b\u653e\u5165\u200b\u4e00\u4e2a\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u5e76\u200b\u4f20\u9012\u200b\u6307\u5411\u200b\u8be5\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u540c\u6837\u200b\uff0c\u200b\u5982\u679c\u200b\u60f3\u200b\u8ba9\u200b\u7ebf\u7a0b\u200b\u4f8b\u7a0b\u200b\u8fd4\u56de\u200b\u591a\u4e2a\u200b\u53c2\u6570\u200b\uff0c\u200b\u5219\u200b\u5e94\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b\u5305\u542b\u200b\u591a\u4e2a\u200b\u53c2\u6570\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\u6307\u9488\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_7","title":"\u521b\u5efa\u200b\u7ebf\u7a0b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u51fd\u6570\u200b<code>pthread_create</code>\u200b\u521b\u5efa\u200b\u65b0\u200b\u7ebf\u7a0b\u200b\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\ntypedef void *(func)(void *);\nint pthread_create(pthread_t *tid, pthread_attr_t *attr,\n                   func *f, void *arg);\n// Returns: 0 if OK, nonzero on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>f</code>\u200b\u662f\u200b\u65b0\u200b\u7ebf\u7a0b\u200b\u5728\u200b\u5176\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u4f8b\u7a0b\u200b\uff0c\u200b\u53c2\u6570\u200b<code>arg</code>\u200b\u662f\u200b\u8be5\u200b\u4f8b\u7a0b\u200b\u7684\u200b\u8f93\u5165\u200b\u53c2\u6570\u200b\u3002\u200b\u53c2\u6570\u200b<code>attr</code>\u200b\u53ef\u200b\u7528\u4e8e\u200b\u66f4\u6539\u200b\u65b0\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u5c5e\u6027\u200b\uff0c\u200b\u4e00\u822c\u200b\u8bbe\u200b\u4e3a\u200b<code>NULL</code>\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u53c2\u6570\u200b<code>tid</code>\u200b\u5c06\u200b\u53d8\u4e3a\u200b\u65b0\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u7ebf\u7a0b\u200b ID\u3002\u200b\u7ebf\u7a0b\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>pthread_self</code>\u200b\u51fd\u6570\u200b\u786e\u8ba4\u200b\u81ea\u5df1\u200b\u7684\u200b\u7ebf\u7a0b\u200b ID\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\npthread_t pthread_self(void);\n//Returns: thread ID of caller\n</code></pre>"},{"location":"core/csapp/ch12/#_8","title":"\u7ec8\u6b62\u200b\u7ebf\u7a0b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u7ec8\u6b62\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5305\u62ec\u200b\uff1a</p> <ul> <li>\u200b\u5728\u200b\u5176\u200b\u4f8b\u7a0b\u200b\u8fd4\u56de\u200b\u65f6\u9690\u5f0f\u200b\u7ec8\u6b62\u200b\uff1b</li> <li>\u200b\u8c03\u7528\u51fd\u6570\u200b<code>pthread_exit</code>\u200b\u663e\u5f0f\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u53c2\u6570\u200b<code>thread_return</code>\u200b\u7528\u4e8e\u200b\u51fd\u6570\u200b <code>pthread_join</code>\uff1a</li> </ul> <pre><code>#include &lt;pthread.h&gt;\nvoid pthread_exit(void *thread_return);\n// Never returns\n</code></pre> <ul> <li>\u200b\u8c03\u7528\u200b Linux \u200b\u51fd\u6570\u200b<code>exit</code>\u200b\u7ec8\u6b62\u200b\u8fdb\u7a0b\u200b\u4ee5\u53ca\u200b\u4e0e\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u5173\u8054\u200b\u7684\u200b\u6240\u6709\u200b\u7ebf\u7a0b\u200b\uff1b</li> <li>\u200b\u8c03\u7528\u51fd\u6570\u200b<code>pthread_cancel</code>\u200b\u7ec8\u6b62\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b ID \u200b\u4e3a\u200b<code>tid</code>\u200b\u7684\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\uff1a</li> </ul> <pre><code>#include &lt;pthread.h&gt;\nint pthread_cancel(pthread_t tid);\n// Returns: 0 if OK, nonzero on error\n</code></pre>"},{"location":"core/csapp/ch12/#_9","title":"\u56de\u6536\u200b\u7ebf\u7a0b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u200b<code>pthread_join</code>\u200b\u51fd\u6570\u200b\u7b49\u5f85\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b<code>tid</code>\u200b\u7ec8\u6b62\u200b\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\nint pthread_join(pthread_t tid, void **thread_return);\n// Returns: 0 if OK, nonzero on error\n</code></pre> <p>\u200b\u7ebf\u7a0b\u200b<code>tid</code>\u200b\u7ec8\u6b62\u200b\u540e\u200b\uff0c\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u7ebf\u7a0b\u200b\u4f8b\u7a0b\u200b\u8fd4\u56de\u200b\u7684\u200b\u901a\u7528\u200b\u6307\u9488\u200b\u5206\u914d\u200b\u5230\u200b<code>thread_return</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u7136\u540e\u200b\u56de\u6536\u200b\u7ec8\u6b62\u200b\u7ebf\u7a0b\u200b\u6301\u6709\u200b\u7684\u200b\u6240\u6709\u200b\u5185\u5b58\u200b\u8d44\u6e90\u200b\u3002\u200b\u4e0e\u200b  <code>waitpid</code> \u200b\u4e0d\u540c\u200b\uff0c<code>pthread_join</code>\u200b\u53ea\u80fd\u200b\u7b49\u5f85\u200b\u67d0\u4e2a\u200b\u7279\u5b9a\u200b\u7ebf\u7a0b\u200b\u7ec8\u6b62\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_10","title":"\u5206\u79bb\u200b\u7ebf\u7a0b","text":"<p>\u200b\u5728\u200b\u4efb\u610f\u200b\u65f6\u523b\u200b\uff0c\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u662f\u200b\u53ef\u200b\u8fde\u63a5\u200b\u7684\u200b\uff08Joinable\uff09\u200b\u6216\u200b\u5206\u79bb\u200b\u7684\u200b\uff08Detached\uff09\u3002\u200b\u4e00\u4e2a\u200b\u53ef\u200b\u8fde\u63a5\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u56de\u6536\u200b\u6216\u200b\u6740\u6b7b\u200b\uff0c\u200b\u5176\u200b\u5185\u5b58\u200b\u8d44\u6e90\u200b\uff08\u200b\u5982\u6808\u200b\uff09\u200b\u5728\u200b\u5b83\u200b\u88ab\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u56de\u6536\u200b\u4e4b\u524d\u200b\u4e0d\u4f1a\u200b\u91ca\u653e\u200b\uff1b\u200b\u76f8\u53cd\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u5206\u79bb\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u65e0\u6cd5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u56de\u6536\u200b\u6216\u200b\u6740\u6b7b\u200b\uff0c\u200b\u5176\u200b\u5185\u5b58\u200b\u8d44\u6e90\u200b\u5c06\u200b\u5728\u200b\u5b83\u200b\u7ec8\u6b62\u200b\u65f6\u200b\u7531\u200b\u7cfb\u7edf\u200b\u81ea\u52a8\u200b\u91ca\u653e\u200b\u3002</p> <p>\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u7ebf\u7a0b\u200b\u662f\u200b\u53ef\u200b\u8fde\u63a5\u200b\u7684\u200b\u3002\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u53ef\u200b\u8fde\u63a5\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u5e94\u5f53\u200b\u88ab\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u663e\u5f0f\u200b\u5730\u200b\u56de\u6536\u200b\uff0c\u200b\u6216\u8005\u200b\u8c03\u7528\u200b<code>pthread_detach</code>\u200b\u51fd\u6570\u200b\u6210\u4e3a\u200b\u4e00\u4e2a\u200b\u5206\u79bb\u200b\u7684\u200b\u7ebf\u7a0b\u200b\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\nint pthread_detach(pthread_t tid);\n// Returns: 0 if OK, nonzero on error\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>tid</code>\u200b\u662f\u200b\u88ab\u200b\u5206\u79bb\u200b\u7684\u200b\u7ebf\u7a0b\u200b ID\uff0c\u200b\u7ebf\u7a0b\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u8bbe\u200b\u4e3a\u200b<code>pthread_self()</code>\u200b\u6765\u200b\u5206\u79bb\u200b\u81ea\u5df1\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_11","title":"\u521d\u59cb\u5316\u200b\u7ebf\u7a0b","text":"<p>\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u200b<code>pthread_once</code>\u200b\u51fd\u6570\u200b\u521d\u59cb\u5316\u200b\u4e0e\u200b\u7ebf\u7a0b\u200b\u4f8b\u7a0b\u200b\u5173\u8054\u200b\u7684\u200b\u72b6\u6001\u200b\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\npthread_once_t once_control = PTHREAD_ONCE_INIT;\nint pthread_once(pthread_once_t *once_control,\n                 void (*init_routine)(void));\n// Always returns 0\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>once_control</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5168\u5c40\u53d8\u91cf\u200b\u6216\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\uff0c\u200b\u5b83\u200b\u59cb\u7ec8\u200b\u88ab\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b<code>PTHREAD_ONCE_INIT</code>\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u7b2c\u4e00\u6b21\u200b\u88ab\u200b\u8c03\u7528\u200b\u65f6\u4f1a\u200b\u76f4\u63a5\u200b\u8c03\u7528\u200b<code>init_routine</code>\uff0c\u200b\u968f\u540e\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b<code>once_control</code>\u200b\u53c2\u6570\u200b\u7684\u200b\u8c03\u7528\u200b\u4e0d\u4f1a\u200b\u8d77\u200b\u4efb\u4f55\u200b\u4f5c\u7528\u200b\u3002\u200b\u5982\u4e0b\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u5c06\u200b\u8f93\u51fa\u200b 1\uff1a</p> <pre><code>#include &lt;pthread.h&gt;\n#include &lt;stdio.h&gt;\npthread_once_t once_control = PTHREAD_ONCE_INIT;\nint cnt;\n\nvoid init_routine(void)\n{\n    cnt++;\n}\n\nint main()\n{\n    pthread_once(&amp;once_control, *init_routine);\n    pthread_once(&amp;once_control, *init_routine);\n    printf(\"%d\", cnt);\n}\n</code></pre> <p>\u200b\u5f53\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u52a8\u6001\u200b\u521d\u59cb\u5316\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u5171\u4eab\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u65f6\u200b\uff0c\u200b\u8be5\u200b\u51fd\u6570\u200b\u5341\u5206\u200b\u6709\u7528\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_12","title":"\u57fa\u4e8e\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668","text":"<p>\u200b\u4e00\u4e2a\u200b\u57fa\u4e8e\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nvoid echo(int connfd);\n/* thread routine */\nvoid *thread(void *vargp)\n{\n    int connfd = *((int *)vargp);\n    Pthread_detach(pthread_self());\n    Free(vargp);\n    echo(connfd);\n    Close(connfd);\n    return NULL;\n}\n\nint main(int argc, char **argv)\n{\n    int listenfd, *connfdp;\n    socklen_t clientlen;\n    struct sockaddr_storage clientaddr;\n    pthread_t tid;\n\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    listenfd = Open_listenfd(argv[1]);\n\n    while (1)\n    {\n        clientlen = sizeof(struct sockaddr_storage);\n        connfdp = Malloc(sizeof(int));\n        *connfdp = Accept(listenfd, (SA *)&amp;clientaddr, &amp;clientlen);\n        Pthread_create(&amp;tid, NULL, thread, connfdp);\n    }\n}\n</code></pre> <p>\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6574\u4f53\u200b\u7ed3\u6784\u200b\u4e0e\u200b\u57fa\u4e8e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u53cd\u590d\u200b\u7b49\u5f85\u200b\u5ba2\u6237\u7aef\u200b\u8fde\u63a5\u200b\uff0c\u200b\u7136\u540e\u200b\u521b\u5efa\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5904\u7406\u200b\u8bf7\u6c42\u200b\u3002\u200b\u503c\u5f97\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u8c03\u7528\u200b<code>Malloc</code>\u200b\u51fd\u6570\u200b\u751f\u6210\u200b\u6307\u5411\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u7684\u200b\u6307\u9488\u200b<code>connfdp</code>\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u4f20\u9012\u200b\u7ed9\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\uff08\u200b\u7b2c\u200b 32\uff5e34 \u200b\u884c\u200b\uff09\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u76f4\u63a5\u200b\u4f20\u9012\u200b\u6307\u9488\u200b\uff0c\u200b\u5982\u200b\uff1a</p> <pre><code>connfd = Accept(listenfd, (SA *) &amp;clientaddr, &amp;clientlen);\nPthread_create(&amp;tid, NULL, thread, &amp;connfd);\n\nvoid *thread(void *vargp) {\n    int connfd = *((int *)vargp);\n    . . .\n}\n</code></pre> <p>\u200b\u5c31\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u8d4b\u503c\u200b\u8bed\u53e5\u200b\u4e0e\u200b\u4e3b\u7ebf\u200b\u7a0b\u4e2d\u200b\u7684\u200b<code>Accpet</code>\u200b\u8c03\u7528\u200b\u4ea7\u751f\u200b\u7ade\u4e89\u200b\uff1a\u200b\u82e5\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u5728\u200b\u8d4b\u503c\u200b\u8bed\u53e5\u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\u524d\u200b\u4e0e\u200b\u670d\u52a1\u5668\u200b\u5efa\u7acb\u200b\u8fde\u63a5\u200b\uff0c\u200b\u5219\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>connfd</code>\u200b\u4f1a\u200b\u53d8\u6210\u200b\u65b0\u200b\u5ba2\u6237\u7aef\u200b\u7684\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u3002\u200b\u7531\u4e8e\u200b<code>Malloc</code>\u200b\u53ef\u4ee5\u200b\u5c06\u200b<code>connfd</code>\u200b\u52a8\u6001\u5206\u914d\u200b\u5230\u200b\u4e0d\u540c\u200b\u7684\u200b\u5806\u200b\u5185\u5b58\u200b Block \u200b\u4e2d\u200b\uff0c\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\u4fbf\u200b\u5f97\u5230\u200b\u4e86\u200b\u89e3\u51b3\u200b\u3002</p> <p>\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u5185\u5b58\u200b\u6cc4\u6f0f\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u5206\u79bb\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\uff08\u200b\u7b2c\u200b 8 \u200b\u884c\u200b\uff09\u200b\u5e76\u200b\u91ca\u653e\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u5206\u914d\u200b\u7684\u200b\u5806\u200b\u5185\u5b58\u200b\uff08\u200b\u7b2c\u200b 9 \u200b\u884c\u200b\uff09\u3002\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u7ebf\u7a0b\u200b\u5171\u4eab\u200b\u63cf\u8ff0\u7b26\u200b\u8868\u200b\uff0c\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u7684\u200b<code>rfcnt</code>\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 1\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ea\u200b\u9700\u200b\u5728\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u5173\u95ed\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\uff0c\u200b\u800c\u200b\u4e0d\u5fc5\u200b\u50cf\u200b\u57fa\u4e8e\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u90a3\u6837\u200b\u5728\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u8fdb\u884c\u200b\u540c\u6837\u200b\u7684\u200b\u64cd\u4f5c\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_13","title":"\u7ebf\u7a0b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u5171\u4eab\u200b\u53d8\u91cf","text":"<p>\u200b\u5728\u200b\u7a0b\u5e8f\u5458\u200b\u770b\u6765\u200b\uff0c\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6700\u5927\u200b\u4f18\u52bf\u200b\u5728\u4e8e\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u53ef\u4ee5\u200b\u8f7b\u677e\u200b\u5730\u200b\u5171\u4eab\u200b\u76f8\u540c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u53d8\u91cf\u200b\u3002\u200b\u7136\u800c\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u4fbf\u5229\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5e26\u6765\u200b\u4e00\u4e9b\u200b\u95ee\u9898\u200b\u3002\u200b\u4e3a\u4e86\u200b\u6b63\u786e\u200b\u5730\u200b\u7f16\u5199\u200b\u7ebf\u7a0b\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u6211\u4eec\u200b\u4ee5\u200b\u5982\u4e0b\u200b\u7a0b\u5e8f\u200b\u4e3a\u4f8b\u200b\u8bf4\u660e\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\u7684\u200b\u542b\u4e49\u200b\u53ca\u200b\u5de5\u4f5c\u200b\u539f\u7406\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n#define N 2\nvoid *thread(void *vargp);\n\nchar **ptr; /* global variable */\n\nint main()\n{\n    int i;\n    pthread_t tid;\n    char *msgs[N] = {\n        \"Hello from foo\",\n        \"Hello from bar\"};\n\n    ptr = msgs;\n    for (i = 0; i &lt; N; i++)\n        Pthread_create(&amp;tid, NULL, thread, (void *)i);\n    Pthread_exit(NULL);\n}\n\nvoid *thread(void *vargp)\n{\n    int myid = (int)vargp;\n    static int cnt = 0;                                    \n    printf(\"[%d]: %s (cnt=%d)\\n\", myid, ptr[myid], ++cnt); \n    return NULL;\n}\n</code></pre>"},{"location":"core/csapp/ch12/#_14","title":"\u7ebf\u7a0b\u200b\u5185\u5b58\u200b\u6a21\u578b","text":"<p>\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u6709\u200b\u81ea\u5df1\u200b\u72ec\u7acb\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\uff0c\u200b\u56e0\u6b64\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u4e4b\u95f4\u200b\u5171\u4eab\u200b\u540c\u4e00\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u7684\u200b\u5176\u4f59\u90e8\u5206\u200b\u3002\u200b\u5b83\u4eec\u200b\u5305\u62ec\u200b\uff1a\u200b\u53ea\u8bfb\u200b\u6587\u672c\u200b\uff08\u200b\u4ee3\u7801\u200b\uff09\u200b\u6bb5\u200b\u3001\u200b\u53ef\u200b\u8bfb\u5199\u200b\u6570\u636e\u200b\u6bb5\u200b\u3001\u200b\u5806\u200b\u3001\u200b\u5171\u4eab\u200b\u5e93\u200b\u548c\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u7b49\u200b\u3002</p> <p>\u200b\u7ebf\u7a0b\u200b\u65e0\u6cd5\u200b\u8bfb\u53d6\u200b\u6216\u200b\u5199\u5165\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u4f46\u200b\u4efb\u4f55\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u80fd\u591f\u200b\u8bbf\u95ee\u5171\u4eab\u200b\u865a\u62df\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4efb\u4f55\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5c3d\u7ba1\u200b\u6808\u200b\u5c5e\u4e8e\u200b\u7ebf\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u4f46\u200b\u7ebf\u7a0b\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6307\u200b\u9488\u5bf9\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6808\u200b\u5185\u5bb9\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b\u3002\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u7b2c\u200b 25 \u200b\u884c\u200b\uff0c\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u901a\u8fc7\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>ptr</code>\u200b\u95f4\u63a5\u200b\u5f15\u7528\u200b\u4e86\u200b\u4e3b\u7ebf\u200b\u7a0b\u6808\u200b\u4e2d\u200b\u7684\u200b\u6570\u7ec4\u200b<code>msgs[N]</code>\u3002</p>"},{"location":"core/csapp/ch12/#_15","title":"\u5c06\u200b\u53d8\u91cf\u200b\u6620\u5c04\u200b\u5230\u200b\u5185\u5b58","text":"<p>C \u200b\u7ebf\u7a0b\u200b\u7a0b\u5e8f\u200b\u6839\u636e\u200b\u53d8\u91cf\u200b\u7684\u200b\u5b58\u50a8\u200b\u7c7b\u578b\u200b\u5c06\u200b\u5176\u200b\u6620\u5c04\u200b\u5230\u200b\u865a\u62df\u5185\u5b58\u200b\uff1a</p> <ul> <li>\u200b\u5168\u5c40\u53d8\u91cf\u200b\uff1a\u200b\u5168\u5c40\u53d8\u91cf\u200b\u7684\u200b\u552f\u4e00\u200b\u5b9e\u4f8b\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u4e8e\u200b \u200b\u53ef\u200b\u8bfb\u5199\u200b\u6bb5\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u4efb\u610f\u200b\u7ebf\u7a0b\u200b\u5f15\u7528\u200b\u3002\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u7b2c\u200b 5 \u200b\u884c\u200b\u58f0\u660e\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>ptr</code>\u200b\u4fbf\u662f\u200b\u5982\u6b64\u200b\uff1b</li> <li>\u200b\u5c40\u90e8\u200b\u81ea\u52a8\u200b\u53d8\u91cf\u200b\uff1a\u200b\u5c40\u90e8\u200b\u81ea\u52a8\u200b\u53d8\u91cf\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u4e8e\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u5982\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u53d8\u91cf\u200b<code>tid</code>\u200b\u548c\u200b<code>myid</code>\u3002\u200b\u4e3a\u4e86\u200b\u533a\u5206\u200b\u4e0d\u540c\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u76f8\u540c\u200b\u53d8\u91cf\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c06\u200b\u5b83\u4eec\u200b\u5206\u522b\u200b\u8868\u793a\u200b\u4e3a\u200b<code>tid.m</code>\u3001<code>myid.p0</code>\u200b\u548c\u200b<code>myid.p1</code>\uff1b</li> <li>\u200b\u5c40\u90e8\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\uff1a\u200b\u4e0e\u200b\u5168\u5c40\u53d8\u91cf\u200b\u4e00\u6837\u200b\uff0c\u200b\u5c40\u90e8\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\u7684\u200b\u552f\u4e00\u200b\u5b9e\u4f8b\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u4e8e\u200b\u53ef\u200b\u8bfb\u5199\u200b\u6bb5\u200b\u3002\u200b\u5373\u4f7f\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u58f0\u660e\u200b\u4e86\u200b\u5c40\u90e8\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b<code>cnt</code>\uff08\u200b\u7b2c\u200b 24 \u200b\u884c\u200b\uff09\uff0c\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u865a\u62df\u5185\u5b58\u200b\u4e2d\u200b\u4e5f\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b<code>cnt</code>\u200b\u5b9e\u4f8b\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch12/#_16","title":"\u5171\u4eab\u200b\u53d8\u91cf","text":"<p>\u200b\u5f53\u200b\u4e00\u4e2a\u200b\u53d8\u91cf\u200b\u7684\u200b\u5b9e\u4f8b\u200b\u88ab\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u5f15\u7528\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u5b83\u200b\u4e3a\u200b\u5171\u4eab\u200b\u7684\u200b\u3002\u200b\u5728\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u662f\u200b\u5171\u4eab\u200b\u7684\u200b\uff0c\u200b\u800c\u200b<code>myid</code>\u200b\u5219\u200b\u4e0d\u662f\u200b\u3002\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5747\u200b\u901a\u8fc7\u200b<code>ptr</code>\u200b\u95f4\u63a5\u200b\u5f15\u7528\u200b\u4e86\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>msgs</code>\uff0c\u200b\u56e0\u6b64\u200b<code>msgs</code>\u200b\u4e5f\u200b\u662f\u200b\u5171\u4eab\u200b\u7684\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_17","title":"\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b\u540c\u6b65\u200b\u7ebf\u7a0b","text":"<p>\u200b\u4ee5\u4e0b\u200b\u7a0b\u5e8f\u200b<code>badcnt.c</code>\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u90fd\u200b\u4f1a\u200b\u5c06\u200b\u5168\u5c40\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u9012\u589e\u200b<code>niters</code>\u200b\u6b21\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nvoid *thread(void *vargp); /* Thread routine prototype */\n\n/* Global shared variable */\nvolatile long cnt = 0; /* Counter */\n\nint main(int argc, char **argv)\n{\n    long niters;\n    pthread_t tid1, tid2;\n\n    /* Check input argument */\n    if (argc != 2)\n    {\n        printf(\"usage: %s &lt;niters&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    niters = atoi(argv[1]);\n\n    /* Create threads and wait for them to finish */\n    Pthread_create(&amp;tid1, NULL, thread, &amp;niters);\n    Pthread_create(&amp;tid2, NULL, thread, &amp;niters);\n    Pthread_join(tid1, NULL);\n    Pthread_join(tid2, NULL);\n\n    /* Check result */\n    if (cnt != (2 * niters))\n        printf(\"BOOM! cnt=%d\\n\", cnt);\n    else\n        printf(\"OK cnt=%d\\n\", cnt);\n    exit(0);\n}\n\n/* Thread routine */\nvoid *thread(void *vargp)\n{\n    long i, niters = *((long *)vargp);\n\n    for (i = 0; i &lt; niters; i++)\n        cnt++;\n    return NULL;\n}\n</code></pre> <p>\u200b\u7406\u8bba\u200b\u4e0a\u200b\uff0c\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u5e94\u4e3a\u200b<code>2 * niters</code>\u3002\u200b\u7136\u800c\u200b\u5f53\u200b\u5b83\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u4e0d\u4f46\u200b\u4f1a\u200b\u5f97\u5230\u200b\u9519\u8bef\u200b\u7684\u200b\u7b54\u6848\u200b\uff0c\u200b\u5e76\u4e14\u200b\u6bcf\u6b21\u200b\u7684\u200b\u7ed3\u679c\u200b\u8fd8\u200b\u4e0d\u540c\u200b\uff1a</p> <pre><code>linux&gt; ./badcnt 1000000 BOOM! cnt=1445085\nlinux&gt; ./badcnt 1000000 BOOM! cnt=1915220\nlinux&gt; ./badcnt 1000000 BOOM! cnt=1404746\n</code></pre> <p>\u200b\u4e3a\u4e86\u200b\u6e05\u695a\u200b\u5730\u200b\u7406\u89e3\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u7814\u7a76\u200b\u4e00\u4e0b\u200b\u8ba1\u6570\u5668\u200b\u5faa\u73af\u200b\uff08\u200b\u7b2c\u200b 40\uff5e41 \u200b\u884c\u200b\uff09\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>; i in %rax, niters in %rcx, cnt in %rdx\n    movq  (%rdi), %rcx\n    testq %rcx, %rcx\n    jle   .L2\n    movl  $0, %eax\n.L3:\n    movq  cnt(%rip), %rdx\n    addq  $1, %rdx\n    movq  movq %rdx, cnt(%rip)\n    addq  $1, %rax\n    cmpq  %rcx, %rax\n    jne   .L3\n.L2:\n</code></pre> <p>\u200b\u8fd9\u200b\u6bb5\u200b\u4ee3\u7801\u200b\u53ef\u4ee5\u200b\u5206\u4e3a\u200b\u4ee5\u4e0b\u200b\u4e94\u4e2a\u200b\u90e8\u5206\u200b\uff1a</p> <ul> <li>\\(H_i\\)\uff1a\u200b\u5faa\u73af\u200b\u5934\u90e8\u200b\u7684\u200b\u6307\u4ee4\u200b\u5757\u200b\uff08\u200b\u7b2c\u200b 2\uff5e5 \u200b\u884c\u200b\uff09\uff1b</li> <li>\\(L_i\\)\uff1a\u200b\u5c06\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5bc4\u5b58\u5668\u200b %\\(rdx_i\\)\uff08\u200b\u7b2c\u200b 7 \u200b\u884c\u200b\uff09\uff1b</li> <li>\\(U_i\\)\uff1a\u200b\u5c06\u200b %\\(rdx_i\\) \u200b\u52a0\u4e00\u200b\uff08\u200b\u7b2c\u200b 8 \u200b\u884c\u200b\uff09\uff1b</li> <li>\\(S_i\\)\uff1a\u200b\u5c06\u200b %\\(rdx_i\\) \u200b\u66f4\u65b0\u200b\u540e\u200b\u7684\u200b\u503c\u200b\u5b58\u56de\u200b\u53d8\u91cf\u200b<code>cnt</code>\uff08\u200b\u7b2c\u200b 9 \u200b\u884c\u200b\uff09\uff1b</li> <li>\\(T_i\\)\uff1a\u200b\u5faa\u73af\u200b\u5c3e\u90e8\u200b\u7684\u200b\u6307\u4ee4\u200b\u5757\u200b\uff08\u200b\u7b2c\u200b 10\uff5e13 \u200b\u884c\u200b\uff09\u3002</li> </ul> <p>\u200b\u4e0a\u8ff0\u200b\u6307\u4ee4\u200b\u5728\u200b\u5355\u6838\u200b\u5904\u7406\u5668\u200b\u4e0a\u4ee5\u200b\u67d0\u79cd\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u6267\u884c\u200b\uff0c\u200b\u4e0d\u540c\u200b\u7684\u200b\u6267\u884c\u200b\u987a\u5e8f\u200b\u5c06\u200b\u5bfc\u81f4\u200b\u4e0d\u540c\u200b\u7684\u200b\u7ed3\u679c\u200b\u3002\u200b\u6211\u4eec\u200b\u4ee5\u200b\u7b2c\u4e00\u6b21\u200b\u5faa\u73af\u200b\u4e3a\u4f8b\u200b\uff1a</p> <p> \u200b\u5982\u56fe\u200b\uff08b\uff09\u200b\u6240\u793a\u200b\uff0c\u200b\u7ebf\u7a0b\u200b 2 \u200b\u5728\u200b\u7b2c\u4e94\u6b65\u200b\u5c06\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u52a0\u8f7d\u200b\u5230\u200b %\\(rdx_2\\)\u3002\u200b\u6b64\u65f6\u200b\u7ebf\u7a0b\u200b 1 \u200b\u5df2\u7ecf\u200b\u5728\u200b\u7b2c\u4e09\u6b65\u200b\u66f4\u65b0\u200b\u4e86\u200b %\\(rdx_1\\) \u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u4f46\u200b\u8fd8\u200b\u672a\u200b\u628a\u200b\u5b83\u200b\u5b58\u56de\u200b<code>cnt</code>\u3002\u200b\u56e0\u6b64\u200b %\\(rdx_2\\) \u200b\u7684\u200b\u521d\u59cb\u503c\u200b\u4e3a\u200b 0\uff0c\u200b\u7ebf\u7a0b\u200b 2 \u200b\u65e0\u6cd5\u200b\u50cf\u200b\u56fe\u200b\uff08a\uff09\u200b\u90a3\u6837\u200b\u5c06\u200b<code>cnt</code>\u200b\u4ece\u200b 1 \u200b\u9012\u589e\u200b\u5230\u200b 2\u3002</p>"},{"location":"core/csapp/ch12/#_18","title":"\u8fdb\u5ea6\u200b\u56fe","text":"<p>\u200b\u8fdb\u5ea6\u200b\u56fe\u200b\uff08Progress Graph\uff09\u200b\u5c06\u200b n \u200b\u4e2a\u200b\u5e76\u53d1\u200b\u7ebf\u7a0b\u200b\u5efa\u6a21\u200b\u4e3a\u200b n \u200b\u7ef4\u200b\u7b1b\u5361\u5c14\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u7684\u200b\u8f68\u8ff9\u200b\uff08Trajectory\uff09\u3002\u200b\u5176\u4e2d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5750\u6807\u8f74\u200b\u5bf9\u5e94\u200b\u7ebf\u7a0b\u200b \\(k\\) \u200b\u7684\u200b\u8fdb\u5ea6\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u70b9\u200b\u4ee3\u8868\u200b\u7ebf\u7a0b\u200b \\(k\\) \u200b\u5df2\u200b\u5b8c\u6210\u200b\u6307\u4ee4\u200b \\(I_k\\) \u200b\u7684\u200b\u72b6\u6001\u200b\u3002\u200b\u7a0b\u5e8f\u200b<code>badcnt.c</code>\u200b\u7b2c\u4e00\u6b21\u200b\u5faa\u73af\u200b\u7684\u200b\u8fdb\u5ea6\u200b\u56fe\u200b\u5982\u4e0b\u200b\uff0c\u200b\u70b9\u200b \\((L_1, S_2)\\) \u200b\u4ee3\u8868\u200b\u7ebf\u7a0b\u200b 1 \u200b\u5df2\u200b\u5b8c\u6210\u200b \\(L_1\\)\uff0c\u200b\u7ebf\u7a0b\u200b 2 \u200b\u5219\u200b\u5df2\u200b\u5b8c\u6210\u200b \\(S_2\\)\uff1a</p> <p> \u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6267\u884c\u200b\u5386\u53f2\u200b\u53ef\u4ee5\u200b\u7528\u200b\u8fdb\u5ea6\u200b\u56fe\u4e2d\u200b\u7684\u200b\u8f68\u8ff9\u200b\u8868\u793a\u200b\u3002\u200b\u5047\u8bbe\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u7b2c\u4e00\u6b21\u200b\u5faa\u73af\u200b\u7684\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u987a\u5e8f\u200b\u4e3a\u200b\uff1a</p> \\[H_1, L_1, U_1, H_2, L_2, S_1, T_1, U_2, S_2, T_2\\] <p>\u200b\u5219\u200b\u8fdb\u5ea6\u200b\u56fe\u200b\u8f68\u8ff9\u200b\u4e3a\u200b\uff1a</p> <p> \u200b\u5bf9\u4e8e\u200b\u7ebf\u7a0b\u200b \\(i\\)\uff0c\u200b\u64cd\u4f5c\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u7684\u200b\u6307\u4ee4\u200b \\((L_i, U_i, S_i)\\) \u200b\u6784\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u4e34\u754c\u200b\u533a\u200b\uff08Critical Section\uff09\uff0c\u200b\u5b83\u200b\u4e0d\u200b\u5e94\u5f53\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u4e34\u754c\u200b\u533a\u200b\u76f8\u4ea4\u200b\u3002\u200b\u5728\u200b\u8fdb\u5ea6\u200b\u56fe\u4e0a\u200b\uff0c\u200b\u4e24\u7ebf\u200b\u7a0b\u200b\u4e34\u754c\u200b\u533a\u200b\u7684\u200b\u4ea4\u96c6\u200b\u6784\u6210\u200b\u4e86\u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\uff08Unsafe Region\uff09\uff1a</p> <p> \u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\u4e0d\u200b\u5305\u62ec\u200b\u5176\u200b\u8fb9\u7f18\u200b\uff0c\u200b\u4f8b\u5982\u200b\u72b6\u6001\u200b \\((H_1, H_2)\\) \u200b\u548c\u200b \\((S_1, U_2)\\) \u200b\u5747\u200b\u4e0d\u200b\u5c5e\u4e8e\u200b\u8be5\u200b\u533a\u57df\u200b\u3002\u200b\u7ed5\u8fc7\u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\u7684\u200b\u8f68\u8ff9\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5b89\u5168\u200b\u8f68\u8ff9\u200b\uff0c\u200b\u800c\u200b\u89e6\u53ca\u200b\u4e86\u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\u4e2d\u200b\u4efb\u4f55\u200b\u90e8\u5206\u200b\u7684\u200b\u8f68\u8ff9\u200b\u90fd\u200b\u662f\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_19","title":"\u4fe1\u53f7\u91cf","text":"<p>\u200b\u4fe1\u53f7\u91cf\u200b\uff08Semaphore\uff09<code>s</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5177\u6709\u200b\u975e\u8d1f\u200b\u6574\u6570\u200b\u503c\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ea\u80fd\u200b\u5bf9\u200b\u5b83\u200b\u8fdb\u884c\u200b\u4e24\u79cd\u200b\u64cd\u4f5c\u200b\uff1a</p> <ul> <li><code>P(s)</code>\uff1a\u200b\u82e5\u200b<code>s</code>\u200b\u975e\u96f6\u200b\uff0c\u200b\u5219\u200b\u5c06\u200b\u5176\u51cf\u200b\u4e00\u5e76\u200b\u7acb\u5373\u200b\u8fd4\u56de\u200b\uff1b\u200b\u82e5\u200b<code>s</code>\u200b\u4e3a\u200b\u96f6\u200b\uff0c\u200b\u5219\u200b\u5c06\u200b\u7ebf\u7a0b\u200b\u6682\u505c\u200b\u3002\u200b\u5f53\u200b<code>s</code>\u200b\u53d8\u4e3a\u200b\u975e\u96f6\u4e14\u200b\u7ebf\u7a0b\u200b\u7531\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u91cd\u542f\u200b\u540e\u200b\uff0c<code>P</code>\u200b\u518d\u200b\u5c06\u200b<code>s</code>\u200b\u51cf\u200b\u4e00\u5e76\u200b\u628a\u200b\u63a7\u5236\u6743\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u8c03\u7528\u8005\u200b\uff1b</li> <li><code>V(s)</code>\uff1a\u200b\u5c06\u200b<code>s</code>\u200b\u52a0\u4e00\u200b\u3002\u200b\u5982\u679c\u200b\u5b58\u5728\u200b\u4efb\u4f55\u200b\u88ab\u200b<code>P</code>\u200b\u64cd\u4f5c\u200b\u963b\u585e\u200b\u7684\u200b\u7ebf\u7a0b\u200b\uff0c\u200b\u5c31\u200b\u968f\u673a\u200b\u91cd\u542f\u200b\u5b83\u4eec\u200b\u4e2d\u200b\u7684\u200b\u4e00\u4e2a\u200b\u3002</li> </ul> <p><code>P(s)</code>\u200b\u548c\u200b<code>V(s)</code>\u200b\u64cd\u4f5c\u200b\u4e0d\u53ef\u5206\u5272\u200b\uff08\u200b\u5177\u6709\u200b\u539f\u5b50\u200b\u6027\u200b\uff09\uff0c\u200b\u56e0\u6b64\u200b\u5b83\u4eec\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u4e2d\u65ad\u200b\u3002\u200b\u5176\u200b\u5b9a\u4e49\u200b\u4fdd\u8bc1\u200b\u4e86\u200b\u6b63\u786e\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u4fe1\u53f7\u91cf\u200b\u6c38\u8fdc\u200b\u4e0d\u4f1a\u200b\u53d8\u4e3a\u200b\u8d1f\u503c\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c06\u200b\u8fd9\u79cd\u200b\u5c5e\u6027\u200b\u79f0\u4e3a\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u4e0d\u53d8\u6027\u200b\uff08Semaphore Invariant\uff09\u3002</p> <p>Posix \u200b\u6807\u51c6\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u591a\u79cd\u200b\u64cd\u4f5c\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>#include &lt;semaphore.h&gt;\nint sem_init(sem_t *sem, int pshared, unsigned int value);\nint sem_wait(sem_t *s);   /* P(s) */\nint sem_post(sem_t *s);   /* V(s) */\n// Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u6bcf\u4e2a\u200b\u4fe1\u53f7\u91cf\u200b\u90fd\u200b\u5fc5\u987b\u200b\u5728\u200b\u4f7f\u7528\u200b\u524d\u200b\u521d\u59cb\u5316\u200b\uff0c<code>sem_init</code>\u200b\u51fd\u6570\u200b\u5219\u200b\u5c06\u200b\u4fe1\u53f7\u91cf\u200b<code>sem</code>\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>value</code>\u3002\u200b\u5728\u200b\u6211\u4eec\u200b\u7684\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u4e2d\u200b\uff0c\u200b\u53c2\u6570\u200b<code>pshared</code>\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 0\u3002\u200b\u7ebf\u7a0b\u200b\u5206\u522b\u200b\u8c03\u7528\u200b<code>sem_wait</code>\u200b\u548c\u200b<code>sem_post</code>\u200b\u51fd\u6570\u200b\u6765\u200b\u6267\u884c\u200b<code>P(s)</code>\u200b\u548c\u200b<code>V(s)</code>\u200b\u64cd\u4f5c\u200b\u3002\u200b\u4e3a\u4e86\u200b\u7b80\u6d01\u200b\u8d77\u200b\u89c1\u200b\uff0c\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u4ee5\u4e0b\u200b\u7b49\u6548\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\u4ee3\u66ff\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\nvoid P(sem_t *s);   /* Wrapper function for sem_wait */\nvoid V(sem_t *s);   /* Wrapper function for sem_post */\n// Returns: nothing\n</code></pre>"},{"location":"core/csapp/ch12/#_20","title":"\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b\u5b9e\u73b0\u200b\u4e92\u65a5","text":"<p>\u200b\u4fe1\u53f7\u91cf\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u79cd\u200b\u4fbf\u6377\u200b\u7684\u200b\u65b9\u6cd5\u200b\u6765\u200b\u786e\u4fdd\u200b\u7ebf\u7a0b\u200b\u5bf9\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\u7684\u200b\u8bbf\u95ee\u200b\u4e92\u65a5\u200b\uff08Mutually Exclusive \uff09\uff1a\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u521d\u59cb\u503c\u200b\u4e3a\u200b 1 \u200b\u7684\u200b\u4fe1\u53f7\u91cf\u200b\u4e0e\u200b\u6bcf\u4e2a\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\u76f8\u5173\u8054\u200b\uff0c\u200b\u7136\u540e\u200b\u4f7f\u7528\u200b<code>P</code>\u200b\u548c\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u5305\u56f4\u200b\u4e34\u754c\u200b\u533a\u200b\u3002</p> <p>\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u503c\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 0 \u200b\u6216\u200b 1\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5c06\u200b\u5b83\u200b\u79f0\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u3002\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u4e92\u65a5\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u901a\u5e38\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u4e92\u65a5\u200b\u9501\u200b\uff08Mutex\uff09\uff0c\u200b\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b<code>P</code>\u200b\u548c\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u5219\u200b\u5206\u522b\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u52a0\u9501\u200b\u548c\u200b\u89e3\u9501\u200b\u3002\u200b\u4e00\u4e2a\u200b\u5df2\u200b\u88ab\u200b\u9501\u5b9a\u200b\u4f46\u200b\u4e92\u65a5\u200b\u9501\u200b\u8fd8\u200b\u672a\u200b\u88ab\u200b\u89e3\u9501\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u6301\u6709\u200b\u4e92\u65a5\u200b\u9501\u200b\u3002</p> <p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u6211\u4eec\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\u6b63\u786e\u200b\u540c\u6b65\u200b\u7a0b\u5e8f\u200b<code>badcnt.c</code>\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u72b6\u6001\u200b\u90fd\u200b\u6807\u6ce8\u200b\u4e86\u200b\u8be5\u200b\u72b6\u6001\u200b\u4e0b\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u503c\u200b\uff1a</p> <p> \u200b\u56fe\u4e2d\u200b\u4fe1\u53f7\u91cf\u200b\u4e3a\u200b -1 \u200b\u7684\u200b\u72b6\u6001\u200b\u5171\u540c\u200b\u6784\u6210\u200b\u4e86\u200b\u7981\u6b62\u200b\u533a\u200b\uff08Forbidden Region\uff09\u3002\u200b\u7531\u4e8e\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u4e0d\u53d8\u6027\u200b\uff0c\u200b\u4efb\u4f55\u200b\u53ef\u884c\u200b\u7684\u200b\u8f68\u8ff9\u200b\u90fd\u200b\u65e0\u6cd5\u200b\u8fdb\u5165\u200b\u8be5\u200b\u533a\u57df\u200b\u3002\u200b\u7981\u6b62\u200b\u533a\u200b\u5b8c\u5168\u200b\u5305\u56f4\u200b\u4e86\u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8f68\u8ff9\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u89e6\u53ca\u200b\u4e0d\u200b\u5b89\u5168\u533a\u200b\u7684\u200b\u4efb\u4f55\u200b\u90e8\u5206\u200b\u3002\u200b\u65e0\u8bba\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u7684\u200b\u987a\u5e8f\u200b\u5982\u4f55\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u4f1a\u200b\u6b63\u786e\u200b\u5730\u200b\u9012\u589e\u200b<code>cnt</code>\u3002</p> <p>\u200b\u7efc\u4e0a\u200b\uff0c\u200b\u4e3a\u4e86\u200b\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b\u5b9e\u73b0\u200b\u4e92\u65a5\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u9996\u5148\u200b\u58f0\u660e\u200b\u4e00\u4e2a\u200b\u4fe1\u53f7\u91cf\u200b<code>mutex</code>\uff1a</p> <pre><code>volatile long cnt = 0; /* Counter */\nsem_t mutex;           /* Semaphore that protects counter */\n</code></pre> <p>\u200b\u7136\u540e\u200b\u5728\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u4e2d\u5c06\u200b\u5176\u200b\u521d\u59cb\u5316\u200b\uff1a</p> <pre><code>Sem_init(&amp;mutex, 0, 1); /* mutex = 1 */\n</code></pre> <p>\u200b\u6700\u7ec8\u200b\u5728\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u8c03\u7528\u200b<code>P</code>\u200b\u548c\u200b<code>V</code>\u200b\u5305\u56f4\u200b\u5bf9\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b<code>cnt</code>\u200b\u7684\u200b\u66f4\u65b0\u200b\u64cd\u4f5c\u200b\uff1a</p> <pre><code>for (i = 0; i &lt; niters; i++) {\n    P(&amp;mutex);\n    cnt++;\n    V(&amp;mutex); \n}\n</code></pre>"},{"location":"core/csapp/ch12/#_21","title":"\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b\u8c03\u5ea6\u200b\u5171\u4eab\u8d44\u6e90","text":"<p>\u200b\u9664\u4e86\u200b\u5b9e\u73b0\u200b\u4e92\u65a5\u200b\u4e4b\u5916\u200b\uff0c\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u91cd\u8981\u200b\u4f5c\u7528\u200b\u662f\u200b\u8c03\u5ea6\u200b\u5bf9\u200b\u5171\u4eab\u8d44\u6e90\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u7ebf\u7a0b\u200b\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u901a\u4fe1\u200b\u3002\u200b\u8ba9\u200b\u6211\u4eec\u200b\u6765\u200b\u770b\u770b\u200b\u4e24\u4e2a\u200b\u7ecf\u5178\u200b\u6848\u4f8b\u200b\uff1a\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\uff08Producer-Consumer\uff09\u200b\u95ee\u9898\u200b\u548c\u200b\u8bfb\u53d6\u200b\u8005\u200b-\u200b\u5199\u5165\u200b\u8005\u200b\uff08Readers-Writers\uff09\u200b\u95ee\u9898\u200b\u3002</p>"},{"location":"core/csapp/ch12/#-","title":"\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u95ee\u9898","text":"<p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u751f\u4ea7\u8005\u200b\u548c\u200b\u6d88\u8d39\u8005\u200b\u7ebf\u7a0b\u200b\u5171\u4eab\u200b\u4e00\u4e2a\u200b\u6709\u200b\u754c\u200b\u7f13\u51b2\u533a\u200b\u3002\u200b\u751f\u4ea7\u8005\u200b\u7ebf\u7a0b\u200b\u91cd\u590d\u200b\u751f\u6210\u200b\u65b0\u200b\u9879\u76ee\u200b\u5e76\u200b\u5c06\u200b\u5b83\u4eec\u200b\u63d2\u5165\u200b\u7f13\u51b2\u533a\u200b\uff0c\u200b\u6d88\u8d39\u8005\u200b\u7ebf\u7a0b\u200b\u5219\u200b\u4e0d\u65ad\u200b\u4ece\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u5220\u9664\u200b\u9879\u76ee\u200b\uff0c\u200b\u7136\u540e\u200b\u6d88\u8d39\u200b\uff08\u200b\u4f7f\u7528\u200b\uff09\u200b\u5b83\u4eec\u200b\u3002</p> <p>\u200b\u7531\u4e8e\u200b\u63d2\u5165\u200b\u548c\u200b\u5220\u9664\u200b\u9879\u76ee\u200b\u6d89\u53ca\u200b\u5230\u200b\u66f4\u65b0\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u4fdd\u8bc1\u200b\u7ebf\u7a0b\u200b\u5bf9\u200b\u7f13\u51b2\u533a\u200b\u7684\u200b\u8bbf\u95ee\u200b\u662f\u200b\u4e92\u65a5\u200b\u7684\u200b\u3002\u200b\u4f46\u200b\u4ec5\u4ec5\u200b\u4fdd\u8bc1\u200b\u4e92\u65a5\u200b\u662f\u200b\u4e0d\u591f\u200b\u7684\u200b\uff0c\u200b\u6211\u4eec\u200b\u8fd8\u200b\u9700\u8981\u200b\u8c03\u5ea6\u200b\u7ebf\u7a0b\u200b\u5bf9\u200b\u7f13\u51b2\u533a\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff1a\u200b\u82e5\u200b\u7f13\u51b2\u533a\u200b\u5df2\u6ee1\u200b\uff08\u200b\u6ca1\u6709\u200b\u7a7a\u4f4d\u200b\uff09\uff0c\u200b\u5219\u200b\u751f\u4ea7\u8005\u200b\u5fc5\u987b\u200b\u7b49\u5f85\u200b\u7a7a\u4f4d\u200b\uff1b\u200b\u82e5\u200b\u7f13\u51b2\u533a\u200b\u4e3a\u7a7a\u200b\uff08\u200b\u6ca1\u6709\u200b\u53ef\u7528\u200b\u7684\u200b\u9879\u76ee\u200b\uff09\uff0c\u200b\u5219\u200b\u6d88\u8d39\u8005\u200b\u5fc5\u987b\u200b\u7b49\u5f85\u200b\u9879\u76ee\u200b\u53ef\u7528\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u5f00\u53d1\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u540d\u4e3a\u200b \\(S_{buf}\\) \u200b\u7684\u200b\u7b80\u5355\u200b\u5305\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u64cd\u4f5c\u200b<code>sbuf_t</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\uff1a</p> <pre><code>typedef struct {\n    int *buf;          /* Buffer array */         \n    int n;             /* Maximum number of slots */\n    int front;         /* buf[(front+1)%n] is first item */\n    int rear;          /* buf[rear%n] is last item */\n    sem_t mutex;       /* Protects accesses to buf */\n    sem_t slots;       /* Counts available slots */\n    sem_t items;       /* Counts available items */\n} sbuf_t;\n</code></pre> <p>\u200b\u6240\u6709\u200b\u9879\u76ee\u200b\u5747\u200b\u5b58\u50a8\u200b\u5728\u200b\u4e00\u4e2a\u200b\u52a8\u6001\u5206\u914d\u200b\u4e14\u200b\u5305\u542b\u200b <code>n</code> \u200b\u4e2a\u200b\u7a7a\u4f4d\u200b\u7684\u200b\u6574\u578b\u200b\u6570\u7ec4\u200b<code>buf</code>\u200b\u4e2d\u200b\uff0c<code>front</code>\u200b\u548c\u200b<code>rear</code>\u200b\u7528\u4e8e\u200b\u8bb0\u5f55\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u9879\u76ee\u200b\u548c\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u9879\u76ee\u200b\u3002\u200b\u4fe1\u53f7\u91cf\u200b<code>mutex</code>\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u5bf9\u200b\u7f13\u51b2\u533a\u200b\u8bbf\u95ee\u200b\u7684\u200b\u4e92\u65a5\u200b\uff0c<code>slots</code>\u200b\u548c\u200b<code>items</code>\u200b\u5219\u200b\u5206\u522b\u200b\u8ba1\u7b97\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u7684\u200b\u7a7a\u4f4d\u200b\u548c\u200b\u53ef\u7528\u200b\u9879\u76ee\u200b\u7684\u200b\u6570\u91cf\u200b\u3002</p> <p>\\(S_{buf}\\) \u200b\u5305\u200b\u7684\u200b\u5b9e\u73b0\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n#include \"sbuf.h\"\n\n/* Create an empty, bounded, shared FIFO buffer with n slots */\nvoid sbuf_init(sbuf_t *sp, int n)\n{\n    sp-&gt;buf = Calloc(n, sizeof(int)); \n    sp-&gt;n = n;                       /* Buffer holds max of n items */\n    sp-&gt;front = sp-&gt;rear = 0;        /* Empty buffer iff front == rear */\n    Sem_init(&amp;sp-&gt;mutex, 0, 1);      /* Binary semaphore for locking */\n    Sem_init(&amp;sp-&gt;slots, 0, n);      /* Initially, buf has n empty slots */\n    Sem_init(&amp;sp-&gt;items, 0, 0);      /* Initially, buf has zero data items */\n}\n\n/* Clean up buffer sp */\nvoid sbuf_deinit(sbuf_t *sp)\n{\n    Free(sp-&gt;buf);\n}\n\n/* Insert item onto the rear of shared buffer sp */\nvoid sbuf_insert(sbuf_t *sp, int item)\n{\n    P(&amp;sp-&gt;slots);                          /* Wait for available slot */\n    P(&amp;sp-&gt;mutex);                          /* Lock the buffer */\n    sp-&gt;buf[(++sp-&gt;rear)%(sp-&gt;n)] = item;   /* Insert the item */\n    V(&amp;sp-&gt;mutex);                          /* Unlock the buffer */\n    V(&amp;sp-&gt;items);                          /* Announce available item */\n}\n\n/* Remove and return the first item from buffer sp */\nint sbuf_remove(sbuf_t *sp)\n{\n    int item;\n    P(&amp;sp-&gt;items);                          /* Wait for available item */\n    P(&amp;sp-&gt;mutex);                          /* Lock the buffer */\n    item = sp-&gt;buf[(++sp-&gt;front)%(sp-&gt;n)];  /* Remove the item */\n    V(&amp;sp-&gt;mutex);                          /* Unlock the buffer */\n    V(&amp;sp-&gt;slots);                          /* Announce available slot */\n    return item;\n}\n</code></pre> <p><code>sbuf_init</code>\u200b\u51fd\u6570\u200b\u4e3a\u200b\u7f13\u51b2\u533a\u200b\u5206\u914d\u200b\u5806\u200b\u5185\u5b58\u200b\uff0c\u200b\u5c06\u200b<code>front</code>\u200b\u548c\u200b<code>rear</code>\u200b\u8bbe\u200b\u4e3a\u200b 0\uff0c\u200b\u5e76\u200b\u4e3a\u200b\u4e09\u4e2a\u200b\u4fe1\u53f7\u91cf\u200b\u5206\u914d\u200b\u521d\u59cb\u503c\u200b\uff1b<code>sbuf_deinit</code>\u200b\u51fd\u6570\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b\u5b8c\u200b\u7f13\u51b2\u533a\u200b\u540e\u200b\u91ca\u653e\u200b\u5b83\u200b\uff1b<code>sbuf_insert</code>\u200b\u51fd\u6570\u200b\u7b49\u5f85\u200b\u4e00\u4e2a\u200b\u53ef\u7528\u200b\u7684\u200b\u7a7a\u4f4d\u200b\uff0c\u200b\u7136\u540e\u200b\u9501\u5b9a\u200b<code>mutex</code>\uff0c\u200b\u5c06\u200b\u9879\u76ee\u200b\u6dfb\u52a0\u200b\u5230\u200b\u7f13\u51b2\u533a\u200b\u5c3e\u90e8\u200b\u5e76\u200b\u89e3\u9501\u200b<code>mutex</code>\uff0c\u200b\u6700\u540e\u200b\u901a\u77e5\u200b\u6d88\u8d39\u8005\u200b\u7ebf\u7a0b\u200b\u65b0\u200b\u9879\u76ee\u200b\u53ef\u7528\u200b\uff1b<code>sbuf_remove</code>\u200b\u51fd\u6570\u200b\u4e0e\u200b\u4e4b\u200b\u5bf9\u79f0\u200b\uff1a\u200b\u5f53\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u6709\u200b\u9879\u76ee\u200b\u53ef\u7528\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u9501\u5b9a\u200b<code>mutex</code>\uff0c\u200b\u7136\u540e\u200b\u79fb\u9664\u200b\u7f13\u51b2\u533a\u200b\u5934\u90e8\u200b\u7684\u200b\u9879\u76ee\u200b\u5e76\u200b\u89e3\u9501\u200b<code>mutex</code>\uff0c\u200b\u6700\u540e\u200b\u901a\u77e5\u200b\u751f\u4ea7\u8005\u200b\u6709\u200b\u65b0\u200b\u7684\u200b\u7a7a\u4f4d\u200b\u3002</p>"},{"location":"core/csapp/ch12/#-_1","title":"\u8bfb\u53d6\u200b\u8005\u200b-\u200b\u5199\u5165\u200b\u8005\u200b\u95ee\u9898","text":"<p>\u200b\u8bfb\u53d6\u200b\u8005\u200b-\u200b\u5199\u5165\u200b\u8005\u200b\u95ee\u9898\u200b\u662f\u200b\u4e92\u65a5\u200b\u95ee\u9898\u200b\u7684\u200b\u4e00\u822c\u5316\u200b\u3002\u200b\u5047\u8bbe\u200b\u5e76\u53d1\u200b\u7ebf\u7a0b\u200b\u96c6\u5408\u200b\u6b63\u5728\u200b\u8bbf\u95ee\u200b\u4e00\u4e2a\u200b\u5171\u4eab\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5982\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u6216\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u6570\u636e\u5e93\u200b\u3002\u200b\u5199\u5165\u200b\u8005\u200b\u5fc5\u987b\u200b\u62e5\u6709\u200b\u5bf9\u200b\u8be5\u200b\u5bf9\u8c61\u200b\u7684\u200b\u72ec\u5360\u200b\u8bbf\u95ee\u200b\u6743\u200b\uff0c\u200b\u4f46\u200b\u8bfb\u53d6\u200b\u8005\u200b\u5374\u200b\u53ef\u4ee5\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u8bfb\u53d6\u200b\u8005\u200b\u5171\u4eab\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u8bfb\u53d6\u200b\u8005\u200b\u548c\u200b\u5199\u5165\u200b\u8005\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u5c06\u200b\u8fd9\u200b\u4e00\u200b\u95ee\u9898\u200b\u5206\u4e3a\u200b\u4e24\u79cd\u200b\u60c5\u51b5\u200b\uff1a</p> <ul> <li>\u200b\u8bfb\u53d6\u200b\u8005\u200b\u4f18\u5148\u200b\uff1a\u200b\u8bfb\u53d6\u200b\u8005\u200b\u4e0d\u4f1a\u200b\u56e0\u200b\u5199\u5165\u200b\u8005\u200b\u5728\u200b\u7b49\u5f85\u200b\u800c\u200b\u7b49\u5f85\u200b\uff1b</li> <li>\u200b\u5199\u5165\u200b\u8005\u200b\u4f18\u5148\u200b\uff1a\u200b\u4e00\u65e6\u200b\u5199\u5165\u200b\u8005\u200b\u51c6\u5907\u200b\u597d\u200b\u5199\u5165\u200b\u5c31\u200b\u5c3d\u5feb\u200b\u6267\u884c\u200b\u5199\u5165\u200b\u3002</li> </ul> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u8bfb\u53d6\u200b\u8005\u200b\u4f18\u5148\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b\uff1a</p> <pre><code>/* Global variables */\nint readcnt;    /* Initially = 0 */\nsem_t mutex, w; /* Both initially = 1 */\n\nvoid reader(void)\n{\n    while (1)\n    {\n        P(&amp;mutex);\n        readcnt++;\n        if (readcnt == 1) /* First in */\n            P(&amp;w);\n        V(&amp;mutex);\n\n        /* Critical section */\n        /* Reading happens  */\n\n        P(&amp;mutex);\n        readcnt--;\n        if (readcnt == 0) /* Last out */\n            V(&amp;w);\n        V(&amp;mutex);\n    }\n}\n\nvoid writer(void)\n{\n    while (1)\n    {\n        P(&amp;w);\n\n        /* Critical section */\n        /* Writing happens  */\n\n        V(&amp;w);\n    }\n}\n</code></pre> <p>\u200b\u4fe1\u53f7\u91cf\u200b<code>w</code>\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u5bf9\u200b\u5171\u4eab\u200b\u5bf9\u8c61\u200b\u8bbf\u95ee\u200b\u7684\u200b\u4e92\u65a5\u200b\uff0c<code>mutex</code>\u200b\u5219\u200b\u4fdd\u62a4\u200b\u4e86\u200b\u5bf9\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b<code>readcnt</code>\uff08\u200b\u8868\u793a\u200b\u5f53\u524d\u200b\u5904\u4e8e\u200b\u4e34\u754c\u200b\u533a\u200b\u7684\u200b\u8bfb\u53d6\u200b\u8005\u200b\u6570\u91cf\u200b\uff09\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002\u200b\u5199\u5165\u200b\u8005\u200b\u6bcf\u6b21\u200b\u8fdb\u5165\u200b\u4e34\u754c\u200b\u533a\u65f6\u200b\u90fd\u200b\u4f1a\u200b\u9501\u5b9a\u200b<code>w</code>\u200b\u5e76\u200b\u5728\u200b\u79bb\u5f00\u200b\u65f6\u200b\u5bf9\u200b\u5176\u200b\u89e3\u9501\u200b\u3002\u200b\u4f46\u200b\u53ea\u6709\u200b\u7b2c\u4e00\u4e2a\u200b\u8fdb\u5165\u200b\u4e34\u754c\u200b\u533a\u200b\u7684\u200b\u8bfb\u53d6\u200b\u8005\u200b\u624d\u200b\u9700\u8981\u200b\u9501\u5b9a\u200b<code>w</code>\uff0c\u200b\u53ea\u6709\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u79bb\u5f00\u200b\u4e34\u754c\u200b\u533a\u200b\u7684\u200b\u8bfb\u53d6\u200b\u8005\u200b\u624d\u200b\u9700\u8981\u200b\u89e3\u9501\u200b\u5b83\u200b\u3002\u200b\u56e0\u6b64\u200b\u53ea\u8981\u200b\u6709\u200b\u4e00\u4e2a\u200b\u8bfb\u53d6\u200b\u8005\u200b\u6301\u6709\u200b<code>w</code>\uff08\u200b\u4f4d\u4e8e\u200b\u4e34\u754c\u200b\u533a\u200b\uff09\uff0c\u200b\u5176\u4ed6\u200b\u8bfb\u53d6\u200b\u8005\u200b\u5c31\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u7545\u901a\u65e0\u963b\u200b\u5730\u200b\u8bbf\u95ee\u5171\u4eab\u200b\u5bf9\u8c61\u200b\u3002</p> <p>\u200b\u6240\u6709\u200b\u6b64\u7c7b\u200b\u95ee\u9898\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b\u90fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u9965\u997f\u200b\uff08Starvation\uff09\uff0c\u200b\u5373\u200b\u7ebf\u7a0b\u200b\u88ab\u200b\u963b\u585e\u200b\u5e76\u200b\u65e0\u6cd5\u200b\u53d6\u5f97\u200b\u4efb\u4f55\u200b\u8fdb\u5c55\u200b\u3002\u200b\u4f8b\u5982\u200b\u5728\u200b\u4e0a\u8ff0\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u5f53\u200b\u8bfb\u53d6\u200b\u8005\u200b\u7ebf\u7a0b\u200b\u6279\u91cf\u200b\u5230\u8fbe\u200b\u65f6\u200b\uff0c\u200b\u5199\u5165\u200b\u8005\u200b\u53ea\u80fd\u200b\u65e0\u9650\u671f\u200b\u7b49\u5f85\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_22","title":"\u57fa\u4e8e\u200b\u9884\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668","text":"<p>\u200b\u524d\u200b\u6587\u200b\u4ecb\u7ecd\u200b\u7684\u200b \u200b\u57fa\u4e8e\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b \u200b\u9700\u8981\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u5ba2\u6237\u7aef\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7ebf\u7a0b\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u6210\u672c\u200b\u8f83\u200b\u9ad8\u200b\u3002\u200b\u57fa\u4e8e\u200b\u9884\u200b\u7ebf\u7a0b\u200b\uff08Prethreading\uff09\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u751f\u4ea7\u8005\u200b-\u200b\u6d88\u8d39\u8005\u200b\u6a21\u578b\u200b\u51cf\u5c11\u200b\u8fd9\u4e00\u200b\u5f00\u9500\u200b\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u4e0d\u65ad\u200b\u5730\u200b\u63a5\u53d7\u200b\u6765\u81ea\u200b\u5ba2\u6237\u7aef\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u5e76\u200b\u5728\u200b\u6709\u754c\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u63d2\u5165\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\u91cd\u590d\u200b\u5730\u200b\u4ece\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u79fb\u9664\u200b\u4e00\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u5e76\u200b\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\uff0c\u200b\u7136\u540e\u200b\u7b49\u5f85\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u63cf\u8ff0\u7b26\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b \\(S_{buf}\\) \u200b\u5305\u200b\u5b9e\u73b0\u200b\u8fd9\u4e00\u200b\u6a21\u578b\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n#include \"sbuf.h\"\n#define NTHREADS 4\n#define SBUFSIZE 16\n\nvoid echo_cnt(int connfd);\nvoid *thread(void *vargp);\n\nsbuf_t sbuf; /* shared buffer of connected descriptors */\n\nint main(int argc, char **argv)\n{\n    int i, listenfd, connfd;\n    socklen_t clientlen;\n    struct sockaddr_storage clientaddr;\n    pthread_t tid;\n\n    if (argc != 2)\n    {\n        fprintf(stderr, \"usage: %s &lt;port&gt;\\n\", argv[0]);\n        exit(0);\n    }\n    listenfd = Open_listenfd(argv[1]);\n\n    sbuf_init(&amp;sbuf, SBUFSIZE);\n    for (i = 0; i &lt; NTHREADS; i++) /* Create worker threads */\n        Pthread_create(&amp;tid, NULL, thread, NULL);\n\n    while (1)\n    {\n        clientlen = sizeof(struct sockaddr_storage);\n        connfd = Accept(listenfd, (SA *)&amp;clientaddr, &amp;clientlen);\n        sbuf_insert(&amp;sbuf, connfd); /* Insert connfd in buffer */\n    }\n}\n\nvoid *thread(void *vargp)\n{\n    Pthread_detach(pthread_self());\n    while (1)\n    {\n        int connfd = sbuf_remove(&amp;sbuf);/* Remove connfd from buffer */ \n        echo_cnt(connfd);               /* Service client */\n        Close(connfd);\n    }\n}\n</code></pre> <p>\u200b\u5728\u200b\u521d\u59cb\u5316\u200b\u7f13\u51b2\u533a\u200b<code>sbuf</code>\uff08\u200b\u7b2c\u200b 25 \u200b\u884c\u200b\uff09\u200b\u4e4b\u540e\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\uff08\u200b\u7b2c\u200b 26\uff5e27 \u200b\u884c\u200b\uff09\u3002\u200b\u5b83\u200b\u8fdb\u5165\u200b\u65e0\u9650\u200b\u5faa\u73af\u200b\uff0c\u200b\u63a5\u53d7\u200b\u8fde\u63a5\u200b\u8bf7\u6c42\u200b\u5e76\u200b\u5c06\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u63d2\u5165\u200b\u5230\u200b<code>sbuf</code>\u200b\u4e2d\u200b\u3002\u200b\u5de5\u4f5c\u200b\u7ebf\u7a0b\u200b\u7b49\u5f85\u200b\u8fde\u63a5\u200b\u63cf\u8ff0\u7b26\u200b\u53ef\u7528\u200b\u540e\u200b\u4fbf\u200b\u5c06\u200b\u5176\u200b\u4ece\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u79fb\u9664\u200b\uff08\u200b\u7b2c\u200b 42 \u200b\u884c\u200b\uff09\uff0c\u200b\u7136\u540e\u200b\u8c03\u7528\u200b<code>echo_cnt</code>\u200b\u51fd\u6570\u200b\u4e3a\u200b\u5ba2\u6237\u7aef\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\u3002</p> <p><code>echo_cnt</code>\u200b\u662f\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\u7684\u200b<code>echo</code>\u200b\u51fd\u6570\u200b\u7684\u200b\u53d8\u4f53\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u670d\u52a1\u5668\u200b\u63a5\u6536\u200b\u5230\u200b\u7684\u200b\u5b57\u8282\u6570\u200b\u8bb0\u5f55\u200b\u5728\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>byte_cnt</code>\u200b\u4e2d\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nstatic int byte_cnt; /* byte counter */\nstatic sem_t mutex;  /* and the mutex that protects it */\n\nstatic void init_echo_cnt(void)\n{\n    Sem_init(&amp;mutex, 0, 1);\n    byte_cnt = 0;\n}\n\nvoid echo_cnt(int connfd)\n{\n    int n;\n    char buf[MAXLINE];\n    rio_t rio;\n    static pthread_once_t once = PTHREAD_ONCE_INIT;\n\n    Pthread_once(&amp;once, init_echo_cnt); \n    Rio_readinitb(&amp;rio, connfd);        \n    while ((n = Rio_readlineb(&amp;rio, buf, MAXLINE)) != 0)\n    {\n        P(&amp;mutex);\n        byte_cnt += n; \n        printf(\"server received %d (%d total) bytes on fd %d\\n\",\n                n, byte_cnt, connfd);\n        V(&amp;mutex);\n        Rio_writen(connfd, buf, n);\n    }\n}\n</code></pre> <p>\u200b\u8be5\u200b\u51fd\u6570\u200b\u4f7f\u7528\u200b<code>Pthread_once</code>\uff08\u200b\u7b2c\u200b 19 \u200b\u884c\u200b\uff09\u200b\u521d\u59cb\u5316\u200b\u4fe1\u53f7\u91cf\u200b<code>mutex</code>\u200b\u548c\u200b<code>byte_cnt</code>\uff0c\u200b\u4e8e\u662f\u200b\u6211\u4eec\u200b\u4fbf\u200b\u4e0d\u5fc5\u200b\u5728\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u8fdb\u884c\u200b\u540c\u6837\u200b\u7684\u200b\u64cd\u4f5c\u200b\u4e86\u200b\u3002\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u4f7f\u5305\u200b\u66f4\u52a0\u200b\u6613\u4e8e\u200b\u4f7f\u7528\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u540c\u65f6\u200b\u4e5f\u200b\u589e\u52a0\u200b\u4e86\u200b\u8bb8\u591a\u200b\u65e0\u7528\u200b\u7684\u200b\u5de5\u4f5c\u200b\uff08\u200b\u53ea\u6709\u200b\u7b2c\u4e00\u6b21\u200b\u8c03\u7528\u200b<code>Pthread_once</code>\u200b\u662f\u200b\u6709\u200b\u610f\u4e49\u200b\u7684\u200b\uff09\u3002</p>"},{"location":"core/csapp/ch12/#_23","title":"\u4f7f\u7528\u200b\u7ebf\u7a0b\u200b\u5b9e\u73b0\u200b\u5e76\u884c","text":"<p>\u200b\u5230\u200b\u76ee\u524d\u4e3a\u6b62\u200b\uff0c\u200b\u6211\u4eec\u200b\u5bf9\u200b\u5e76\u53d1\u200b\u7684\u200b\u7814\u7a76\u200b\u4ec5\u200b\u5c40\u9650\u4e8e\u200b\u5355\u6838\u200b\u5904\u7406\u5668\u200b\u3002\u200b\u5b9e\u9645\u4e0a\u200b\u5e76\u53d1\u7a0b\u5e8f\u200b\u5f80\u5f80\u200b\u5728\u200b\u62e5\u6709\u200b\u591a\u6838\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u5f97\u200b\u66f4\u200b\u5feb\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5185\u6838\u200b\u53ef\u4ee5\u200b\u5728\u200b\u591a\u4e2a\u200b CPU \u200b\u6838\u5fc3\u200b\u4e0a\u200b\u5e76\u884c\u200b\u8c03\u5ea6\u200b\u7ebf\u7a0b\u200b\u3002</p> <p> \u200b\u7f16\u5199\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\u5341\u5206\u200b\u68d8\u624b\u200b\uff0c\u200b\u770b\u4f3c\u200b\u5f88\u5c0f\u200b\u7684\u200b\u4ee3\u7801\u200b\u66f4\u6539\u200b\u5374\u4f1a\u200b\u5bf9\u200b\u7a0b\u5e8f\u200b\u6027\u80fd\u200b\u4ea7\u751f\u200b\u91cd\u5927\u200b\u7684\u200b\u5f71\u54cd\u200b\u3002\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\u540c\u6b65\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5f00\u9500\u200b\u975e\u5e38\u200b\u9ad8\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u5c3d\u91cf\u907f\u514d\u200b\u5b83\u200b\uff0c\u200b\u5426\u5219\u200b\u5c31\u200b\u53ef\u80fd\u200b\u51fa\u73b0\u200b\u7ebf\u7a0b\u200b\u6570\u200b\u589e\u52a0\u200b\u7a0b\u5e8f\u200b\u6027\u80fd\u200b\u53cd\u800c\u200b\u964d\u4f4e\u200b\u7684\u200b\u95ee\u9898\u200b\u3002\u200b\u5982\u679c\u200b\u540c\u6b65\u64cd\u4f5c\u200b\u4e0d\u53ef\u907f\u514d\u200b\uff0c\u200b\u5219\u200b\u5e94\u5f53\u200b\u5c3d\u53ef\u80fd\u200b\u5730\u200b\u589e\u52a0\u200b\u6709\u7528\u200b\u8ba1\u7b97\u200b\u4ee5\u200b\u5206\u644a\u200b\u5176\u200b\u5f00\u9500\u200b\u3002</p> <p>\u200b\u7531\u4e8e\u200b\u5728\u200b\u540c\u4e00\u4e2a\u200b\u6838\u5fc3\u200b\u4e0a\u200b\u5207\u6362\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4f1a\u200b\u4ea7\u751f\u200b\u989d\u5916\u200b\u7684\u200b\u5f00\u9500\u200b\uff0c\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u6570\u200b\u901a\u5e38\u200b\u4e0e\u200b\u673a\u5668\u200b\u7684\u200b CPU \u200b\u6838\u5fc3\u200b\u6570\u200b\u76f8\u540c\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_24","title":"\u5e76\u884c\u7a0b\u5e8f\u200b\u7684\u200b\u6027\u80fd\u6307\u6807","text":"<p>\u200b\u52a0\u901f\u200b\u6bd4\u200b\uff08Speedup\uff09\u200b\u88ab\u200b\u5b9a\u4e49\u200b\u4e3a\u200b\uff1a</p> \\[S_p = \\cfrac{T_1}{T_p}\\] <p>\u200b\u5176\u4e2d\u200b\uff0c\\(p\\) \u200b\u662f\u200b\u5904\u7406\u5668\u200b\u6838\u5fc3\u200b\u7684\u200b\u6570\u91cf\u200b\uff0c\\(T_p\\) \u200b\u662f\u200b\u7a0b\u5e8f\u200b\u5728\u200b \\(p\\) \u200b\u4e2a\u200b\u6838\u5fc3\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u7684\u200b\u65f6\u95f4\u200b\u3002\u200b\u8fd9\u4e2a\u200b\u516c\u5f0f\u200b\u4e5f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5f3a\u200b\u7f29\u653e\u200b\uff08Strong Scaling\uff09\u3002\u200b\u5f53\u200b \\(T_1\\) \u200b\u662f\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\u7684\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\u7248\u672c\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\u65f6\u200b\uff0c\\(S_p\\) \u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7edd\u5bf9\u200b\u52a0\u901f\u200b\u6bd4\u200b\uff1b\u200b\u5f53\u200b \\(T_1\\) \u200b\u662f\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\u5728\u200b\u4e00\u4e2a\u200b\u6838\u5fc3\u200b\u4e0a\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\u65f6\u200b\uff0c\\(S_p\\) \u200b\u88ab\u200b\u79f0\u4e3a\u200b\u76f8\u5bf9\u200b\u52a0\u901f\u200b\u6bd4\u200b\u3002\u200b\u7edd\u5bf9\u200b\u52a0\u901f\u200b\u6bd4\u6bd4\u200b\u76f8\u5bf9\u200b\u52a0\u901f\u200b\u6bd4\u200b\u66f4\u200b\u80fd\u200b\u771f\u5b9e\u200b\u5730\u200b\u53cd\u6620\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6027\u80fd\u200b\uff0c\u200b\u7136\u800c\u200b\u5b83\u200b\u4e5f\u200b\u66f4\u200b\u96be\u200b\u6d4b\u91cf\u200b\u3002\u200b\u5c24\u5176\u200b\u662f\u200b\u4e00\u4e9b\u200b\u590d\u6742\u200b\u7684\u200b\u5e76\u884c\u7a0b\u5e8f\u200b\uff0c\u200b\u4e3a\u200b\u5176\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\u7684\u200b\u7248\u672c\u200b\u975e\u5e38\u200b\u56f0\u96be\u200b\u3002</p> <p>\u200b\u6548\u7387\u200b\uff08Efficiency\uff09\u200b\u88ab\u200b\u5b9a\u4e49\u200b\u4e3a\u200b\uff1a</p> \\[E_p = \\cfrac{S_p}{p} = \\cfrac{T_1}{pT_p}\\] <p>\u200b\u8be5\u200b\u6307\u6807\u200b\u80fd\u591f\u200b\u8861\u91cf\u200b\u7a0b\u5e8f\u200b\u5e76\u884c\u200b\u5316\u200b\u7684\u200b\u5f00\u9500\u200b\uff0c\u200b\u6548\u7387\u9ad8\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u7528\u4e8e\u200b\u7ebf\u7a0b\u200b\u540c\u6b65\u200b\u548c\u200b\u901a\u4fe1\u200b\u7684\u200b\u65f6\u95f4\u200b\u8f83\u200b\u5c11\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_25","title":"\u5176\u4ed6\u200b\u5e76\u53d1\u200b\u95ee\u9898","text":""},{"location":"core/csapp/ch12/#_26","title":"\u7ebf\u7a0b\u200b\u5b89\u5168","text":"<p>\u200b\u82e5\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u88ab\u200b\u591a\u4e2a\u200b\u5e76\u53d1\u200b\u7ebf\u7a0b\u200b\u91cd\u590d\u200b\u8c03\u7528\u200b\u65f6\u200b\u603b\u80fd\u200b\u751f\u6210\u200b\u6b63\u786e\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u5b83\u200b\u4e3a\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u7684\u200b\uff08Thread-safe\uff09\u3002\u200b\u53cd\u4e4b\u200b\uff0c\u200b\u5219\u200b\u4e3a\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\u3002\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\u53ef\u4ee5\u200b\u5206\u4e3a\u200b\u4ee5\u4e0b\u200b\u56db\u7c7b\u200b\uff1a</p> <ul> <li>\u200b\u4e0d\u200b\u4fdd\u62a4\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\u7684\u200b <code>badcnt</code> \u200b\u51fd\u6570\u200b\u4fbf\u200b\u5c5e\u4e8e\u200b\u6b64\u7c7b\u200b\u3002\u200b\u6211\u4eec\u200b\u53ea\u200b\u9700\u200b\u4f7f\u7528\u200b<code>P</code>\u200b\u548c\u200b<code>V</code>\u200b\u7b49\u200b\u540c\u6b65\u64cd\u4f5c\u200b\u4fdd\u62a4\u200b\u5171\u4eab\u200b\u53d8\u91cf\u200b\u4fbf\u200b\u53ef\u200b\u4f7f\u200b\u51fd\u6570\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\uff0c\u200b\u4f46\u200b\u540c\u65f6\u200b\u4e5f\u200b\u4f1a\u200b\u589e\u52a0\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\uff1b</li> <li>\u200b\u5728\u200b\u591a\u6b21\u200b\u8c03\u7528\u200b\u4e2d\u200b\u6301\u7eed\u200b\u8ddf\u8e2a\u200b\u72b6\u6001\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a\u200b\u5982\u4f2a\u200b\u968f\u673a\u6570\u200b\u751f\u6210\u200b\u51fd\u6570\u200b <code>rand</code>\uff0c\u200b\u5176\u200b\u5f53\u524d\u200b\u8c03\u7528\u200b\u7684\u200b\u7ed3\u679c\u200b\u53d6\u51b3\u4e8e\u200b\u4e0a\u6b21\u200b\u8fed\u4ee3\u200b\u7684\u200b\u4e2d\u95f4\u200b\u7ed3\u679c\u200b\u3002\u200b\u56e0\u6b64\u200b\u5982\u679c\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u65e0\u6cd5\u200b\u786e\u5b9a\u200b\u8fd4\u56de\u200b\u7684\u200b\u968f\u673a\u6570\u200b\u5e8f\u5217\u200b\u3002\u200b\u4fee\u6539\u200b\u6b64\u7c7b\u200b\u51fd\u6570\u200b\u552f\u4e00\u200b\u7684\u200b\u65b9\u6cd5\u200b\u4fbf\u662f\u200b\u91cd\u5199\u200b\u5b83\u4eec\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u4e0d\u200b\u4f9d\u8d56\u200b\u4efb\u4f55\u200b<code>static</code>\u200b\u6570\u636e\u200b\u5e76\u200b\u8ba9\u200b\u8c03\u7528\u8005\u200b\u901a\u8fc7\u200b\u53c2\u6570\u200b\u6765\u200b\u4f20\u9012\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\uff1b</li> </ul> <pre><code>static unsigned int next_seed = 1;\n\n/* rand - return pseudo-random integer on 0..32767 */\nint rand(void)\n{\n    next_seed = next_seed*1103515245 + 12345;\n    return (unsigned int)(next_seed/65536) % 32768;\n}\n\n/* srand - set seed for rand() */\nvoid srand(unsigned int new_seed)\n{\n    next_seed = new_seed;\n} \n</code></pre> <ul> <li>\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b<code>static</code>\u200b\u53d8\u91cf\u200b\u6307\u9488\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a\u200b\u4e00\u4e9b\u200b\u51fd\u6570\u200b\uff0c\u200b\u5982\u200b<code>ctime</code>\u200b\u548c\u200b<code>gethostbyname</code>\uff0c\u200b\u5728\u200b<code>static</code>\u200b\u53d8\u91cf\u200b\u4e2d\u200b\u8ba1\u7b97\u7ed3\u679c\u200b\u5e76\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u8be5\u200b\u53d8\u91cf\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u5982\u679c\u200b\u5e76\u53d1\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u200b\u6b64\u7c7b\u200b\u51fd\u6570\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u6b63\u5728\u200b\u4f7f\u7528\u200b\u7684\u200b\u53d8\u91cf\u200b\u5c31\u200b\u6709\u200b\u53ef\u80fd\u200b\u88ab\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u7ebf\u7a0b\u200b\u8fd4\u56de\u200b\u7684\u200b\u7ed3\u679c\u200b\u8986\u76d6\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u91cd\u5199\u200b\u5b83\u4eec\u200b\uff0c\u200b\u4f46\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6e90\u7801\u200b\u4e0d\u53ef\u200b\u7528\u200b\u6216\u200b\u96be\u4ee5\u200b\u4fee\u6539\u200b\u65f6\u200b\u4f7f\u7528\u200b\u9501\u5b9a\u200b\u548c\u200b\u590d\u5236\u200b\uff08Lock-and-Copy\uff09\u200b\u6280\u672f\u200b\u6765\u200b\u89e3\u51b3\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u95ee\u9898\u200b\uff1b</li> </ul> <pre><code>char *ctime_ts(const time_t *timep, char *privatep)\n{\n    char *sharedp; \n\n    P(&amp;mutex);\n    sharedp = ctime(timep);\n    strcpy(privatep, sharedp); /* Copy string from shared to private */\n    V(&amp;mutex);\n    return privatep;\n}\n</code></pre> <ul> <li>\u200b\u8c03\u7528\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a\u200b\u5982\u679c\u200b\u51fd\u6570\u200b<code>f</code>\u200b\u8c03\u7528\u200b\u4e86\u200b\u7b2c\u4e8c\u7c7b\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b<code>g</code>\uff0c\u200b\u90a3\u4e48\u200b<code>f</code>\u200b\u4e5f\u200b\u662f\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u7684\u200b\u5e76\u4e14\u200b\u53ea\u80fd\u200b\u91cd\u5199\u200b<code>g</code>\uff1b\u200b\u5982\u679c\u200b<code>g</code>\u200b\u662f\u200b\u7b2c\u4e00\u7c7b\u200b\u6216\u200b\u7b2c\u4e09\u7c7b\u200b\u51fd\u6570\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4e92\u65a5\u200b\u9501\u200b\u4fdd\u62a4\u200b\u8c03\u7528\u200b\u70b9\u200b\u548c\u200b\u6240\u6709\u200b\u751f\u6210\u200b\u7684\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u4ee5\u200b\u4f7f\u200b<code>f</code>\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u3002\u200b\u5728\u200b\u4e0a\u9762\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0c\u200b\u867d\u7136\u200b\u51fd\u6570\u200b<code>ctime_ts</code>\u200b\u8c03\u7528\u200b\u4e86\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b<code>ctime</code>\uff0c\u200b\u4f46\u200b\u5b83\u200b\u5374\u662f\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u7684\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch12/#_27","title":"\u53ef\u200b\u91cd\u5165","text":"<p>\u200b\u53ef\u200b\u91cd\u5165\u200b\uff08Reentrant\uff09\u200b\u51fd\u6570\u200b\u662f\u200b\u4e00\u79cd\u200b\u7279\u6b8a\u200b\u7684\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b\u88ab\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u8c03\u7528\u200b\u65f6\u200b\u4e0d\u4f1a\u200b\u5f15\u7528\u200b\u4efb\u4f55\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u3002</p> <p> \u200b\u53ef\u200b\u91cd\u5165\u200b\u51fd\u6570\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u540c\u6b65\u64cd\u4f5c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u901a\u5e38\u200b\u6bd4\u200b\u4e0d\u53ef\u200b\u91cd\u200b\u5165\u200b\u51fd\u6570\u200b\u66f4\u200b\u9ad8\u6548\u200b\u3002\u200b\u5c06\u200b\u7b2c\u4e8c\u7c7b\u200b\u7ebf\u7a0b\u200b\u4e0d\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\u91cd\u5199\u200b\u4e3a\u200b\u53ef\u200b\u91cd\u5165\u200b\u51fd\u6570\u200b\u662f\u200b\u4f7f\u200b\u5176\u200b\u7ebf\u7a0b\u200b\u5b89\u5168\u200b\u7684\u200b\u552f\u4e00\u200b\u65b9\u6cd5\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e0a\u8282\u200b\u63d0\u5230\u200b\u7684\u200b\u51fd\u6570\u200b<code>rand</code>\u200b\u4fee\u6539\u200b\u4e3a\u200b\uff1a</p> <pre><code>/* rand_r - a reentrant pseudo-random integer on 0..32767 */\nint rand_r(unsigned int *nextp)\n{\n    *nextp = *nextp * 1103515245 + 12345;\n    return (unsigned int)(*nextp / 65536) % 32768;\n}\n</code></pre> <p>\u200b\u5176\u200b\u5173\u952e\u200b\u601d\u60f3\u200b\u5728\u4e8e\u200b\uff0c<code>rand_r</code>\u200b\u4f7f\u7528\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u4f20\u5165\u200b\u7684\u200b\u6307\u9488\u200b<code>nextp</code>\u200b\u4ee3\u66ff\u200b\u4e86\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b<code>next_seed</code>\u3002</p> <p>\u200b\u5982\u679c\u200b\u51fd\u6570\u200b\u7684\u200b\u6240\u6709\u200b\u53c2\u6570\u200b\u90fd\u200b\u6309\u503c\u200b\u4f20\u9012\u200b\u4e14\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u636e\u200b\u5f15\u7528\u200b\u90fd\u200b\u6307\u5411\u200b\u5c40\u90e8\u200b\u81ea\u52a8\u200b\u53d8\u91cf\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u8be5\u200b\u51fd\u6570\u200b\u662f\u200b\u663e\u5f0f\u200b\u53ef\u200b\u91cd\u5165\u200b\u7684\u200b\u3002\u200b\u65e0\u8bba\u200b\u8be5\u200b\u51fd\u6570\u200b\u88ab\u200b\u8c03\u7528\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5982\u4f55\u200b\uff0c\u200b\u5176\u53ef\u91cd\u200b\u5165\u6027\u200b\u90fd\u200b\u4e0d\u53d8\u200b\uff1b\u200b\u5982\u679c\u200b\u51fd\u6570\u200b\u7684\u200b\u67d0\u4e9b\u200b\u53c2\u6570\u200b\u901a\u8fc7\u200b\u5f15\u7528\u200b\uff08\u200b\u6307\u9488\u200b\uff09\u200b\u4f20\u9012\u200b\u4e14\u200b\u8c03\u7528\u8005\u200b\u7ebf\u7a0b\u200b\u5c0f\u5fc3\u200b\u5730\u200b\u5c06\u200b\u975e\u200b\u5171\u4eab\u200b\u6570\u636e\u200b\u4f20\u9012\u200b\u7ed9\u200b\u6307\u9488\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u8be5\u200b\u51fd\u6570\u200b\u662f\u200b\u9690\u5f0f\u200b\u53ef\u200b\u91cd\u5165\u200b\u7684\u200b\uff0c\u200b\u51fd\u6570\u200b<code>rand_r</code>\u200b\u4fbf\u662f\u200b\u5982\u6b64\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_28","title":"\u7ade\u4e89","text":"<p>\u200b\u5f53\u200b\u591a\u4e2a\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u6267\u884c\u200b\u987a\u5e8f\u200b\u4f1a\u200b\u5f71\u54cd\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6b63\u786e\u6027\u200b\u65f6\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u7ade\u4e89\u200b\uff0c\u200b\u5982\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n#define N 4\n\nvoid *thread(void *vargp);\n\nint main() \n{\n    pthread_t tid[N];\n    int i;\n\n    for (i = 0; i &lt; N; i++) \n        Pthread_create(&amp;tid[i], NULL, thread, &amp;i); \n    for (i = 0; i &lt; N; i++) \n        Pthread_join(tid[i], NULL);\n    exit(0);\n}\n\n/* thread routine */\nvoid *thread(void *vargp) \n{\n    int myid = *((int *)vargp);\n    printf(\"Hello from thread %d\\n\", myid);\n    return NULL;\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u521b\u5efa\u200b\u4e86\u200b\u56db\u4e2a\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5e76\u200b\u5c06\u200b\u6307\u5411\u200b\u4e86\u200b\u552f\u4e00\u200b\u6574\u6570\u200b ID \u200b\u7684\u200b\u6307\u9488\u200b<code>&amp;i</code>\u200b\u4f20\u9012\u200b\u7ed9\u200b\u5b83\u4eec\u200b\u3002\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5c06\u200b\u53c2\u6570\u4f20\u9012\u200b\u7684\u200b ID \u200b\u590d\u5236\u5230\u200b\u5c40\u90e8\u53d8\u91cf\u200b\uff08\u200b\u7b2c\u200b 21 \u200b\u884c\u200b\uff09\uff0c\u200b\u7136\u540e\u200b\u6253\u5370\u200b\u5305\u542b\u200b ID \u200b\u7684\u200b\u6d88\u606f\u200b\u3002\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u770b\u4f3c\u200b\u7b80\u5355\u200b\uff0c\u200b\u7136\u800c\u200b\u5374\u200b\u8f93\u51fa\u200b\u4e86\u200b\u9519\u8bef\u200b\u7684\u200b\u7ed3\u679c\u200b\uff1a</p> <pre><code>linux&gt; ./race\nHello from thread 1 \nHello from thread 3 \nHello from thread 2 \nHello from thread 3\n</code></pre> <p>\u200b\u51fa\u73b0\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\u7684\u200b\u539f\u56e0\u200b\u5728\u4e8e\u200b\uff0c\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u5faa\u73af\u200b\u4e2d\u200b\u53d8\u91cf\u200b<code>i</code>\u200b\u7684\u200b\u81ea\u589e\u200b\uff08\u200b\u7b2c\u200b 12 \u200b\u884c\u200b\uff09\u200b\u4e0e\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4e2d\u200b\u5bf9\u200b\u53c2\u6570\u200b\u7684\u200b\u89e3\u200b\u5f15\u7528\u200b\u548c\u200b\u8d4b\u503c\u200b\uff08\u200b\u7b2c\u200b 21 \u200b\u884c\u200b\uff09\u200b\u4e4b\u95f4\u200b\u4ea7\u751f\u200b\u4e86\u200b\u7ade\u4e89\u200b\u3002\u200b\u5982\u679c\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5728\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u53d8\u91cf\u200b<code>i</code>\u200b\u81ea\u589e\u200b\u4e4b\u540e\u200b\u624d\u200b\u6267\u884c\u200b\u7b2c\u200b 22 \u200b\u884c\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u90a3\u4e48\u200b\u53d8\u91cf\u200b<code>myid</code>\u200b\u5c31\u200b\u53d8\u6210\u200b\u4e86\u200b\u5176\u4ed6\u200b\u7ebf\u7a0b\u200b\u7684\u200b ID\u3002</p> <p>\u200b\u4e3a\u4e86\u200b\u6d88\u9664\u200b\u7ade\u4e89\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b ID \u200b\u52a8\u6001\u5206\u914d\u200b\u4e00\u4e2a\u200b\u5806\u200b\u5185\u5b58\u200b Block\uff0c\u200b\u5e76\u200b\u5411\u200b\u7ebf\u7a0b\u200b\u4f20\u9012\u200b\u6307\u5411\u200b\u8be5\u200b Block \u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u524d\u200b\u6587\u200b\u4ecb\u7ecd\u200b\u7684\u200b \u200b\u57fa\u4e8e\u200b\u7ebf\u7a0b\u200b\u7684\u200b\u5e76\u53d1\u200b\u670d\u52a1\u5668\u200b \u200b\u4fbf\u200b\u4f7f\u7528\u200b\u4e86\u200b\u8fd9\u200b\u4e00\u200b\u65b9\u6cd5\u200b\u3002</p> <p>\u200b\u53e6\u200b\u4e00\u79cd\u200b\u65b9\u6cd5\u200b\u662f\u200b\u4e3b\u7ebf\u200b\u7a0b\u200b\u76f4\u63a5\u200b\u5411\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u4f20\u9012\u200b<code>i</code>\u200b\u800c\u200b\u975e\u200b\u5176\u200b\u6307\u9488\u200b\uff1a</p> <pre><code>for (i = 0; i &lt; N; i++) \n    Pthread_create(&amp;tid[i], NULL, thread, (void *) i); \n</code></pre> <p>\u200b\u5bf9\u200b\u7b49\u200b\u7ebf\u7a0b\u200b\u5219\u200b\u5c06\u200b\u53c2\u6570\u200b\u8f6c\u6362\u200b\u56de\u200b<code>int</code>\u200b\u7c7b\u578b\u200b\u5e76\u200b\u8d4b\u200b\u7ed9\u200b\u53d8\u91cf\u200b<code>myid</code>\uff1a</p> <pre><code>int myid = (int)vargp;\n</code></pre> <p>\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u7b2c\u4e00\u79cd\u200b\u65b9\u6cd5\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u7684\u200b\u597d\u5904\u200b\u662f\u200b\u51cf\u5c11\u200b\u4e86\u200b\u8c03\u7528\u200b<code>malloc</code>\u200b\u548c\u200b<code>free</code>\u200b\u5e26\u6765\u200b\u7684\u200b\u5f00\u9500\u200b\u3002\u200b\u4f46\u200b\u5728\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u4e2d\u200b\uff0c\u200b\u5b83\u200b\u5047\u8bbe\u200b\u6307\u9488\u200b\u81f3\u5c11\u200b\u4e0e\u200b\u6574\u578b\u200b\u4e00\u6837\u200b\u5927\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4e0d\u9002\u200b\u7528\u4e8e\u200b\u67d0\u4e9b\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u3002</p>"},{"location":"core/csapp/ch12/#_29","title":"\u6b7b\u9501","text":"<p>\u200b\u4fe1\u53f7\u91cf\u200b\u7684\u200b\u5f15\u5165\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u7ebf\u7a0b\u200b\u88ab\u200b\u6c38\u8fdc\u200b\u963b\u585e\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c06\u200b\u8fd9\u79cd\u200b\u8fd0\u884c\u200b\u65f6\u200b\u9519\u8bef\u200b\u79f0\u4e3a\u200b\u6b7b\u9501\u200b\uff08Deadlock\uff09\u3002\u200b\u8fdb\u5ea6\u200b\u56fe\u662f\u200b\u7406\u89e3\u200b\u6b7b\u9501\u200b\u7684\u200b\u91cd\u8981\u200b\u5de5\u5177\u200b\uff1a</p> <p></p> <p>\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u7ebf\u7a0b\u200b\u4f7f\u7528\u200b\u4fe1\u53f7\u91cf\u200b<code>s</code>\u200b\u548c\u200b<code>t</code>\u200b\u5b9e\u73b0\u200b\u4e92\u65a5\u200b\uff0c\u200b\u4f46\u200b\u7a0b\u5e8f\u5458\u200b\u9519\u8bef\u200b\u5730\u200b\u5bf9\u200b<code>P</code>\u200b\u548c\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u6392\u5e8f\u200b\u3002\u200b\u4e00\u65e6\u200b\u67d0\u4e2a\u200b\u8f68\u8ff9\u200b\u8fdb\u5165\u200b\u4e86\u200b\u6b7b\u9501\u200b\u72b6\u6001\u200b<code>d</code>\uff0c\u200b\u4e24\u200b\u4fe1\u53f7\u91cf\u200b\u91cd\u53e0\u200b\u7684\u200b\u7981\u6b62\u200b\u533a\u57df\u200b\u4fbf\u200b\u963b\u6b62\u200b\u4e86\u200b\u5b83\u200b\u6240\u6709\u200b\u7684\u200b\u53ef\u884c\u200b\u8def\u7ebf\u200b\u3002\u200b\u6362\u8a00\u4e4b\u200b\uff0c\u200b\u7531\u4e8e\u200b\u6bcf\u4e2a\u200b\u963b\u585e\u200b\u7ebf\u7a0b\u200b\u7b49\u5f85\u200b\u7684\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u6c38\u8fdc\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u6267\u884c\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u53d1\u751f\u200b\u6b7b\u9501\u200b\u3002</p> <p>\u200b\u6b7b\u9501\u200b\u662f\u200b\u4e00\u4e2a\u200b\u975e\u5e38\u200b\u68d8\u624b\u200b\u7684\u200b\u95ee\u9898\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u96be\u4ee5\u9884\u6d4b\u200b\u3002\u200b\u7a0b\u5e8f\u200b\u53ef\u80fd\u200b\u6b63\u786e\u200b\u5730\u200b\u8fd0\u884c\u200b\u4e86\u200b\u4e0a\u200b\u5343\u6b21\u200b\uff0c\u200b\u4f46\u200b\u4e0b\u200b\u4e00\u6b21\u200b\u4fbf\u4f1a\u200b\u51fa\u73b0\u200b\u6b7b\u9501\u200b\u3002\u200b\u66f4\u200b\u7cdf\u7cd5\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u5e76\u53d1\u7a0b\u5e8f\u200b\u6bcf\u6b21\u200b\u6267\u884c\u200b\u7684\u200b\u8f68\u8ff9\u200b\u90fd\u200b\u6709\u6240\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6b7b\u9501\u200b\u8fd8\u200b\u96be\u4ee5\u200b\u590d\u73b0\u200b\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u4e8c\u8fdb\u5236\u200b\u4fe1\u53f7\u91cf\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4e92\u65a5\u200b\u9501\u200b\u6392\u5e8f\u200b\u89c4\u5219\u200b\u6765\u200b\u9632\u6b62\u200b\u6b7b\u9501\u200b\uff1a\u200b\u82e5\u200b\u6bcf\u4e2a\u200b\u7ebf\u7a0b\u200b\u4ee5\u200b\u76f8\u540c\u200b\u7684\u200b\u987a\u5e8f\u200b\u52a0\u9501\u200b\uff08\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u4e24\u7ebf\u200b\u7a0b\u5747\u200b\u5148\u200b\u6267\u884c\u200b<code>P(s)</code>\uff0c\u200b\u518d\u200b\u6267\u884c\u200b<code>P(t)</code>\uff09\uff0c\u200b\u5219\u200b\u7a0b\u5e8f\u200b\u65e0\u200b\u6b7b\u9501\u200b\u3002\u200b\u89e3\u9501\u200b\u7684\u200b\u987a\u5e8f\u200b\u5e76\u200b\u4e0d\u200b\u91cd\u8981\u200b\uff0c\u200b\u56e0\u4e3a\u200b<code>V</code>\u200b\u64cd\u4f5c\u200b\u4e0d\u4f1a\u200b\u963b\u585e\u200b\u7ebf\u7a0b\u200b\u3002</p>"},{"location":"core/csapp/ch2/","title":"\u4fe1\u606f\u200b\u7684\u200b\u8868\u793a\u200b\u548c\u200b\u5904\u7406","text":""},{"location":"core/csapp/ch2/#_2","title":"\u4fe1\u606f\u200b\u7684\u200b\u5b58\u50a8","text":"<p>\u200b\u5927\u591a\u6570\u200b\u673a\u5668\u200b\u4f7f\u7528\u200b\u5b57\u8282\u200b\uff088 \u200b\u4f4d\u200b\u7684\u200b\u5757\u200b\uff09\u200b\u4f5c\u4e3a\u200b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u7684\u200b\u6700\u5c0f\u200b\u5bfb\u5740\u200b\u5355\u5143\u200b\uff0c\u200b\u800c\u200b\u975e\u200b\u8bbf\u95ee\u200b\u5355\u72ec\u200b\u7684\u200b\u4f4d\u200b\u3002\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u6570\u5b57\u200b\uff0c\u200b\u5373\u200b\u5b83\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u6240\u6709\u200b\u53ef\u80fd\u200b\u7684\u200b\u5730\u5740\u200b\u96c6\u5408\u200b\u6784\u6210\u200b\u4e86\u200b\u865a\u62df\u5185\u5b58\u200b\u3002\u200b\u5b83\u200b\u662f\u200b\u7531\u200b DRAM\u3001\u200b\u95ea\u5b58\u200b\uff08Flash Memory) \u200b\u548c\u200b\u78c1\u76d8\u200b\u5b58\u50a8\u200b\u5171\u540c\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u800c\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u770b\u6765\u200b\u5219\u200b\u53ea\u662f\u200b\u4e00\u4e2a\u200b\u7edf\u4e00\u200b\u7684\u200b\u5b57\u8282\u200b\u6570\u7ec4\u200b\u3002</p> <p>\u200b\u7f16\u8bd1\u5668\u200b\u548c\u200b\u8fd0\u884c\u200b\u65f6\u200b\u7cfb\u7edf\u200b\u8d1f\u8d23\u200b\u5c06\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u5212\u5206\u200b\u4e3a\u200b\u66f4\u52a0\u200b\u6613\u4e8e\u200b\u7ba1\u7406\u200b\u7684\u200b\u5355\u5143\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b58\u50a8\u200b\u4e0d\u540c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u5bf9\u8c61\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0cC \u200b\u4e2d\u200b\u6307\u9488\u200b\u7684\u200b\u503c\u200b\u4ee3\u8868\u200b\u5176\u200b\u6307\u5411\u200b\u7684\u200b\u5b58\u50a8\u200b\u5757\u200b\u5185\u200b\u7b2c\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u3002C \u200b\u7f16\u8bd1\u5668\u200b\u8fd8\u200b\u5c06\u200b\u6bcf\u4e2a\u200b\u6307\u9488\u200b\u4e0e\u5176\u200b\u7c7b\u578b\u4fe1\u606f\u200b\u8054\u7cfb\u200b\u8d77\u6765\u200b\uff0c\u200b\u8fd9\u6837\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b\u751f\u6210\u200b\u4e0d\u540c\u200b\u7684\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u6765\u200b\u8bbf\u95ee\u200b\u6307\u9488\u200b\u6240\u200b\u6307\u5411\u200b\u7684\u200b\u5bf9\u8c61\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u5e76\u200b\u6ca1\u6709\u200b\u4efb\u4f55\u200b\u4e0e\u200b\u7c7b\u578b\u200b\u76f8\u5173\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u53ea\u662f\u200b\u7b80\u5355\u200b\u5730\u200b\u628a\u200b\u6bcf\u4e2a\u200b\u7a0b\u5e8f\u200b\u5bf9\u8c61\u200b\u90fd\u200b\u89c6\u4e3a\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u5757\u200b\uff0c\u200b\u800c\u200b\u628a\u200b\u7a0b\u5e8f\u200b\u89c6\u4e3a\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_3","title":"\u5341\u516d\u8fdb\u5236\u200b\u8868\u793a\u6cd5","text":"<p>\u200b\u4f7f\u7528\u200b\u4e8c\u8fdb\u5236\u200b\u8868\u793a\u200b\u4f4d\u200b\u6a21\u5f0f\u200b\uff08Bit Pattern\uff09\u200b\u4f1a\u200b\u975e\u5e38\u200b\u5197\u957f\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u5c31\u200b\u5305\u542b\u200b\u4e86\u200b 8 \u200b\u4f4d\u200b\u3002\u200b\u800c\u200b\u5982\u679c\u200b\u4f7f\u7528\u200b\u5341\u8fdb\u5236\u200b\uff0c\u200b\u5219\u200b\u4e0d\u200b\u65b9\u4fbf\u200b\u4e0e\u200b\u4f4d\u200b\u6a21\u5f0f\u200b\u8fdb\u884c\u200b\u4e92\u76f8\u8f6c\u5316\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u91c7\u7528\u200b\u5341\u516d\u8fdb\u5236\u200b\uff08Hexadecimal\uff09\u200b\u6765\u200b\u4e66\u5199\u200b\u4f4d\u200b\u6a21\u5f0f\u200b\u3002\u200b\u4e00\u4e2a\u200b\u5341\u516d\u8fdb\u5236\u200b\u6570\u5360\u200b 4 \u200b\u4f4d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u53d6\u503c\u200b\u8303\u56f4\u200b\u5c31\u662f\u200b \\(00_{16}\\) ~ \\(FF_{16}\\) \u3002</p> <p>\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u5b57\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u5341\u516d\u8fdb\u5236\u200b\u6570\u5b57\u200b\uff0c\u200b\u9700\u8981\u200b\u9996\u5148\u200b\u5c06\u200b\u5176\u200b\u5206\u4e3a\u200b\u591a\u4e2a\u200b 4 \u200b\u4f4d\u200b\u7684\u200b\u7ec4\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u200b\u5c06\u200b\u6bcf\u7ec4\u200b\u6570\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u5341\u516d\u8fdb\u5236\u200b\u3002\u200b\u5982\u679c\u200b\u603b\u200b\u4f4d\u6570\u200b\u4e0d\u200b\u4e3a\u200b 4 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6700\u200b\u5de6\u8fb9\u200b\u7684\u200b\u4e00\u7ec4\u200b\u53ef\u4ee5\u200b\u5c11\u4e8e\u200b\u56db\u4f4d\u200b\uff0c\u200b\u7136\u540e\u200b\u5728\u200b\u9996\u4f4d\u200b\u8865\u200b 0\u3002\u200b\u5982\u200b \\(111100_2\\) \u200b\u53ef\u4ee5\u200b\u5206\u6210\u200b \\(0011_2\\) \u200b\u548c\u200b \\(1100_2\\)\uff0c\u200b\u8f6c\u5316\u200b\u7ed3\u679c\u200b\u4e3a\u200b \\(3C_{16}\\) \u3002\u200b\u5728\u200b C \u200b\u4e2d\u200b\uff0c\u200b\u82e5\u200b\u4e00\u4e2a\u200b\u5e38\u6570\u200b\u4ee5\u200b 0x \u200b\u6216\u200b 0X \u200b\u4f5c\u4e3a\u200b\u524d\u7f00\u200b\uff0c\u200b\u5219\u200b\u4ee3\u8868\u200b\u5b83\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5341\u516d\u8fdb\u5236\u200b\u6570\u5b57\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_4","title":"\u6570\u636e\u200b\u5927\u5c0f","text":"<p>\u200b\u6bcf\u53f0\u200b\u8ba1\u7b97\u673a\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5b57\u957f\u200b\uff08Word Size\uff09\uff0c\u200b\u5b83\u200b\u6307\u5b9a\u200b\u4e86\u200b\u6307\u9488\u200b\u6570\u636e\u200b\u7684\u200b\u6807\u51c6\u200b\u5927\u5c0f\u200b\u3002\u200b\u5982\u679c\u200b\u4e00\u53f0\u200b\u673a\u5668\u200b\u7684\u200b\u5b57\u957f\u200b\u4e3a\u200b \\(w\\) \u200b\u4f4d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u865a\u62df\u5730\u5740\u200b\u7684\u200b\u8303\u56f4\u200b\u4e3a\u200b \\(0\uff5e2^w -1\\)\uff0c\u200b\u7a0b\u5e8f\u200b\u6700\u200b\u591a\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b \\(2^w\\) \u200b\u5b57\u8282\u200b\u300232 \u200b\u4f4d\u200b\u673a\u5668\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u5927\u5c0f\u200b\u7ea6\u200b\u4e3a\u200b 4 GB\uff0c\u200b\u800c\u200b 64 \u200b\u4f4d\u200b\u673a\u5668\u200b\u5219\u200b\u80fd\u200b\u8fbe\u5230\u200b 16 EB\u3002</p> <p>C \u200b\u4e2d\u200b\u51e0\u4e2a\u200b\u57fa\u672c\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u5927\u5c0f\u200b\u5982\u4e0b\u200b\u8868\u200b\u6240\u793a\u200b\uff1a</p> Signed Unsigned 32-bit 64-bit [signed] char unsigned char 1 1 short unsigned short 2 2 int unsigned 4 4 long unsigned long 4 8 int32_t uint_32t 4 4 int64_t uint_64t 8 8 char * 4 8 float 4 4 double 8 8 <p>\u200b\u9664\u200b<code>char</code>\u200b\u5916\u200b\uff0c\u200b\u82e5\u200b\u4e0d\u200b\u6dfb\u52a0\u200b\u524d\u7f00\u200b<code>unsigned</code>\uff0c\u200b\u5219\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u6709\u200b\u7b26\u53f7\u200b\u7c7b\u578b\u200b\u3002\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b\u7684\u200b\u6570\u636e\u200b\u4f7f\u7528\u200b\u673a\u5668\u200b\u7684\u200b\u5168\u200b\u5b57\u957f\u200b\uff0c\u200b\u5982\u200b<code>char *</code>\u3002\u200b\u7531\u4e8e\u200b\u67d0\u4e9b\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u5927\u5c0f\u200b\u5728\u200b\u4e0d\u540c\u200b\u673a\u5668\u200b\u4e0a\u200b\u6709\u6240\u4e0d\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f00\u53d1\u4eba\u5458\u200b\u5e94\u4f7f\u200b\u7a0b\u5e8f\u200b\u5bf9\u200b\u4e0d\u540c\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u786e\u5207\u200b\u5927\u5c0f\u200b\u4e0d\u200b\u654f\u611f\u200b\uff0c\u200b\u4ece\u800c\u200b\u4fdd\u8bc1\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u53ef\u79fb\u690d\u6027\u200b\uff08Portable\uff09\u3002</p>"},{"location":"core/csapp/ch2/#_5","title":"\u5bfb\u5740\u200b\u548c\u200b\u5b57\u8282\u200b\u987a\u5e8f","text":"<p>\u200b\u5bf9\u4e8e\u200b\u5305\u542b\u200b\u591a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u5efa\u7acb\u200b\u4e24\u4e2a\u200b\u51c6\u5219\u200b\uff1a\u200b\u8fd9\u4e2a\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5730\u5740\u200b\u662f\u200b\u4ec0\u4e48\u200b\u548c\u200b\u8fd9\u4e9b\u200b\u5b57\u8282\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6392\u5217\u200b\u987a\u5e8f\u200b\u662f\u200b\u600e\u6837\u200b\u7684\u200b\u3002\u200b\u67d0\u4e9b\u200b\u673a\u5668\u200b\u6309\u7167\u200b\u4ece\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b\u5b57\u8282\u200b\u5230\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u5b57\u8282\u200b\u7684\u200b\u987a\u5e8f\u5b58\u50a8\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u8be5\u200b\u65b9\u5f0f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5c0f\u7aef\u6cd5\u200b\uff08Little Endian\uff09\uff1b\u200b\u67d0\u4e9b\u200b\u673a\u5668\u200b\u5219\u200b\u4e0e\u200b\u4e4b\u200b\u76f8\u53cd\u200b\uff0c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5927\u7aef\u6cd5\u200b\uff08Big Endian\uff09\u3002\u200b\u4f8b\u5982\u200b\u4e00\u4e2a\u200b<code>int</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b\u5730\u5740\u200b\u4e3a\u200b 0x100\uff0c\u200b\u5176\u503c\u200b\u4e3a\u200b\u5341\u516d\u8fdb\u5236\u200b\u7684\u200b 0x1234567\uff0c\u200b\u90a3\u4e48\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u673a\u5668\u200b\u5b58\u50a8\u200b\u8be5\u200b\u53d8\u91cf\u200b\u7684\u200b\u65b9\u5f0f\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <p>Little Endian</p> 0x100 0x101 0x102 0x103 ... 67 45 23 01 ... <p>Big Endian</p> 0x100 0x101 0x102 0x103 ... 01 23 45 67 ... <p>\u200b\u6709\u4e9b\u200b\u65f6\u5019\u200b\u4e0d\u540c\u200b\u7684\u200b\u5b57\u8282\u200b\u5b58\u50a8\u200b\u987a\u5e8f\u200b\u53ef\u80fd\u200b\u5bfc\u81f4\u200b\u4e00\u4e9b\u200b\u95ee\u9898\u200b\uff1a</p> <ul> <li>\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u673a\u5668\u200b\u901a\u8fc7\u200b\u7f51\u7edc\u200b\u4f20\u9012\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u636e\u200b\uff0c\u200b\u5982\u5c0f\u7aef\u200b\u6cd5\u200b\u673a\u5668\u200b\u751f\u6210\u200b\u7684\u200b\u6570\u636e\u200b\u53d1\u9001\u5230\u200b\u5927\u7aef\u6cd5\u200b\u673a\u5668\u200b\u4e0a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u6536\u5230\u200b\u7684\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\u662f\u200b\u53cd\u200b\u7684\u200b\u3002\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\uff0c\u200b\u53d1\u9001\u200b\u65b9\u5e94\u200b\u5148\u200b\u5c06\u200b\u6570\u636e\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u7f51\u7edc\u200b\u6807\u51c6\u200b\u683c\u5f0f\u200b\uff0c\u200b\u63a5\u6536\u200b\u65b9\u518d\u200b\u5c06\u200b\u5176\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5185\u90e8\u200b\u8868\u8fbe\u65b9\u5f0f\u200b\uff1b</li> <li>\u200b\u5bf9\u4e8e\u200b\u5c0f\u7aef\u6cd5\u200b\u673a\u5668\u200b\uff0c\u200b\u4e66\u5199\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\u4e0e\u200b\u4e66\u5199\u200b\u6570\u5b57\u200b\u7684\u200b\u987a\u5e8f\u200b\u76f8\u53cd\u200b\uff1b</li> <li>\u200b\u67d0\u4e9b\u200b\u4f7f\u7528\u200b\u5f3a\u5236\u200b\u7c7b\u578b\u8f6c\u6362\u200b\uff08Cast\uff09\u200b\u7684\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5728\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b\u7684\u200b\u7ed3\u679c\u200b\u4e0d\u540c\u200b\u3002</li> </ul> <p>\u200b\u5bf9\u4e8e\u200b\u4e0a\u8ff0\u200b\u7b2c\u4e09\u79cd\u200b\u60c5\u51b5\u200b\uff0c\u200b\u4ee5\u200b\u4e00\u4e2a\u200b\u7a0b\u5e8f\u200b\u4e3a\u4f8b\u200b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n\ntypedef unsigned char *byte_pointer;\n\nvoid show_bytes(byte_pointer start, size_t len)\n{\n    size_t i;\n    for (i = 0; i &lt; len; i++)\n    {\n        // %.2x \u200b\u4ee3\u8868\u200b\u6574\u6570\u200b\u4f1a\u200b\u88ab\u200b\u6253\u5370\u200b\u4e3a\u200b\u81f3\u5c11\u200b\u4e24\u4f4d\u200b\uff08digits\uff09\u200b\u7684\u200b\u5341\u516d\u8fdb\u5236\u200b\u6570\u5b57\u200b\n        printf(\"%.2x\", start[i]);\n    }\n    printf(\"\\n\");\n}\n\nvoid show_int(int x)\n{\n    show_bytes((byte_pointer)&amp;x, sizeof(int));\n}\n\nvoid show_float(float x)\n{\n    show_bytes((byte_pointer)&amp;x, sizeof(float));\n}\n\nvoid show_pointer(void *x)\n{\n    show_bytes((byte_pointer)&amp;x, sizeof(void *));\n}\n\nint main()\n{\n    int val = 12345;\n    float fval = (float) val;\n    int *pval = &amp;val;\n    show_int(val);\n    show_float(fval);\n    show_pointer(pval);\n}\n</code></pre> <p>\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u673a\u5668\u200b\u7684\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u5982\u4e0b\u200b\uff1a</p> Machine val fval pval Linux32 0x39300000 0x00e44046 0xe4f9ffbf Windows32 0x39300000 0x00e44046 0xb4cc2200 Sun 0x00003039 0x4640e400 0xeffffa0c Linux64 0x39300000 0x00e44046 0xb811e5ffff7f0000 <p>\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b Sun \u200b\u7cfb\u7edf\u200b\u91c7\u7528\u200b\u5927\u7aef\u6cd5\u200b\uff0c\u200b\u5176\u4ed6\u200b\u4e09\u8005\u200b\u91c7\u7528\u200b\u5c0f\u7aef\u6cd5\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b\uff0c\u200b\u4e0d\u540c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5728\u200b\u5b58\u50a8\u200b\u5206\u914d\u200b\u4e0a\u200b\u6709\u7740\u200b\u4e0d\u540c\u200b\u7684\u200b\u51c6\u5219\u200b\u3002\u200b\u540c\u65f6\u200b\uff0c64 \u200b\u4f4d\u200b\u7cfb\u7edf\u200b\u4f7f\u7528\u200b 8 \u200b\u5b57\u8282\u200b\u5730\u5740\u200b\uff0c32 \u200b\u4f4d\u200b\u7cfb\u7edf\u200b\u4f7f\u7528\u200b 4 \u200b\u5b57\u8282\u200b\u5730\u5740\u200b\uff0c\u200b\u8fd9\u200b\u5bfc\u81f4\u200b\u4e86\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b\u53d8\u91cf\u200b<code>pval</code>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u7684\u200b\u4e0d\u540c\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_6","title":"\u5b57\u7b26\u4e32","text":"<p>\u200b\u5b57\u7b26\u4e32\u200b\u5728\u200b C \u200b\u4e2d\u200b\u88ab\u200b\u7f16\u7801\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u4ee5\u200b<code>NULL</code>\u200b\u5b57\u7b26\u200b\u7ed3\u5c3e\u200b\uff08\u200b\u5176\u503c\u200b\u4e3a\u200b 0\uff09\u200b\u7684\u200b\u5b57\u7b26\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5b57\u7b26\u200b\u90fd\u200b\u7531\u200b\u67d0\u79cd\u200b\u6807\u51c6\u200b\u7f16\u7801\u200b\u7ec4\u6210\u200b\uff0c\u200b\u5982\u200b ASCII \u200b\u7801\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u6267\u884c\u200b\u4e0a\u9762\u200b\u7684\u200b\u7a0b\u5e8f\u200b<code>show_bytes(\"12345\", 6)</code>\uff0c\u200b\u5c06\u200b\u5f97\u5230\u200b<code>31 32 33 34 35 00</code>\u3002</p> <p>\u200b\u7531\u4e8e\u200b\u5b57\u7b26\u4e32\u200b\u4e2d\u200b\u5404\u200b\u5b57\u7b26\u200b\u7684\u200b\u6392\u5217\u200b\u987a\u5e8f\u200b\u662f\u200b\u7531\u200b\u5b57\u7b26\u4e32\u200b\u672c\u8eab\u200b\u51b3\u5b9a\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b57\u7b26\u4e32\u200b\u4e0d\u4f1a\u200b\u53d7\u5230\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\u7684\u200b\u5f71\u54cd\u200b\uff0c\u200b\u9664\u975e\u200b\u5b57\u7b26\u200b\u4f7f\u7528\u200b\u4e24\u200b\u5b57\u8282\u200b\u7684\u200b Unicode \u200b\u8fdb\u884c\u200b\u7f16\u7801\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_7","title":"\u4ee3\u7801","text":"<p>\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u673a\u5668\u200b\u4f7f\u7528\u200b\u4e0d\u540c\u200b\u4e14\u200b\u4e0d\u200b\u517c\u5bb9\u200b\u7684\u200b\u6307\u4ee4\u200b\u548c\u200b\u7f16\u7801\u65b9\u5f0f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e8c\u8fdb\u5236\u200b\u4ee3\u7801\u200b\u5f88\u5c11\u200b\u80fd\u200b\u5728\u200b\u4e0d\u540c\u200b\u673a\u5668\u200b\u548c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ec4\u5408\u200b\u4e4b\u95f4\u200b\u79fb\u690d\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_8","title":"\u5e03\u5c14\u4ee3\u6570\u200b\u7b80\u4ecb","text":"<p>\u200b\u51e0\u79cd\u200b\u5e03\u5c14\u200b\u8fd0\u7b97\u7b26\u200b\u7684\u200b\u5b9a\u4e49\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li><code>\uff5e</code>\uff1a\u200b\u975e\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u903b\u8f91\u8fd0\u7b97\u200b\u7684\u200b NOT\uff1b</li> <li><code>&amp;</code>\uff1a\u200b\u4e0e\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u903b\u8f91\u8fd0\u7b97\u200b\u7684\u200b AND\uff1b</li> <li><code>|</code>\uff1a\u200b\u6216\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u903b\u8f91\u8fd0\u7b97\u200b\u7684\u200b OR\uff1b</li> <li><code>^</code>\uff1a\u200b\u5f02\u6216\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u903b\u8f91\u8fd0\u7b97\u200b\u7684\u200b EXCLUSIVE-OR\u3002\u200b\u82e5\u200b \\(p = 0\\)\uff0c\\(q = 1\\) \u200b\u6216\u200b \\(p = 1\\)\uff0c\\(q = 0\\) \u200b\u65f6\u200b\uff0c\\(p\\) ^ \\(q = 1\\)\u3002</li> </ul> <p>\u200b\u5e03\u5c14\u200b\u8fd0\u7b97\u7b26\u200b\u53ef\u4ee5\u200b\u5e94\u7528\u200b\u4e8e\u4f4d\u200b\u5411\u91cf\u200b\uff0c\u200b\u5373\u200b\u56fa\u5b9a\u200b\u957f\u5ea6\u200b\u7684\u200b 0\u30011 \u200b\u5e8f\u5217\u200b\u3002\u200b\u4e3e\u4f8b\u6765\u8bf4\u200b\uff0c\u200b\u82e5\u200b a \u200b\u4e3a\u200b [0110]\uff0cb \u200b\u4e3a\u200b [0101]\uff0c\u200b\u90a3\u4e48\u200b\uff1a</p> Operation Result ~a [1001] a &amp; b [0100] a | b [0111] a ^ b [0011]"},{"location":"core/csapp/ch2/#c","title":"C \u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8fd0\u7b97","text":"<p>C \u200b\u4e2d\u200b\u652f\u6301\u200b\u6309\u4f4d\u200b\u5e03\u5c14\u8fd0\u7b97\u200b\uff0c\u200b\u4e0a\u9762\u200b\u63d0\u5230\u200b\u7684\u200b\u5e03\u5c14\u200b\u8fd0\u7b97\u7b26\u200b\u5176\u5b9e\u200b\u5c31\u662f\u200b\u5728\u200b C \u200b\u4e2d\u200b\u4f7f\u7528\u200b\u7684\u200b\u3002\u200b\u4e00\u4e2a\u200b\u4f7f\u7528\u200b\u5e03\u5c14\u200b\u8fd0\u7b97\u7b26\u200b\u7684\u200b\u7ecf\u5178\u200b\u7a0b\u5e8f\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\n\nvoid inplace_swap(int *x, int *y)\n{\n    *y = *x ^ *y;\n    *x = *x ^ *y;\n    *y = *x ^ *y;\n}\n</code></pre> <p>\u200b\u5229\u7528\u200b\u5bf9\u4e8e\u200b\u4efb\u610f\u200b\u6570\u200b \\(a\\) \uff0c\\(a\\) ^ \\(a\\) = 0 \u200b\u4e14\u200b \\(0\\) ^ \\(a = a\\) \u200b\u8fd9\u4e00\u200b\u6027\u8d28\u200b\uff0c\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u4e0d\u200b\u4f7f\u7528\u200b\u4e2d\u95f4\u200b\u53d8\u91cf\u200b\u4fbf\u200b\u5b8c\u6210\u200b\u4e86\u200b\u53d8\u91cf\u503c\u200b\u7684\u200b\u4ea4\u6362\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u4e0a\u8ff0\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u5b9e\u73b0\u200b\u8fd8\u200b\u5efa\u7acb\u200b\u5728\u200b\u5f02\u6216\u200b\u8fd0\u7b97\u200b\u6ee1\u8db3\u200b\u4ea4\u6362\u5f8b\u200b\u548c\u200b\u7ed3\u5408\u5f8b\u200b\u7684\u200b\u57fa\u7840\u200b\u4e4b\u4e0a\u200b\u3002</p>"},{"location":"core/csapp/ch2/#c_1","title":"C \u200b\u4e2d\u200b\u7684\u200b\u903b\u8f91\u8fd0\u7b97","text":"<p>C \u200b\u8fd8\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u903b\u8f91\u200b\u8fd0\u7b97\u7b26\u200b\uff0c\u200b\u5373\u200b<code>||</code>\u3001<code>&amp;&amp;</code>\u200b\u548c\u200b<code>!</code>\u3002\u200b\u5b83\u4eec\u200b\u548c\u200b\u4f4d\u7ea7\u200b\u8fd0\u7b97\u200b\u7684\u200b\u4e00\u4e2a\u200b\u533a\u522b\u200b\u662f\u200b\uff0c\u200b\u5982\u679c\u200b\u5bf9\u200b\u7b2c\u4e00\u4e2a\u200b\u53c2\u6570\u200b\u6c42\u503c\u200b\u5c31\u200b\u80fd\u200b\u786e\u5b9a\u200b\u8868\u8fbe\u5f0f\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u4fbf\u200b\u4e0d\u4f1a\u200b\u5bf9\u200b\u7b2c\u4e8c\u4e2a\u200b\u53c2\u6570\u200b\u8fdb\u884c\u200b\u6c42\u503c\u200b\u3002\u200b\u5982\u200b\u8868\u8fbe\u5f0f\u200b<code>a &amp;&amp; 5 / a</code>\u200b\u4e0d\u4f1a\u200b\u5bfc\u81f4\u200b\u9664\u6570\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u5f02\u5e38\u200b\uff0c\u200b\u800c\u200b<code>p &amp;&amp; *p++</code>\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u5bfc\u81f4\u200b\u7a7a\u200b\u6307\u9488\u200b\u5f15\u7528\u200b\u5f02\u5e38\u200b\u3002</p>"},{"location":"core/csapp/ch2/#c_2","title":"C \u200b\u4e2d\u200b\u7684\u200b\u79fb\u4f4d\u200b\u8fd0\u7b97","text":"<p>C \u200b\u4e2d\u200b\u7684\u200b\u79fb\u4f4d\u200b\u8fd0\u7b97\u200b\u6709\u200b\u5de6\u79fb\u200b\u548c\u200b\u53f3\u79fb\u200b\u4e24\u79cd\u200b\uff0c\u200b\u5747\u200b\u4e0d\u4f1a\u200b\u6539\u53d8\u200b\u4f4d\u200b\u5411\u91cf\u200b\u7684\u200b\u957f\u5ea6\u200b\u3002\u200b\u5de6\u79fb\u200b\u8fd0\u7b97\u200b \\(x &lt;&lt; k\\) \u200b\u5c31\u662f\u200b \\(x\\) \u200b\u5411\u200b\u5de6\u200b\u79fb\u52a8\u200b \\(k\\) \u200b\u4f4d\u200b\uff0c\u200b\u4e22\u5f03\u200b \\(k\\) \u200b\u4e2a\u200b\u9ad8\u4f4d\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u53f3\u7aef\u200b\u8865\u5145\u200b \\(k\\) \u200b\u4e2a\u200b 0\u3002\u200b\u901a\u5e38\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b \\(x &lt;&lt; 1\\) \u200b\u548c\u200b \\(x &lt;&lt; 2\\) \u200b\u5206\u522b\u200b\u4ee3\u66ff\u200b \\(x \\times 2\\) \u200b\u548c\u200b \\(x \\times 4\\)\uff0c\u200b\u56e0\u4e3a\u200b\u4f4d\u7ea7\u200b\u8fd0\u7b97\u200b\u62e5\u6709\u200b\u76f8\u6bd4\u200b\u4e58\u6cd5\u200b\u66f4\u5feb\u200b\u7684\u200b\u8fd0\u7b97\u200b\u901f\u5ea6\u200b\u3002</p> <p>\u200b\u53f3\u79fb\u200b\u8fd0\u7b97\u200b\u5206\u4e3a\u200b\u4e24\u79cd\u200b\u5f62\u5f0f\u200b\uff0c\u200b\u903b\u8f91\u200b\u548c\u200b\u7b97\u672f\u200b\u3002\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u636e\u200b\u5fc5\u987b\u200b\u4f7f\u7528\u200b\u903b\u8f91\u200b\u53f3\u79fb\u200b\uff0c\\(x &gt;&gt; k\\) \u200b\u5c06\u200b x \u200b\u7684\u200b\u5de6\u7aef\u200b\u8865\u5145\u200b \\(k\\) \u200b\u4e2a\u200b 0 \uff0c\u200b\u5e76\u200b\u4e22\u5f03\u200b \\(k\\) \u200b\u4e2a\u200b\u4f4e\u4f4d\u200b\u3002\u200b\u800c\u200b\u5927\u591a\u6570\u200b\u673a\u5668\u200b\u4f7f\u7528\u200b\u7b97\u672f\u200b\u53f3\u79fb\u200b\u5904\u7406\u200b\u6709\u200b\u7b26\u53f7\u200b\u6570\u636e\u200b\uff0c\\(x &gt;&gt; k\\) \u200b\u5c06\u200b \\(x\\) \u200b\u7684\u200b\u5de6\u7aef\u200b\u8865\u5145\u200b \\(k\\) \u200b\u4e2a\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u200b\u7684\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u5e76\u200b\u4e22\u5f03\u200b \\(k\\) \u200b\u4e2a\u200b\u4f4e\u4f4d\u200b\u3002</p> <p>\u200b\u52a0\u51cf\u4e58\u9664\u200b\u8fd0\u7b97\u7b26\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u5927\u4e8e\u200b\u79fb\u4f4d\u200b\u8fd0\u7b97\u7b26\u200b\uff0c\u200b\u56e0\u6b64\u200b \\(1 &lt;&lt; 2 + 3 &lt;&lt; 4\\) \u200b\u7b49\u6548\u4e8e\u200b \\(1 &lt;&lt; (2 + 3) &lt;&lt; 4\\)\u3002</p>"},{"location":"core/csapp/ch2/#_9","title":"\u6574\u6570\u200b\u7684\u200b\u8868\u793a","text":""},{"location":"core/csapp/ch2/#_10","title":"\u65e0\u200b\u7b26\u53f7\u200b\u7f16\u7801","text":"<p>\u200b\u4e00\u4e2a\u200b\u957f\u5ea6\u200b\u4e3a\u200b \\(w\\) \u200b\u7684\u200b\u4f4d\u200b\u5411\u91cf\u200b \\(\\vec{x} = [x_{w-1},x_{w-2},...,x_0]\\)\uff0c\u200b\u5b83\u200b\u4ece\u200b\u4e8c\u8fdb\u5236\u200b\uff08Binary\uff09\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7f16\u7801\u200b\uff08Unsigned\uff09\u200b\u7684\u200b\u516c\u5f0f\u200b\u4e3a\u200b\uff1a</p> \\[ B2U_w(\\vec{x}) \\doteq \\displaystyle\\sum_{i=0}^{w - 1}x_i2^i \\] <p>\u200b\u5176\u4e2d\u200b\uff0c \\(\\doteq\\) \u200b\u7b26\u53f7\u200b\u8868\u793a\u200b\u7b49\u5f0f\u200b\u7684\u200b\u5de6\u624b\u8fb9\u200b\u88ab\u200b\u5b9a\u4e49\u200b\u4e3a\u200b\u53f3\u624b\u8fb9\u200b\u3002\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7f16\u7801\u200b\u7684\u200b\u6700\u5c0f\u503c\u200b\u4e3a\u4f4d\u200b\u5411\u91cf\u200b [00...0]\uff0c\u200b\u5373\u200b\u6574\u6570\u200b\u503c\u200b 0\u3002\u200b\u6700\u5927\u503c\u200b\u4e3a\u4f4d\u200b\u5411\u91cf\u200b [11...1]\uff0c\u200b\u5373\u200b\u6574\u6570\u200b\u503c\u200b \\(U\\max_w \\doteq \\displaystyle\\sum_{i=0}^{w - 1}2^i = 2^w -1\\)\u3002\u200b\u51fd\u6570\u200b \\(B2U_w\\) \u200b\u662f\u200b\u4e00\u4e2a\u53cc\u200b\u5c04\u200b\uff08Bijection\uff09\uff1a\u200b\u5bf9\u4e8e\u200b\u6bcf\u4e2a\u200b\u957f\u5ea6\u200b\u4e3a\u200b \\(w\\) \u200b\u7684\u200b\u4f4d\u200b\u5411\u91cf\u200b\uff0c\u200b\u90fd\u200b\u6709\u200b\u552f\u4e00\u200b\u7684\u200b\u6574\u6570\u200b\u503c\u200b\u4e0e\u200b\u4e4b\u200b\u5bf9\u5e94\u200b\uff0c\u200b\u53cd\u4e4b\u4ea6\u7136\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_11","title":"\u4e8c\u8fdb\u5236\u200b\u8865\u7801","text":"<p>\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\uff08Two's-Complement Encoding\uff09\u200b\u5c06\u4f4d\u200b\u5411\u91cf\u200b\u7684\u200b\u7b26\u53f7\u200b\u4f4d\u200b\uff08\u200b\u5373\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u200b\uff09\u200b\u4f5c\u4e3a\u200b\u8d1f\u200b\u6743\u91cd\u200b\uff08Negative Weight\uff09\uff0c\u200b\u7b26\u53f7\u200b\u4f4d\u4e3a\u200b 1 \u200b\u4ee3\u8868\u200b\u503c\u4e3a\u200b\u8d1f\u200b\uff0c\u200b\u7b26\u53f7\u200b\u4f4d\u4e3a\u200b 0 \u200b\u4ee3\u8868\u200b\u503c\u4e3a\u200b\u6b63\u200b\u3002\u200b\u5982\u200b\u4e00\u4e2a\u200b\u957f\u5ea6\u200b\u4e3a\u200b \\(w\\) \u200b\u7684\u200b\u4f4d\u200b\u5411\u91cf\u200b \\(\\vec{x} = [x_{w-1},x_{w-2},...,x_0]\\)\uff0c\u200b\u5b83\u200b\u4ece\u200b\u4e8c\u8fdb\u5236\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u7684\u200b\u516c\u5f0f\u200b\u4e3a\u200b\uff1a</p> \\[ B2T_w(\\vec{x}) \\doteq -x_{w - 1}2^{w - 1} + \\displaystyle\\sum_{i=0}^{w - 2}x_i2^i \\] <p>\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u7684\u200b\u6700\u5c0f\u503c\u200b\u4e3a\u4f4d\u200b\u5411\u91cf\u200b [10...0]\uff0c\u200b\u5373\u200b\u6574\u6570\u200b\u503c\u200b \\(T\\min_w \\doteq -2^{w-1}\\)\u3002\u200b\u6700\u5927\u503c\u200b\u4e3a\u4f4d\u200b\u5411\u91cf\u200b [01...1]\uff0c\u200b\u5373\u200b\u6574\u6570\u200b\u503c\u200b \\(T\\max_w \\doteq \\displaystyle\\sum_{i=0}^{w - 2}2^i = 2^{w-1} -1\\)\u3002\u200b\u4e0e\u200b\u4e8c\u8fdb\u5236\u200b\u8f6c\u5316\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7f16\u7801\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u51fd\u6570\u200b \\(B2T_w\\) \u200b\u4e5f\u200b\u662f\u200b\u4e00\u4e2a\u53cc\u200b\u5c04\u200b\u3002\u200b\u800c\u200b\u5b83\u4eec\u200b\u7684\u200b\u6700\u503c\u200b\u4e4b\u95f4\u200b\u6709\u7740\u200b\u5982\u4e0b\u200b\u6027\u8d28\u200b\uff1a</p> \\[ |T\\min| =|T\\max| + 1\\] \\[ U\\max = 2T\\max + 1\\] <p>\u200b\u7279\u522b\u200b\u5730\u200b\uff0c\u200b\u6574\u6570\u200b -1 \u200b\u548c\u200b \\(U\\max_w\\)\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u793a\u200b\u5747\u200b\u4e3a\u200b\u5168\u200b 1\uff1a[11...1]\uff0c\u200b\u800c\u200b\u6574\u6570\u200b 0 \u200b\u5728\u200b\u4e24\u79cd\u200b\u8868\u8fbe\u65b9\u5f0f\u200b\u4e2d\u5747\u200b\u4e3a\u200b\u5168\u200b 0\uff1a[00...0]\u3002\u200b\u867d\u7136\u200b C \u200b\u6807\u51c6\u200b\u5e76\u200b\u6ca1\u6709\u200b\u9650\u5236\u200b\u6709\u200b\u7b26\u53f7\u200b\u6574\u6570\u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u8868\u8fbe\u200b\uff0c\u200b\u4f46\u200b\u5927\u591a\u6570\u200b\u673a\u5668\u200b\u90fd\u200b\u91c7\u7528\u200b\u4e86\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u7684\u200b\u65b9\u5f0f\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_12","title":"\u6709\u200b\u7b26\u53f7\u200b\u6570\u200b\u548c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u7684\u200b\u8f6c\u6362","text":"<p>\u200b\u5728\u200b C \u200b\u4e2d\u200b\uff0c\u200b\u6709\u200b\u7b26\u53f7\u200b\u6570\u200b\u548c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u4e4b\u95f4\u200b\u7684\u200b\u8f6c\u6362\u200b\u662f\u200b\u57fa\u4e8e\u200b\u4f4d\u7ea7\u200b\u89c6\u89d2\u200b\u7684\u200b\uff0c\u200b\u800c\u200b\u975e\u200b\u6570\u5b57\u200b\u3002\u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>short int v = -12345;\nunsigned short uv = (unsigned short) v;\nprintf(\"v = %d, uv = %u\\n\", v, uv);\n</code></pre> <p>\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u4e3a\u200b<code>v = -12345\uff0cuv = 53191</code>\u3002\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u5728\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u8fc7\u7a0b\u200b\u4e2d\u4f4d\u200b\u5411\u91cf\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u4f46\u4f4d\u200b\u5411\u91cf\u200b\u8f6c\u6362\u200b\u5230\u200b\u6574\u6570\u200b\u503c\u200b\u7684\u200b\u65b9\u5f0f\u200b\u4e0d\u540c\u200b\u3002\u200b\u6839\u636e\u200b\u63a8\u5bfc\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u7684\u200b\u516c\u5f0f\u200b\u5982\u4e0b\u200b\uff1a</p> \\[T2U_w(x) = \\begin{cases}    x + 2^w &amp;\\text x &lt; 0 \\cr    x &amp;\\text x \\geq 0 \\end{cases}\\] <p>\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u975e\u200b\u8d1f\u6570\u200b\u8f6c\u6362\u200b\u524d\u540e\u200b\u4fdd\u6301\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u8d1f\u6570\u200b\u5219\u200b\u53d8\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u66f4\u5927\u200b\u7684\u200b\u6b63\u6570\u200b\uff1a</p> <p></p> <p>\u200b\u800c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u7684\u200b\u516c\u5f0f\u200b\u5219\u200b\u4e3a\u200b\uff1a</p> \\[U2T_w(u) = \\begin{cases}    u &amp;\\text u \\leq T\\max_w \\cr    u - 2^w &amp;\\text u &gt; T\\max_w \\end{cases}\\] <p>\u200b\u5982\u56fe\u6240\u793a\u200b\uff0c\u200b\u5c0f\u4e8e\u200b \\(2 ^ {w - 1}\\) \uff08\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 0\uff09\u200b\u7684\u200b\u6570\u200b\u8f6c\u6362\u200b\u524d\u540e\u200b\u4fdd\u6301\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b \\(2 ^ {w - 1}\\) \uff08\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 1\uff09\u200b\u7684\u200b\u6570\u200b\u5c06\u200b\u88ab\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u8d1f\u6570\u200b\uff1a</p> <p></p> <p>\u200b\u901a\u8fc7\u200b\u4e0a\u9762\u200b\u7684\u200b\u8ba8\u8bba\u200b\u6211\u4eec\u200b\u53d1\u73b0\u200b\uff0c\u200b\u5927\u4e8e\u200b\u7b49\u4e8e\u200b 0 \u200b\u4e14\u200b\u5c0f\u4e8e\u200b \\(2 ^ {w - 1}\\) \u200b\u7684\u200b\u503c\u200b\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u65e0\u200b\u7b26\u53f7\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u8868\u793a\u200b\u3002\u200b\u800c\u200b\u8fd9\u4e2a\u200b\u8303\u56f4\u200b\u4e4b\u5916\u200b\u7684\u200b\u6570\u200b\uff0c\u200b\u5728\u200b\u8f6c\u6362\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u52a0\u4e0a\u200b\u6216\u200b\u51cf\u53bb\u200b \\(2 ^ w\\)\u3002</p>"},{"location":"core/csapp/ch2/#c_3","title":"C \u200b\u4e2d\u200b\u7684\u200b\u6709\u200b\u7b26\u53f7\u200b\u6570\u200b\u548c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570","text":"<p>\u200b\u901a\u5e38\u200b\u6211\u4eec\u200b\u9ed8\u8ba4\u200b\u6570\u5b57\u200b\u662f\u200b\u6709\u200b\u7b26\u53f7\u200b\u7684\u200b\uff0c\u200b\u9664\u975e\u200b\u52a0\u4e0a\u200b\u540e\u7f00\u200b U \u200b\u6216\u200b u\uff0c\u200b\u5982\u200b 12345U \u200b\u548c\u200b 0x1A2Bu \u200b\u7b49\u200b\u3002\u200b\u9664\u4e86\u200b\u663e\u5f0f\u200b\u5730\u200b\u4f7f\u7528\u200b\u5f3a\u5236\u200b\u7c7b\u578b\u8f6c\u6362\u200b\uff08\u200b\u5982\u200b\u4e0a\u200b\u4e00\u8282\u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u200b\uff09\u200b\u4ee5\u5916\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e00\u79cd\u200b\u7c7b\u578b\u200b\u7684\u200b\u8868\u8fbe\u5f0f\u200b\u8d4b\u503c\u200b\u7ed9\u200b\u53e6\u200b\u4e00\u79cd\u200b\u53d8\u91cf\u200b\uff0c\u200b\u5373\u200b\u9690\u5f0f\u200b\u8f6c\u6362\u200b\uff1a</p> <pre><code>int tx, ty;\nunsigned ux, uy;\ntx = ux; /* Cast to signed*/\nuy = ty; /* Cast to usigned*/\n</code></pre> <p>\u200b\u5982\u679c\u200b\u53c2\u4e0e\u200b\u8fd0\u7b97\u200b\u7684\u200b\u4e24\u4e2a\u200b\u6570\u200b\u4e00\u4e2a\u200b\u662f\u200b\u6709\u200b\u7b26\u53f7\u200b\u7684\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u662f\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7684\u200b\uff0c\u200b\u90a3\u4e48\u200b C \u200b\u4f1a\u200b\u9690\u5f0f\u200b\u5730\u200b\u5c06\u200b\u6709\u200b\u7b26\u53f7\u200b\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u5e76\u200b\u5047\u5b9a\u200b\u4e24\u6570\u200b\u5747\u200b\u4e3a\u200b\u975e\u200b\u8d1f\u540e\u200b\u518d\u200b\u8fdb\u884c\u200b\u8ba1\u7b97\u200b\u3002\u200b\u6bd4\u5982\u200b\u8868\u8fbe\u5f0f\u200b -1 &lt; 0U \u200b\u7684\u200b\u503c\u200b\u4e3a\u200b false\uff0c\u200b\u56e0\u4e3a\u200b -1 \u200b\u4f1a\u5148\u200b\u88ab\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u518d\u200b\u4e0e\u200b 0 \u200b\u8fdb\u884c\u200b\u6bd4\u8f83\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_13","title":"\u6269\u5c55\u200b\u4e00\u4e2a\u200b\u6570\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u793a","text":"<p>\u200b\u8981\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u66f4\u200b\u5927\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u7b80\u5355\u200b\u5730\u200b\u5728\u200b\u5934\u90e8\u200b\u6dfb\u52a0\u200b 0\uff0c\u200b\u8fd9\u79cd\u200b\u8fd0\u7b97\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u96f6\u200b\u6269\u5c55\u200b\uff08Zero Extension\uff09\u3002\u200b\u800c\u200b\u5bf9\u4e8e\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\uff0c\u200b\u5219\u200b\u9700\u8981\u200b\u5728\u200b\u5934\u90e8\u200b\u6dfb\u52a0\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u200b\uff08\u200b\u7b26\u53f7\u200b\u4f4d\u200b\uff09\uff0c\u200b\u5373\u200b\u7b26\u53f7\u200b\u6269\u5c55\u200b\uff08Sign Extension\uff09\u3002</p> <p>\u200b\u5f53\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u65e2\u200b\u6539\u53d8\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u5927\u5c0f\u200b\u53c8\u200b\u6539\u53d8\u200b\u7b26\u53f7\u200b\u7c7b\u578b\u200b\u65f6\u200b\uff0c\u200b\u5219\u200b\u5148\u200b\u6539\u53d8\u200b\u5927\u5c0f\u200b\uff0c\u200b\u518d\u200b\u6539\u53d8\u200b\u6709\u65e0\u200b\u7b26\u53f7\u200b\u3002\u200b\u4f8b\u5982\u200b\u5c06\u200b\u4e00\u4e2a\u200b<code>short</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b\u8f6c\u6362\u200b\u4e3a\u200b<code>unsigned</code>\u200b\u7c7b\u578b\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5148\u200b\u88ab\u200b\u8f6c\u6362\u200b\u4e3a\u200b<code>int</code>\u200b\u7c7b\u578b\u200b\uff0c\u200b\u518d\u200b\u88ab\u200b\u8f6c\u6362\u200b\u4e3a\u200b<code>unsigned</code>\u200b\u7c7b\u578b\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_14","title":"\u622a\u65ad\u200b\u6570\u5b57","text":"<p>\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u66f4\u200b\u5c0f\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b\u65f6\u200b\uff0c\u200b\u622a\u65ad\u200b\u6570\u5b57\u200b\u7684\u200b\u4f4d\u6570\u200b\u662f\u200b\u4e0d\u53ef\u907f\u514d\u200b\u7684\u200b\u3002\u200b\u5982\u200b\u4e00\u4e2a\u200b \\(w\\) \u200b\u4f4d\u200b\u7684\u200b\u4f4d\u200b\u5411\u91cf\u200b \\(\\vec{x} = [x_{w-1},x_{w-2},...,x_0]\\) \u200b\u88ab\u200b\u622a\u65ad\u200b\u4e3a\u200b \\(k\\) \u200b\u4f4d\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u4f1a\u200b\u4e22\u5f03\u200b \\(w-k\\) \u200b\u4e2a\u200b\u9ad8\u4f4d\u200b\uff0c\u200b\u5f97\u5230\u200b \\({\\vec{x} = [x_{k-1},x_{k-2},...,x_0]}\\)\u3002\u200b\u622a\u65ad\u200b\u6570\u5b57\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u503c\u200b\u7684\u200b\u53d8\u5316\u200b\uff1a</p> \\[B2U_k([x_{k-1},x_{k-2},...,x_0]) = B2U_w([x_{w-1},x_{w-2},...,x_0]) \\bmod 2^k\\] \\[B2T_k([x_{k-1},x_{k-2},...,x_0])= U2T_k(B2U_w([x_{w-1},x_{w-2},...,x_0]) \\bmod 2^k)\\] <p>\u200b\u901a\u8fc7\u200b\u4e0a\u9762\u200b\u51e0\u200b\u5c0f\u8282\u200b\u7684\u200b\u8ba8\u8bba\u200b\uff0c\u200b\u6211\u4eec\u200b\u53d1\u73b0\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u4e0e\u200b\u6709\u200b\u7b26\u53f7\u200b\u6570\u200b\u4e4b\u95f4\u200b\u7684\u200b\u9690\u5f0f\u200b\u8f6c\u6362\u200b\u5bfc\u81f4\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u4e0e\u200b\u5e38\u8bc6\u200b\u76f8\u6096\u200b\u7684\u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u5bfc\u81f4\u200b\u4e00\u4e9b\u200b\u5f88\u96be\u200b\u53d1\u73b0\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u9519\u8bef\u200b\u3002\u200b\u56e0\u6b64\u200b\u5f88\u591a\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\uff0c\u200b\u5982\u200b Java\uff0c\u200b\u4e0d\u200b\u652f\u6301\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u7684\u200b\u4f7f\u7528\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_15","title":"\u6574\u6570\u200b\u7684\u200b\u8fd0\u7b97","text":""},{"location":"core/csapp/ch2/#_16","title":"\u65e0\u200b\u7b26\u53f7\u200b\u52a0\u6cd5","text":"<p>\u200b\u4e24\u4e2a\u200b\u53ef\u7528\u200b \\(w\\) \u200b\u4f4d\u200b\u65e0\u200b\u7b26\u53f7\u200b\u7f16\u7801\u8868\u793a\u200b\u7684\u200b\u975e\u8d1f\u200b\u6574\u6570\u200b \\(x\\) \u200b\u548c\u200b \\(y\\)\uff0c\u200b\u5176\u200b\u8303\u56f4\u200b\uff1a\\(0 \\leq x, y \\leq 2^w -1\\)\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u4eec\u200b\u7684\u200b\u548c\u200b\uff1a\\(0 \\leq x+ y \\leq 2^{w + 1} -2\\) \u200b\u5c31\u200b\u6709\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u7528\u200b \\(w+1\\) \u200b\u4f4d\u6765\u200b\u8868\u793a\u200b\u3002\u200b\u5982\u679c\u200b\u51fa\u73b0\u200b\u6ea2\u51fa\u200b\u4fbf\u200b\u4e22\u5f03\u200b\u9ad8\u4f4d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u65e0\u200b\u7b26\u53f7\u200b\u52a0\u6cd5\u200b\uff08\\(+_w^u\\)\uff09\u200b\u7b49\u4ef7\u200b\u4e8e\u200b\u8ba1\u7b97\u200b \\((x+y) \\bmod 2^w\\)\uff0c\u200b\u5373\u200b\uff1a</p> \\[x + _w^uy = \\begin{cases}    x + y  &amp;\\text x + y &lt; 2^w &amp;\\text Normal \\cr    x + y - 2^w &amp;\\text 2^w \\leq x + y &lt; 2^{w+1} &amp;\\text Overflow \\end{cases}\\] <p>\u200b\u6a21\u6570\u200b\u52a0\u6cd5\u200b\u6784\u6210\u200b\u4e86\u200b\u4e00\u79cd\u200b\u6570\u5b66\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5373\u200b\u963f\u8d1d\u5c14\u200b\u7fa4\u200b\uff08Abelian Group\uff09\uff0c\u200b\u5b83\u200b\u662f\u200b\u53ef\u200b\u4ea4\u6362\u200b\u7684\u200b\u548c\u200b\u53ef\u200b\u7ed3\u5408\u200b\u7684\u200b\u3002\\(w\\) \u200b\u4f4d\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u7684\u200b\u96c6\u5408\u200b\u6267\u884c\u200b \\(+_w^u\\) \u200b\u8fd0\u7b97\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u6bcf\u4e2a\u200b\u503c\u200b \\(x\\)\uff0c\u200b\u5fc5\u7136\u200b\u6709\u200b\u67d0\u4e2a\u200b\u503c\u200b \\(-_w^ux\\) \u200b\u6ee1\u8db3\u200b \\(-_w^ux +_w^ux = 0\\)\uff0c\u200b\u8be5\u503c\u200b\u88ab\u200b\u79f0\u4e3a\u200b \\(x\\) \u200b\u7684\u200b\u9006\u5143\u200b\uff08Inverse\uff09\u3002\u200b\u5f53\u200b \\(x = 0\\) \u200b\u65f6\u200b\uff0c\u200b\u5176\u200b\u9006\u5143\u200b\u81ea\u7136\u200b\u4e3a\u200b 0\u3002\u200b\u5f53\u200b \\(x &gt; 0\\) \u200b\u65f6\u200b\uff0c\u200b\u663e\u7136\u200b $ (x + 2^w - x)\\bmod 2^w = 0$\u3002\u200b\u7531\u4e8e\u200b \\(0 &lt; 2^w -x &lt; 2^w\\)\uff0c\u200b\u56e0\u6b64\u200b \\(2^w -x\\) \u200b\u4fbf\u662f\u200b \\(x\\) \u200b\u7684\u200b\u9006\u5143\u200b\u3002\u200b\u4e0a\u8ff0\u200b\u4e24\u79cd\u200b\u60c5\u51b5\u200b\u603b\u7ed3\u200b\u5982\u4e0b\u200b\uff1a</p> \\[ -_w^ux = \\begin{cases}    x   &amp;\\text x = 0 \\cr    2^w -x &amp;\\text x &gt; 0 \\end{cases}\\]"},{"location":"core/csapp/ch2/#_17","title":"\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u52a0\u6cd5","text":"<p>\u200b\u4e24\u4e2a\u200b\u6570\u200b\u7684\u200b \\(w\\) \u200b\u4f4d\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u4e4b\u200b\u548c\u200b\uff08\\(+_w^t\\)\uff09\u200b\u4e0e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u4e4b\u200b\u548c\u200b\u6709\u7740\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u793a\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5bf9\u4e8e\u200b \\(-2^{w-1} \\leq x, y \\leq 2^{w-1} -1\\) \uff0c\u200b\u6709\u200b\uff1a</p> \\[\\begin{split} x +_w^ty &amp;=U2T_w(T2U_w(x) +_w^uT2U_w(y))\\cr       &amp;=U2T_w[(x+y)\\bmod 2^w] \\end{split}\\] <p>\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\uff0c\u200b\u6211\u4eec\u200b\u6839\u636e\u200b\u4e24\u6570\u200b\u4e4b\u200b\u548c\u200b\u7684\u200b\u8303\u56f4\u200b\uff0c\u200b\u5c06\u200b\u4e0a\u8ff0\u200b\u7ed3\u679c\u200b\u5206\u200b\u60c5\u51b5\u200b\u8ba8\u8bba\u200b\uff0c\u200b\u4ece\u800c\u200b\u5f97\u5230\u200b\uff1a</p> \\[x + _w^ty = \\begin{cases}    x + y + 2^w &amp;\\text x + y &lt; -2^{w-1} &amp;\\text  Negative \\space \\space Overflow \\cr    x + y  &amp;\\text -2^{w-1} \\leq x + y &lt; 2^{w-1} &amp;\\text Normal \\cr    x + y - 2^w &amp;\\text x + y \\geq 2^{w-1} &amp;\\text  Positive \\space \\space Overflow \\end{cases}\\] <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u82e5\u200b \\(x&gt;0, y&gt;0, x+_w^ty\\leq 0\\)\uff0c\u200b\u90a3\u4e48\u200b\u7ed3\u679c\u200b\u4fbf\u200b\u51fa\u73b0\u200b\u4e86\u200b\u6b63\u200b\u6ea2\u51fa\u200b\uff1b\u200b\u82e5\u200b \\(x&lt;0, y&lt;0, x+_w^ty\\geq 0\\)\uff0c\u200b\u7ed3\u679c\u200b\u4fbf\u200b\u51fa\u73b0\u200b\u4e86\u200b\u8d1f\u200b\u6ea2\u51fa\u200b\u3002</p> <p>\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u7684\u200b\u9006\u5143\u200b\u8ba1\u7b97\u516c\u5f0f\u200b\u5982\u4e0b\u200b\uff1a</p> \\[ -_w^tx = \\begin{cases}    T\\min_w   &amp;\\text x = T\\min_w \\cr    -x &amp;\\text x &gt; T\\min_w \\end{cases}\\]"},{"location":"core/csapp/ch2/#_18","title":"\u65e0\u200b\u7b26\u53f7\u200b\u4e58\u6cd5","text":"<p>\u200b\u65e0\u200b\u7b26\u53f7\u200b\u4e58\u6cd5\u200b\u8fd0\u7b97\u200b\uff08\\(\\times_w^u\\)\uff09\u200b\u4e0e\u200b\u52a0\u6cd5\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5bf9\u200b \\(2^w\\) \u200b\u7684\u200b\u6a21\u200b\u8fd0\u7b97\u200b\uff1a</p> \\[x\\times_w^uy=(x \\times y)\\bmod2^w\\]"},{"location":"core/csapp/ch2/#_19","title":"\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u4e58\u6cd5","text":"<p>\u200b\u540c\u6837\u200b\u4e0e\u200b\u52a0\u6cd5\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4e24\u4e2a\u200b\u6570\u200b\u7684\u200b \\(w\\) \u200b\u4f4d\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u4e4b\u79ef\u200b\uff08\\(\\times_w^t\\)\uff09\u200b\u4e0e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u4e4b\u79ef\u200b\u6709\u7740\u200b\u5b8c\u5168\u76f8\u540c\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u793a\u200b\uff0c\u200b\u56e0\u6b64\u200b\uff1a</p> \\[\\begin{split} x \\times_w^ty &amp;=U2T_w(T2U_w(x)\\times_w^uT2U_w(y))\\cr       &amp;=U2T_w[(x \\times y)\\bmod 2^w] \\end{split}\\]"},{"location":"core/csapp/ch2/#_20","title":"\u4e58\u4ee5\u200b\u5e38\u6570","text":"<p>\u200b\u6574\u6570\u200b\u4e58\u6cd5\u200b\u8fd0\u7b97\u200b\u5728\u200b\u8bb8\u591a\u200b\u673a\u5668\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u7f13\u6162\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u91cd\u8981\u200b\u7684\u200b\u4f18\u5316\u200b\u4fbf\u662f\u200b\u4f7f\u7528\u200b\u79fb\u4f4d\u200b\u8fd0\u7b97\u200b\u548c\u200b\u52a0\u6cd5\u200b\u8fd0\u7b97\u200b\u6765\u200b\u4ee3\u66ff\u200b\u5b83\u200b\u3002\u200b\u6211\u4eec\u200b\u9996\u5148\u200b\u8003\u8651\u200b\u4e58\u4ee5\u200b 2 \u200b\u7684\u200b\u5e42\u200b\u7684\u200b\u60c5\u51b5\u200b\uff0c\u200b\u7136\u540e\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4efb\u610f\u200b\u5e38\u6570\u200b\u3002\u200b\u82e5\u200b\u5b58\u5728\u200b\u4f4d\u200b\u5411\u91cf\u200b \\([x_{w-1},x_{w-2},...,x_0]\\)\uff0c\\(x \\times 2^k\\) \u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u4e3a\u200b\u5728\u200b\u5176\u200b\u53f3\u7aef\u200b\u6dfb\u52a0\u200b \\(k\\) \u200b\u4e2a\u200b 0\uff0c\u200b\u5373\u200b \\([x_{w-1},x_{w-2},...,x_0,0,...,0]\\)\u3002\u200b\u56e0\u6b64\u200b\u5728\u200b C \u200b\u4e2d\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u6574\u6570\u200b \\(x\\) \uff08\u200b\u65e0\u8bba\u662f\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u8fd8\u662f\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\uff09\u200b\u548c\u200b \u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b \\(k\\)\uff0c\\(x \\times 2^k\\) \u200b\u5c31\u200b\u7b49\u4e8e\u200b \\(x&lt;&lt;k\\)\u3002</p> <p>\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u5e38\u6570\u200b\u53ef\u4ee5\u200b\u62c6\u200b\u5206\u4e3a\u200b 2 \u200b\u7684\u200b\u5e42\u200b\u7684\u200b\u548c\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5de6\u79fb\u200b\u8fd0\u7b97\u200b\u548c\u200b\u52a0\u200b\uff08\u200b\u51cf\u200b\uff09\u200b\u6cd5\u200b\u8fd0\u7b97\u200b\u6765\u200b\u66ff\u6362\u200b\u4e0e\u200b\u76f8\u5173\u200b\u7684\u200b\u4e58\u6cd5\u200b\u8fd0\u7b97\u200b\u3002\u200b\u5982\u200b \\(14=2^3+2^2+2^1\\)\uff0c\u200b\u90a3\u4e48\u200b \\(x\\times14=(x&lt;&lt;3)+(x&lt;&lt;2)+(x&lt;&lt;1)\\)\u3002</p>"},{"location":"core/csapp/ch2/#2","title":"\u9664\u4ee5\u200b 2 \u200b\u7684\u200b\u5e42","text":"<p>\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u53f3\u79fb\u200b\u8fd0\u7b97\u200b\u6765\u200b\u4ee3\u66ff\u200b\u9664\u6cd5\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u903b\u8f91\u200b\u53f3\u79fb\u200b\u548c\u200b\u7b97\u672f\u200b\u53f3\u79fb\u200b\u5206\u522b\u200b\u9002\u7528\u200b\u4e8e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u548c\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u3002\u200b\u7531\u4e8e\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u6574\u6570\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f88\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u820d\u5165\u200b\uff08Round\uff09\u3002\u200b\u6211\u4eec\u200b\u5b9a\u4e49\u200b \\(\u230a \u230b\\) \u200b\u4e3a\u200b\u5411\u4e0b\u200b\u53d6\u6574\u200b\uff0c\\(\u2308 \u2309\\) \u200b\u4e3a\u200b\u5411\u4e0a\u200b\u53d6\u6574\u200b\u3002\u200b\u5982\u200b \\(\u230a3.14\u230b=3\\)\uff0c\\(\u230a-3.14\u230b=-4\\)\uff0c\u200b\u800c\u200b \\(\u23083.14\u2309=4\\)\uff0c\\(\u2308-3.14\u2309=-3\\)\u3002</p> <p>\u200b\u5728\u200b C \u200b\u4e2d\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b \\(x, k\\)\uff0c \\(x&gt;&gt;k=\u230ax/2^k\u230b\\)\uff1b\u200b\u5bf9\u4e8e\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b \\(x\\) \u200b\u548c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b \\(k\\)\uff0c\u200b\u5219\u200b\u6709\u200b \\(x&gt;&gt;k=\u230ax/2^k\u230b\\)\u3002\u200b\u524d\u8005\u200b\u4e3a\u200b\u903b\u8f91\u200b\u53f3\u79fb\u200b\uff0c\u200b\u540e\u8005\u200b\u4e3a\u200b\u7b97\u672f\u200b\u53f3\u79fb\u200b\u3002</p> <p>\u200b\u8003\u8651\u200b\u5230\u200b\u82e5\u200b \\(x&lt;0\\)\uff0c\\(x/y\\) \u200b\u7684\u200b\u7ed3\u679c\u200b\u5e94\u4e3a\u200b \\(\u2308x/y\u2309\\)\uff0c\u200b\u800c\u200b\u975e\u200b \\(\u230ax/y\u230b\\)\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5229\u7528\u200b\u6027\u8d28\u200b\uff1a\\(\u2308x/y\u2309=\u230a(x+y-1)/y\u230b\\)\uff0c\u200b\u6765\u200b\u4fee\u6b63\u200b\u8fd9\u79cd\u200b\u4e0d\u200b\u5408\u9002\u200b\u7684\u200b\u820d\u5165\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5bf9\u4e8e\u200b \\(x&lt;0\\) \u200b\u7684\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u9664\u6cd5\u200b\uff0c\u200b\u5e94\u200b\u4f7f\u7528\u200b\uff1a\\((x+(1&lt;&lt;k)-1)&gt;&gt;k=\u2308x/2^k\u2309\\)\u3002\u200b\u7efc\u4e0a\u200b\uff0c\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u9664\u4ee5\u200b 2 \u200b\u7684\u200b\u5e42\u200b \\(x/2^k\\) \u200b\u53ef\u4ee5\u200b\u7528\u200b\u4e09\u5143\u200b\u8fd0\u7b97\u7b26\u200b\u8868\u793a\u200b\u4e3a\u200b\uff1a</p> <pre><code>(x&lt;0 ? x+(1&lt;&lt;k)-1 : x) &gt;&gt; k\n</code></pre> <p>\u200b\u4e0e\u200b\u4e58\u6cd5\u200b\u4e0d\u540c\u200b\uff0c\u200b\u9664\u6cd5\u200b\u65e0\u6cd5\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4efb\u610f\u200b\u5e38\u6570\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_21","title":"\u6d6e\u70b9","text":""},{"location":"core/csapp/ch2/#_22","title":"\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570","text":"<p>\u200b\u5341\u8fdb\u5236\u200b\u5c0f\u6570\u200b\u7684\u200b\u8868\u793a\u200b\u65b9\u6cd5\u200b\u4e3a\u200b \\(d_md_{m-1}...d_1d_0.d_{-1}d_{-2}...d_{-n}\\)\uff0c\u200b\u5176\u4e2d\u200b \\(d_i\\) \u200b\u4e3a\u200b 0\uff5e9 \u200b\u7684\u200b\u6574\u6570\u200b\u3002\u200b\u90a3\u4e48\u200b\u8be5\u6570\u200b\u7684\u200b\u5927\u5c0f\u200b\u4e3a\u200b\uff1a</p> \\[d=\\displaystyle\\sum_{i=-n}^{m}10^id_i\\] <p>\u200b\u5c0f\u6570\u70b9\u200b\u5de6\u8fb9\u200b\u7684\u200b\u6570\u200b\u7684\u200b\u6743\u503c\u200b\u4e3a\u200b 10 \u200b\u7684\u200b\u975e\u8d1f\u200b\u5e42\u200b\uff0c\u200b\u53f3\u8fb9\u200b\u7684\u200b\u5219\u200b\u4e3a\u200b 10 \u200b\u7684\u200b\u8d1f\u5e42\u200b\u3002\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5f97\u51fa\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u200b\u7684\u200b\u8868\u793a\u200b\u65b9\u6cd5\u200b\u3002\\(b_i\\) \u200b\u4e3a\u200b 0 \u200b\u6216\u200b 1\uff0c\u200b\u5219\u200b\u4e8c\u8fdb\u5236\u200b\u6570\u200b \\(b_mb_{m-1}...b_1b_0.b_{-1}b_{-2}...b{-n}\\) \u200b\u7684\u200b\u503c\u200b\u4e3a\u200b\uff1a</p> \\[b=\\displaystyle\\sum_{i=-n}^{m}2^ib_i\\] <p>\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u70b9\u200b\u5411\u200b\u5de6\u200b\u79fb\u52a8\u200b\u4e00\u4f4d\u200b\uff0c\u200b\u76f8\u5f53\u4e8e\u200b\u6570\u5b57\u200b\u9664\u4ee5\u200b 2\u3002\u200b\u5411\u200b\u53f3\u200b\u79fb\u52a8\u200b\u4e00\u4f4d\u200b\uff0c\u200b\u5219\u200b\u76f8\u5f53\u4e8e\u200b\u6570\u5b57\u200b\u4e58\u4ee5\u200b 2\u3002\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u53ea\u80fd\u200b\u8868\u793a\u200b\u53ef\u200b\u8f6c\u5316\u200b\u4e3a\u200b \\(x \\times 2^y\\) \u200b\u5f62\u5f0f\u200b\u7684\u200b\u6570\u200b\uff0c\u200b\u65e0\u6cd5\u200b\u7cbe\u786e\u200b\u8868\u793a\u200b\u5982\u200b \\(\\frac{1}{3}\\)\u3001\\(\\frac{5}{7}\\) \u200b\u8fd9\u6837\u200b\u7684\u200b\u6570\u200b\u3002</p>"},{"location":"core/csapp/ch2/#ieee","title":"IEEE \u200b\u6d6e\u70b9\u6570\u200b\u8868\u793a","text":"<p>\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u200b\u7684\u200b\u8868\u793a\u200b\u65b9\u6cd5\u200b\u96be\u4ee5\u200b\u8868\u793a\u200b\u5f88\u5927\u200b\u7684\u200b\u6570\u200b\uff0c\u200b\u6211\u4eec\u200b\u66f4\u200b\u5e0c\u671b\u200b\u901a\u8fc7\u200b\u7ed9\u5b9a\u200b \\(x, y\\) \u200b\u7684\u200b\u503c\u6765\u200b\u8868\u793a\u200b\u5f62\u200b\u5982\u200b \\(x \\times 2^y\\) \u200b\u7684\u200b\u6570\u200b\u3002IEEE \u200b\u6d6e\u70b9\u6570\u200b\u6807\u51c6\u200b\u4f7f\u7528\u200b \\(V=(-1)^s\\times M \\times 2^E\\) \u200b\u7684\u200b\u5f62\u5f0f\u200b\u6765\u200b\u8868\u793a\u200b\u5c0f\u6570\u200b\uff1a</p> <ul> <li>\u200b\u7b26\u53f7\u200b \\(s\\)\uff1a\u200b\u4e3a\u200b 1 \u200b\u4ee3\u8868\u200b\u8d1f\u503c\u200b\uff0c\u200b\u4e3a\u200b 0 \u200b\u4ee3\u8868\u200b\u6b63\u503c\u200b\uff1b</li> <li>\u200b\u6709\u6548\u200b\u6570\u200b \\(M\\)\uff1a\u200b\u4e00\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u200b\uff0c\u200b\u8303\u56f4\u200b\u5728\u200b 1 \u200b\u5230\u200b \\(2-\\varepsilon\\) \u200b\u6216\u200b 0 \u200b\u5230\u200b \\(1-\\varepsilon\\) \u200b\u4e4b\u95f4\u200b\uff1b</li> <li>\u200b\u6307\u6570\u200b \\(E\\)\uff1a2 \u200b\u7684\u200b\u5e42\u6307\u6570\u200b\uff0c\u200b\u6709\u200b\u53ef\u80fd\u200b\u662f\u200b\u8d1f\u6570\u200b\u3002</li> </ul> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u8fbe\u200b\u5206\u4e3a\u200b\u4e86\u200b\u4e09\u4e2a\u200b\u90e8\u5206\u200b\uff1a</p> <ul> <li>\u200b\u4e00\u4e2a\u200b\u7b26\u53f7\u200b\u4f4d\u200b \\(s\\);</li> <li>\\(k\\) \u200b\u4f4d\u200b\u7684\u200b\u6307\u6570\u200b\u57df\u200b \\(exp=e_{k-1}...e_1e_0\\) \u200b\u7f16\u7801\u200b\u6307\u6570\u200b \\(E\\)\uff1b</li> <li>\\(n\\) \u200b\u4f4d\u200b\u7684\u200b\u5c0f\u6570\u200b\u57df\u200b \\(frac=f_{n-1}...f_1f_0\\) \u200b\u7f16\u7801\u200b\u6709\u6548\u200b\u6570\u200b \\(M\\)\u3002</li> </ul> <p>\u200b\u5bf9\u4e8e\u200b C \u200b\u4e2d\u200b\u7684\u200b<code>float</code>\u200b\u7c7b\u578b\u200b\uff0c\\(s=1, k=8, n=23\\)\u3002\u200b\u800c\u200b\u5bf9\u4e8e\u200b<code>double</code>\u200b\u7c7b\u578b\u200b\uff0c\\(s=1, k=11, n=52\\)\u3002IEEE \u200b\u6d6e\u70b9\u6570\u200b\u8868\u793a\u6cd5\u200b\u6709\u200b\u4e09\u79cd\u200b\u60c5\u51b5\u200b\uff0c\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u7b2c\u4e00\u79cd\u200b\u60c5\u51b5\u200b\u662f\u200b\u6700\u200b\u5e38\u89c1\u200b\u7684\u200b\uff0c\u200b\u5373\u200b\u6307\u6570\u200b\u57df\u200b\u4e0d\u200b\u5168\u4e3a\u200b 0\uff0c\u200b\u4e5f\u200b\u4e0d\u200b\u5168\u4e3a\u200b 1\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u6307\u6570\u200b\u57df\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b \\(E=e-Bias\\)\uff0c\u200b\u5176\u4e2d\u200b \\(e\\) \u200b\u662f\u200b\u4e00\u4e2a\u200b\u4f4d\u7ea7\u200b\u8868\u8fbe\u200b\u4e3a\u200b \\(e_{k-1}...e_1e_0\\) \u200b\u7684\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\uff0c\\(Bias\\) \u200b\u5219\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7b49\u4e8e\u200b \\(2^{k-1}-1\\) \u200b\u7684\u200b\u5e38\u6570\u200b\u3002\u200b\u5c0f\u6570\u200b\u57df\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b \\(M=1+f\\)\uff0c\u200b\u5176\u4e2d\u200b\uff0c\\(f\\) \u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u200b \\(0.f_{n-1}...f_1f_0\\)\u3002</p> <p>\u200b\u7b2c\u4e8c\u5f20\u200b\u60c5\u51b5\u200b\u662f\u200b\u6307\u6570\u200b\u57df\u200b\u5168\u4e3a\u200b 0\uff0c\u200b\u8fd9\u6837\u200b\u6240\u200b\u8868\u793a\u200b\u7684\u200b\u6570\u200b\u5c31\u200b\u662f\u975e\u200b\u6807\u51c6\u5316\u200b\u5f62\u5f0f\u200b\u7684\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\\(E=1-Bias, M=f\\)\u3002\u200b\u975e\u200b\u6807\u51c6\u5316\u200b\u6570\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u7b2c\u4e00\u79cd\u200b\u60c5\u51b5\u200b\u65e0\u6cd5\u200b\u8868\u793a\u200b\u7684\u200b 0 \u200b\u4ee5\u53ca\u200b\u975e\u5e38\u200b\u63a5\u8fd1\u200b 0 \u200b\u7684\u200b\u6570\u5b57\u200b\u3002</p> <p>\u200b\u7b2c\u4e09\u79cd\u200b\u60c5\u51b5\u200b\u662f\u200b\u6307\u6570\u200b\u57df\u200b\u5168\u4e3a\u200b 1 \u200b\u65f6\u200b\u51fa\u73b0\u200b\u7684\u200b\u3002\u200b\u82e5\u200b\u5c0f\u6570\u200b\u57df\u200b\u5168\u4e3a\u200b 0\uff0c\u200b\u5f97\u5230\u200b\u7684\u200b\u503c\u200b\u5219\u200b\u4e3a\u200b \\(\\pm \\infty\\)\u3002\u200b\u82e5\u200b\u5c0f\u6570\u200b\u57df\u200b\u4e0d\u200b\u5168\u4e3a\u200b 0\uff0c\u200b\u5219\u200b\u7ed3\u679c\u200b\u4e3a\u200b NaN\uff0c\u200b\u5373\u200b\u4e0d\u662f\u200b\u4e00\u4e2a\u200b\u6570\u5b57\u200b\u3002\u200b\u6bd4\u5982\u200b\u8ba1\u7b97\u200b \\(\\infty -\\infty\\) \u200b\u548c\u200b \\(\\sqrt{-1}\\)\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u5f97\u5230\u200b\u8fd9\u6837\u200b\u7684\u200b\u7ed3\u679c\u200b\u3002</p> <p>\u200b\u4ee5\u200b 8 \u200b\u4f4d\u200b\u6d6e\u70b9\u6570\u200b\u4e3a\u4f8b\u200b\uff0c\\(s=1, k=4, n=3\\)\uff0c\u200b\u6b64\u65f6\u200b\u504f\u79fb\u91cf\u200b \\(Bias=2^{4-1}-1=7\\)\u3002\u200b\u6700\u9760\u8fd1\u200b 0 \u200b\u7684\u200b\u662f\u975e\u200b\u6807\u51c6\u5316\u200b\u6570\u200b\uff0c\\(E=1-Bias=-6\\)\uff0c\\(2^E=\\frac{1}{64}\\)\uff0c\\(M=f=0,\\frac{1}{8},...,\\frac{7}{8}\\)\uff0c\u200b\u56e0\u6b64\u200b\u6d6e\u70b9\u6570\u200b \\(V\\) \u200b\u7684\u200b\u8303\u56f4\u200b\u5c31\u662f\u200b 0 \uff5e\\(\\frac{7}{8\\times64}=\\frac{7}{512}\\)\u3002\u200b\u800c\u200b\u5bf9\u4e8e\u200b\u6700\u5c0f\u200b\u7684\u200b\u6807\u51c6\u200b\u6570\u200b\u6765\u8bf4\u200b\uff0c\u200b\u6307\u6570\u200b\u57df\u200b\u4e3a\u200b [0001]\uff0c\u200b\u56e0\u6b64\u200b \\(E=e-Bias=-6\\)\uff0c\u200b\u5c0f\u6570\u200b\u57df\u200b \\(M=1+f=1,\\frac{9}{8},...\\frac{15}{8}\\)\uff0c\u200b\u6d6e\u70b9\u6570\u200b \\(V\\) \u200b\u7684\u200b\u8303\u56f4\u200b\u4e3a\u200b \\(\\frac{8}{512}=\\frac{1}{64}\\) ~ \\(\\frac{15}{512}\\)\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u89c2\u5bdf\u200b\u5230\u200b\u6700\u5927\u200b\u975e\u6807\u51c6\u200b\u6570\u200b\u548c\u200b\u6700\u5c0f\u200b\u6807\u51c6\u200b\u6570\u200b\u5206\u522b\u200b\u4e3a\u200b \\(\\frac{7}{512}\\) \u200b\u548c\u200b \\(\\frac{8}{512}\\)\uff0c\u200b\u8fd9\u79cd\u200b\u5e73\u6ed1\u200b\u7684\u200b\u8fc7\u6e21\u200b\u5f97\u76ca\u4e8e\u200b\u6211\u4eec\u200b\u5c06\u200b\u975e\u6807\u51c6\u200b\u6570\u200b\u7684\u200b \\(E\\) \u200b\u4f7f\u7528\u200b \\(1-Bias\\) \u200b\u6765\u200b\u8ba1\u7b97\u200b\uff0c\u200b\u800c\u200b\u975e\u200b \\(-Bias\\)\u3002</p> <p>\u200b\u5728\u200b\u8fd9\u79cd\u200b\u6761\u4ef6\u200b\u4e0b\u200b\uff0c\u200b\u5f53\u200b\u6307\u6570\u200b\u57df\u200b\u4e3a\u200b [1110]\uff0c\\(E=e-Bias=7, 2^E=128\\)\uff0c\u200b\u5c0f\u6570\u200b\u57df\u200b \\(M=1+0.111_2=\\frac{15}{8}\\) \u200b\u65f6\u200b\uff0c\\(V\\) \u200b\u53d6\u200b\u5230\u200b\u6700\u5927\u503c\u200b 240\uff0c\u200b\u8d85\u51fa\u200b\u8fd9\u4e2a\u200b\u503c\u200b\u5c31\u200b\u4f1a\u200b\u6ea2\u51fa\u200b\u5230\u200b \\(+\\infty\\)\u3002\u200b\u503c\u5f97\u4e00\u63d0\u7684\u662f\u200b\uff0cIEEE \u200b\u6d6e\u70b9\u6570\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6574\u6570\u200b\u6392\u5e8f\u200b\u51fd\u6570\u200b\u6765\u200b\u8fdb\u884c\u200b\u6392\u5e8f\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_23","title":"\u820d\u5165","text":"<p>\u200b\u5bf9\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u8868\u793a\u200b\u9650\u5236\u200b\u4e86\u200b\u5176\u200b\u8303\u56f4\u200b\u548c\u200b\u7cbe\u5ea6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6d6e\u70b9\u200b\u8ba1\u7b97\u200b\u53ea\u80fd\u200b\u8fd1\u4f3c\u200b\u5730\u200b\u8868\u793a\u200b\u5b9e\u6570\u200b\u8ba1\u7b97\u200b\u3002IEEE \u200b\u6d6e\u70b9\u6570\u200b\u683c\u5f0f\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u56db\u79cd\u200b\u4e0d\u540c\u200b\u7684\u200b\u820d\u5165\u200b\u65b9\u5f0f\u200b\uff1a</p> <p></p> <p>\u200b\u5411\u200b\u5076\u6570\u200b\u820d\u5165\u200b\uff08Round-to-even\uff09\uff0c\u200b\u4e5f\u200b\u79f0\u200b\u5411\u200b\u6700\u200b\u63a5\u8fd1\u200b\u7684\u200b\u6570\u200b\u820d\u5165\u200b\uff08Round-to-nearest\uff09\uff0c\u200b\u662f\u200b\u9ed8\u8ba4\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002\u200b\u5b83\u200b\u8bd5\u56fe\u200b\u627e\u5230\u200b\u4e00\u4e2a\u200b\u6700\u200b\u63a5\u8fd1\u200b\u7684\u200b\u5339\u914d\u200b\u503c\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u4e2d\u95f4\u200b\u503c\u200b\uff08\u200b\u5982\u8868\u4e2d\u200b\u7684\u200b 1.5\uff09\uff0c\u200b\u5219\u200b\u4f7f\u200b\u7ed3\u679c\u200b\u7684\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b\u5076\u6570\u200b\uff08\u200b\u820d\u5165\u200b\u4e3a\u200b 2\uff09\u3002\u200b\u5176\u4ed6\u200b\u4e09\u79cd\u200b\u65b9\u6cd5\u200b\u7528\u6765\u200b\u786e\u5b9a\u200b\u503c\u200b\u7684\u200b\u4e0a\u200b\u4e0b\u754c\u200b\u3002</p> <p>\u200b\u5373\u4f7f\u200b\u5728\u200b\u820d\u5165\u200b\u5230\u200b\u5c0f\u6570\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6574\u6570\u200b\u820d\u5165\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u7b80\u5355\u200b\u5730\u200b\u8003\u8651\u200b\u6700\u4f4e\u200b\u6709\u6548\u6570\u5b57\u200b\u662f\u200b\u5076\u6570\u200b\u8fd8\u662f\u200b\u5947\u6570\u200b\u3002\u200b\u5982\u200b\u4fdd\u7559\u200b\u4e24\u4f4d\u200b\u5c0f\u6570\u200b\uff0c\u200b\u6211\u4eec\u200b\u628a\u200b\u5341\u8fdb\u5236\u200b\u5c0f\u6570\u200b 1.234999 \u200b\u820d\u5165\u200b\u5230\u200b 1.23\uff0c\u200b\u628a\u200b 1.235001 \u200b\u820d\u5165\u200b\u5230\u200b 1.24\uff0c\u200b\u800c\u200b 1.235 \u200b\u548c\u200b 1.245 \u200b\u5747\u200b\u820d\u5165\u200b\u5230\u200b 1.24\u3002\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u540c\u6837\u200b\u53ef\u4ee5\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4e8c\u8fdb\u5236\u200b\u5c0f\u6570\u200b\uff0c\u200b\u6b64\u65f6\u200b\u5e94\u200b\u5c06\u200b\u4e2d\u95f4\u200b\u503c\u200b\u820d\u5165\u200b\u5230\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b\u4f4d\u200b\u7b49\u4e8e\u200b 0 \u200b\u7684\u200b\u6570\u200b\u3002</p>"},{"location":"core/csapp/ch2/#_24","title":"\u6d6e\u70b9\u8fd0\u7b97","text":"<p>\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u52a0\u6cd5\u200b\u548c\u200b\u4e58\u6cd5\u200b\u662f\u200b\u5b9e\u9645\u200b\u8fd0\u7b97\u200b\u540e\u200b\u8fdb\u884c\u200b\u820d\u5165\u200b\u540e\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u5373\u200b\u5bf9\u4e8e\u200b\u5b9e\u6570\u200b \\(x, y\\)\uff0c\u200b\u4ee5\u53ca\u200b\u8fd0\u7b97\u200b \\(\\odot\\)\uff0c\u200b\u7ed3\u679c\u200b\u4e3a\u200b \\(Round(x\\odot y)\\)\u3002IEEE \u200b\u6807\u51c6\u89c4\u5b9a\u200b\u4e86\u200b\u6d6e\u70b9\u6570\u200b\u8fd0\u7b97\u200b\u7684\u200b\u884c\u4e3a\u200b\uff0c\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u5b83\u200b\u4e0d\u200b\u4f9d\u8d56\u4e8e\u200b\u4efb\u4f55\u200b\u5177\u4f53\u200b\u7684\u200b\u786c\u4ef6\u200b\u6216\u200b\u8f6f\u4ef6\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u53ef\u79fb\u690d\u6027\u200b\u3002</p> <p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\u6574\u6570\u200b\u7684\u200b\u52a0\u6cd5\u200b\u548c\u200b\u4e58\u6cd5\u200b\u5f62\u6210\u200b\u4e86\u200b\u963f\u8d1d\u5c14\u200b\u7fa4\u200b\uff0c\u200b\u800c\u200b\u5b9e\u6570\u200b\u4ea6\u200b\u5982\u6b64\u200b\uff0c\u200b\u4f46\u200b\u6d6e\u70b9\u6570\u200b\u8fd8\u8981\u200b\u8003\u8651\u200b\u820d\u5165\u200b\u5bf9\u200b\u5176\u200b\u7279\u6027\u200b\u7684\u200b\u5f71\u54cd\u200b\u3002\u200b\u6d6e\u70b9\u6570\u200b \\(\\infty\\) \u200b\u548c\u200b NaN \u200b\u6ca1\u6709\u200b\u9006\u5143\u200b\uff0c\u200b\u52a0\u6cd5\u200b\u4e5f\u200b\u53ea\u200b\u6ee1\u8db3\u200b\u4ea4\u6362\u5f8b\u200b\u4f46\u200b\u4e0d\u200b\u6ee1\u8db3\u200b\u7ed3\u5408\u5f8b\u200b\u3002\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c\u200b\u6d6e\u70b9\u6570\u200b\u4e58\u6cd5\u200b\u53ea\u200b\u6ee1\u8db3\u200b\u4ea4\u6362\u5f8b\u200b\uff0c\u200b\u800c\u200b\u4e0d\u200b\u6ee1\u8db3\u200b\u7ed3\u5408\u5f8b\u200b\u548c\u200b\u5206\u914d\u5f8b\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u7279\u6027\u200b\u7684\u200b\u7f3a\u5c11\u200b\u5bf9\u200b\u7a0b\u5e8f\u5458\u200b\u6709\u7740\u200b\u975e\u5e38\u200b\u91cd\u8981\u200b\u7684\u200b\u5f71\u54cd\u200b\uff0c\u200b\u5982\u200b\u793a\u4f8b\u200b\u7684\u200b\u7b80\u5355\u200b\u7a0b\u5e8f\u200b\uff1a</p> <pre><code>x = a + b + c;\ny = b + c + d;\n</code></pre> <p>\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u751f\u6210\u200b\u4e0b\u5217\u200b\u4ee3\u7801\u200b\u4ee5\u200b\u7701\u53bb\u200b\u4e00\u6b21\u200b\u6d6e\u70b9\u200b\u52a0\u6cd5\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u4ece\u800c\u200b\u63d0\u5347\u200b\u6548\u7387\u200b\uff1a</p> <pre><code>t = b + c;\nx = t + a;\ny = t + d;\n</code></pre> <p>\u200b\u7531\u4e8e\u200b\u4f7f\u7528\u200b\u4e86\u200b\u52a0\u6cd5\u200b\u7ed3\u5408\u5f8b\u200b\uff0c\u200b\u8ba1\u7b97\u7ed3\u679c\u200b\u53ef\u80fd\u200b\u4e0e\u200b\u9884\u671f\u200b\u4e0d\u540c\u200b\u3002\u200b\u56e0\u6b64\u200b\u5927\u591a\u6570\u200b\u7f16\u8bd1\u5668\u200b\u5bf9\u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\u7684\u200b\u4f18\u5316\u200b\u90fd\u200b\u8f83\u4e3a\u200b\u4fdd\u5b88\u200b\uff0c\u200b\u4ee5\u514d\u200b\u4ea7\u751f\u200b\u9519\u8bef\u200b\u7684\u200b\u7ed3\u679c\u200b\u3002</p>"},{"location":"core/csapp/ch3/","title":"\u7a0b\u5e8f\u200b\u7684\u200b\u673a\u5668\u200b\u7ea7\u200b\u8868\u793a","text":"<p>\u200b\u5728\u200b\u4f7f\u7528\u200b\u9ad8\u7ea7\u200b\u8bed\u8a00\u200b\uff0c\u200b\u5982\u200b C\u3001Java \u200b\u7f16\u7a0b\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u65e0\u6cd5\u200b\u4e86\u89e3\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u673a\u5668\u200b\u7ea7\u522b\u200b\u7684\u200b\u5b9e\u73b0\u200b\u3002\u200b\u800c\u200b\u4f7f\u7528\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u7f16\u5199\u7a0b\u5e8f\u200b\u65f6\u200b\uff0c\u200b\u7a0b\u5e8f\u5458\u200b\u5219\u200b\u53ea\u80fd\u200b\u5f15\u7528\u200b\u4f4e\u7ea7\u200b\u6307\u4ee4\u200b\u3002\u200b\u7531\u200b\u9ad8\u7ea7\u200b\u8bed\u8a00\u200b\u7f16\u5199\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u591a\u79cd\u4e0d\u540c\u200b\u7684\u200b\u673a\u5668\u200b\u4e0a\u200b\u7f16\u8bd1\u200b\u8fd0\u884c\u200b\uff0c\u200b\u800c\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u5219\u200b\u4e0e\u200b\u673a\u5668\u200b\u7279\u6027\u200b\u9ad8\u5ea6\u200b\u76f8\u5173\u200b\u3002</p> <p>\u200b\u5c3d\u7ba1\u200b\u7f16\u8bd1\u5668\u200b\u5b8c\u6210\u200b\u4e86\u200b\u751f\u6210\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4f46\u200b\u9605\u8bfb\u200b\u548c\u200b\u7406\u89e3\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u5bf9\u4e8e\u200b\u7a0b\u5e8f\u5458\u200b\u6765\u8bf4\u200b\u4ecd\u200b\u662f\u200b\u4e00\u9879\u200b\u91cd\u8981\u200b\u7684\u200b\u6280\u80fd\u200b\uff1a</p> <p>Those who say \"I understand the general principles, I don't want to bother learning the details\" are deluding themselves.</p>"},{"location":"core/csapp/ch3/#intel","title":"Intel \u200b\u5904\u7406\u5668\u200b\u5386\u53f2","text":""},{"location":"core/csapp/ch3/#_2","title":"\u7a0b\u5e8f\u200b\u7f16\u7801","text":""},{"location":"core/csapp/ch3/#_3","title":"\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801","text":"<p>\u200b\u673a\u5668\u200b\u7ea7\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u683c\u5f0f\u200b\u548c\u200b\u884c\u4e3a\u200b\u662f\u200b\u7531\u200b\u6307\u4ee4\u96c6\u200b\u67b6\u6784\u200b\uff08Instruction Set Architecture\uff0cISA\uff09\u200b\u5b9a\u4e49\u200b\u7684\u200b\uff0c\u200b\u5b83\u200b\u5305\u62ec\u200b\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u3001\u200b\u6307\u4ee4\u200b\u683c\u5f0f\u200b\u4ee5\u53ca\u200b\u6bcf\u6761\u200b\u6307\u4ee4\u200b\u5bf9\u200b\u72b6\u6001\u200b\u7684\u200b\u5f71\u54cd\u200b\u3002\u200b\u5927\u591a\u6570\u200b ISA\uff0c\u200b\u5305\u62ec\u200b x86-64\uff0c\u200b\u90fd\u200b\u5c06\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u884c\u4e3a\u200b\u63cf\u8ff0\u200b\u4e3a\u200b\u6bcf\u6761\u200b\u6307\u4ee4\u200b\u6309\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\uff0c\u200b\u4e14\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5728\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5f00\u59cb\u200b\u4e4b\u524d\u200b\u5b8c\u6210\u200b\u3002\u200b\u867d\u7136\u200b\u5904\u7406\u5668\u200b\u786c\u4ef6\u200b\u53ef\u4ee5\u200b\u540c\u65f6\u200b\u6267\u884c\u200b\u8bb8\u591a\u200b\u6307\u4ee4\u200b\uff0c\u200b\u4f46\u200b\u5b83\u200b\u91c7\u7528\u200b\u4e86\u200b\u5b89\u5168\u63aa\u65bd\u200b\u4ee5\u200b\u786e\u4fdd\u200b\u5176\u200b\u6574\u4f53\u200b\u884c\u4e3a\u200b\u4e0e\u200b ISA \u200b\u89c4\u5b9a\u200b\u7684\u200b\u64cd\u4f5c\u200b\u987a\u5e8f\u200b\u76f8\u5339\u914d\u200b\u3002</p> <p>\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u975e\u5e38\u200b\u63a5\u8fd1\u200b\u4e8c\u8fdb\u5236\u200b\u683c\u5f0f\u200b\u7684\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\uff0c\u200b\u4f46\u200b\u5176\u200b\u6587\u672c\u683c\u5f0f\u200b\u66f4\u5177\u200b\u53ef\u8bfb\u6027\u200b\u3002\u200b\u4e00\u4e9b\u200b\u5bf9\u200b\u7a0b\u5e8f\u5458\u200b\u9690\u85cf\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u5728\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u662f\u200b\u53ef\u89c1\u200b\u7684\u200b\uff1a</p> <ul> <li>\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\uff08PC\uff09\uff1a\u200b\u5728\u200b x86-64 \u200b\u4e2d\u200b\u88ab\u200b\u79f0\u4e3a\u200b %rip\uff0c\u200b\u4ee3\u8868\u200b\u5373\u5c06\u200b\u6267\u884c\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5728\u200b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u6574\u6570\u200b\u5bc4\u5b58\u5668\u200b\u6587\u4ef6\u200b\uff08Register File\uff09\uff1a\u200b\u6700\u200b\u591a\u200b\u53ef\u4ee5\u200b\u5b58\u50a8\u200b 64 \u200b\u4f4d\u200b\u7684\u200b\u5730\u5740\u200b\uff08\u200b\u4e0e\u200b C \u200b\u4e2d\u200b\u7684\u200b\u6307\u9488\u200b\u5bf9\u5e94\u200b\uff09\u200b\u6216\u200b\u6574\u6570\u200b\u6570\u636e\u200b\u3002\u200b\u4e00\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u7528\u4e8e\u200b\u8bb0\u5f55\u200b\u7a0b\u5e8f\u200b\u72b6\u6001\u200b\u7684\u200b\u5173\u952e\u200b\u90e8\u5206\u200b\uff0c\u200b\u800c\u200b\u5176\u4ed6\u200b\u5bc4\u5b58\u5668\u200b\u5219\u200b\u7528\u4e8e\u200b\u4fdd\u5b58\u200b\u4e34\u65f6\u200b\u6570\u636e\u200b\uff0c\u200b\u4f8b\u5982\u200b \u200b\u8fc7\u7a0b\u200b \u200b\u4e2d\u200b\u7684\u200b\u53c2\u6570\u200b\u548c\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u4ee5\u53ca\u200b\u51fd\u6570\u200b\u8fd4\u56de\u503c\u200b\uff1b</li> <li>\u200b\u6761\u4ef6\u200b\u7801\u200b\u5bc4\u5b58\u5668\u200b\uff08Condition Code Registers\uff09\uff1a\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u6700\u8fd1\u200b\u4e00\u6b21\u200b\u6267\u884c\u200b\u7684\u200b\u7b97\u672f\u200b\u6216\u200b\u903b\u8f91\u200b\u6307\u4ee4\u200b\u7684\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\uff0c\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u63a7\u5236\u6d41\u200b\u6216\u200b\u6570\u636e\u6d41\u200b\u4e2d\u200b\u6761\u4ef6\u200b\u7684\u200b\u6539\u53d8\u200b\uff0c\u200b\u4f8b\u5982\u200b If \u200b\u8bed\u53e5\u200b\u548c\u200b While \u200b\u8bed\u53e5\u200b\uff1b</li> <li>\u200b\u5411\u91cf\u200b\u5bc4\u5b58\u5668\u200b\uff08Vector Registers\uff09\uff1a\u200b\u6bcf\u4e2a\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u4fdd\u5b58\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u6574\u6570\u200b\u6216\u200b\u6d6e\u70b9\u200b\u6570\u503c\u200b\u3002</li> </ul> <p>\u200b\u867d\u7136\u200b C \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u6a21\u578b\u200b\uff0c\u200b\u8ba9\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u58f0\u660e\u200b\u548c\u200b\u5206\u914d\u200b\u4e0d\u540c\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u5bf9\u8c61\u200b\u3002\u200b\u4f46\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u53ea\u4f1a\u200b\u7b80\u5355\u200b\u5730\u200b\u5c06\u200b\u5185\u5b58\u200b\u89c6\u4e3a\u200b\u4e00\u4e2a\u200b\u6309\u200b\u5b57\u8282\u200b\u5bfb\u5740\u200b\u7684\u200b\u6570\u7ec4\u200b\uff0c\u200b\u56e0\u6b64\u200b C \u200b\u4e2d\u200b\u7684\u200b\u805a\u5408\u200b\u6570\u636e\u7c7b\u578b\u200b\uff08\u200b\u5982\u200b\u6570\u7ec4\u200b\u548c\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff09\u200b\u5728\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u4f1a\u200b\u8868\u793a\u200b\u4e3a\u200b\u8fde\u7eed\u200b\u7684\u200b\u5b57\u8282\u200b\u96c6\u5408\u200b\u3002\u200b\u751a\u81f3\u200b\u5bf9\u4e8e\u200b\u6807\u91cf\u200b\u6570\u636e\u7c7b\u578b\u200b\uff08\u200b\u5982\u200b<code>int</code>\u3001<code>char</code>\u3001<code>float</code>\u200b\u548c\u200b<code>bool</code>\u200b\u7b49\u200b\uff09\uff0c\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u533a\u5206\u200b\u6709\u200b\u7b26\u53f7\u200b\u548c\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6574\u6570\u200b\u3001\u200b\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u6307\u9488\u200b\u4ee5\u53ca\u200b\u6307\u9488\u200b\u548c\u200b\u6574\u6570\u200b\u3002</p> <p>\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u53ef\u200b\u6267\u884c\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u3001\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u4e00\u4e9b\u200b\u4fe1\u606f\u200b\u3001\u200b\u7528\u4e8e\u200b\u7ba1\u7406\u200b\u8fc7\u7a0b\u200b\u8c03\u7528\u200b\u548c\u200b\u8fd4\u56de\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4ee5\u53ca\u200b\u7528\u6237\u200b\u8bf7\u6c42\u200b\u7684\u200b\u5806\u200b\u5185\u5b58\u200b\uff08\u200b\u5982\u200b\u4f7f\u7528\u200b\u5e93\u51fd\u6570\u200b<code>malloc</code>\uff09\u200b\u5171\u540c\u200b\u6784\u6210\u200b\u4e86\u200b\u7a0b\u5e8f\u200b\u5185\u5b58\u200b\u3002\u200b\u5b83\u200b\u4f7f\u7528\u200b\u865a\u62df\u5730\u5740\u200b\u5bfb\u5740\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u53ea\u6709\u200b\u90e8\u5206\u200b\u865a\u62df\u5730\u5740\u200b\u7684\u200b\u8303\u56f4\u200b\u6709\u6548\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0cx86-64 \u200b\u673a\u5668\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u5fc5\u987b\u200b\u5c06\u200b\u524d\u200b 16 \u200b\u4f4d\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 0\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u6709\u6548\u200b\u8303\u56f4\u200b\u5305\u542b\u200b \\(2^{48}\\) \uff0864 TB\uff09\u200b\u5b57\u8282\u200b\u3002</p> <p>\u200b\u5355\u4e2a\u200b\u673a\u5668\u6307\u4ee4\u200b\u4ec5\u200b\u6267\u884c\u200b\u4e00\u4e9b\u200b\u57fa\u672c\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5982\u200b\u5c06\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u6570\u5b57\u200b\u76f8\u52a0\u200b\u3001\u200b\u5728\u200b\u5185\u5b58\u200b\u548c\u200b\u5bc4\u5b58\u5668\u200b\u4e4b\u95f4\u200b\u4f20\u8f93\u6570\u636e\u200b\u4ee5\u53ca\u200b\u6709\u200b\u6761\u4ef6\u200b\u5730\u200b\u8df3\u8f6c\u200b\u5230\u200b\u65b0\u200b\u7684\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b\u3002\u200b\u7f16\u8bd1\u5668\u200b\u5fc5\u987b\u200b\u751f\u6210\u200b\u8fd9\u6837\u200b\u7684\u200b\u6307\u4ee4\u200b\u5e8f\u5217\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7a0b\u5e8f\u7ed3\u6784\u200b\uff0c\u200b\u4f8b\u5982\u200b\u7b97\u672f\u200b\u8868\u8fbe\u5f0f\u200b\u6c42\u503c\u200b\u3001\u200b\u5faa\u73af\u200b\u6216\u200b\u8fc7\u7a0b\u200b\u8c03\u7528\u200b\u548c\u200b\u8fd4\u56de\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_4","title":"\u4ee3\u7801\u200b\u793a\u4f8b","text":"<p>\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u200b\u6587\u4ef6\u200b<code>mstore.c</code>\u200b\u4e2d\u200b\u5305\u542b\u200b\u5982\u4e0b\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>long mult2(long, long);\nvoid multstore(long x, long y, long *dest) {\n  long t = mult2(x, y);\n  *dest = t;\n}\n</code></pre> <p>\u200b\u4f7f\u7528\u200b<code>gcc -Og -S mstore.c</code>\u200b\u547d\u4ee4\u200b\u5373\u53ef\u200b\u751f\u6210\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u6587\u4ef6\u200b<code>mstore.s</code>\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b<code>-Og</code>\u200b\u4ee3\u8868\u200b\u5bf9\u200b\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u4f18\u5316\u200b\u3002\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u6709\u200b\u591a\u79cd\u200b\u58f0\u660e\u200b\uff0c\u200b\u5305\u62ec\u200b\uff1a</p> <p></p> <p>\u200b\u6bcf\u200b\u4e00\u884c\u200b\u7f29\u8fdb\u200b\u7684\u200b\u4ee3\u7801\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u7740\u200b\u4e00\u6761\u200b\u673a\u5668\u6307\u4ee4\u200b\uff0c\u200b\u56fe\u4e2d\u200b\u7684\u200b\u84dd\u8272\u200b\u6ce8\u89e3\u200b\u5219\u200b\u6807\u793a\u200b\u4e86\u200b\u6307\u4ee4\u200b\u7684\u200b\u4f5c\u7528\u200b\uff0c\u200b\u5982\u200b<code>pushq</code>\u200b\u4ee3\u8868\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b<code>%rbx</code>\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\u538b\u5165\u200b\u7a0b\u5e8f\u200b\u6808\u200b\u3002\u200b\u539f\u7a0b\u5e8f\u200b\u4e2d\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u540d\u79f0\u200b\u4ee5\u53ca\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u6240\u6709\u200b\u4fe1\u606f\u200b\u90fd\u200b\u5df2\u200b\u88ab\u200b\u5220\u9664\u200b\uff0c\u200b\u968f\u540e\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6267\u884c\u200b\u4e0b\u5217\u200b\u547d\u4ee4\u200b\uff1a</p> <pre><code>gcc -Og -c mstore.c\nobjdump -d mstore.o\n</code></pre> <p>\u200b\u7b2c\u4e00\u6761\u200b\u547d\u4ee4\u200b\u5c06\u200b\u751f\u6210\u200b\u4e8c\u8fdb\u5236\u200b\u683c\u5f0f\u200b\u7684\u200b\u76ee\u6807\u200b\u4ee3\u7801\u200b\u6587\u4ef6\u200b<code>mstore.o</code>\uff0c\u200b\u7b2c\u4e8c\u6761\u200b\u547d\u4ee4\u200b\u5219\u200b\u662f\u200b\u8fdb\u884c\u200b\u53cd\u6c47\u7f16\u200b\uff0c\u200b\u5373\u5c06\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e00\u79cd\u200b\u4e0e\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u683c\u5f0f\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u4ee3\u7801\u200b\u3002\u200b\u56fe\u4e2d\u200b\u7684\u200b\u884c\u53f7\u200b\u548c\u200b\u659c\u4f53\u200b\u6ce8\u91ca\u200b\u662f\u200b\u4e3a\u4e86\u200b\u65b9\u4fbf\u200b\u8bf4\u660e\u200b\u52a0\u5165\u200b\u7684\u200b\uff0c\u200b\u5de6\u4fa7\u200b\u6709\u200b 6 \u200b\u7ec4\u200b\u5341\u516d\u8fdb\u5236\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u90fd\u200b\u662f\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\uff0c\u200b\u53f3\u4fa7\u200b\u5219\u200b\u663e\u793a\u200b\u4e86\u200b\u7b49\u6548\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1a</p> <p></p> <ul> <li>x86-64 \u200b\u6307\u4ee4\u200b\u7684\u200b\u957f\u5ea6\u200b\u8303\u56f4\u200b\u4e3a\u200b 1 \u200b\u5230\u200b 15 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c\u200b\u5e38\u7528\u200b\u7684\u200b\u548c\u200b \u200b\u64cd\u4f5c\u6570\u200b \u200b\u8f83\u5c11\u200b\u7684\u200b\u6307\u4ee4\u200b\u6bd4\u4e0d\u592a\u200b\u5e38\u7528\u200b\u6216\u200b\u64cd\u4f5c\u6570\u200b\u8f83\u200b\u591a\u200b\u7684\u200b\u6307\u4ee4\u200b\u9700\u8981\u200b\u66f4\u5c11\u200b\u7684\u200b\u5b57\u8282\u6570\u200b\uff1b</li> <li>\u200b\u4ece\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\u5f00\u59cb\u200b\uff0c\u200b\u53cd\u200b\u6c47\u7f16\u7a0b\u5e8f\u200b\u5c06\u200b\u5b57\u8282\u200b\u552f\u4e00\u200b\u5730\u200b\u89e3\u7801\u200b\u4e3a\u200b\u673a\u5668\u6307\u4ee4\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u53ea\u6709\u200b\u6307\u4ee4\u200b<code>pushq %rbx</code>\u200b\u4ee5\u200b\u5b57\u8282\u200b\u503c\u200b 53 \u200b\u5f00\u5934\u200b\uff1b</li> <li>\u200b\u53cd\u200b\u6c47\u7f16\u7a0b\u5e8f\u200b\u53ea\u662f\u200b\u6839\u636e\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\u6765\u200b\u786e\u5b9a\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u8bbf\u95ee\u200b\u6e90\u4ee3\u7801\u200b\u6216\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1b</li> <li>\u200b\u53cd\u200b\u6c47\u7f16\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b\u7684\u200b\u6307\u4ee4\u200b\u547d\u540d\u200b\u89c4\u5219\u200b\u4e0e\u200b GCC \u200b\u751f\u6210\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7565\u6709\u4e0d\u540c\u200b\uff0c\u200b\u5982\u200b\u8bb8\u591a\u200b\u6307\u4ee4\u200b\u4e2d\u200b\u7684\u200b\u540e\u7f00\u200b<code>q</code>\u200b\u88ab\u200b\u7701\u7565\u200b\u4e86\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u540e\u7f00\u200b\u662f\u200b\u5c3a\u5bf8\u200b\u6307\u793a\u200b\u7b26\u200b\uff0c\u200b\u5728\u200b\u5927\u591a\u6570\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\u3002\u200b\u800c\u200b\u53cd\u200b\u6c47\u7f16\u5668\u200b\u5728\u200b<code>call</code>\u200b\u548c\u200b<code>ret</code>\u200b\u6307\u4ee4\u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u540e\u7f00\u200b<code>q</code>\uff0c\u200b\u5b83\u4eec\u200b\u540c\u6837\u200b\u662f\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\u7684\u200b\u3002</li> </ul> <p>\u200b\u60f3\u8981\u200b\u751f\u6210\u200b\u5b9e\u9645\u200b\u7684\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u8fd8\u200b\u9700\u8981\u200b\u5728\u200b\u4e00\u7ec4\u200b\u5305\u542b\u200b<code>main</code>\u200b\u51fd\u6570\u200b\u7684\u200b\u76ee\u6807\u200b\u4ee3\u7801\u200b\u6587\u4ef6\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u94fe\u63a5\u200b\u5668\u200b\uff08Linker\uff09\uff0c\u200b\u5047\u8bbe\u200b main.c \u200b\u6587\u4ef6\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>#include &lt;stdio.h&gt;\nvoid multstore(long, long, long *);\nint main() {\n  long d;\n  multstore(2, 3, &amp;d); \n  printf(\"2 * 3 --&gt; %ld\\n\", d); \n  return 0;\n}\nlong mult2(long a, long b) {\n  long s = a * b;\n  return s; \n}\n</code></pre> <p>\u200b\u90a3\u4e48\u200b\u901a\u8fc7\u200b<code>gcc -Og -o prog main.c mstore.c</code>\u200b\u547d\u4ee4\u200b\u751f\u6210\u200b\u7684\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b<code>prog</code>\u200b\u7684\u200b\u5927\u5c0f\u200b\u5c31\u200b\u8d85\u8fc7\u200b\u4e86\u200b<code>mstore.o</code>\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u8fd8\u200b\u5305\u542b\u200b\u4e86\u200b\u7528\u4e8e\u200b\u542f\u52a8\u200b\u548c\u200b\u7ec8\u6b62\u200b\u7a0b\u5e8f\u200b\u4ee5\u53ca\u200b\u4e0e\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4ea4\u4e92\u200b\u7684\u200b\u4ee3\u7801\u200b\u3002\u200b\u540c\u6837\u200b\u5bf9\u200b<code>prog</code>\u200b\u6587\u4ef6\u200b\u4f7f\u7528\u200b<code>objdump</code>\u200b\u547d\u4ee4\u200b\u8fdb\u884c\u200b\u53cd\u6c47\u7f16\u200b\uff0c\u200b\u5176\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u5305\u542b\u200b\u5982\u4e0b\u200b\u4ee3\u7801\u200b\uff1a</p> <p></p> <p>\u200b\u4e0e\u200b\u7b2c\u4e00\u6b21\u200b\u53cd\u6c47\u7f16\u200b\u7684\u200b\u7ed3\u679c\u200b\u76f8\u6bd4\u200b\uff0c\u200b\u533a\u522b\u200b\u4e3b\u8981\u200b\u5728\u200b\uff1a</p> <ul> <li>\u200b\u94fe\u63a5\u200b\u5668\u200b\u79fb\u52a8\u200b\u4e86\u200b\u4ee3\u7801\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u56e0\u6b64\u200b\u56fe\u4e2d\u200b\u5de6\u4fa7\u200b\u7684\u200b\u5730\u5740\u200b\u4e0d\u540c\u200b\uff1b</li> <li>\u200b\u94fe\u63a5\u200b\u5668\u200b\u7684\u200b\u4e00\u9879\u200b\u4efb\u52a1\u200b\u662f\u200b\u5c06\u200b\u51fd\u6570\u8c03\u7528\u200b\u4e0e\u5176\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u8fdb\u884c\u200b\u5339\u914d\u200b\u3002\u200b\u5728\u200b\u4e0a\u200b\u56fe\u200b\u7b2c\u200b 4 \u200b\u884c\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u586b\u5145\u200b\u4e86\u200b<code>callq</code>\u200b\u6307\u4ee4\u200b\u5728\u200b\u8c03\u7528\u51fd\u6570\u200b<code>mult2</code>\u200b\u65f6\u200b\u5e94\u8be5\u200b\u4f7f\u7528\u200b\u7684\u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u4e0a\u56fe\u200b\u7b2c\u200b 8\uff0c9 \u200b\u884c\u200b\u586b\u5145\u200b\u7684\u200b\u4ee3\u7801\u200b\u5bf9\u200b\u7ed3\u679c\u200b\u6ca1\u6709\u200b\u4efb\u4f55\u200b\u5f71\u54cd\u200b\uff0c<code>nop</code>\u200b\u610f\u200b\u4e3a\u200b\u201cNo Operation\u201d\u3002\u200b\u63d2\u5165\u200b\u5b83\u4eec\u200b\u662f\u200b\u4e3a\u4e86\u200b\u5c06\u200b\u51fd\u6570\u200b\u7684\u200b\u4ee3\u7801\u200b\u589e\u52a0\u200b\u5230\u200b 16 \u200b\u5b57\u8282\u200b\uff0c\u200b\u8fd9\u6837\u200b\u53ef\u4ee5\u200b\u66f4\u597d\u200b\u5730\u200b\u653e\u7f6e\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u4ee3\u7801\u200b\u5757\u200b\uff0c\u200b\u4ece\u800c\u200b\u63d0\u5347\u200b\u5b58\u50a8\u5668\u200b\u7684\u200b\u7cfb\u7edf\u200b\u6027\u80fd\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch3/#_5","title":"\u6570\u636e\u683c\u5f0f","text":"<p>Intel \u200b\u7528\u200b\u672f\u8bed\u200b\u201c\u200b\u5b57\u200b\u201d\uff08Word\uff09\u200b\u6765\u200b\u8868\u793a\u200b 16 \u200b\u4f4d\u200b\u6570\u636e\u7c7b\u578b\u200b\uff0c\u200b\u56e0\u6b64\u200b 32 \u200b\u4f4d\u6570\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u201c\u200b\u53cc\u5b57\u200b\u201d\uff08Double Words\uff09\uff0c64 \u200b\u4f4d\u6570\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u201c\u200b\u56db\u5b57\u200b\u201d\uff08Quad Words\uff09\u3002\u200b\u5728\u200b x86-64 \u200b\u673a\u5668\u200b\u4e0a\u200b C \u200b\u7684\u200b\u539f\u59cb\u6570\u636e\u200b\u7c7b\u578b\u200b\u5927\u5c0f\u200b\u5982\u4e0b\u200b\uff1a</p> C declaration Intel data type Assembly-code suffix Size(bytes) char Byte b 1 short Word w 2 int Double word l 4 long Quad word q 8 char * Quad word q 8 float Single precision s 4 double Double precision l 8 <p>\u200b\u5927\u591a\u6570\u200b\u7531\u200b GCC \u200b\u751f\u6210\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u8868\u793a\u200b\u64cd\u4f5c\u6570\u200b\u5927\u5c0f\u200b\u7684\u200b\u5355\u200b\u5b57\u7b26\u200b\u540e\u7f00\u200b\uff0c\u200b\u5982\u200b\u6570\u636e\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u6709\u200b\u56db\u79cd\u200b\u53d8\u4f53\u200b\uff1a<code>movb</code>\uff08\u200b\u79fb\u52a8\u200b\u5b57\u8282\u200b\uff09\u3001<code>movw</code>\uff08\u200b\u79fb\u52a8\u200b\u5b57\u200b\uff09\u3001<code>movl</code>\uff08\u200b\u79fb\u52a8\u200b\u53cc\u5b57\u200b\uff09\u200b\u548c\u200b<code>movq</code>\uff08\u200b\u79fb\u52a8\u200b\u56db\u5b57\u200b\uff09\u3002\u200b\u503c\u5f97\u4e00\u63d0\u200b\u662f\u200b\uff0c\u200b\u540e\u7f00\u200b\u201cl\u201d\u200b\u5373\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b 4 \u200b\u5b57\u8282\u200b\u6574\u6570\u200b\u53c8\u200b\u8868\u793a\u200b 8 \u200b\u5b57\u8282\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u6d6e\u70b9\u6570\u200b\u3002\u200b\u8fd9\u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u5f15\u8d77\u200b\u6b67\u4e49\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u6d89\u53ca\u200b\u5230\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u4ee3\u7801\u200b\u4f7f\u7528\u200b\u4e00\u7ec4\u200b\u4e0e\u200b\u6574\u6570\u200b\u5b8c\u5168\u200b\u4e0d\u540c\u200b\u7684\u200b\u6307\u4ee4\u200b\u548c\u200b\u5bc4\u5b58\u5668\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_6","title":"\u8bbf\u95ee\u4fe1\u606f","text":"<p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0cx86-64 \u200b\u673a\u5668\u200b\u7684\u200b CPU \u200b\u4e2d\u200b\u5305\u542b\u200b 16 \u200b\u4e2a\u200b\u901a\u7528\u200b\u7684\u200b\u6574\u6570\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5747\u200b\u53ef\u4ee5\u200b\u5b58\u50a8\u200b 64 \u200b\u4f4d\u200b\u7684\u200b\u6574\u6570\u200b\u6216\u200b\u6307\u9488\u200b\u6570\u636e\u200b\uff1a</p> <p></p> <p>\u200b\u56fe\u4e2d\u200b\u6240\u6709\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u540d\u79f0\u200b\u5747\u200b\u4ee5\u200b %r \u200b\u5f00\u5934\u200b\uff0c\u200b\u5b83\u4eec\u200b\u7684\u200b\u6f14\u53d8\u200b\u987a\u5e8f\u200b\u662f\u4ece\u200b\u53f3\u5f80\u200b\u5de6\u200b\u7684\u200b\u3002\u200b\u524d\u200b 8 \u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5373\u200b %ax \u200b\u5230\u200b %sp\uff0c\u200b\u662f\u200b\u6700\u521d\u200b\u7684\u200b 8086 \u200b\u673a\u5668\u200b\u4f7f\u7528\u200b\u7684\u200b 8 \u200b\u4e2a\u200b 16 \u200b\u4f4d\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u968f\u7740\u200b IA32 \u200b\u7684\u200b\u51fa\u73b0\u200b\uff0c\u200b\u5b83\u4eec\u200b\u88ab\u200b\u6269\u5c55\u200b\u4f4d\u200b 32 \u200b\u4f4d\u200b\uff0c\u200b\u5373\u200b %eax \u200b\u5230\u200b %esp\u3002\u200b\u76ee\u524d\u200b\u7684\u200b x86-64 \u200b\u673a\u5668\u200b\u5c06\u200b\u5176\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\u6269\u5c55\u200b\u4e3a\u200b 64 \u200b\u4f4d\u200b\uff0c\u200b\u5373\u200b %rax \u200b\u5230\u200b %rsp\u3002\u200b\u540c\u65f6\u200b\u8fd8\u200b\u65b0\u200b\u6dfb\u52a0\u200b\u4e86\u200b 8 \u200b\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5373\u200b %r8 \u200b\u5230\u200b %r15\u3002\u200b\u56fe\u4e2d\u200b\u53f3\u4fa7\u200b\u7684\u200b\u6ce8\u91ca\u200b\u8bf4\u660e\u200b\u4e86\u200b\u5404\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u5728\u200b\u5178\u578b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u626e\u6f14\u200b\u7684\u200b\u89d2\u8272\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6700\u200b\u72ec\u7279\u200b\u7684\u200b\u662f\u200b\u6808\u200b\u6307\u9488\u200b %rsp\uff0c\u200b\u5b83\u200b\u7528\u4e8e\u200b\u6307\u793a\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u7684\u200b\u7ed3\u675f\u200b\u4f4d\u7f6e\u200b\u3002</p> <p>\u200b\u6307\u4ee4\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b\u4f4e\u4f4d\u200b\u5b57\u8282\u200b\u4e2d\u200b\u7684\u200b\u4e0d\u540c\u200b\u5927\u5c0f\u200b\u7684\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u64cd\u4f5c\u200b\u3002\u200b\u5b57\u8282\u200b\u7ea7\u200b\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b\u5b57\u8282\u200b\uff0c16 \u200b\u4f4d\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b 2 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c32 \u200b\u4f4d\u64cd\u4f5c\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6700\u4f4e\u200b\u6709\u6548\u200b 4 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c64 \u200b\u4f4d\u64cd\u4f5c\u200b\u5219\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6574\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_7","title":"\u64cd\u4f5c\u6570","text":"<p>\u200b\u5927\u591a\u6570\u200b\u6307\u4ee4\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\uff08Operand\uff09\uff0c\u200b\u6307\u5b9a\u200b\u4e86\u200b\u6267\u884c\u200b\u64cd\u4f5c\u200b\u65f6\u200b\u4f7f\u7528\u200b\u7684\u200b\u6e90\u200b\u6570\u636e\u200b\u548c\u200b\u7ed3\u679c\u200b\u653e\u7f6e\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002x86-64 \u200b\u673a\u5668\u200b\u652f\u6301\u200b\u7684\u200b\u64cd\u4f5c\u6570\u200b\u683c\u5f0f\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u6e90\u200b\u6570\u636e\u200b\u65e2\u200b\u53ef\u4ee5\u200b\u4ee5\u200b\u5e38\u6570\u200b\u5f62\u5f0f\u200b\u7ed9\u51fa\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\uff0c\u200b\u7ed3\u679c\u200b\u5219\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u3002\u200b\u56e0\u6b64\u200b\u64cd\u4f5c\u6570\u200b\u6709\u200b\u4e09\u79cd\u200b\u53ef\u80fd\u200b\u7684\u200b\u7c7b\u578b\u200b\uff1a</p> <ul> <li>\u200b\u7acb\u5373\u200b\u6570\u200b\uff08Immediate\uff09\uff1a\u200b\u5373\u5e38\u200b\u6570\u503c\u200b\uff0c\u200b\u4e66\u5199\u200b\u65b9\u5f0f\u200b\u4e3a\u200b $ \u200b\u7b26\u53f7\u200b\u540e\u9762\u200b\u8ddf\u200b\u4e00\u4e2a\u200b\u6574\u6570\u200b\uff1b</li> <li>\u200b\u5bc4\u5b58\u5668\u200b\uff08Register\uff09\uff1a\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\u3002\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b \\(r_a\\) \u200b\u8868\u793a\u200b\u4efb\u610f\u200b\u5bc4\u5b58\u5668\u200b \\(a\\)\uff0c\u200b\u4f7f\u7528\u200b \\(R[r_a]\\) \u200b\u6765\u200b\u8868\u793a\u200b\u5b83\u200b\u7684\u200b\u503c\u200b\uff1b</li> <li>\u200b\u5185\u5b58\u200b\uff08Memory\uff09\u200b\u5f15\u7528\u200b\uff1a\u200b\u6839\u636e\u200b\u8ba1\u7b97\u200b\u51fa\u200b\u7684\u200b\u5730\u5740\u200b\uff08\u200b\u4e5f\u200b\u79f0\u200b\u6709\u6548\u200b\u5730\u5740\u200b\uff09\u200b\u6765\u200b\u8bbf\u95ee\u200b\u67d0\u4e2a\u200b\u5185\u5b58\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u4f7f\u7528\u200b \\(M_b[Addr]\\) \u200b\u8868\u793a\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u4ece\u200b\u5730\u5740\u200b \\(Addr\\) \u200b\u5f00\u59cb\u200b \\(b\\) \u200b\u5b57\u8282\u200b\u7684\u200b\u5f15\u7528\u200b\uff0c\u200b\u53f3\u4e0b\u89d2\u200b\u6807\u200b \\(b\\) \u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\u3002</li> </ul> <p>\u200b\u6700\u200b\u901a\u7528\u200b\u7684\u200b\u5185\u5b58\u200b\u5f15\u7528\u200b\u65b9\u5f0f\u200b\u5728\u200b\u4e0a\u8868\u200b\u5e95\u90e8\u200b\uff1a\\(M[Imm + R[r_b] + R[r_i]\\times s]\\)\uff0c\u200b\u5e38\u7528\u200b\u4e8e\u200b\u5f15\u7528\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u3002</p> <p>\u200b\u5047\u8bbe\u200b\u4e0b\u5217\u200b\u503c\u200b\u5b58\u50a8\u200b\u5728\u200b\u5185\u5b58\u200b\u6216\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u7684\u200b\u5730\u5740\u200b\u5904\u200b\uff1a</p> <p></p> <p>\u200b\u90a3\u4e48\u200b\u4ee5\u4e0b\u200b\u64cd\u4f5c\u6570\u200b\u5b58\u50a8\u200b\u7684\u200b\u503c\u200b\u5206\u522b\u200b\u4e3a\u200b\uff1a</p> <ul> <li><code>%rax</code>\uff1a0x100</li> <li><code>0x104</code>\uff1a\u200b\u5730\u5740\u200b\u4e3a\u200b 0x104\uff0c\u200b\u503c\u4e3a\u200b 0xAB</li> <li><code>$0x108</code>\uff1a0x108\uff08\u200b\u7acb\u5373\u200b\u6570\u200b\uff09</li> <li><code>(%rax)</code>\uff1a\u200b\u5730\u5740\u200b\u4e3a\u200b 0x100\uff0c\u200b\u503c\u4e3a\u200b 0xFF</li> <li><code>9(%rax,%rdx)</code>\uff1a\u200b\u5730\u5740\u200b\u4e3a\u200b 9 + 0x100 + 0x3 = 0x10C\uff0c\u200b\u503c\u4e3a\u200b 0x11</li> <li><code>260(%rcx,%rdx)</code>\uff1a260 \u200b\u5373\u200b\u5341\u516d\u8fdb\u5236\u200b\u6570\u200b 0x104\uff0c\u200b\u56e0\u6b64\u200b\u5730\u5740\u200b\u4e3a\u200b 0x104 + 0x1 + 0x3 = 0x108\uff0c\u200b\u503c\u4e3a\u200b 0x13</li> <li><code>0xFC(,%rcx,4)</code>\uff1a\u200b\u5730\u5740\u200b\u4e3a\u200b 0xFC + 0x1 * 4 = 0x100\uff0c\u200b\u503c\u4e3a\u200b 0xFF</li> <li><code>%rax,%rdx,4</code>\uff1a\u200b\u5730\u5740\u200b\u4e3a\u200b\uff1a0x100 + 0x3 * 4 = 0x10C\uff0c\u200b\u503c\u4e3a\u200b 0x11</li> </ul>"},{"location":"core/csapp/ch3/#_8","title":"\u6570\u636e\u200b\u79fb\u52a8\u200b\u6307\u4ee4","text":"<p>\u200b\u5728\u200b\u6240\u6709\u200b\u673a\u5668\u6307\u4ee4\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u6700\u4e3a\u200b\u9891\u7e41\u200b\u7684\u200b\u4fbf\u662f\u200b\u6570\u636e\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5b83\u4eec\u200b\u8d1f\u8d23\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b\u4e00\u5904\u200b\u79fb\u52a8\u200b\u5230\u200b\u53e6\u200b\u4e00\u5904\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u64cd\u4f5c\u200b\u76f8\u540c\u200b\u4f46\u200b\u64cd\u4f5c\u6570\u200b\u5c3a\u5bf8\u200b\u4e0d\u540c\u200b\u7684\u200b\u6307\u4ee4\u200b\u5212\u5206\u200b\u4e3a\u200b\u540c\u4e00\u4e2a\u200b\u6307\u4ee4\u200b\u7c7b\u200b\uff08Instruction Classes\uff09\uff0c\u200b\u4e0b\u200b\u8868\u5217\u51fa\u200b\u7684\u200b\u4fbf\u662f\u200b MOV \u200b\u6307\u4ee4\u200b\u7c7b\u4e2d\u200b\u7684\u200b\u5404\u79cd\u200b\u64cd\u4f5c\u200b\uff1a</p> <p></p> <p>\u200b\u4e0a\u8868\u200b\u4e2d\u200b\u7684\u200b S \u200b\u4ee3\u8868\u200b \u200b\u6e90\u5730\u5740\u200b\uff08Source\uff09\uff0cD \u200b\u4ee3\u8868\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\uff08Destination\uff09\uff0cI \u200b\u4ee3\u8868\u200b\u7acb\u5373\u200b\u6570\u200b\uff0cR \u200b\u4ee3\u8868\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0c\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u4e0d\u80fd\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u4f4d\u4e8e\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u76f4\u63a5\u200b\u79fb\u52a8\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u5fc5\u987b\u200b\u7ecf\u8fc7\u200b\u4e00\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u8f6c\u200b\u3002\u200b\u6b64\u5916\u200b\uff0c\u200b\u5f53\u200b<code>movl</code>\u200b\u6307\u4ee4\u200b\u7684\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u4e0d\u4ec5\u200b\u4f1a\u200b\u628a\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u8f83\u200b\u4f4e\u200b\u56db\u4f4d\u200b\u66f4\u65b0\u200b\u4e3a\u6e90\u200b\u6570\u636e\u200b\uff0c\u200b\u8fd8\u4f1a\u200b\u5c06\u200b\u8f83\u200b\u9ad8\u200b\u56db\u4f4d\u200b\u7684\u200b\u5b57\u8282\u200b\u5168\u90e8\u200b\u7f6e\u200b 0\u3002\u200b\u6700\u540e\u200b\uff0c<code>movabsq</code>\u200b\u6307\u4ee4\u200b\u53ea\u80fd\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b\u4f5c\u4e3a\u200b\u6570\u636e\u200b\u7684\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u4e0b\u9762\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0c\u200b\u5de6\u8fb9\u200b\u4e3a\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\u7684\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\uff0c\u200b\u53f3\u8fb9\u200b\u4e3a\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\u5b57\u8282\u200b\u7684\u200b\u53d8\u5316\u200b\u60c5\u51b5\u200b\uff1a</p> <pre><code>movabsq $0x0011223344556677, %rax            %rax = 0011223344556677\nmovb $-1, %al                                %rax = 00112233445566FF\nmovw $-1, %ax                                %rax = 001122334455FFFF\nmovl $-1, %eax                               %rax = 00000000FFFFFFFF\nmovq $-1, %rax                               %rax = FFFFFFFFFFFFFFFF\n</code></pre> <p>\u200b\u8fd8\u6709\u200b\u4e24\u7c7b\u200b\u6570\u636e\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u8f83\u200b\u5c0f\u200b\u5c3a\u5bf8\u200b\u7684\u200b\u6e90\u200b\u6570\u636e\u200b\u79fb\u52a8\u200b\u5230\u200b\u8f83\u5927\u200b\u5c3a\u5bf8\u200b\u7684\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5982\u4e0b\u200b\u8868\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p></p> <p>\u200b\u4e24\u8005\u200b\u4e0d\u540c\u200b\u7684\u200b\u662f\u200b\uff0c<code>movz</code>\u200b\u6307\u4ee4\u200b\u5c06\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u5269\u4f59\u200b\u5b57\u8282\u200b\u5747\u200b\u586b\u5145\u200b\u4e3a\u200b 0\uff08\u200b\u96f6\u200b\u6269\u5c55\u200b\uff09\uff0c<code>movs</code>\u200b\u6307\u4ee4\u200b\u5219\u200b\u5c06\u200b\u5176\u200b\u586b\u5145\u200b\u4e3a\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u7684\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u200b\uff08\u200b\u7b26\u53f7\u200b\u6269\u5c55\u200b\uff09\u3002\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u7b26\u53f7\u200b\u6269\u5c55\u200b\uff0c\u200b\u96f6\u200b\u6269\u5c55\u200b\u7f3a\u5c11\u200b\u4e86\u200b\u6307\u4ee4\u200b<code>movzlq</code>\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c\u200b\u4f7f\u7528\u200b<code>movl</code>\u200b\u6307\u4ee4\u200b\u79fb\u52a8\u200b\u6570\u636e\u200b\u5230\u200b\u5bc4\u5b58\u5668\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u5c06\u200b\u9ad8\u4f4d\u200b\u5168\u90e8\u200b\u7f6e\u200b\u4e3a\u200b 0\uff0c\u200b\u5176\u200b\u6548\u679c\u200b\u4e0e\u200b\u96f6\u200b\u6269\u5c55\u200b\u65e0\u5f02\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u7b26\u53f7\u200b\u6269\u5c55\u200b\u8fd8\u200b\u591a\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u6307\u4ee4\u200b<code>cltq</code>\u3002\u200b\u5b83\u200b\u6ca1\u6709\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u5b9e\u9645\u4e0a\u200b\u7b49\u6548\u4e8e\u200b<code>movslq %eax, %rax</code>\u3002</p> <p>\u200b\u5728\u200b C \u200b\u4e2d\u200b\uff0c\u200b\u5bf9\u200b\u6307\u9488\u200b\u89e3\u200b\u5f15\u7528\u200b\uff08Dereference Pointer\uff0c<code>*p</code>\uff09\u200b\u4f1a\u200b\u5c06\u200b\u6307\u9488\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u8be5\u200b\u5bc4\u5b58\u5668\u200b\u4f5c\u4e3a\u200b\u5185\u5b58\u5730\u5740\u200b\u7684\u200b\u5f15\u7528\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>long exchange(long *xp, long y)\n{\n  long x = *xp;\n  *xp = y;\n  return x;\n}\n</code></pre> <p>\u200b\u4e0e\u200b\u4e4b\u200b\u7b49\u6548\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e3a\u200b\uff1a</p> <pre><code>; xp in %rdi, y in %rsi\nexchange:\n  movq (%rdi), %rax\n  movq %rsi, (%rdi)\n  ret\n</code></pre> <p>\u200b\u6700\u540e\u200b\u4e24\u4e2a\u200b\u6570\u636e\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u5206\u522b\u200b\u662f\u200b\u5c06\u200b\u6570\u636e\u200b\u538b\u5165\u200b\u7a0b\u5e8f\u200b\u6808\u200b\uff08Stack\uff09\u200b\u7684\u200b<code>push</code>\u200b\u548c\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b\u7a0b\u5e8f\u200b\u6808\u200b\u4e2d\u5f39\u200b\u51fa\u200b\u7684\u200b<code>pop</code>\uff0c\u200b\u5982\u4e0b\u200b\u8868\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u5728\u200b x86-64 \u200b\u4e2d\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u6808\u200b\u5b58\u50a8\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e9b\u200b\u533a\u57df\u200b\u4e2d\u200b\uff0c\u200b\u5176\u200b\u7279\u6027\u200b\u4e3a\u200b\u540e\u8fdb\u5148\u51fa\u200b\uff08Last-in, First-out\uff09\u3002\u200b\u4e60\u60ef\u200b\u4e0a\u200b\u6211\u4eec\u200b\u5c06\u200b\u6808\u200b\u9876\u200b\u753b\u200b\u5728\u200b\u5e95\u7aef\u200b\uff0c\u200b\u800c\u6808\u200b\u9876\u200b\u5143\u7d20\u200b\u7684\u200b\u5730\u5740\u200b\uff08\u200b\u7531\u6808\u200b\u6307\u9488\u200b %rsp \u200b\u4fdd\u5b58\u200b\uff09\u200b\u662f\u200b\u6574\u4e2a\u200b\u6808\u4e2d\u200b\u6700\u5c0f\u200b\u7684\u200b\uff1a</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u60f3\u8981\u200b\u5c06\u200b\u4e00\u4e2a\u200b\u56db\u5b57\u200b\u6570\u636e\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u9996\u5148\u200b\u8981\u200b\u628a\u200b\u6808\u200b\u6307\u9488\u200b\u51cf\u200b 8\uff0c\u200b\u7136\u540e\u200b\u4ee4\u6e90\u200b\u6570\u636e\u200b\u503c\u200b\u6210\u4e3a\u200b\u65b0\u200b\u7684\u200b\u6808\u9876\u200b\u5143\u7d20\u200b\u3002\u200b\u56e0\u6b64\u200b\u6307\u4ee4\u200b<code>pushq %rax</code>\u200b\u5c31\u200b\u7b49\u6548\u4e8e\u200b\uff1a</p> <pre><code>; subq \u200b\u4e3a\u200b\u51cf\u6cd5\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u4e0b\u200b\u4e00\u8282\u200b\u4f1a\u200b\u8fdb\u884c\u200b\u4ecb\u7ecd\u200b\nsubq $8, &amp;rsp\nmovq %rax, (%rsp)\n</code></pre> <p>\u200b\u540c\u6837\u200b\uff0c\u200b\u82e5\u60f3\u200b\u5c06\u200b\u6808\u200b\u9876\u200b\u7684\u200b\u56db\u5b57\u200b\u6570\u636e\u200b\u5f39\u51fa\u200b\u6808\u200b\uff0c\u200b\u9996\u5148\u200b\u8981\u200b\u628a\u200b\u6808\u9876\u200b\u5143\u7d20\u200b\u7684\u200b\u503c\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u200b\u628a\u200b\u6808\u200b\u6307\u9488\u200b\u52a0\u200b 8\u3002\u200b\u56e0\u6b64\u200b\u6307\u4ee4\u200b<code>popq %rdx</code>\u200b\u5c31\u200b\u7b49\u6548\u4e8e\u200b\uff1a</p> <pre><code>movq (%rsp), %rdx\n; addq \u200b\u4e3a\u200b\u52a0\u6cd5\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u4e0b\u200b\u4e00\u8282\u200b\u4f1a\u200b\u8fdb\u884c\u200b\u4ecb\u7ecd\u200b\naddq $8, %rsp\n</code></pre>"},{"location":"core/csapp/ch3/#_9","title":"\u7b97\u672f\u200b\u548c\u200b\u903b\u8f91\u200b\u64cd\u4f5c","text":"<p>\u200b\u4e0b\u56fe\u200b\u5217\u51fa\u200b\u4e86\u200b\u4e00\u4e9b\u200b x86-64 \u200b\u4e2d\u200b\u7684\u200b\u6574\u6570\u200b\u7b97\u672f\u200b\u548c\u200b\u903b\u8f91\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5176\u4e2d\u200b\u9664\u4e86\u200b<code>leaq</code>\u200b\u5916\u200b\u7ed9\u51fa\u200b\u7684\u200b\u90fd\u200b\u662f\u200b\u6307\u4ee4\u200b\u7c7b\u200b\uff1a</p> <p></p> <p>\u200b\u4ee5\u4e0a\u200b\u64cd\u4f5c\u200b\u53ef\u200b\u5206\u4e3a\u200b\u56db\u7c7b\u200b\uff1a\u200b\u52a0\u8f7d\u200b\u6709\u6548\u200b\u5730\u5740\u200b\uff08Load Effective Address\uff09\u3001\u200b\u4e00\u5143\u200b\uff08Unary\uff09\u3001\u200b\u4e8c\u5143\u200b\uff08Binary\uff09\u200b\u548c\u200b\u79fb\u4f4d\u200b\uff08Shifts\uff09\u3002\u200b\u4e00\u5143\u200b\u64cd\u4f5c\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u800c\u200b\u4e8c\u5143\u200b\u64cd\u4f5c\u200b\u5219\u200b\u6709\u200b\u4e24\u4e2a\u200b\u3002\u200b\u63a5\u4e0b\u6765\u200b\u6211\u4eec\u200b\u5c06\u200b\u5206\u522b\u200b\u4ecb\u7ecd\u200b\u5b83\u4eec\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_10","title":"\u52a0\u8f7d\u200b\u6709\u6548\u200b\u5730\u5740","text":"<p>\u200b\u52a0\u8f7d\u200b\u6709\u6548\u200b\u5730\u5740\u200b\u7684\u200b\u6307\u4ee4\u200b\u540d\u4e3a\u200b<code>leaq</code>\uff0c\u200b\u5176\u5b9e\u8d28\u200b\u662f\u200b<code>movq</code>\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e00\u79cd\u200b\u53d8\u4f53\u200b\u3002\u200b\u5b83\u4f1a\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u7684\u200b\u5730\u5740\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff0c\u200b\u6709\u65f6\u5019\u200b\u4e5f\u200b\u7528\u4e8e\u200b\u5b9e\u73b0\u200b\u4e00\u4e9b\u200b\u7b80\u5355\u200b\u7684\u200b\u8fd0\u7b97\u200b\u3002\u200b\u4f8b\u5982\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\u5b58\u50a8\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b x\uff0c\u200b\u90a3\u4e48\u200b\u6307\u4ee4\u200b<code>leaq 7(%rdx, %rdx, 4), %rax</code>\u200b\u7684\u200b\u4f5c\u7528\u200b\u4fbf\u662f\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u7684\u200b\u503c\u200b\u8bbe\u4e3a\u200b 5x+7\u3002\u200b\u867d\u7136\u200b<code>leaq</code>\u200b\u6307\u4ee4\u200b\u5728\u200b\u6267\u884c\u200b\u8fd0\u7b97\u200b\u65b9\u9762\u200b\u7684\u200b\u80fd\u529b\u200b\u662f\u200b\u6709\u9650\u200b\u7684\u200b\uff0c\u200b\u4f46\u662f\u200b\u4e0e\u200b\u52a0\u6cd5\u200b\u548c\u200b\u4e58\u6cd5\u200b\u6307\u4ee4\u200b\u76f8\u6bd4\u200b\uff0c\u200b\u5b83\u200b\u7684\u200b\u6027\u80fd\u200b\u66f4\u52a0\u200b\u51fa\u8272\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_11","title":"\u4e00\u5143\u200b\u548c\u200b\u4e8c\u5143\u200b\u64cd\u4f5c","text":"<p>\u200b\u4e00\u5143\u200b\u64cd\u4f5c\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6e90\u5730\u5740\u200b\u548c\u200b\u76ee\u7684\u200b\u5730\u5740\u200b\u76f8\u540c\u200b\u3002\u200b\u5982\u200b\u64cd\u4f5c\u200b<code>incq (%rsp)</code>\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u7a0b\u5e8f\u200b\u6808\u9876\u200b\u589e\u52a0\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u5143\u7d20\u200b\uff0c\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b C \u200b\u4e2d\u200b\u7684\u200b\u81ea\u589e\u200b\u8fd0\u7b97\u7b26\u200b<code>++</code>\u3002</p> <p>\u200b\u4e8c\u5143\u200b\u64cd\u4f5c\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b C \u200b\u4e2d\u200b\u7684\u200b\u8d4b\u503c\u200b\u8fd0\u7b97\u7b26\u200b\uff08Assignment Operator\uff09\uff0c\u200b\u5982\u200b<code>x -= y</code>\u3002\u200b\u4e3e\u4f8b\u6765\u8bf4\u200b\uff0c\u200b\u64cd\u4f5c\u200b<code>subq %rax, %rdx</code>\u200b\u4f1a\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u51cf\u53bb\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u7b2c\u4e00\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u53ef\u4ee5\u200b\u662f\u200b\u7acb\u5373\u200b\u6570\u200b\u3001\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u5219\u200b\u53ea\u80fd\u200b\u662f\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u4e0e\u200b MOV \u200b\u7c7b\u200b\u6307\u4ee4\u200b\u76f8\u540c\u200b\uff0c\u200b\u4e8c\u5143\u200b\u64cd\u4f5c\u200b\u7684\u200b\u4e24\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u4e0d\u80fd\u200b\u540c\u65f6\u200b\u4e3a\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_12","title":"\u79fb\u4f4d\u200b\u64cd\u4f5c","text":"<p>\u200b\u79fb\u4f4d\u200b\u64cd\u4f5c\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u64cd\u4f5c\u7b26\u200b\u4e3a\u200b\u4f4d\u6570\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u662f\u200b\u7acb\u5373\u200b\u6570\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5355\u5b57\u8282\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff08\u200b\u901a\u5e38\u200b\u4f7f\u7528\u200b\u5bc4\u5b58\u5668\u200b %cl\uff09\u3002\u200b\u7b2c\u4e8c\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u4e3a\u200b\u79fb\u4f4d\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u53f3\u79fb\u200b\u8fd0\u7b97\u200b\u6765\u8bf4\u200b\uff0cSAR \u200b\u4ee3\u8868\u200b\u7b97\u672f\u200b\u53f3\u79fb\u200b\uff0cSHR \u200b\u5219\u200b\u4ee3\u8868\u200b\u903b\u8f91\u200b\u53f3\u79fb\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_13","title":"\u7279\u6b8a\u200b\u7b97\u6570\u200b\u64cd\u4f5c","text":"<p>\u200b\u4e24\u4e2a\u200b 64 \u200b\u4f4d\u200b\u6574\u578b\u200b\u7684\u200b\u79ef\u200b\u9700\u8981\u200b\u7528\u200b 128 \u200b\u4f4d\u6765\u200b\u8868\u793a\u200b\uff0c\u200b\u56e0\u6b64\u200b Intel \u200b\u5f15\u5165\u200b\u4e86\u200b 16 \u200b\u5b57\u8282\u200b\u5355\u4f4d\u200b\u201c\u200b\u516b\u5b57\u200b\u201d\uff08Oct Word\uff09\u200b\u6765\u200b\u89e3\u51b3\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\u3002\u200b\u4e0b\u8868\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u652f\u6301\u200b\u8fd0\u7b97\u200b\u7ed3\u679c\u200b\u4e3a\u200b\u516b\u5b57\u200b\u7684\u200b\u64cd\u4f5c\u200b\uff1a</p> <p></p> <p>\u200b\u6211\u4eec\u200b\u5728\u200b\u666e\u901a\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b\u548c\u200b\u7279\u6b8a\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b\u4e2d\u5747\u200b\u53d1\u73b0\u200b\u4e86\u200b<code>imulq</code>\u200b\u6307\u4ee4\u200b\u3002\u200b\u7b2c\u4e00\u79cd\u200b\u5c5e\u4e8e\u200b IMUL \u200b\u7c7b\u200b\uff0c\u200b\u6709\u200b\u4e24\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u3002\u200b\u5176\u200b\u8ba1\u7b97\u7ed3\u679c\u200b\u4e3a\u200b 64 \u200b\u4f4d\u200b\uff08\u200b\u82e5\u200b\u8d85\u8fc7\u200b 64 \u200b\u4f4d\u200b\uff0c\u200b\u5219\u200b\u622a\u65ad\u200b\u9ad8\u4f4d\u200b\uff09\uff0c\u200b\u7b49\u6548\u4e8e\u200b\u7b2c\u4e8c\u7ae0\u200b\u4ecb\u7ecd\u200b\u7684\u200b \u200b\u65e0\u200b\u7b26\u53f7\u200b\u4e58\u6cd5\u200b \u200b\u548c\u200b \u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u4e58\u6cd5\u200b \u3002\u200b\u7b2c\u4e8c\u79cd\u200b\u5373\u200b\u662f\u200b\u4e0a\u8868\u200b\u4e2d\u200b\u7684\u200b\u7279\u6b8a\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u64cd\u4f5c\u6570\u200b\u7684\u200b\u6570\u91cf\u200b\u533a\u5206\u200b\u5b83\u4eec\u200b\u3002</p> <p>\u200b\u7528\u4e8e\u200b\u6709\u200b\u7b26\u53f7\u200b\u4e58\u6cd5\u200b\u7684\u200b\u64cd\u4f5c\u200b\u88ab\u200b\u79f0\u4e3a\u200b<code>imulq</code>\uff0c\u200b\u7528\u4e8e\u200b\u65e0\u200b\u7b26\u53f7\u200b\u4e58\u6cd5\u200b\u7684\u200b\u5219\u200b\u4e3a\u200b<code>mulq</code>\u3002\u200b\u4e24\u8005\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u53c2\u6570\u200b\u4e3a\u200b\u5bc4\u5b58\u5668\u200b %rax\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u53c2\u6570\u200b\u4e3a\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u3002\u200b\u8ba1\u7b97\u7ed3\u679c\u200b\u4e2d\u8f83\u200b\u9ad8\u200b 64 \u200b\u4f4d\u200b\u5c06\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\uff0c\u200b\u8f83\u200b\u4f4e\u200b 64 \u200b\u4f4d\u5219\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\u3002</p> <pre><code>#include &lt;inttypes.h&gt;\ntypedef unsigned __int128 uint128_t\nvoid store_uprod(uint128_t *dest, uint64_t x, uint64_t y){\n    *dest = x * (uint128_t)y;\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u200b\u5728\u200b\u5c0f\u7aef\u6cd5\u200b\u673a\u5668\u200b\u4e0a\u200b\u53ef\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u5982\u4e0b\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>; dest in %rdi, x in %rsi, y in %rdx\nstore_uprod\n  movq %rsi, %rax\n  mulq %rdx\n  movq %rax, (%rdi)\n  movq %rdx, 8(%rdi)\n</code></pre> <p>\u200b\u666e\u901a\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u63d0\u4f9b\u200b\u9664\u6cd5\u200b\u6216\u200b\u4f59\u6570\u200b\u8fd0\u7b97\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u7279\u6b8a\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b<code>idivq</code>\u200b\u548c\u200b<code>divq</code>\u3002\u200b\u4e0e\u200b\u4e58\u6cd5\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u88ab\u9664\u6570\u200b\u7684\u200b\u8f83\u200b\u9ad8\u200b 64 \u200b\u4f4d\u200b\u5c06\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\uff0c\u200b\u8f83\u200b\u4f4e\u200b 64 \u200b\u4f4d\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\u3002\u200b\u9664\u6570\u200b\u4e3a\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u5546\u200b\u4fdd\u5b58\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\uff0c\u200b\u4f59\u6570\u200b\u5219\u200b\u4fdd\u5b58\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\u3002\u200b\u5982\u679c\u200b\u88ab\u9664\u6570\u200b\u53ea\u6709\u200b 64 \u200b\u4f4d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5c31\u200b\u5e94\u5f53\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u5168\u90e8\u200b\u7f6e\u200b\u4e3a\u200b 0\uff08\u200b\u65e0\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\uff09\u200b\u6216\u200b\u7b26\u53f7\u200b\u4f4d\u200b\uff08\u200b\u6709\u200b\u7b26\u53f7\u200b\u8fd0\u7b97\u200b\uff09\u3002\u200b\u540e\u8005\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>cqto</code>\u200b\u64cd\u4f5c\u200b\u5b9e\u73b0\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u4ece\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u7b26\u53f7\u200b\u4f4d\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u5185\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4f4d\u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_14","title":"\u63a7\u5236","text":"<p>\u200b\u4e0a\u200b\u6587\u4e2d\u200b\u4ecb\u7ecd\u200b\u7684\u200b\u64cd\u4f5c\u200b\u53ea\u200b\u8003\u8651\u200b\u4e86\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u5bf9\u4e8e\u200b C \u200b\u4e2d\u200b\u7684\u200b If\u3001For\u3001While \u200b\u548c\u200b Switch \u200b\u8bed\u53e5\u200b\uff0c\u200b\u5b83\u4eec\u200b\u8fd8\u200b\u9700\u8981\u200b\u6839\u636e\u200b\u6570\u636e\u200b\u68c0\u9a8c\u200b\u7684\u200b\u7ed3\u679c\u200b\u6765\u200b\u51b3\u5b9a\u200b\u4ee3\u7801\u6267\u884c\u200b\u7684\u200b\u987a\u5e8f\u200b\u3002\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e24\u79cd\u200b\u57fa\u672c\u200b\u673a\u5236\u200b\u6765\u200b\u5b9e\u73b0\u200b\u8fd9\u79cd\u200b\u6761\u4ef6\u200b\u884c\u4e3a\u200b\uff08Conditional Behavior\uff09\uff0c\u200b\u4e00\u79cd\u200b\u6839\u636e\u200b\u68c0\u9a8c\u200b\u7ed3\u679c\u200b\u6539\u53d8\u200b\u63a7\u5236\u6d41\u200b\uff08Control Flow\uff09\uff0c\u200b\u53e6\u200b\u4e00\u79cd\u200b\u5219\u200b\u6539\u53d8\u200b\u6570\u636e\u6d41\u200b\uff08Data Flow\uff09\u3002</p>"},{"location":"core/csapp/ch3/#_15","title":"\u6761\u4ef6\u200b\u7801","text":"<p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0cCPU \u200b\u7ef4\u62a4\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u5355\u5b57\u8282\u200b\u7684\u200b\u6761\u4ef6\u200b\u7801\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u5b83\u4eec\u200b\u8bb0\u5f55\u200b\u4e86\u200b\u6700\u8fd1\u200b\u4e00\u6b21\u200b\u7b97\u6570\u200b\u6216\u200b\u903b\u8f91\u200b\u64cd\u4f5c\u200b\u7ed3\u679c\u200b\u7684\u200b\u67d0\u4e9b\u200b\u5c5e\u6027\u200b\uff1a</p> <ul> <li>CF\uff08Carry Flag\uff09\uff1a\u200b\u8fdb\u4f4d\u200b\u6807\u8bc6\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u6700\u9ad8\u200b\u6709\u6548\u200b\u4f4d\u200b\u662f\u5426\u200b\u53d1\u751f\u200b\u8fdb\u4f4d\u200b\uff0c\u200b\u7528\u4e8e\u200b\u68c0\u6d4b\u200b\u65e0\u200b\u7b26\u53f7\u200b\u6570\u200b\u64cd\u4f5c\u200b\u7684\u200b\u6ea2\u51fa\u200b\uff1b</li> <li>ZF\uff08Zero Flag\uff09\uff1a\u200b\u96f6\u200b\u6807\u8bc6\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u7ed3\u679c\u200b\u662f\u5426\u200b\u4e3a\u200b 0\uff1b</li> <li>SF\uff08Sign Flag\uff09\uff1a\u200b\u7b26\u53f7\u200b\u6807\u8bc6\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u7ed3\u679c\u200b\u662f\u5426\u200b\u4e3a\u200b\u8d1f\u503c\u200b\uff1b</li> <li>OF\uff08Overflow Flag\uff09\uff1a\u200b\u6ea2\u51fa\u200b\u6807\u8bc6\u200b\uff0c\u200b\u8bb0\u5f55\u200b\u662f\u5426\u200b\u53d1\u751f\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u6ea2\u51fa\u200b\u3002</li> </ul> <p>\u200b\u4e0b\u5217\u200b\u4e24\u4e2a\u200b\u6307\u4ee4\u200b\u7c7b\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4e0d\u200b\u6539\u53d8\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u8bbe\u7f6e\u200b\u6761\u4ef6\u200b\u7801\u200b\uff0c\u200b\u5982\u200b\u6307\u4ee4\u200b<code>testq %rax, %rax</code>\u200b\u53ef\u4ee5\u200b\u68c0\u6d4b\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u5b58\u50a8\u200b\u7684\u200b\u503c\u200b\u662f\u200b\u6b63\u6570\u200b\u3001\u200b\u8d1f\u6570\u200b\u8fd8\u662f\u200b\u96f6\u200b\uff1a</p> <p></p> <p>\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u76f4\u63a5\u200b\u8bfb\u53d6\u200b\uff0c\u200b\u6211\u4eec\u200b\u66f4\u200b\u5e38\u7528\u200b\u4ee5\u4e0b\u200b\u4e09\u79cd\u200b\u65b9\u5f0f\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u7801\u200b\uff1a</p> <ul> <li>\u200b\u6839\u636e\u200b\u6761\u4ef6\u200b\u7801\u200b\u7684\u200b\u7ec4\u5408\u200b\u5c06\u200b\u5355\u4e2a\u200b\u5b57\u8282\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b 0 \u200b\u6216\u200b 1\uff1b</li> <li>\u200b\u6709\u200b\u6761\u4ef6\u200b\u5730\u200b\u8df3\u8f6c\u200b\u5230\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u5176\u4ed6\u200b\u90e8\u5206\u200b\uff1b</li> <li>\u200b\u6709\u200b\u6761\u4ef6\u200b\u5730\u200b\u4f20\u8f93\u6570\u636e\u200b\u3002</li> </ul> <p>\u200b\u4e0b\u5217\u200b\u64cd\u4f5c\u200b\u6307\u4ee4\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u5b9e\u73b0\u200b\u4e0a\u8ff0\u200b\u7b2c\u4e00\u79cd\u200b\u65b9\u5f0f\u200b\u3002\u200b\u6ce8\u610f\u200b\uff0c\u200b\u6b64\u5904\u200b\u7684\u200b\u6307\u4ee4\u200b\u540e\u7f00\u200b\u4ee3\u8868\u200b\u7684\u200b\u5e76\u975e\u200b\u662f\u200b\u4e0d\u540c\u200b\u7684\u200b\u64cd\u4f5c\u6570\u200b\u5927\u5c0f\u200b\uff0c\u200b\u800c\u662f\u200b\u4e0d\u540c\u200b\u7684\u200b\u6761\u4ef6\u200b\u5224\u65ad\u200b\u3002\u200b\u5982\u200b\u6307\u4ee4\u200b<code>setl</code>\u200b\u548c\u200b<code>setb</code>\u200b\u5206\u522b\u200b\u4ee3\u8868\u200b set less \u200b\u548c\u200b set below\uff1a</p> <p></p> <p>\u200b\u5982\u4e0b\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u9996\u5148\u200b\u6bd4\u8f83\u200b\u4e86\u200b\u53d8\u91cf\u200b<code>a</code>\u200b\u548c\u200b<code>b</code>\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u7136\u540e\u200b\u6839\u636e\u200b\u7ed3\u679c\u200b\u628a\u200b\u5bc4\u5b58\u5668\u200b %eax \u200b\u7684\u200b\u6700\u4f4e\u200b\u5b57\u8282\u200b\uff08\u200b\u5373\u200b\u5bc4\u5b58\u5668\u200b %al\uff09\u200b\u7f6e\u200b\u4e3a\u200b 0 \u200b\u6216\u200b 1\u3002<code>movzbl</code>\u200b\u6307\u4ee4\u200b\u7684\u200b\u4f5c\u7528\u200b\u662f\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b %eax \u200b\u7684\u200b\u9ad8\u4f4d\u200b\u4e09\u4e2a\u200b\u5b57\u8282\u200b\u4ee5\u53ca\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u7684\u200b\u9ad8\u4f4d\u200b\u56db\u4e2a\u200b\u5b57\u8282\u200b\u5168\u90e8\u200b\u6e05\u96f6\u200b\uff1a</p> <pre><code>; int comp(data_t a, data_t b)\n; a in rdi%, b in rsi%\ncomp:\n  cmpq %rsi, %rdi\n  setl %al\n  movzbl %al, %eax\n  ret\n</code></pre>"},{"location":"core/csapp/ch3/#_16","title":"\u8df3\u8f6c\u200b\u6307\u4ee4","text":"<p>\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u53ef\u4ee5\u200b\u8ba9\u200b\u7a0b\u5e8f\u200b\u8f6c\u200b\u5230\u200b\u4e00\u4e2a\u200b\u5168\u65b0\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u7ee7\u7eed\u6267\u884c\u200b\uff0c\u200b\u8be5\u200b\u4f4d\u7f6e\u200b\u5728\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u6807\u7b7e\u200b\uff08Label\uff09\u200b\u6765\u200b\u6307\u5b9a\u200b\u3002</p> <pre><code>  movq $0, %rax\n  jmp .L1\n  movq (rax%), %rdx\n.L1:\n  popq %rdx\n</code></pre> <p>\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u6307\u4ee4\u200b<code>jmp .L1</code>\u200b\u5c06\u200b\u4f7f\u200b\u7a0b\u5e8f\u200b\u8df3\u8fc7\u200b<code>movq</code>\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5f00\u59cb\u200b\u6267\u884c\u200b<code>popq</code>\u200b\u64cd\u4f5c\u200b\u3002 \u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e0d\u540c\u200b\u7684\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\uff1a</p> <p></p> <p><code>jmp</code>\u200b\u6307\u4ee4\u200b\u65e2\u200b\u53ef\u4ee5\u200b\u662f\u200b\u76f4\u63a5\u200b\u8df3\u8f6c\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u95f4\u63a5\u200b\u8df3\u8f6c\u200b\u3002\u200b\u76f4\u63a5\u200b\u8df3\u8f6c\u200b\u7684\u200b\u76ee\u6807\u200b\u4f7f\u7528\u200b\u6807\u7b7e\u200b\u6307\u5b9a\u200b\uff0c\u200b\u800c\u200b\u95f4\u63a5\u200b\u8df3\u8f6c\u200b\u7684\u200b\u76ee\u6807\u200b\u5219\u200b\u9700\u8981\u200b\u4ece\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u3002\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u5176\u4f59\u200b\u6307\u4ee4\u200b\u5747\u200b\u4e3a\u200b\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\uff0c\u200b\u5b83\u4eec\u200b\u6839\u636e\u200b\u6761\u4ef6\u200b\u5224\u65ad\u200b\u7684\u200b\u7ed3\u679c\u200b\u6765\u200b\u51b3\u5b9a\u200b\u662f\u5426\u200b\u6267\u884c\u200b\u8df3\u8f6c\u200b\u64cd\u4f5c\u200b\u3002\u200b\u6ce8\u610f\u200b\uff0c\u200b\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\u5747\u200b\u4e3a\u200b\u76f4\u63a5\u200b\u8df3\u8f6c\u200b\u3002</p> <p>\u200b\u5728\u200b\u751f\u6210\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u6c47\u7f16\u5668\u200b\u548c\u200b\u94fe\u63a5\u200b\u5668\u4f1a\u200b\u786e\u5b9a\u200b\u8df3\u8f6c\u200b\u76ee\u6807\u200b\uff08\u200b\u5373\u200b\u76ee\u6807\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\uff09\uff0c\u200b\u5e76\u200b\u7f16\u7801\u200b\u4e3a\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002\u200b\u5176\u200b\u4f7f\u7528\u200b\u7684\u200b\u7f16\u7801\u65b9\u5f0f\u200b\u6709\u200b\u591a\u79cd\u200b\uff0c\u200b\u4f46\u200b\u5927\u591a\u6570\u200b\u4e0e\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u76f8\u5173\u200b\uff0c\u200b\u5373\u200b\u6bd4\u8f83\u200b\u76ee\u6807\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u548c\u200b\u7d27\u200b\u6328\u7740\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u4e4b\u95f4\u200b\u7684\u200b\u5dee\u5f02\u200b\u3002\u200b\u8fd9\u6837\u200b\u7684\u200b\u8bf4\u6cd5\u200b\u6709\u4e9b\u200b\u7ed5\u53e3\u200b\uff0c\u200b\u6211\u4eec\u200b\u4ee5\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b\u4f8b\u5b50\u200b\u6765\u200b\u8bf4\u660e\u200b\uff1a</p> <pre><code>  movq %rdi%, %rax\n  jmp .L2\n.L3\n  sarq %rax\n.L2\n  testq %rax, %rax\n  jg .L3\n  rep; ret\n</code></pre> <p>\u200b\u8be5\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5305\u542b\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u8df3\u8f6c\u200b\u5230\u200b\u4e86\u200b\u66f4\u200b\u9ad8\u200b\u7684\u200b\u5730\u5740\u200b\u5904\u200b\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u5219\u200b\u76f8\u53cd\u200b\u3002\u200b\u800c\u200b\u4e0b\u56fe\u200b\u662f\u200b\u5bf9\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u6c47\u7f16\u200b\u7136\u540e\u200b\u518d\u200b\u8fdb\u884c\u200b\u53cd\u6c47\u7f16\u200b\u540e\u200b\u7684\u200b\u7ed3\u679c\u200b\uff1a</p> <p></p> <p>\u200b\u5728\u200b\u53f3\u4fa7\u200b\u6ce8\u91ca\u200b\u4e2d\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u4e3a\u200b +0x8\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u4e3a\u200b +0x5\u3002\u200b\u518d\u200b\u770b\u200b\u5de6\u4fa7\u200b\u6307\u4ee4\u200b\u7684\u200b\u5b57\u8282\u200b\u7f16\u7801\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u6307\u4ee4\u200b\u7684\u200b\u76ee\u6807\u200b\u88ab\u200b\u7f16\u7801\u200b\u4e3a\u200b 0x03\uff0c\u200b\u5c06\u200b\u5176\u200b\u52a0\u4e0a\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0x5\uff0c\u200b\u5c31\u200b\u5f97\u5230\u200b\u4e86\u200b\u8df3\u8f6c\u200b\u76ee\u6807\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u5373\u200b\u7b2c\u56db\u884c\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0x8\u3002\u200b\u540c\u6837\u200b\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u6307\u4ee4\u200b\u7684\u200b\u76ee\u6807\u200b\u662f\u200b\u4f7f\u7528\u200b\u5355\u5b57\u8282\u200b\u4e8c\u8fdb\u5236\u200b\u8865\u7801\u200b\u8868\u793a\u200b\u7684\u200b 0xf8\uff08\u200b\u5373\u200b\u5341\u8fdb\u5236\u200b\u6570\u200b -8\uff09\uff0c\u200b\u5c06\u200b\u5176\u200b\u52a0\u4e0a\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0xd\uff0c\u200b\u5c31\u200b\u5f97\u5230\u200b\u4e86\u200b\u7b2c\u4e09\u884c\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0x5\u3002</p> <p>\u200b\u5f53\u200b\u76ee\u6807\u200b\u4ee3\u7801\u200b\u6587\u4ef6\u200b\u7ecf\u8fc7\u200b\u94fe\u63a5\u200b\u5668\u200b\u5904\u7406\u200b\u540e\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u6307\u4ee4\u200b\u4f1a\u200b\u88ab\u200b\u91cd\u65b0\u5206\u914d\u200b\u5730\u5740\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u7b2c\u4e8c\u884c\u200b\u548c\u200b\u7b2c\u4e94\u200b\u884c\u200b\u8df3\u8f6c\u200b\u76ee\u6807\u200b\u7684\u200b\u7f16\u7801\u200b\u4f9d\u7136\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u65b9\u5f0f\u200b\u80fd\u591f\u200b\u8ba9\u200b\u6307\u4ee4\u200b\u7f16\u7801\u200b\u66f4\u52a0\u200b\u7d27\u51d1\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch3/#_17","title":"\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u63a7\u5236\u200b\u5b9e\u73b0\u200b\u6761\u4ef6\u200b\u5206\u652f","text":"<p>\u200b\u82e5\u60f3\u200b\u5c06\u200b C \u200b\u4e2d\u200b\u7684\u200b\u6761\u4ef6\u200b\u8868\u8fbe\u5f0f\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\uff0c\u200b\u901a\u5e38\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\u548c\u200b\u65e0\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\u7684\u200b\u7ec4\u5408\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u53ca\u5176\u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>long absdiff(long x, long y)\n{\n    long result;\n    if (x &lt; y)\n        result = y - x;\n    else\n        result = x - y;\n}\n</code></pre> <pre><code>; long absdiff(long x, long y) \n; x in %rdi, y in %rsi \nabsdiff:\n  cmpq %rsi, %rdi\n  jge .L2\n  movq %rsi, %rax\n  subq %rdi, %rax\n  ret\n.L2\n  movq %rdi, %rax\n  subq %rsi, %rax\n  ret\n</code></pre> <p>\u200b\u5b9e\u9645\u4e0a\u200b\u8be5\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\uff08Control Flow\uff09\u200b\u66f4\u200b\u50cf\u662f\u200b\u4f7f\u7528\u200b Goto \u200b\u8bed\u53e5\u200b\u5c06\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u200b\u6539\u5199\u200b\u540e\u200b\u5f97\u5230\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u5373\u5148\u200b\u6bd4\u8f83\u200b\u4e24\u200b\u6570\u200b\u5927\u5c0f\u200b\uff0c\u200b\u7136\u540e\u200b\u6839\u636e\u200b\u7ed3\u679c\u200b\u51b3\u5b9a\u200b\u662f\u5426\u200b\u8df3\u8f6c\u200b\uff1a</p> <pre><code>long gotodiff(long x, long y)\n{\n    long result;\n    if (x &gt;= y)\n        goto x_ge_y;\n    result = y - x;\n    return result;\nx_ge_y:\n    result = x - y;\n    return result;\n}\n</code></pre> <p>\u200b\u8ba9\u200b\u6211\u4eec\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4e00\u822c\u200b\u60c5\u51b5\u200b\u3002\u200b\u5047\u8bbe\u200b C \u200b\u4e2d\u200b\u7684\u200b If-else \u200b\u8bed\u53e5\u200b\u6a21\u677f\u200b\u4e3a\u200b\uff1a</p> <pre><code>if (test-expr)\n    then-statement\nelse\n    else-statement\n</code></pre> <p>\u200b\u90a3\u4e48\u200b\u7f16\u8bd1\u200b\u751f\u6210\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5982\u4e0b\u200b C \u200b\u7a0b\u5e8f\u200b\u63cf\u8ff0\u200b\uff1a</p> <pre><code>\u00a0\u00a0\u00a0\u00a0t = test-expr;\n\u00a0\u00a0\u00a0\u00a0if (!t)\n\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0goto false;\n\u00a0\u00a0\u00a0\u00a0then-statement\n\u00a0\u00a0\u00a0\u00a0goto done;\nfalse:\nelse-statement\ndone:\n</code></pre>"},{"location":"core/csapp/ch3/#_18","title":"\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u5b9e\u73b0\u200b\u6761\u4ef6\u200b\u5206\u652f","text":"<p>\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u63a7\u5236\u200b\u5b9e\u73b0\u200b\u6761\u4ef6\u200b\u5206\u652f\u200b\u867d\u7136\u200b\u7b80\u5355\u200b\u6709\u6548\u200b\uff0c\u200b\u4f46\u200b\u5728\u200b\u73b0\u4ee3\u200b\u5904\u7406\u5668\u200b\u4e0a\u200b\u4f7f\u7528\u200b\u53ef\u80fd\u200b\u5341\u5206\u200b\u4f4e\u6548\u200b\uff0c\u200b\u6211\u4eec\u200b\u66f4\u200b\u503e\u5411\u200b\u4e8e\u200b\u4f7f\u7528\u200b\u4e00\u4e9b\u200b\u7b80\u5355\u200b\u7684\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u3002\u200b\u4e0a\u200b\u4e00\u8282\u200b\u4e2d\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u6539\u5199\u200b\u4e3a\u200b\uff1a</p> <pre><code>long cmovdiff(long x, long y)\n{\n    long rval = y - x;\n    long eval = x - y;\n    long ntest = x &gt;= y;\n    /* Line below requires\n    single instruction: */\n    if (ntest)\n        rval = eval;\n    return rval;\n}\n</code></pre> <p>\u200b\u8fd9\u200b\u6bb5\u200b\u4ee3\u7801\u200b\u9996\u5148\u200b\u8ba1\u7b97\u200b<code>y-x</code>\u200b\u548c\u200b<code>x-y</code>\uff0c\u200b\u5206\u522b\u200b\u547d\u540d\u200b\u4e3a\u200b\u53d8\u91cf\u200b<code>rval</code>\u200b\u548c\u200b\u53d8\u91cf\u200b<code>eval</code>\u3002\u200b\u7136\u540e\u200b\u6d4b\u8bd5\u200b<code>x</code>\u200b\u662f\u5426\u200b\u5927\u4e8e\u200b\u6216\u200b\u7b49\u4e8e\u200b<code>y</code>\uff0c\u200b\u5982\u679c\u200b\u662f\u200b\uff0c\u200b\u5219\u200b\u5728\u200b\u8fd4\u56de\u200b<code>rval</code>\u200b\u4e4b\u524d\u200b\u5c06\u200b<code>eval</code>\u200b\u8d4b\u503c\u200b\u7ed9\u200b<code>rval</code>\u3002\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u53c2\u8003\u200b\u8fd9\u79cd\u200b\u63a7\u5236\u6d41\u200b\u751f\u6210\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>; long absdiff(long x, long y)\n; x in %rdi, y in %rsi\nabsdiff:\n  movq %rsi, %rax\n  subq %rdi, %rax\n  movq %rdi, %rdx\n  subq %rsi, %rdx\n  cmpq %rsi, %rdi\n  cmovge %rdx, %rax\n  ret\n</code></pre> <p>\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b<code>comovge</code>\u200b\u5c31\u662f\u200b\u4e00\u4e2a\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\uff0c\u200b\u53ea\u6709\u200b<code>cmpq</code>\u200b\u6307\u4ee4\u200b\u5224\u65ad\u200b\u4e00\u4e2a\u200b\u503c\u200b\u5927\u4e8e\u200b\u6216\u200b\u7b49\u4e8e\u200b\uff08\u200b\u5982\u200b\u540e\u7f00\u200b ge \u200b\u6240\u793a\u200b\uff09\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u503c\u65f6\u200b\uff0c\u200b\u5b83\u200b\u624d\u200b\u4f1a\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u6e90\u200b\u5bc4\u5b58\u5668\u200b\u4f20\u8f93\u200b\u5230\u200b\u76ee\u6807\u200b\u5bc4\u5b58\u5668\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u4e86\u89e3\u200b\u73b0\u4ee3\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u8fd0\u884c\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u624d\u80fd\u200b\u660e\u767d\u200b\u4e3a\u4ec0\u4e48\u200b\u57fa\u4e8e\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u7684\u200b\u4ee3\u7801\u200b\u6548\u7387\u200b\u80dc\u8fc7\u200b\u6761\u4ef6\u200b\u63a7\u5236\u200b\u3002\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u9700\u8981\u200b\u5904\u7406\u5668\u200b\u901a\u8fc7\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u6b65\u9aa4\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u6b65\u9aa4\u200b\u53ea\u200b\u6267\u884c\u200b\u6240\u8be5\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e00\u5c0f\u90e8\u5206\u200b\uff08\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b\u83b7\u53d6\u200b\u6307\u4ee4\u200b\uff0c\u200b\u786e\u5b9a\u200b\u6307\u4ee4\u200b\u7c7b\u578b\u200b\u3001\u200b\u4ece\u200b\u5185\u5b58\u200b\u8bfb\u53d6\u200b\u3001\u200b\u6267\u884c\u200b\u7b97\u672f\u200b\u8fd0\u7b97\u200b\u3001\u200b\u5199\u5165\u200b\u5185\u5b58\u200b\u548c\u200b\u66f4\u65b0\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u7b49\u200b\uff09\u3002\u200b\u4e3a\u4e86\u200b\u5b9e\u73b0\u200b\u9ad8\u6027\u80fd\u200b\uff0c\u200b\u8fd9\u200b\u6761\u200b\u6d41\u6c34\u7ebf\u200b\uff08Pipelining\uff09\u200b\u9700\u8981\u200b\u5c06\u200b\u6307\u4ee4\u200b\u7684\u200b\u6b65\u9aa4\u200b\u91cd\u53e0\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5728\u200b\u6267\u884c\u200b\u524d\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u7b97\u672f\u200b\u8fd0\u7b97\u200b\u7684\u200b\u540c\u65f6\u200b\u63d0\u53d6\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u3002\u200b\u60f3\u8981\u200b\u505a\u5230\u200b\u8fd9\u200b\u4e00\u70b9\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u9700\u8981\u200b\u80fd\u591f\u200b\u63d0\u524d\u200b\u786e\u5b9a\u200b\u5373\u5c06\u200b\u6267\u884c\u200b\u7684\u200b\u6307\u4ee4\u200b\u5e8f\u5217\u200b\uff0c\u200b\u4ee5\u200b\u4fdd\u8bc1\u200b\u6d41\u6c34\u7ebf\u200b\u4e0a\u200b\u5145\u6ee1\u200b\u6307\u4ee4\u200b\u3002</p> <p>\u200b\u5f53\u200b\u5904\u7406\u5668\u200b\u9047\u5230\u200b\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\uff08\u200b\u5373\u200b\u5206\u652f\u200b\uff09\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u91c7\u7528\u200b\u590d\u6742\u200b\u7684\u200b\u903b\u8f91\u200b\u6765\u200b\u9884\u6d4b\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u662f\u5426\u200b\u89e6\u53d1\u200b\u3002\u200b\u5982\u679c\u200b\u9884\u6d4b\u200b\u7ed3\u679c\u200b\u8db3\u591f\u200b\u53ef\u9760\u200b\uff08\u200b\u73b0\u4ee3\u200b\u5fae\u5904\u7406\u5668\u200b\u8bd5\u56fe\u200b\u8fbe\u5230\u200b 90% \u200b\u7684\u200b\u6210\u529f\u7387\u200b\uff09\uff0c\u200b\u6d41\u6c34\u7ebf\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4fdd\u6301\u200b\u6307\u4ee4\u200b\u5145\u6ee1\u200b\u3002\u200b\u4f46\u662f\u200b\uff0c\u200b\u9519\u8bef\u200b\u7684\u200b\u9884\u6d4b\u200b\u5c06\u200b\u5bfc\u81f4\u200b\u5904\u7406\u5668\u200b\u4e0d\u5f97\u4e0d\u200b\u4e22\u5f03\u200b\u5b83\u200b\u5728\u200b\u672a\u6765\u200b\u6307\u4ee4\u200b\u4e0a\u200b\u5df2\u7ecf\u200b\u5b8c\u6210\u200b\u7684\u200b\u5927\u90e8\u5206\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4f7f\u200b\u7a0b\u5e8f\u200b\u6027\u80fd\u200b\u4e25\u91cd\u200b\u4e0b\u964d\u200b\u3002</p> <p>\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u4e2d\u200b<code>x &gt;= y</code>\u200b\u7684\u200b\u5224\u65ad\u200b\u7ed3\u679c\u200b\u663e\u7136\u200b\u662f\u200b\u96be\u4ee5\u9884\u6d4b\u200b\u7684\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u63a7\u5236\u4ee3\u7801\u200b\u7684\u200b\u6548\u7387\u200b\u5f88\u200b\u4f4e\u200b\u3002\u200b\u800c\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u4ee3\u7801\u200b\u5148\u200b\u8ba1\u7b97\u200b\u51fa\u200b\u6240\u6709\u200b\u53ef\u80fd\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u518d\u200b\u6839\u636e\u200b\u6761\u4ef6\u200b\u5224\u65ad\u200b\u51b3\u5b9a\u200b\u8fd4\u56de\u503c\u200b\u3002\u200b\u8fd9\u6837\u200b\u63a7\u5236\u6d41\u200b\u4fbf\u200b\u4e0d\u518d\u200b\u4f9d\u8d56\u200b\u6570\u636e\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u4e5f\u200b\u5c31\u200b\u66f4\u200b\u5bb9\u6613\u200b\u4fdd\u6301\u200b\u5176\u200b\u6d41\u6c34\u7ebf\u200b\u7684\u200b\u5b8c\u6574\u6027\u200b\uff0c\u200b\u4ece\u800c\u200b\u63d0\u5347\u200b\u6267\u884c\u200b\u6548\u7387\u200b\u3002\u200b\u5168\u90e8\u200b\u7684\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u4ece\u200b\u76ee\u6807\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u540d\u79f0\u200b\u63a8\u65ad\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u7684\u200b\u64cd\u4f5c\u6570\u200b\u957f\u5ea6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u76f8\u540c\u200b\u7684\u200b\u6307\u4ee4\u200b\u540d\u79f0\u200b\u53ef\u200b\u7528\u4e8e\u200b\u4e0d\u540c\u200b\u7684\u200b\u64cd\u4f5c\u6570\u200b\u957f\u5ea6\u200b\u3002\u200b\u6211\u4eec\u200b\u540c\u6837\u200b\u628a\u200b\u6761\u4ef6\u200b\u5206\u652f\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4e00\u822c\u200b\u60c5\u51b5\u200b\uff0c\u200b\u4f7f\u7528\u200b C \u200b\u7a0b\u5e8f\u200b\u6765\u200b\u63cf\u8ff0\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\uff1a</p> <pre><code>v = then - expr;\nve = else - expr;\nt = test - expr;\nif (!t)\n    v = ve;\n</code></pre> <p>\u200b\u5f53\u7136\u200b\uff0c\u200b\u4f7f\u7528\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6765\u200b\u5b9e\u73b0\u200b\u6761\u4ef6\u200b\u5206\u652f\u200b\u662f\u200b\u4e5f\u200b\u6709\u200b\u4e00\u4e9b\u200b\u7f3a\u70b9\u200b\u7684\u200b\u3002\u200b\u56e0\u4e3a\u200b\u65e0\u8bba\u200b\u5224\u65ad\u200b\u7ed3\u679c\u200b\u5982\u4f55\u200b\uff0c\u200b\u6211\u4eec\u200b\u90fd\u200b\u4f1a\u200b\u5168\u90e8\u200b\u6267\u884c\u200b then-expr \u200b\u548c\u200b else-expr\u3002\u200b\u4e00\u65e6\u200b\u67d0\u200b\u4e00\u4e2a\u200b\u5206\u652f\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\uff0c\u200b\u5c06\u200b\u5f71\u54cd\u200b\u6574\u4e2a\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u53ef\u7528\u6027\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u5982\u679c\u200b then-expr \u200b\u6216\u200b else-expr \u200b\u9700\u8981\u200b\u5927\u91cf\u200b\u8ba1\u7b97\u200b\uff0c\u200b\u800c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6761\u4ef6\u200b\u53c8\u200b\u4e0d\u200b\u6210\u7acb\u200b\u65f6\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u6240\u200b\u505a\u200b\u7684\u200b\u5de5\u4f5c\u200b\u5c31\u200b\u5b8c\u5168\u200b\u767d\u8d39\u200b\u4e86\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u603b\u4f53\u200b\u6765\u8bf4\u200b\uff0c\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u7684\u200b\u6027\u80fd\u200b\u8fd8\u662f\u200b\u9ad8\u4e8e\u200b\u6761\u4ef6\u200b\u63a7\u5236\u200b\u7684\u200b\uff0c\u200b\u8fd9\u200b\u4e5f\u200b\u662f\u200b GCC \u200b\u7f16\u8bd1\u5668\u200b\u4f7f\u7528\u200b\u5b83\u200b\u7684\u200b\u539f\u56e0\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_19","title":"\u5faa\u73af","text":""},{"location":"core/csapp/ch3/#do-while","title":"Do-While","text":"<p>\u200b\u5047\u8bbe\u200b C \u200b\u4e2d\u200b\u7684\u200b Do-While \u200b\u8bed\u53e5\u200b\u6a21\u677f\u200b\u4e3a\u200b\uff1a</p> <pre><code>do\n    body-statement\n    while (text-expr);\n</code></pre> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u8f6c\u5316\u200b\u4e3a\u200b Goto \u200b\u8bed\u53e5\u200b\u548c\u200b If-else \u200b\u8bed\u53e5\u200b\u7684\u200b\u7ec4\u5408\u200b\uff1a</p> <pre><code>loop:\n    body-statement\n    t = text-expr;\n    if (t)\n        goto loop;\n</code></pre> <p>\u200b\u5b9e\u9645\u4e0a\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u6b63\u662f\u200b\u7528\u200b\u8fd9\u79cd\u200b\u65b9\u5f0f\u200b\u6765\u200b\u5b9e\u73b0\u200b Do-While \u200b\u8bed\u53e5\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b \u3002\u200b\u793a\u4f8b\u200b\u51fd\u6570\u200b<code>fact_do</code>\u200b\u53ca\u5176\u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>long fact_do(long n)\n{\n    long result = 1;\n    do\n    {\n        result *= n;\n        n = n - 1;\n    } while (n &gt; 1);\n    return result;\n}\n</code></pre> <pre><code>; long fact_do(long n)\n; n in %rdi\nfact_do:\n  movl $1, %eax\n.L2:\n  imulq %rdi, %rax\n  subq $1, %rdi\n  cmpq $1, %rdi\n  jq .L2\n  rep; ret\n</code></pre>"},{"location":"core/csapp/ch3/#while","title":"While","text":"<p>\u200b\u5047\u8bbe\u200b C \u200b\u4e2d\u200b\u7684\u200b While \u200b\u8bed\u53e5\u200b\u6a21\u677f\u200b\u4e3a\u200b\uff1a</p> <pre><code>while (text-expr);\n    body-statement\n</code></pre> <p>\u200b\u6211\u4eec\u200b\u6709\u200b\u4e24\u79cd\u200b\u65b9\u6cd5\u200b\u5c06\u200b\u5176\u200b\u8f6c\u5316\u200b\u4e3a\u200b Goto \u200b\u8bed\u53e5\u200b\u548c\u200b If-else \u200b\u8bed\u53e5\u200b\u7684\u200b\u7ec4\u5408\u200b\u3002\u200b\u7b2c\u4e00\u79cd\u200b\u88ab\u200b\u79f0\u4e3a\u200b Jump-to-Middle\uff0c\u200b\u901a\u8fc7\u200b\u4e00\u4e2a\u200b\u975e\u200b\u6761\u4ef6\u200b\u8df3\u8f6c\u200b\u5728\u200b\u5faa\u73af\u200b\u7684\u200b\u7ed3\u675f\u200b\u6267\u884c\u200b\u6761\u4ef6\u200b\u5224\u65ad\u200b\uff1a</p> <pre><code>    goto test;\nloop:\n    body-statement\ntest:\n    t = text-expr;\n    if (t)\n        goto loop;\n</code></pre> <p>\u200b\u5f53\u200b GCC \u200b\u7684\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u6307\u5b9a\u200b\u4e3a\u200b<code>-Og</code>\u200b\u65f6\u200b\uff0c\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5c31\u4f1a\u7528\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u6765\u200b\u5b9e\u73b0\u200b While \u200b\u8bed\u53e5\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b \u3002\u200b\u793a\u4f8b\u200b\u51fd\u6570\u200b<code>fact_while</code>\u200b\u53ca\u5176\u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>long fact_while(long n)\n{\n    long result = 1;\n    while (n &gt; 1)\n    {\n        result *= n;\n        n = n - 1;\n    }\n    return result;\n}\n</code></pre> <pre><code>; long fact_while(long n)\n; n in %rdi\nfact_while:\n  movl $1, %eax \n  jmp .L5\n.L6:\n  imulq %rdi, %rax \n  subq $1, %rdi\n.L5: \n  cmpq $1, %rdi\n  jg .L6\n  rep; ret\n</code></pre> <p>\u200b\u7b2c\u4e8c\u79cd\u200b\u65b9\u6cd5\u200b\u88ab\u200b\u79f0\u4e3a\u200b Guarded-Do\uff0c\u200b\u5373\u200b\u9996\u5148\u200b\u5c06\u200b\u4ee3\u7801\u200b\u8f6c\u5316\u200b\u4e3a\u200b Do-While \u200b\u5faa\u73af\u200b\uff0c\u200b\u5982\u679c\u200b\u6761\u4ef6\u200b\u5224\u65ad\u200b\u5931\u8d25\u200b\u5219\u200b\u901a\u8fc7\u200b\u6761\u4ef6\u200b\u79fb\u52a8\u200b\u6307\u4ee4\u200b\u8df3\u8fc7\u200b\u5faa\u73af\u200b\uff1a</p> <pre><code>    t = test-expr; \n    if (!t)\n        goto done;\nloop:\n    body-statement \n    t = test-expr; \n    if (t)\n        goto loop;\ndone:\n</code></pre> <p>\u200b\u5f53\u200b GCC \u200b\u7684\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u6307\u5b9a\u200b\u4e3a\u200b\u66f4\u200b\u9ad8\u7ea7\u200b\u522b\u7684\u200b<code>-O1</code>\u200b\u65f6\u200b\uff0c\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5c31\u4f1a\u7528\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u6765\u200b\u5b9e\u73b0\u200b While \u200b\u8bed\u53e5\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b \u3002\u200b\u4e0a\u9762\u200b\u63d0\u5230\u200b\u7684\u200b\u51fd\u6570\u200b<code>fact_while</code>\u200b\u4f7f\u7528\u200b Guarded-Do \u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>; long fact_while(long n) \n; n in %rdi\nfact_while\n  cmpq $1, %rdi\n  jle .L7\n  movl $1, %eax\n.L6:\n  imulq %rdi, %rax\n  subq $1, %rdi\n  cmpq $1, %rdi\n  jne .L6\n  rep; ret\n.L7\n  movl $1, %eax\n  ret\n</code></pre>"},{"location":"core/csapp/ch3/#for","title":"For","text":"<p>\u200b\u5047\u8bbe\u200b C \u200b\u4e2d\u200b\u7684\u200b For \u200b\u8bed\u53e5\u200b\u6a21\u677f\u200b\u4e3a\u200b\uff1a</p> <pre><code>for (init-expr; test-expr; update-expr) \n    body-statement\n</code></pre> <p>\u200b\u663e\u7136\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u7b49\u6548\u200b\u7684\u200b While \u200b\u8bed\u53e5\u200b\uff1a</p> <pre><code>init-expr;\nwhile (test-expr) {\n    body-statement\n    update-expr; \n}\n</code></pre> <p>\u200b\u56e0\u6b64\u200b\uff0c\u200b\u6211\u4eec\u200b\u4f9d\u7136\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u4e24\u79cd\u200b\u65b9\u6cd5\u200b\u6765\u200b\u5c06\u200b\u5176\u200b\u8f6c\u5316\u200b\u4e3a\u200b Goto \u200b\u8bed\u53e5\u200b\u548c\u200b If-else \u200b\u8bed\u53e5\u200b\u7684\u200b\u7ec4\u5408\u200b\u3002</p> <p>Jump-to-Middle\uff1a</p> <pre><code>    init-expr;\n    goto test;\nloop:\n    body-statement\n    update-expr; \ntest:\n    t = test-expr; \n    if (t)\n        goto loop;\n</code></pre> <p>Guarded-Do\uff1a</p> <pre><code>    init-expr;\n    t = test-expr; \n    if (!t)\n        goto done;\nloop:\n    body-statement \n    update-expr;\n    t = test-expr; \n    if (t)\n        goto loop;\ndone:\n</code></pre> <p>\u200b\u540c\u6837\u200b\u5730\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u6839\u636e\u200b\u7ed9\u5b9a\u200b\u7684\u200b\u4f18\u5316\u200b\u53c2\u6570\u200b\u4f7f\u7528\u200b\u5bf9\u5e94\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\u6765\u200b\u751f\u6210\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u3002</p>"},{"location":"core/csapp/ch3/#switch","title":"Switch","text":"<p>GCC \u200b\u4f1a\u200b\u6839\u636e\u200b Switch \u200b\u8bed\u53e5\u200b\u4e2d\u200b Case \u200b\u7684\u200b\u6570\u91cf\u200b\u548c\u200b Case \u200b\u503c\u200b\u7684\u200b\u7a00\u758f\u200b\u6027\u200b\uff08Sparsity\uff09\u200b\u51b3\u5b9a\u200b\u7f16\u8bd1\u200b\u65b9\u6cd5\u200b\u3002\u200b\u5f53\u200b\u5b58\u5728\u200b\u591a\u79cd\u200b Case\uff08\u200b\u4f8b\u5982\u200b\u56db\u4e2a\u200b\u6216\u200b\u66f4\u200b\u591a\u200b\uff09\uff0c\u200b\u4e14\u200b\u5b83\u4eec\u200b\u8de8\u8d8a\u200b\u7684\u200b\u503c\u200b\u8303\u56f4\u200b\u8f83\u200b\u5c0f\u65f6\u200b\u4f1a\u200b\u4f7f\u7528\u200b\u4e00\u79cd\u200b\u540d\u4e3a\u200b\u8df3\u8f6c\u200b\u8868\u200b\uff08Jump Table\uff09\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u6765\u200b\u5b9e\u73b0\u200b\u3002\u200b\u8df3\u8f6c\u200b\u8868\u662f\u200b\u4e00\u4e2a\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u5206\u522b\u200b\u662f\u200b Switch \u200b\u8bed\u53e5\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b Case \u200b\u5bf9\u5e94\u200b\u7684\u200b\u4ee3\u7801\u200b\u5757\u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u53ca\u5176\u200b\u901a\u8fc7\u200b GCC \u200b\u7f16\u8bd1\u200b\u540e\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>void switch_eg(long x, long n, long *dest)\n{\n    long val = x;\n    switch (n)\n    {\n    case 100:\n        val *= 13;\n        break;\n    case 102:\n        val += 10;\n        /* Fall through */\n    case 103:\n        val += 11;\n        break;\n    case 104:\n    case 106:\n        val *= val;\n        break;\n    default:\n        val = 0;\n        break;\n    }\n    *dest = val;\n}\n</code></pre> <pre><code>; void switch_eg(long x, long n, long *dest) \n; x in %rdi, n in %rsi, dest in %rdx \nswitch_eg:\n  subq $100, %rsi\n  cmpq $6, %rsi\n  ja .L8\n  jmp *.L4(,%rsi,8)\n.L3:\n  leaq (%rdi,%rdi,2), %rax\n  leaq (%rdi,%rax,4), %rdi\n  jmp .L2\n.L5:\n  addq $10, %rdi\n.L6:\n  addq $11, %rdi\n  jmp .L2\n.L7:\n  imulq %rdi, %rdi\n  jmp .L2\n.L8:\n  movl $0, %edi\n.L2:\n  movq %rdi, (%rdx)\n  ret\n</code></pre> <p>\u200b\u4e3a\u4e86\u200b\u4fbf\u4e8e\u200b\u7406\u89e3\u200b\uff0c\u200b\u6211\u4eec\u200b\u7528\u200b C \u200b\u6765\u200b\u63cf\u8ff0\u200b\u5176\u200b\u5b9e\u73b0\u200b\uff08\u200b\u8fd0\u7b97\u7b26\u200b<code>&amp;&amp;</code>\u200b\u4f1a\u4e3a\u200b\u4ee3\u7801\u200b\u5757\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u521b\u5efa\u200b\u6307\u9488\u200b\uff09\uff1a</p> <pre><code>void switch_eg_impl(long x, long n, long *dest)\n{\n    /* Table of code pointers */\n    static void *jt[7] = {\n        &amp;&amp;loc_A, &amp;&amp;loc_def, &amp;&amp;loc_B,\n        &amp;&amp;loc_C, &amp;&amp;loc_D, &amp;&amp;loc_def,\n        &amp;&amp;loc_D};\n    unsigned long index = n - 100;\n    long val;\n    if (index &gt; 6)\n        goto loc_def;\n    /* Multiway branch */\n    goto *jt[index];\nloc_A: /* Case 100 */\n    val = x * 13;\n    goto done;\nloc_B: /* Case 102 */\n    val = x + 10;\nloc_C: /* Case 103 */\n    val = x + 11;\n    goto done;\nloc_D: /* Case 104, 106 */\n    val = x * x;\n    goto done;\nloc_def: /* Default case */\n    val = 0;\ndone:\n    *dest = val;\n}\n</code></pre> <p>\u200b\u5176\u4e2d\u200b\u7684\u200b<code>goto *jt[index]</code>\u200b\u5c31\u200b\u76f8\u5f53\u4e8e\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7b2c\u4e94\u200b\u884c\u200b\u7684\u200b<code>jmp *.L4(,%rsi,8)</code>\u3002\u200b\u5b83\u200b\u662f\u200b\u4e00\u4e2a\u200b\u95f4\u63a5\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5176\u200b\u64cd\u4f5c\u6570\u200b<code>.L4(,%rsi,8)</code>\u200b\u6307\u5b9a\u200b\u4e86\u200b\u7531\u200b\u5bc4\u5b58\u5668\u200b %rsi \u200b\u7d22\u5f15\u200b\u7684\u200b\u5185\u5b58\u5730\u5740\u200b\uff08\u200b\u6211\u4eec\u200b\u5c06\u200b\u5728\u200b\u540e\u7eed\u200b\u7ae0\u8282\u200b\u8ba8\u8bba\u200b\u6570\u7ec4\u200b\u662f\u200b\u5982\u4f55\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u7684\u200b\uff09\u3002</p> <p>\u200b\u5728\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\uff0c\u200b\u8df3\u8f6c\u200b\u8868\u5c06\u200b\u88ab\u200b\u8868\u793a\u200b\u4e3a\u200b\uff1a</p> <p></p> <p>\u200b\u5728\u200b\u540d\u4e3a\u200b<code>.rodata</code>\u200b\u7684\u200b\u53ea\u8bfb\u200b\u76ee\u6807\u200b\u4ee3\u7801\u6bb5\u200b\u4e2d\u200b\uff0c\u200b\u5305\u542b\u200b\u4e86\u200b\u7531\u200b\u4e03\u4e2a\u200b<code>quad</code>\uff08\u200b\u516b\u5b57\u200b\u8282\u200b\uff09\u200b\u7ec4\u6210\u200b\u7684\u200b\u5e8f\u5217\u200b\uff0c\u200b\u6bcf\u4e2a\u200b<code>quad</code>\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u6807\u7b7e\u200b\uff08\u200b\u5982\u200b<code>.L3</code>\uff09\u200b\u6240\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6307\u4ee4\u200b\u5730\u5740\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_20","title":"\u8fc7\u7a0b","text":"<p>\u200b\u8fc7\u7a0b\u200b\uff08Procedure\uff09\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u4e2d\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u53eb\u6cd5\u200b\uff0c\u200b\u5982\u200b\u51fd\u6570\u200b\uff08Function\uff09\u3001\u200b\u65b9\u6cd5\u200b\uff08Method\uff09\u3001\u200b\u5b50\u7a0b\u5e8f\u200b\uff08Subroutine\uff09\u200b\u548c\u200b\u5904\u7406\u5668\u200b\uff08Handler\uff09\u200b\u7b49\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u5b83\u4eec\u200b\u90fd\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u79cd\u200b\u6253\u5305\u200b\u4ee3\u7801\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002\u200b\u8be5\u200b\u4ee3\u7801\u200b\u4f7f\u7528\u200b\u4e00\u7ec4\u200b\u53c2\u6570\u200b\u548c\u200b\u53ef\u9009\u200b\u7684\u200b\u8fd4\u56de\u503c\u200b\u6765\u200b\u5b9e\u73b0\u200b\u67d0\u4e9b\u200b\u529f\u80fd\u200b\uff0c\u200b\u5e76\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u4e0d\u540c\u200b\u4f4d\u7f6e\u200b\u8c03\u7528\u200b\u3002</p> <p>\u200b\u5047\u8bbe\u200b\u8fc7\u7a0b\u200b P \u200b\u8c03\u7528\u200b\u4e86\u200b\u8fc7\u7a0b\u200b Q\uff0cQ \u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\u540e\u200b\u8fd4\u56de\u200b P\u3002\u200b\u90a3\u4e48\u200b\uff1a</p> <ul> <li>\u200b\u4f20\u9012\u200b\u63a7\u5236\u200b\uff1a\u200b\u5728\u200b\u8c03\u7528\u200b Q \u200b\u65f6\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u5fc5\u987b\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u5176\u200b\u4ee3\u7801\u200b\u5730\u5740\u200b\uff0c\u200b\u540c\u65f6\u200b\u5728\u200b\u8fd4\u56de\u200b P \u200b\u65f6\u200b\u4e5f\u200b\u8981\u200b\u7f6e\u200b\u4e3a\u200b P \u200b\u7684\u200b\u4ee3\u7801\u200b\u5730\u5740\u200b\uff1b</li> <li>\u200b\u4f20\u9012\u200b\u53c2\u6570\u200b\uff1aP \u200b\u5fc5\u987b\u200b\u80fd\u200b\u5411\u200b Q \u200b\u63d0\u4f9b\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u53c2\u6570\u200b\uff0c\u200b\u53cd\u4e4b\u200b Q \u200b\u5fc5\u987b\u200b\u80fd\u200b\u5c06\u200b\u503c\u200b\u8fd4\u56de\u200b\u7ed9\u200b P\uff1b</li> <li>\u200b\u5206\u914d\u200b\u548c\u200b\u91ca\u653e\u200b\u5185\u5b58\u200b\uff1a\u200b\u5728\u200b\u8c03\u7528\u200b Q \u200b\u4e4b\u524d\u200b\u53ef\u80fd\u200b\u9700\u8981\u200b\u4e3a\u200b\u5176\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5206\u914d\u5185\u5b58\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u8fd4\u56de\u200b\u65f6\u200b\u91ca\u653e\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch3/#_21","title":"\u8fd0\u884c\u200b\u65f6\u6808","text":"<p>\u200b\u5f53\u200b\u8fc7\u7a0b\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\u8d85\u8fc7\u200b\u5bc4\u5b58\u5668\u200b\u6240\u200b\u80fd\u200b\u5bb9\u7eb3\u200b\u7684\u200b\u8303\u56f4\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u4fbf\u200b\u4f1a\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4e0a\u200b\u5206\u914d\u200b\u7a7a\u95f4\u200b\u3002\u200b\u4e0a\u56fe\u200b\u4e3a\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u7684\u200b\u4e00\u822c\u200b\u7ed3\u6784\u200b\uff0c\u200b\u4e3b\u8981\u200b\u7531\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b Q \u200b\u548c\u200b\u8c03\u7528\u200b\u8fc7\u7a0b\u200b P \u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5e27\u200b\uff08Frame\uff09\u200b\u7ec4\u6210\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8fc7\u7a0b\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u6808\u200b\u5e27\u200b\u5185\u200b\u4fdd\u5b58\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u503c\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cSaved Registers\u201d\uff09\uff0c\u200b\u4e3a\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5206\u914d\u200b\u7a7a\u95f4\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cLocal Variables\u201d\uff09\uff0c\u200b\u4ee5\u53ca\u200b\u4e3a\u200b\u5176\u200b\u8c03\u7528\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u8bbe\u7f6e\u200b\u53c2\u6570\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cArgument\u201d\uff09\u200b\u7b49\u200b\u3002\u200b\u5f53\u200b P \u200b\u8c03\u7528\u200b Q \u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\uff08\u200b\u56fe\u4e2d\u200b\u201cReturn Address\u201d\uff09\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\u3002\u200b\u8fd9\u6837\u200b\u5f53\u200b Q \u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u4fbf\u200b\u77e5\u9053\u200b\u5e94\u8be5\u200b\u5728\u200b\u54ea\u91cc\u200b\u6062\u590d\u200b\u6267\u884c\u200b P\u3002</p> <p>\u200b\u4e0d\u8fc7\u200b\u51fa\u4e8e\u200b\u5bf9\u200b\u65f6\u95f4\u200b\u548c\u200b\u7a7a\u95f4\u200b\u6548\u7387\u200b\u7684\u200b\u8003\u8651\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u53ea\u4f1a\u200b\u4e3a\u200b\u8fc7\u7a0b\u200b\u5206\u914d\u200b\u5b83\u4eec\u200b\u5fc5\u987b\u200b\u7684\u200b\u6808\u200b\u5e27\u200b\u3002\u200b\u4f8b\u5982\u200b\u67d0\u4e2a\u200b\u8fc7\u7a0b\u200b\u7684\u200b\u53c2\u6570\u200b\u4e0d\u8db3\u200b 6 \u200b\u4e2a\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u4eec\u200b\u5c06\u200b\u5168\u90e8\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u800c\u975e\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u53c2\u6570\u200b\u533a\u200b\u662f\u4ece\u200b Argument 7 \u200b\u5f00\u59cb\u200b\u7684\u200b\uff09\u3002\u200b\u8bb8\u591a\u200b\u8fc7\u7a0b\u200b\u7684\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5f88\u5c11\u200b\u4e14\u200b\u4e0d\u200b\u8c03\u7528\u200b\u5176\u4ed6\u200b\u8fc7\u7a0b\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5c31\u200b\u4e0d\u200b\u9700\u8981\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u3002</p> <p>\u200b\u63a5\u4e0b\u6765\u200b\u6211\u4eec\u200b\u4f1a\u200b\u5bf9\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4e2d\u200b\u7684\u200b\u5404\u4e2a\u200b\u533a\u57df\u200b\u8fdb\u884c\u200b\u66f4\u4e3a\u200b\u6df1\u5165\u200b\u5730\u200b\u8ba8\u8bba\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_22","title":"\u4f20\u9012\u200b\u63a7\u5236","text":"<p>\u200b\u5728\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\uff0c\u200b\u8fc7\u7a0b\u200b\u95f4\u200b\u8c03\u7528\u200b\u662f\u200b\u901a\u8fc7\u200b\u6307\u4ee4\u200b<code>call</code>\u200b\u548c\u200b<code>ret</code>\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0c\u200b\u6307\u4ee4\u200b<code>call Q</code>\u200b\u4f1a\u200b\u5c06\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b\u8fc7\u7a0b\u200b Q \u200b\u4ee3\u7801\u200b\u7684\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b A \u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\u3002\u200b\u6307\u4ee4\u200b<code>ret</code>\u200b\u5219\u200b\u4f1a\u200b\u5c06\u200b\u5730\u5740\u200b A \u200b\u4ece\u6808\u200b\u4e2d\u5f39\u200b\u51fa\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b A\u3002\u200b\u5b9e\u9645\u4e0a\u200b\uff0c\u200b\u5730\u5740\u200b A \u200b\u5c31\u662f\u200b\u7d27\u8ddf\u200b\u5728\u200b<code>call</code>\u200b\u6307\u4ee4\u200b\u4e4b\u540e\u200b\u7684\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u3002</p> <p>\u200b\u4e0b\u56fe\u200b\u8bf4\u660e\u200b\u4e86\u200b\u524d\u6587\u200b\u4ee3\u7801\u200b\u793a\u4f8b\u200b\u4e2d\u4e3b\u200b\u51fd\u6570\u8c03\u7528\u200b<code>multstore</code>\u200b\u540e\u200b\u8fd4\u56de\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u7684\u200b\u53d8\u5316\u200b\u60c5\u51b5\u200b\uff1a</p> <p></p> <p>\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b\u53cd\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u5f53\u4e3b\u200b\u51fd\u6570\u200b\u8c03\u7528\u51fd\u6570\u200b<code>multstore</code>\u200b\u65f6\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b %rip \u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b<code>call</code>\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0x400563\u3002\u200b\u8be5\u200b\u6307\u4ee4\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b 0x400568 \u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\u5e76\u200b\u8df3\u8f6c\u200b\u5230\u200b\u51fd\u6570\u200b<code>multstore</code>\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u6761\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5176\u200b\u5730\u5740\u200b\u4e3a\u200b 0x0400540\u3002 \u200b\u968f\u540e\u200b\u51fd\u6570\u200b<code>multstore</code>\u200b\u7ee7\u7eed\u6267\u884c\u200b\uff0c\u200b\u76f4\u5230\u200b\u9047\u5230\u200b\u5730\u5740\u200b 0x40054d \u200b\u5904\u200b\u7684\u200b<code>ret</code>\u200b\u6307\u4ee4\u200b\u3002 \u200b\u8be5\u200b\u6307\u4ee4\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b 0x400568 \u200b\u4ece\u6808\u200b\u4e2d\u5f39\u200b\u51fa\u200b\u5e76\u200b\u8df3\u8f6c\u200b\u5230\u200b\u8be5\u200b\u5730\u5740\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6307\u4ee4\u200b\uff0c\u200b\u4e3b\u200b\u51fd\u6570\u200b\u5f97\u4ee5\u200b\u7ee7\u7eed\u6267\u884c\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_23","title":"\u4f20\u9012\u200b\u53c2\u6570","text":"<p>\u200b\u5728\u200b x86-64 \u200b\u673a\u5668\u200b\u4e0a\u200b\uff0c\u200b\u6700\u200b\u591a\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5bc4\u5b58\u5668\u200b\u4f20\u9012\u200b\u516d\u4e2a\u200b\u53c2\u6570\u200b\uff1a</p> <p></p> <p>\u200b\u7b2c\u4e03\u4e2a\u200b\u53ca\u200b\u4e4b\u540e\u200b\u7684\u200b\u53c2\u6570\u200b\u5c06\u200b\u5b58\u50a8\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4e2d\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b C \u200b\u7a0b\u5e8f\u200b\u53ca\u5176\u200b\u901a\u8fc7\u200b GCC \u200b\u7f16\u8bd1\u200b\u540e\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5206\u522b\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>void proc(long a1, long *a1p,\n          int a2, int *a2p,\n          short a3, short *a3p,\n          char a4, char *a4p)\n{\n    *a1p += a1;\n    *a2p += a2;\n    *a3p += a3;\n    *a4p += a4;\n}\n</code></pre> <p></p> <p>\u200b\u867d\u7136\u200b\u53c2\u6570\u200b<code>a4</code>\u200b\u7684\u200b\u7c7b\u578b\u200b\u4e3a\u200b<code>char</code>\uff0c\u200b\u4f46\u200b\u7a0b\u5e8f\u200b\u5206\u522b\u200b\u901a\u8fc7\u200b<code>8(%rsp)</code>\u200b\u548c\u200b<code>16(%rsp)</code>\u200b\u6765\u200b\u5bf9\u200b\u5b83\u200b\u548c\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b\u7684\u200b<code>a4p</code>\u200b\u8fdb\u884c\u200b\u5bfb\u5740\u200b\uff0c\u200b\u8bf4\u660e\u200b\u4e24\u8005\u200b\u5747\u200b\u5360\u7528\u200b\u4e86\u200b\u6808\u200b\u4e2d\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\u3002\u200b\u53c2\u6570\u200b\u7684\u200b\u6808\u200b\u5e27\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch3/#_24","title":"\u5c40\u90e8\u53d8\u91cf","text":"<p>\u200b\u67d0\u4e9b\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5fc5\u987b\u200b\u5b58\u50a8\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4e2d\u200b\uff1a</p> <ul> <li>\u200b\u6ca1\u6709\u200b\u8db3\u591f\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u6765\u200b\u5b58\u50a8\u200b\u5c40\u90e8\u53d8\u91cf\u200b\uff1b</li> <li>\u200b\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u5bf9\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u8fdb\u884c\u200b\u53d6\u200b\u5730\u5740\u200b\uff08<code>&amp;</code>\uff09\u200b\u64cd\u4f5c\u200b\uff1b</li> <li>\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u7684\u200b\u7c7b\u578b\u200b\u4e3a\u200b\u6570\u7ec4\u200b\u6216\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff08\u200b\u6211\u4eec\u200b\u5c06\u200b\u5728\u200b\u540e\u7eed\u200b\u7684\u200b\u7ae0\u8282\u200b\u4e2d\u200b\u8ba8\u8bba\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\uff09\u3002</li> </ul> <p>\u200b\u793a\u4f8b\u200b\u51fd\u6570\u200b<code>call_proc</code>\u200b\u7684\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff0c\u200b\u5176\u4e2d\u200b\u8c03\u7528\u200b\u7684\u200b\u51fd\u6570\u200b<code>proc</code>\u200b\u5728\u200b\u4e0a\u200b\u4e00\u8282\u200b\u4e2d\u200b\u5df2\u6709\u200b\u4ecb\u7ecd\u200b\uff1a</p> <pre><code>long call_proc()\n{\n    long x1 = 1;\n    int x2 = 2;\n    short x3 = 3;\n    char x4 = 4;\n    proc(x1, &amp;x1, x2, &amp;x2, x3, &amp;x3, x4, &amp;x4);\n    return (x1 + x2) * (x3 - x4);\n}\n</code></pre> <p>\u200b\u8be5\u200b C \u200b\u7a0b\u5e8f\u200b\u751f\u6210\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5341\u5206\u200b\u5197\u957f\u200b\uff0c\u200b\u4f46\u200b\u503c\u5f97\u200b\u6211\u4eec\u200b\u8ba4\u771f\u200b\u9605\u8bfb\u200b\u548c\u200b\u7814\u7a76\u200b\uff1a</p> <p></p> <p>\u200b\u56fe\u4e2d\u200b\u201cSet up arguments to proc\u201d\u200b\u9636\u6bb5\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6808\u200b\u5e27\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u770b\u5230\u200b\uff0c\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>x1</code>\u200b\u5230\u200b<code>x4</code>\u200b\u5b58\u50a8\u200b\u5728\u200b\u6808\u200b\u4e2d\u4e14\u200b\u6709\u7740\u200b\u4e0d\u540c\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u5206\u522b\u200b\u5360\u7528\u200b\u5b57\u8282\u200b 24-31\u300120-23\u300118-19 \u200b\u548c\u200b 17\u3002\u200b\u6307\u5411\u200b\u8fd9\u4e9b\u200b\u53c2\u6570\u200b\u7684\u200b\u6307\u9488\u200b\u5747\u200b\u901a\u8fc7\u200b\u6307\u4ee4\u200b<code>leaq</code>\u200b\u751f\u6210\u200b\uff0c\u200b\u5206\u522b\u200b\u5bf9\u5e94\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u200b 7\u300110\u300112 \u200b\u548c\u200b 14 \u200b\u884c\u200b\u3002\u200b\u524d\u200b\u516d\u4e2a\u200b\u53c2\u6570\u200b\u901a\u8fc7\u200b\u5bc4\u5b58\u5668\u200b\u4f20\u9012\u200b\uff0c\u200b\u800c\u200b\u7b2c\u4e03\u4e2a\u200b\u548c\u200b\u7b2c\u516b\u4e2a\u200b\u53c2\u6570\u200b\u5219\u200b\u5b58\u50a8\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u76f8\u5bf9\u200b\u4e8e\u6808\u200b\u6307\u9488\u200b %rsp \u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b 0 \u200b\u548c\u200b 8\u3002</p> <p>\u200b\u5f53\u200b\u7a0b\u5e8f\u6267\u884c\u200b\u5230\u200b\u201cCall proc\u201d\u200b\u9636\u6bb5\u200b\u65f6\u200b\uff0c\u200b\u7531\u4e8e\u200b\u8c03\u7528\u200b\u4e86\u200b\u51fd\u6570\u200b<code>proc</code>\uff0c\u200b\u56e0\u6b64\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u9700\u8981\u200b\u88ab\u200b\u538b\u5165\u200b\u5230\u200b\u6808\u9876\u200b\u3002\u200b\u6b64\u65f6\u200b\u7684\u200b\u6808\u200b\u5e27\u200b\u7ed3\u6784\u200b\u548c\u200b\u4e0a\u200b\u4e00\u8282\u200b\u5c55\u793a\u200b\u7684\u200b\u76f8\u540c\u200b\uff0c\u200b\u7b2c\u4e03\u4e2a\u200b\u53c2\u6570\u200b\u548c\u200b\u7b2c\u516b\u4e2a\u200b\u53c2\u6570\u200b\u76f8\u5bf9\u200b\u4e8e\u6808\u200b\u6307\u9488\u200b %rsp \u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u5206\u522b\u200b\u53d8\u4e3a\u200b\u4e86\u200b 8 \u200b\u548c\u200b 16\u3002</p>"},{"location":"core/csapp/ch3/#_25","title":"\u88ab\u200b\u4fdd\u5b58\u200b\u7684\u200b\u5bc4\u5b58\u5668","text":"<p>\u200b\u5f53\u200b\u4e00\u4e2a\u200b\u8fc7\u7a0b\u200b\uff08\u200b\u8c03\u7528\u8005\u200b\uff09\u200b\u5728\u200b\u8c03\u7528\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u8fc7\u7a0b\u200b\uff08\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\uff09\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u5fc5\u987b\u200b\u4fdd\u8bc1\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u7684\u200b\u6267\u884c\u200b\u4e0d\u4f1a\u200b\u5f71\u54cd\u200b\u5230\u200b\u8c03\u7528\u8005\u200b\u540e\u7eed\u200b\u8ba1\u5212\u200b\u4f7f\u7528\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u503c\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0cx86-64 \u200b\u89c4\u5b9a\u200b\u5bc4\u5b58\u5668\u200b %rbx\u3001%rbp \u200b\u548c\u200b %r12\u2013%r15 \u200b\u4e3a\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u4fdd\u5b58\u200b\uff08Callee-saved\uff09\u200b\u5bc4\u5b58\u5668\u200b\u3002\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u901a\u8fc7\u200b\u5c06\u200b\u4e0a\u8ff0\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u5728\u200b\u8fd4\u56de\u200b\u65f6\u200b\u5c06\u200b\u539f\u59cb\u200b\u503c\u5f39\u200b\u51fa\u4ee5\u200b\u5b9e\u73b0\u200b\u8c03\u7528\u200b\u524d\u540e\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u503c\u200b\u4e0d\u53d8\u200b\u3002\u200b\u9664\u6808\u200b\u6307\u9488\u200b %rsp \u200b\u4ee5\u5916\u200b\u7684\u200b\u5176\u4ed6\u200b\u5bc4\u5b58\u5668\u200b\u5219\u200b\u4e3a\u200b\u8c03\u7528\u8005\u200b\u4fdd\u5b58\u200b\uff08Caller-saved\uff09\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u7531\u4e8e\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u53ef\u4ee5\u200b\u968f\u610f\u200b\u4fee\u6539\u200b\u5176\u4e2d\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8c03\u7528\u8005\u200b\u6709\u200b\u8d23\u4efb\u200b\u4fdd\u5b58\u200b\u8c03\u7528\u200b\u4e4b\u524d\u200b\u7684\u200b\u6570\u636e\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_26","title":"\u9012\u5f52","text":"<p>x86-64 \u200b\u5141\u8bb8\u200b\u8fc7\u7a0b\u200b\u4ee5\u200b\u9012\u5f52\u200b\uff08Recursive\uff09\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8c03\u7528\u200b\u81ea\u8eab\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fc7\u7a0b\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u4e0a\u200b\u7684\u200b\u7a7a\u95f4\u200b\u662f\u200b\u79c1\u6709\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u591a\u4e2a\u200b\u672a\u200b\u5b8c\u6210\u200b\u8c03\u7528\u200b\u7684\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u4e0d\u4f1a\u200b\u4e92\u76f8\u200b\u5e72\u6270\u200b\u3002\u200b\u9012\u5f52\u200b\u8c03\u7528\u200b\u5b9e\u8d28\u200b\u4e0a\u200b\u548c\u200b\u8c03\u7528\u200b\u4e00\u4e2a\u200b\u5176\u4ed6\u200b\u8fc7\u7a0b\u200b\u6ca1\u6709\u200b\u533a\u522b\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_27","title":"\u6570\u7ec4","text":"<p>\u200b\u5bf9\u4e8e\u200b\u957f\u5ea6\u200b\u4e3a\u200b L \u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b T \u200b\u548c\u200b\u6574\u578b\u200b\u5e38\u91cf\u200b N\uff0c\u200b\u58f0\u660e\u200b<code>T A[N]</code>\u200b\u4ee3\u8868\u200b\uff1a</p> <ul> <li>\u200b\u5185\u5b58\u200b\u4e2d\u5c06\u200b\u4e3a\u200b\u5176\u200b\u5206\u914d\u200b L * N \u200b\u5927\u5c0f\u200b\u7684\u200b\u7a7a\u95f4\u200b\uff1b</li> <li>\u200b\u6570\u7ec4\u200b\u540d\u79f0\u200b A \u200b\u4e3a\u200b\u6307\u5411\u200b\u6570\u7ec4\u200b\u5934\u90e8\u200b\uff08\u200b\u8bbe\u200b\u4e3a\u200b\\(x_A\\)\uff09\u200b\u7684\u200b\u6307\u9488\u200b\uff0c\u200b\u4efb\u610f\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b i \u200b\u7684\u200b\u5730\u5740\u200b\u4e3a\u200b \\(x_A\\) + L * i\u3002</li> </ul> <p>\u200b\u5728\u200b x86-64 \u200b\u4e2d\u200b\uff0c\u200b\u5185\u5b58\u200b\u5f15\u7528\u200b\u6307\u4ee4\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u65e8\u5728\u200b\u7b80\u5316\u200b\u5bf9\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u7684\u200b\u8bbf\u95ee\u200b\u3002\u200b\u4f8b\u5982\u200b<code>int</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u6570\u7ec4\u200b<code>E[i]</code>\uff0c<code>E</code>\u200b\u7684\u200b\u5730\u5740\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rdx \u200b\u4e2d\u200b\uff0ci \u200b\u5219\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rcx \u200b\u4e2d\u200b\u3002\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u6307\u4ee4\u200b<code>movl(%rdx, %rcx, 4), %eax</code>\u200b\u6765\u200b\u5c06\u200b\u76ee\u6807\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b %eax \u200b\u4e2d\u200b\u3002</p> <p>C \u200b\u5141\u8bb8\u200b\u6211\u4eec\u200b\u5bf9\u200b\u6307\u9488\u200b\u8fdb\u884c\u200b\u8ba1\u7b97\u200b\u3002\u200b\u5047\u8bbe\u200b\u6307\u9488\u200b<code>p</code>\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u957f\u5ea6\u200b\u4e3a\u200b L\u3001\u200b\u6570\u636e\u7c7b\u578b\u200b\u4e3a\u200b T \u200b\u7684\u200b\u6570\u7ec4\u200b\u4e14\u200b\u5176\u503c\u200b\u4e3a\u200b \\(x_p\\)\uff0c\u200b\u5219\u200b\u8868\u8fbe\u5f0f\u200b<code>p + i</code>\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b \\(x_p\\) + L * i\u3002\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\uff0c\u200b\u4efb\u610f\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b<code>A[i]</code>\u200b\u5c31\u200b\u7b49\u6548\u4e8e\u200b\u8868\u8fbe\u5f0f\u200b<code>*(A + i)</code>\u3002</p> <p>\u200b\u8fd8\u662f\u200b\u4ee5\u200b\u6570\u7ec4\u200b<code>E[i]</code>\u200b\u4e3a\u4f8b\u200b\uff0c\u200b\u4e00\u4e9b\u200b\u6307\u9488\u200b\u7b97\u6570\u200b\u8868\u8fbe\u5f0f\u200b\u7684\u200b\u7ed3\u679c\u200b\u548c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6c47\u7f16\u200b\u6307\u4ee4\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u6700\u540e\u200b\u4e00\u4e2a\u200b\u4f8b\u5b50\u200b\u8868\u660e\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u8ba1\u7b97\u200b\u540c\u4e00\u200b\u6570\u636e\u7ed3\u6784\u200b\u4e2d\u200b\u4e24\u4e2a\u200b\u6307\u9488\u200b\u7684\u200b\u5dee\u503c\u200b\u3002\u200b\u5176\u200b\u7ed3\u679c\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b\u4e3a\u200b<code>long</code>\uff0c \u200b\u503c\u4e3a\u200b\u4e24\u4e2a\u200b\u5730\u5740\u200b\u7684\u200b\u5dee\u503c\u200b\u9664\u4ee5\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u957f\u5ea6\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_28","title":"\u591a\u7ef4\u200b\u6570\u7ec4","text":"<p>\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u53ef\u4ee5\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u4e00\u822c\u200b\u6570\u7ec4\u200b\u7684\u200b\u5f62\u5f0f\u200b\uff0c\u200b\u4f8b\u5982\u200b\u58f0\u660e\u200b<code>int A[5][3]</code>\u200b\u5c31\u200b\u7b49\u6548\u200b\u4e3a\u200b\uff1a</p> <pre><code>typedef int row3_t[3];\nrow3_t A[5];\n</code></pre> <p>\u200b\u6570\u636e\u7c7b\u578b\u200b<code>row3_t</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u4e09\u4e2a\u200b\u6574\u578b\u200b\u7684\u200b\u6570\u7ec4\u200b\uff0c\u200b\u800c\u200b\u6570\u7ec4\u200b<code>A</code>\u200b\u5219\u200b\u5305\u542b\u200b\u4e94\u4e2a\u200b\u8fd9\u6837\u200b\u7684\u200b\u5143\u7d20\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u5176\u200b\u63a8\u5e7f\u200b\u5230\u200b\u4e00\u822c\u200b\u60c5\u51b5\u200b\uff0c\u200b\u82e5\u200b\u4e00\u4e2a\u200b\u6570\u7ec4\u200b\u58f0\u660e\u200b\u4e3a\u200b<code>T D[R][C]</code>\uff0c\u200b\u5219\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b<code>D[i][j]</code>\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\u4e3a\u200b\uff1a</p> \\[\\tag{3.1} \\And D[i][j] = x_D + L(C * i + j)\\] <p>\u200b\u5176\u4e2d\u200b\uff0c\\(x_D\\) \u200b\u4e3a\u200b\u6570\u7ec4\u200b\u5730\u5740\u200b\uff0cL \u200b\u4e3a\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u7684\u200b\u957f\u5ea6\u200b\u3002</p> <p>\u200b\u4e00\u4e2a\u200b 5 X 3 \u200b\u7684\u200b\u6574\u578b\u200b\u6570\u7ec4\u200b<code>A</code>\uff0c\u200b\u5176\u200b\u4efb\u610f\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b <code>A[i][j]</code> \u200b\u7684\u200b\u5730\u5740\u200b\u7528\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7684\u200b\u8868\u793a\u200b\u7ed3\u679c\u200b\u4e3a\u200b\uff1a</p> <pre><code>; A in %rdi, i in % rsi and j in %rdx\n; Compute 3i\nleaq (%rsi, %rsi, 2), %rax\n; Compute A + 12i\nleaq (%rdi, %rax, 4), %rax\n; Read from M[A + 12i + 4j]\nmovl (%rax, %rdx, 4), %rax\n</code></pre>"},{"location":"core/csapp/ch3/#_29","title":"\u5b9a\u200b\u957f\u200b\u6570\u7ec4","text":"<p>\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u4e00\u4e9b\u200b\u64cd\u4f5c\u200b\u5b9a\u200b\u957f\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u7684\u200b\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u4f18\u5316\u200b\u3002\u200b\u4f8b\u5982\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u6267\u884c\u200b\u77e9\u9635\u200b\u8fd0\u7b97\u200b\uff1a</p> <pre><code>#define N 16\ntypedef int fix_matrix[N][N];\n/* Compute i,k of fixed matrix product */\nint fix_prod_ele(fix_matrix A, fix_matrix B, long i, long k)\n{\n    long j;\n    int result = 0;\n    for (j = 0; j &lt; N; j++)\n        result += A[i][j] * B[j][k];\n    return result;\n}\n</code></pre> <p>\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u4f18\u5316\u200b\u4e3a\u200b\u4e0b\u5217\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>#define N 16\ntypedef int fix_matrix[N][N];\n/* Compute i,k of fixed matrix product */\nfix_prod_ele_opt(fix_matrix A, fix_matrix B, long i, long k)\n{\n    int *Aptr = &amp;A[i][0];   /* Points to elements in row i of A    */\n    int *Bptr = &amp;B[0][k];   /* Points to elements in column k of B */\n    int *Bend = &amp;B[N][k];   /* Marks stopping point for Bptr */\n    int result = 0;\n    do\n    {                              /* No need for initial test */\n        result += *Aptr * *Bptr;   /* Add next product to sum */\n        Aptr++;                    /* Move Aptr to next column */\n        Bptr += N;                 /* Move Bptr to next row */\n    } while (Bptr != Bend);        /* Test for stopping point */\n    return result;\n}\n</code></pre> <p>\u200b\u6bd4\u8f83\u200b\u4e24\u8005\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\uff0c\u200b\u4f18\u5316\u200b\u4ee3\u7801\u200b\u6ca1\u6709\u200b\u4f7f\u7528\u200b\u7d22\u5f15\u200b j\uff0c\u200b\u5e76\u200b\u5c06\u200b\u6240\u6709\u200b\u7684\u200b\u6570\u7ec4\u200b\u5f15\u7528\u200b\u90fd\u200b\u8f6c\u6362\u200b\u4e3a\u4e86\u200b\u6307\u9488\u200b\u5f15\u7528\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0c<code>Aptr</code>\u200b\u6307\u5411\u200b\u77e9\u9635\u200b A \u200b\u4e2d\u200b\u7b2c\u200b i \u200b\u884c\u4e2d\u200b\u7684\u200b\u8fde\u7eed\u200b\u5143\u7d20\u200b\uff0c<code>Bptr</code>\u200b\u6307\u5411\u200b\u77e9\u9635\u200b B \u200b\u4e2d\u200b\u7b2c\u200b k \u200b\u5217\u200b \u200b\u4e2d\u200b\u7684\u200b\u8fde\u7eed\u200b\u5143\u7d20\u200b\u3002<code>Bend</code>\u200b\u5219\u200b\u6307\u5411\u200b\u77e9\u9635\u200b B \u200b\u4e2d\u200b\u7b2c\u200b k \u200b\u5217\u4e2d\u200b\u7684\u200b\u7b2c\u200b N + 1 \u200b\u4e2a\u200b\u5143\u7d20\u200b\uff0c\u200b\u5b83\u200b\u5c31\u200b\u7b49\u4e8e\u200b\u5faa\u73af\u200b\u7ed3\u675f\u200b\u65f6\u200b<code>Bptr</code>\u200b\u7684\u200b\u503c\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_30","title":"\u53d8\u200b\u957f\u200b\u6570\u7ec4","text":"<p>C \u200b\u53ea\u200b\u652f\u6301\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u786e\u5b9a\u200b\u957f\u5ea6\u200b\u7684\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b(\u200b\u4e00\u7ef4\u200b\u53ef\u80fd\u200b\u9664\u5916\u200b\uff09\uff0c\u200b\u58f0\u660e\u200b\u53ef\u53d8\u200b\u5927\u5c0f\u200b\u7684\u200b\u6570\u7ec4\u200b\u65f6\u200b\u5fc5\u987b\u200b\u4f7f\u7528\u200b<code>malloc</code>\u200b\u6216\u200b<code>calloc</code>\u200b\u7b49\u200b\u51fd\u6570\u200b\u6765\u200b\u5206\u914d\u200b\u6570\u7ec4\u200b\u7684\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\uff0c\u200b\u5e76\u4e14\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u884c\u4e3b\u200b\u7d22\u5f15\u200b\uff08Row-major Indexing\uff09\u200b\u5c06\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u7684\u200b\u6620\u5c04\u200b\u663e\u5f0f\u200b\u5730\u200b\u7f16\u7801\u200b\u4e3a\u200b\u4e00\u7ef4\u200b\u6570\u7ec4\u200b\uff08\u200b\u5c31\u200b\u50cf\u200b \u200b\u516c\u5f0f\u200b 3.1 \u200b\u505a\u200b\u7684\u200b\u90a3\u6837\u200b\uff09\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u7f16\u5199\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u6765\u200b\u8bbf\u95ee\u200b n \u00d7 n \u200b\u6570\u7ec4\u200b\u7684\u200b\u5143\u7d20\u200b<code>A[i][j]</code>\uff0c\u200b\u5982\u4e0b\u200b\u6240\u793a\u200b\uff1a</p> <pre><code>int var_ele(long n, int A[n][n], long i, long j)\n{\n    return A[i][j];\n}\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>n</code>\u200b\u5fc5\u987b\u200b\u5728\u200b\u53c2\u6570\u200b<code>A[n][n]</code>\u200b\u4e4b\u524d\u200b\uff0c\u200b\u8fd9\u6837\u200b\u51fd\u6570\u200b\u5728\u200b\u5904\u7406\u200b\u6570\u7ec4\u200b\u65f6\u624d\u200b\u80fd\u591f\u200b\u660e\u786e\u200b\u5176\u200b\u7ef4\u5ea6\u200b\u3002\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u7ecf\u200b GCC \u200b\u7f16\u8bd1\u200b\u5f97\u5230\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>; int var_ele(long n, int A[n][n], long i, long j)\n; n in %rdi, A in %rsi, i in %rdx, j in %rcx \nvar_ele:\n  \uff1b Compute n * i\n  imulq %rdx, %rdi\n  ; Compute A + 4(n * i)\n  leaq (%rsi,%rdi,4), %rax\n  ; Read from M[A + 4(n * i) + j]\n  movl (%rax,%rcx,4), %eax\n  ret\n</code></pre> <p>\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b<code>A[i][j]</code>\u200b\u5730\u5740\u200b\u7684\u200b\u8ba1\u7b97\u200b\u65b9\u5f0f\u200b\u4e0e\u200b\u5b9a\u957f\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u5373\u200b \\(x_A + 4(n \\* i) + 4j = x_A + 4(n \\* i + j)\\)\u3002\u200b\u533a\u522b\u200b\u4e4b\u200b\u5904\u200b\u5728\u4e8e\u200b\uff1a</p> <ul> <li>\u200b\u7531\u4e8e\u200b\u6dfb\u52a0\u200b\u4e86\u200b\u53d8\u91cf\u200b<code>n</code>\uff0c\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u4f7f\u7528\u200b\u65b9\u5f0f\u200b\u4e0d\u540c\u200b\uff1b</li> <li>\u200b\u4f7f\u7528\u200b\u4e86\u200b\u4e58\u6cd5\u200b\u6307\u4ee4\u200b<code>imulq</code>\u200b\u800c\u200b\u4e0d\u662f\u200b<code>leaq</code>\u200b\u6765\u200b\u8ba1\u7b97\u200b<code>n * i</code>\uff0c\u200b\u56e0\u6b64\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6027\u80fd\u200b\u5c06\u4f1a\u200b\u4e0b\u964d\u200b\u3002</li> </ul> <p>\u200b\u65e0\u8bba\u200b\u6570\u7ec4\u200b\u7684\u200b\u957f\u5ea6\u200b\u662f\u5426\u200b\u4e3a\u200b\u5e38\u91cf\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u90fd\u200b\u4f1a\u200b\u5bf9\u200b\u64cd\u4f5c\u200b\u591a\u7ef4\u200b\u6570\u7ec4\u200b\u7684\u200b\u4ee3\u7801\u200b\u8fdb\u884c\u200b\u4e00\u5b9a\u200b\u4f18\u5316\u200b\u3002\u200b\u867d\u7136\u200b\u4e8c\u8005\u200b\u5b9e\u73b0\u200b\u7684\u200b\u7ec6\u8282\u200b\u6709\u6240\u200b\u5dee\u5f02\u200b\uff0c\u200b\u4f46\u200b\u5176\u200b\u5b97\u65e8\u200b\u662f\u200b\u4e00\u81f4\u200b\u7684\u200b\uff1a\u200b\u907f\u514d\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b \u200b\u516c\u5f0f\u200b 3.1 \u200b\u800c\u200b\u5bfc\u81f4\u200b\u7684\u200b\u4e58\u6cd5\u200b\u8fd0\u7b97\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_31","title":"\u5f02\u6784\u200b\u6570\u636e\u7ed3\u6784","text":""},{"location":"core/csapp/ch3/#_32","title":"\u7ed3\u6784\u200b\u4f53","text":"<p>\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff08Structure\uff09\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u90e8\u5206\u200b\u90fd\u200b\u5b58\u50a8\u200b\u5728\u200b\u8fde\u7eed\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u4e2d\u200b\uff0c\u200b\u6307\u5411\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u6307\u9488\u200b\u662f\u200b\u5176\u200b\u7b2c\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\u58f0\u660e\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>struct rec\n{\n    int i;\n    int j;\n    int a[2];\n    int *p;\n};\n</code></pre> <p>\u200b\u8be5\u200b\u7ed3\u6784\u200b\u4f53\u200b\u5305\u542b\u200b\u4e86\u200b\u56db\u4e2a\u200b\u5b57\u200b\u6bb5\u200b\uff1a\u200b\u4e24\u4e2a\u200b\u56db\u200b\u5b57\u8282\u200b\u7684\u200b<code>int</code>\u200b\u53d8\u91cf\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u4e24\u200b\u5143\u7d20\u200b\u7684\u200b<code>int</code>\u200b\u578b\u200b\u6570\u7ec4\u200b\u548c\u200b\u4e00\u4e2a\u200b\u516b\u5b57\u200b\u8282\u200b\u7684\u200b<code>int</code>\u200b\u578b\u200b\u6307\u9488\u200b\uff0c\u200b\u5171\u200b\u5360\u7528\u200b 24 \u200b\u5b57\u8282\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\uff1a</p> <p></p> <p>\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5728\u200b\u7ed3\u6784\u200b\u4f53\u200b\u5730\u5740\u200b\u4e0a\u200b\u6dfb\u52a0\u200b\u9002\u5f53\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u6765\u200b\u8bbf\u95ee\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u7684\u200b\u4efb\u610f\u200b\u5b57\u200b\u6bb5\u200b\u3002\u200b\u5047\u8bbe\u200b<code>structure rec *</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b<code>r</code>\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %rdi \u200b\u4e2d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e0b\u5217\u200b\u4ee3\u7801\u200b\u5c06\u200b\u5143\u7d20\u200b<code>r -&gt; i</code>\uff0c\u200b\u5373\u200b<code>(*r).i</code>\uff0c\u200b\u62f7\u8d1d\u5230\u200b<code>r -&gt; j</code>\uff1a</p> <pre><code>movl (%rdi), %eax\nmovl %eax, 4(%rdi)\n</code></pre> <p>\u200b\u540c\u6837\u200b\uff0c\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u8981\u200b\u83b7\u53d6\u200b\u7ed3\u6784\u200b\u4f53\u4e2d\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b<code>rec.a[i]</code>\u200b\u7684\u200b\u5730\u5740\u200b<code>&amp;(r -&gt; a[i])</code>\uff0c\u200b\u53ea\u200b\u9700\u200b\uff1a</p> <pre><code>; r in %rdi, i in %rdi\nleaq 8(%rdi, %rsi, 4), %rax\n</code></pre> <p>\u200b\u5982\u200b\u4e0a\u8ff0\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u5bf9\u200b\u7ed3\u6784\u200b\u4f53\u5b57\u200b\u6bb5\u200b\u7684\u200b\u9009\u62e9\u200b\u662f\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u5b8c\u6210\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u4e0d\u200b\u542b\u6709\u200b\u4efb\u4f55\u200b\u6709\u5173\u200b\u5b57\u200b\u6bb5\u200b\u58f0\u660e\u200b\u6216\u200b\u5b57\u6bb5\u540d\u200b\u79f0\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_33","title":"\u8054\u5408\u4f53","text":"<p>\u200b\u8054\u5408\u4f53\u200b\uff08Unions\uff09\u200b\u7684\u200b\u58f0\u660e\u200b\u548c\u200b\u8bed\u6cd5\u200b\u4e0e\u200b\u7ed3\u6784\u200b\u4f53\u200b\u76f8\u540c\u200b\uff0c\u200b\u4f46\u200b\u5176\u200b\u4e0d\u540c\u200b\u5b57\u6bb5\u200b\u5747\u200b\u5f15\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u3002\u200b\u4f8b\u5982\u200b\u4e00\u4e2a\u200b\u7ed3\u6784\u200b\u4f53\u200b\u548c\u200b\u4e00\u4e2a\u200b\u8054\u5408\u4f53\u200b\u7684\u200b\u58f0\u660e\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>struct S3\n{\n    char c;\n    int i[2];\n    double v;\n};\nunion U3\n{\n    char c;\n    int i[2];\n    double v;\n};\n</code></pre> <p>\u200b\u90a3\u4e48\u200b<code>S3</code>\u200b\u548c\u200b<code>U3</code>\u200b\u5404\u4e2a\u200b\u5b57\u6bb5\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u548c\u200b\u603b\u200b\u6570\u636e\u200b\u957f\u5ea6\u200b\u4e3a\u200b\uff1a</p> Type c i v Size S3 0 4 16 24 U3 0 0 0 8 <p>\u200b\u5bf9\u4e8e\u200b\u7c7b\u578b\u200b\u4e3a\u200b<code>union U3 *</code>\u200b\u7684\u200b\u6307\u9488\u200b<code>p</code>\uff0c\u200b\u8868\u8fbe\u5f0f\u200b<code>p -&gt; c</code>\uff0c<code>p -&gt; i[0]</code>\u200b\u548c\u200b<code>p -&gt; v</code>\u200b\u90fd\u200b\u5c06\u200b\u5f15\u7528\u200b\u8054\u5408\u4f53\u200b\u7684\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\u3002\u200b\u8054\u5408\u4f53\u200b\u7684\u200b\u957f\u5ea6\u200b\u7b49\u4e8e\u200b\u5176\u200b\u6240\u6709\u200b\u5b57\u6bb5\u200b\u4e2d\u200b\u6700\u5927\u200b\u7684\u200b\u6570\u636e\u200b\u957f\u5ea6\u200b\uff0c\u200b\u800c\u200b\u7ed3\u6784\u200b\u4f53\u5219\u200b\u7b49\u4e8e\u200b\u5176\u200b\u6240\u6709\u200b\u5b57\u200b\u6bb5\u957f\u5ea6\u200b\u7684\u200b\u548c\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u5728\u200b\u4e0b\u200b\u4e00\u8282\u200b \u200b\u6570\u636e\u200b\u5bf9\u9f50\u200b \u200b\u4e2d\u200b\u4ecb\u7ecd\u200b\u4e3a\u4ec0\u4e48\u200b<code>i</code>\u200b\u5728\u200b<code>S3</code>\u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u662f\u200b 4 \u200b\u800c\u200b\u4e0d\u662f\u200b 1\uff0c\u200b\u4ee5\u53ca\u200b<code>v</code>\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u662f\u200b 16\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b 9 \u200b\u6216\u200b 12\u3002</p> <p>\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u6570\u636e\u7ed3\u6784\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u5b57\u6bb5\u200b\u662f\u200b\u4e92\u65a5\u200b\uff08Mutually Exclusive\uff09\u200b\u7684\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u8054\u5408\u4f53\u200b\u6765\u200b\u51cf\u5c11\u200b\u7a7a\u95f4\u200b\u6d6a\u8d39\u200b\u3002\u200b\u5047\u5982\u200b\u5b58\u5728\u200b\u4e00\u4e2a\u200b\u4e8c\u53c9\u6811\u200b\uff0c\u200b\u5176\u200b\u6bcf\u4e2a\u200b\u53f6\u200b\u8282\u70b9\u200b\uff08Leaf node\uff09\u200b\u90fd\u200b\u6709\u200b\u4e24\u4e2a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u6d6e\u70b9\u200b\u503c\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5185\u90e8\u200b\u8282\u70b9\u200b\uff08Internal node\uff09\u200b\u90fd\u200b\u6709\u200b\u4e24\u4e2a\u200b\u6307\u5411\u200b\u5b50\u200b\u8282\u70b9\u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u90a3\u4e48\u200b\u4f7f\u7528\u200b\u7ed3\u6784\u200b\u4f53\u200b\u5b9e\u73b0\u200b\u8be5\u200b\u6570\u636e\u7ed3\u6784\u200b\u7684\u200b\u4ee3\u7801\u200b\u4e3a\u200b\uff1a</p> <pre><code>struct node_s\n{\n    // for internal node\n    struct node_s *left;\n    struct node_s *right;\n    // for leaf node\n    double data[2];\n};\n</code></pre> <p>\u200b\u8fd9\u6837\u200b\u6bcf\u4e2a\u200b\u8282\u70b9\u200b\u90fd\u200b\u9700\u8981\u200b\u5360\u7528\u200b 32 \u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u5176\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u534a\u200b\u4f1a\u200b\u88ab\u200b\u8282\u70b9\u200b\u771f\u6b63\u200b\u4f7f\u7528\u200b\u3002\u200b\u800c\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u8054\u5408\u4f53\u200b\u6765\u200b\u5b9e\u73b0\u200b\uff1a</p> <pre><code>union node_u\n{\n    struct\n    {\n        union node_u *left;\n        union node_u *right;\n    } internal;\n    double data[2];\n};\n</code></pre> <p>\u200b\u5219\u200b\u6bcf\u4e2a\u200b\u8282\u70b9\u200b\u5c31\u200b\u53ea\u200b\u9700\u200b\u5360\u7528\u200b 16 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u7c7b\u578b\u200b\u4e3a\u200b<code>union node_u *</code>\u200b\u7684\u200b\u6307\u9488\u200b<code>n</code>\uff0c\u200b\u53f6\u200b\u8282\u70b9\u200b\u53ef\u4ee5\u200b\u7528\u200b<code>n -&gt; data[0]</code>\u200b\u548c\u200b<code>n -&gt; data[1]</code>\u200b\u6765\u200b\u8868\u793a\u200b\uff0c\u200b\u800c\u200b\u5185\u90e8\u200b\u8282\u70b9\u200b\u6307\u5411\u200b\u7684\u200b\u5b50\u200b\u8282\u70b9\u200b\u53ef\u4ee5\u200b\u7528\u200b<code>n -&gt; internal.left</code>\u200b\u548c\u200b<code>n -&gt; internal.right</code>\u200b\u6765\u200b\u8868\u793a\u200b\u3002</p> <p>\u200b\u8054\u5408\u4f53\u200b\u8fd8\u200b\u53ef\u200b\u7528\u4e8e\u200b\u8bbf\u95ee\u200b\u4e0d\u540c\u200b\u6570\u636e\u7c7b\u578b\u200b\u7684\u200b\u4f4d\u200b\u6a21\u5f0f\u200b\u3002\u200b\u5047\u8bbe\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u5c06\u200b\u4e00\u4e2a\u200b<code>double</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b\u5f3a\u5236\u200b\u8f6c\u6362\u200b\u4e3a\u200b<code>unsigned long</code>\uff0c\u200b\u5219\u200b\u53ef\u4ee5\u200b\u7528\u200b\u4ee5\u4e0b\u200b\u65b9\u6cd5\u200b\u5b9e\u73b0\u200b\uff1a</p> <pre><code>unsigned long double2bits(double d)\n{\n    union\n    {\n        double d;\n        unsigned long u;\n    } temp;\n    temp.d = d;\n    return temp.u;\n};\n</code></pre> <p>\u200b\u8be5\u200b\u4ee3\u7801\u200b\u5c06\u200b\u4e24\u79cd\u200b\u6570\u636e\u7c7b\u578b\u200b\u5747\u200b\u5b58\u50a8\u200b\u5728\u200b\u8054\u5408\u4f53\u200b<code>temp</code>\u200b\u4e2d\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u6709\u7740\u200b\u76f8\u540c\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8868\u8fbe\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_34","title":"\u6570\u636e\u200b\u5bf9\u9f50","text":"<p>\u200b\u8bb8\u591a\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u8981\u6c42\u200b\u7a0b\u5e8f\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5730\u5740\u200b\u5fc5\u987b\u200b\u662f\u200b\u67d0\u4e2a\u200b\u503c\u200b\uff08\u200b\u901a\u5e38\u200b\u4e3a\u200b 2\uff0c4 \u200b\u6216\u200b 8\uff09\u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u5176\u200b\u76ee\u7684\u200b\u662f\u200b\u7b80\u5316\u200b\u5904\u7406\u5668\u200b\u548c\u200b\u5185\u5b58\u200b\u7cfb\u7edf\u200b\u4e4b\u95f4\u200b\u7684\u200b\u786c\u4ef6\u200b\u63a5\u53e3\u200b\u8bbe\u8ba1\u200b\u3002\u200b\u5047\u8bbe\u200b\u4e00\u4e2a\u200b\u5904\u7406\u5668\u200b\u6bcf\u6b21\u200b\u90fd\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c\u200b\u800c\u200b\u4e00\u4e2a\u200b<code>double</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u6570\u636e\u200b\u5730\u5740\u200b\u4e3a\u200b 8 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u4e00\u6b21\u200b\u5185\u5b58\u200b\u8bbf\u95ee\u200b\u64cd\u4f5c\u200b\u8bfb\u53d6\u200b\u6216\u200b\u5199\u5165\u200b\u3002\u200b\u5426\u5219\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u88ab\u200b\u62c6\u200b\u5206\u4e3a\u200b\u4e24\u4e2a\u200b 8 \u200b\u5b57\u8282\u200b\u7684\u200b\u5185\u5b58\u200b\u5757\u200b\uff0c\u200b\u5bfc\u81f4\u200b\u5904\u7406\u5668\u200b\u64cd\u4f5c\u200b\u6b21\u6570\u200b\u7684\u200b\u589e\u52a0\u200b\u3002</p> <p>\u200b\u65e0\u8bba\u200b\u6570\u636e\u200b\u5bf9\u9f50\u200b\u662f\u5426\u200b\u5b9e\u73b0\u200b\uff0cx86-64 \u200b\u7684\u200b\u786c\u4ef6\u200b\u90fd\u200b\u5c06\u200b\u6b63\u5e38\u200b\u5de5\u4f5c\u200b\u3002\u200b\u4f46\u662f\u200b Intel \u200b\u5efa\u8bae\u200b\u5bf9\u9f50\u200b\u6570\u636e\u200b\u4ee5\u200b\u63d0\u9ad8\u200b\u5185\u5b58\u200b\u7cfb\u7edf\u200b\u6027\u80fd\u200b\uff0c\u200b\u5176\u200b\u89c4\u5219\u200b\u4e3a\u200b\uff1a\u200b\u4efb\u4f55\u200b K \u200b\u5b57\u8282\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5730\u5740\u200b\u5fc5\u987b\u200b\u4e3a\u200b K \u200b\u7684\u200b\u500d\u6570\u200b\uff1a</p> K Types 1 char 2 short 4 int, float 8 long, double, char * <p>\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u5728\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u653e\u7f6e\u200b\u6307\u4ee4\u200b\uff0c\u200b\u6307\u793a\u200b\u5168\u5c40\u200b\u6570\u636e\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5bf9\u9f50\u200b\u65b9\u5f0f\u200b\u3002\u200b\u6bd4\u5982\u200b\u6211\u4eec\u200b\u5728\u200b\u4ecb\u7ecd\u200b\u8df3\u8f6c\u200b\u8868\u65f6\u200b\uff0c\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b<code>.align 8</code>\u200b\u5c31\u200b\u4ee3\u8868\u200b\u8be5\u200b\u6307\u4ee4\u200b\u540e\u9762\u200b\u7684\u200b\u6570\u636e\u200b\u5730\u5740\u200b\u5747\u200b\u4e3a\u200b 8 \u200b\u7684\u200b\u500d\u6570\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u6d89\u53ca\u200b\u5230\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u80fd\u200b\u8fd8\u200b\u9700\u8981\u200b\u5728\u200b\u5b57\u200b\u6bb5\u200b\u5206\u914d\u200b\u7a7a\u95f4\u200b\u65f6\u200b\u63d2\u5165\u200b\u95f4\u9699\u200b\u4ee5\u200b\u5b9e\u73b0\u200b\u6570\u636e\u200b\u5bf9\u9f50\u200b\u3002\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7ed3\u6784\u200b\u4f53\u200b\u7684\u200b\u58f0\u660e\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>struct S1\n{\n    int i;\n    char c;\n    int j;\n};\n</code></pre> <p>\u200b\u7f16\u8bd1\u5668\u200b\u5b9e\u9645\u200b\u4e3a\u200b\u5176\u200b\u5206\u914d\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u4e3a\u200b\uff1a</p> <p></p> <p>\u200b\u5373\u7136\u200b\u5404\u5b57\u200b\u6bb5\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u5747\u200b\u4e3a\u200b 4 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u90a3\u4e48\u200b\u53ea\u8981\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\u4e5f\u200b\u4e3a\u200b 4 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u8be5\u200b\u7ed3\u6784\u200b\u4f53\u4fbf\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u6570\u636e\u200b\u5bf9\u9f50\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_35","title":"\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u63a7\u5236\u200b\u548c\u200b\u6570\u636e\u200b\u7684\u200b\u7ec4\u5408","text":""},{"location":"core/csapp/ch3/#_36","title":"\u7406\u89e3\u200b\u6307\u9488","text":"<ul> <li>\u200b\u6307\u9488\u200b\u4e0d\u662f\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u800c\u662f\u200b C \u200b\u63d0\u4f9b\u200b\u7684\u200b\u4e00\u79cd\u200b\u7528\u6765\u200b\u5e2e\u52a9\u200b\u7a0b\u5e8f\u5458\u200b\u907f\u514d\u200b\u5bfb\u5740\u200b\u9519\u8bef\u200b\u7684\u200b\u62bd\u8c61\u200b\uff1b</li> <li>\u200b\u6bcf\u4e2a\u200b\u6307\u9488\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5173\u8054\u200b\u7684\u200b\u7c7b\u578b\u200b\u3002\u200b\u7279\u6b8a\u200b\u7684\u200b\u6307\u9488\u200b\u7c7b\u578b\u200b<code>void *</code>\u200b\u4ee3\u8868\u200b\u901a\u7528\u200b\uff08\u200b\u8303\u578b\u200b\uff09\u200b\u6307\u9488\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u663e\u5f0f\u200b\u6216\u200b\u9690\u5f0f\u200b\u5730\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u6709\u200b\u5173\u8054\u200b\u7c7b\u578b\u200b\u7684\u200b\u6307\u9488\u200b\uff1b</li> <li>\u200b\u6bcf\u4e2a\u200b\u6307\u9488\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u503c\u200b\uff0c\u200b\u5176\u503c\u200b\u4e3a\u200b\u6307\u5b9a\u200b\u7c7b\u578b\u200b\u7684\u200b\u67d0\u4e2a\u200b\u5bf9\u8c61\u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u82e5\u200b\u6307\u9488\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b<code>NULL</code>(0)\uff0c\u200b\u5219\u200b\u4ee3\u8868\u200b\u5b83\u200b\u6ca1\u6709\u200b\u6307\u5411\u200b\u4efb\u4f55\u200b\u5730\u65b9\u200b\uff1b</li> <li>\u200b\u6307\u9488\u200b\u662f\u200b\u64cd\u4f5c\u7b26\u200b<code>&amp;</code>\u200b\u521b\u5efa\u200b\u7684\u200b\uff0c\u200b\u5728\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u5e38\u7528\u200b<code>leaq</code>\u200b\u6307\u4ee4\u200b\u5b9e\u73b0\u200b\uff1b</li> <li>\u200b\u4f7f\u7528\u200b\u64cd\u4f5c\u7b26\u200b<code>*</code>\u200b\u6765\u200b\u5bf9\u200b\u6307\u9488\u200b\u89e3\u200b\u5f15\u7528\u200b\uff1b</li> <li>\u200b\u6570\u7ec4\u200b\u548c\u200b\u6307\u9488\u200b\u4e4b\u95f4\u200b\u5173\u7cfb\u5bc6\u5207\u200b\uff1b</li> <li>\u200b\u6307\u9488\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5f3a\u5236\u200b\u7c7b\u578b\u8f6c\u6362\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u4f1a\u200b\u6539\u53d8\u200b\u5176\u503c\u200b\uff1b</li> <li>\u200b\u6307\u9488\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u6307\u5411\u200b\u51fd\u6570\u200b\uff0c\u200b\u4f7f\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5176\u4ed6\u200b\u5730\u65b9\u200b\u8c03\u7528\u200b\u4ee3\u7801\u200b\uff0c\u200b\u5176\u503c\u200b\u4e3a\u200b\u51fd\u6570\u200b\u7684\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7b2c\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u3002</li> </ul> <p>\u200b\u4f8b\u5982\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u7684\u200b\u539f\u578b\u200b\u4e3a\u200b\uff1a</p> <pre><code>int fun(int x, int *p);\n</code></pre> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u58f0\u660e\u200b\u4e00\u4e2a\u200b\u6307\u9488\u200b\u6765\u200b\u6307\u5411\u200b\u5b83\u200b\uff1a</p> <pre><code>int (*fp)(int, int *)\nfp = fun;\n</code></pre> <p>\u200b\u8fd9\u6837\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u6307\u9488\u200b\u6765\u200b\u8c03\u7528\u200b\u8be5\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>int y =1;\nint result = fp(3, &amp;y);\n</code></pre>"},{"location":"core/csapp/ch3/#_37","title":"\u5185\u5b58\u200b\u5f15\u7528\u200b\u8d8a\u754c\u200b\u548c\u200b\u7f13\u51b2\u533a\u200b\u6ea2\u51fa","text":"<p>C \u200b\u4e0d\u4f1a\u200b\u5bf9\u200b\u6570\u7ec4\u200b\u5f15\u7528\u200b\u505a\u200b\u4efb\u4f55\u200b\u7684\u200b\u8fb9\u754c\u200b\u68c0\u67e5\u200b\uff0c\u200b\u8fd9\u200b\u53ef\u80fd\u200b\u5bfc\u81f4\u200b\u5b58\u50a8\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u56e0\u200b\u5199\u5165\u200b\u8d8a\u754c\u200b\uff08Out-of-Bounds\uff09\u200b\u7684\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u800c\u200b\u635f\u574f\u200b\u3002\u200b\u5982\u679c\u200b\u7a0b\u5e8f\u200b\u968f\u540e\u200b\u4ee5\u200b\u8fd9\u79cd\u200b\u72b6\u6001\u200b\u91cd\u65b0\u200b\u52a0\u8f7d\u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u6267\u884c\u200b<code>ret</code>\u200b\u6307\u4ee4\u200b\uff0c\u200b\u4e8b\u60c5\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d8\u5f97\u200b\u5341\u5206\u200b\u4e25\u91cd\u200b\u3002</p> <p>\u200b\u4e00\u79cd\u200b\u5e38\u89c1\u200b\u7684\u200b\u72b6\u6001\u200b\u635f\u574f\u200b\u539f\u56e0\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7f13\u5b58\u200b\u533a\u200b\u6ea2\u51fa\u200b\uff08Buffer Overflow\uff09\uff0c\u200b\u6bd4\u8f83\u200b\u5178\u578b\u200b\u7684\u200b\u4f8b\u5b50\u200b\u662f\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u957f\u5ea6\u200b\u8d85\u8fc7\u200b\u4e86\u200b\u6808\u200b\u4e2d\u200b\u4e3a\u200b\u5176\u200b\u5206\u914d\u200b\u7684\u200b\u5b57\u7b26\u200b\u6570\u7ec4\u200b\u7a7a\u95f4\u200b\uff1a</p> <pre><code>/* Implementation of library function gets() */\nchar *gets(char *s)\n{\n    int c;\n    char *dest = s;\n    while ((c = getchar()) != '\\n' &amp;&amp; c != EOF)\n        *dest++ = c;\n    if (c == EOF &amp;&amp; dest == s)\n        /* No characters read */\n        return NULL;\n    *dest++ = '\\0'; /* Terminate string */\n    return s;\n}\n/* Read input line and write it back */\nvoid echo()\n{\n    char buf[8]; /* Way too small! */\n    gets(buf);\n    puts(buf);\n}\n</code></pre> <p>\u200b\u4e0a\u534a\u200b\u90e8\u5206\u200b\u4ee3\u7801\u200b\u5c55\u793a\u200b\u4e86\u200b\u5e93\u51fd\u6570\u200b<code>gets</code>\u200b\u7684\u200b\u5b9e\u73b0\u200b\u8fc7\u7a0b\u200b\uff1a\u200b\u5b83\u200b\u9996\u5148\u200b\u4ece\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e00\u884c\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5f53\u200b\u9047\u5230\u200b\u6362\u884c\u7b26\u200b\u6216\u200b\u67d0\u4e9b\u200b\u9519\u8bef\u200b\u6761\u4ef6\u200b\u65f6\u200b\u505c\u6b62\u200b\uff1b\u200b\u7136\u540e\u200b\u5b83\u200b\u5c06\u200b\u8bfb\u53d6\u200b\u5185\u5bb9\u200b\u590d\u5236\u5230\u200b\u53c2\u6570\u200b<code>s</code>\u200b\u6307\u5411\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u4e0a\u200b\uff0c\u200b\u5e76\u200b\u4ee5\u200b\u5b57\u7b26\u200b<code>NULL</code>\u200b\u7ed3\u5c3e\u200b\u3002<code>gets</code>\u200b\u7684\u200b\u95ee\u9898\u200b\u5728\u4e8e\u200b\u5176\u200b\u65e0\u6cd5\u200b\u786e\u5b9a\u200b\u662f\u5426\u200b\u5206\u914d\u200b\u4e86\u200b\u8db3\u591f\u200b\u7684\u200b\u7a7a\u95f4\u200b\u6765\u200b\u4fdd\u5b58\u200b\u8bfb\u53d6\u200b\u5230\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u3002\u200b\u800c\u200b\u5728\u200b\u4e0b\u200b\u534a\u200b\u90e8\u5206\u200b\u7684\u200b\u51fd\u6570\u200b<code>echo</code>\u200b\u4e2d\u200b\uff0c\u200b\u6211\u4eec\u200b\u6545\u610f\u200b\u5c06\u200b\u7f13\u51b2\u533a\u200b\u505a\u200b\u5f97\u200b\u975e\u5e38\u200b\u5c0f\u200b\uff08\u200b\u53ea\u6709\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff09\uff0c\u200b\u56e0\u6b64\u200b\u4efb\u4f55\u200b\u8d85\u8fc7\u200b 7 \u200b\u4e2a\u5b57\u7b26\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u90fd\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8d8a\u754c\u200b\u5199\u5165\u200b\u3002\u200b\u968f\u7740\u200b\u5b57\u7b26\u4e32\u200b\u957f\u5ea6\u200b\u7684\u200b\u589e\u52a0\u200b\uff0c\u200b\u53d7\u5230\u200b\u5f71\u54cd\u200b\u7684\u200b\u6808\u200b\u533a\u57df\u200b\u4f1a\u200b\u8d8a\u6765\u8d8a\u200b\u591a\u200b\uff1a</p> Character Typed Additional Corrupted State 0-7 None 8-23 Unused Stack Space 24-31 Return Address 32+ Saved State in Caller <p>\u200b\u7f16\u8bd1\u5668\u200b\u4e3a\u200b\u51fd\u6570\u200b<code>echo</code>\u200b\u5206\u914d\u200b\u4e86\u200b 24 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8bfb\u53d6\u200b\u5c11\u4e8e\u200b 23 \u200b\u4e2a\u5b57\u7b26\u200b\u7684\u200b\u5185\u5bb9\u200b\u4e0d\u4f1a\u200b\u53d1\u751f\u200b\u4e25\u91cd\u540e\u679c\u200b\u3002\u200b\u4f46\u200b\u4e00\u65e6\u200b\u8d85\u51fa\u200b\u8fd9\u4e2a\u200b\u8303\u56f4\u200b\uff0c\u200b\u8fd4\u56de\u200b\u6307\u9488\u200b\u7684\u200b\u503c\u200b\u548c\u200b\u5176\u4ed6\u200b\u4fdd\u5b58\u200b\u7684\u200b\u72b6\u6001\u200b\u5c31\u200b\u4f1a\u200b\u88ab\u200b\u7834\u574f\u200b\uff0c<code>ret</code>\u200b\u6307\u4ee4\u200b\u5c06\u200b\u5bfc\u81f4\u200b\u7a0b\u5e8f\u200b\u8df3\u8f6c\u200b\u5230\u200b\u4e00\u4e2a\u200b\u5b8c\u5168\u200b\u4e0d\u53ef\u200b\u9884\u77e5\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_38","title":"\u963b\u6b62\u200b\u7f13\u51b2\u533a\u200b\u6ea2\u51fa\u200b\u653b\u51fb","text":"<p>\u200b\u7f13\u51b2\u533a\u200b\u6ea2\u51fa\u200b\u751a\u81f3\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u8ba1\u7b97\u673a\u200b\u53d7\u5230\u200b\u7f51\u7edc\u653b\u51fb\u200b\uff0c\u200b\u5371\u5bb3\u200b\u7cfb\u7edf\u5b89\u5168\u200b\u3002\u200b\u53d7\u5230\u200b\u653b\u51fb\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u4f1a\u200b\u63a5\u53d7\u200b\u4e00\u4e2a\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5305\u542b\u200b\u4e00\u4e9b\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u7684\u200b\u5b57\u8282\u200b\u7f16\u7801\u200b\uff08\u200b\u4e5f\u200b\u79f0\u200b\u6f0f\u6d1e\u200b\u5229\u7528\u200b\u4ee3\u7801\u200b\uff09\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u4e9b\u200b\u989d\u5916\u200b\u5b57\u8282\u200b\u3002\u200b\u53ea\u8981\u200b\u989d\u5916\u200b\u5b57\u8282\u200b\u80fd\u591f\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u8986\u76d6\u200b\u4e3a\u200b\u6307\u5411\u200b\u6f0f\u6d1e\u200b\u5229\u7528\u200b\u4ee3\u7801\u200b\u7684\u200b\u6307\u9488\u200b\uff0c\u200b\u7a0b\u5e8f\u6267\u884c\u200b<code>ret</code>\u200b\u6307\u4ee4\u200b\u65f6\u200b\u5c31\u200b\u4f1a\u200b\u8df3\u8f6c\u200b\u5230\u200b\u6f0f\u6d1e\u200b\u5229\u7528\u200b\u4ee3\u7801\u200b\u3002\u200b\u73b0\u4ee3\u200b\u7f16\u8bd1\u5668\u200b\u548c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5df2\u7ecf\u200b\u5f00\u59cb\u200b\u5f15\u5165\u200b\u4e00\u4e9b\u200b\u673a\u5236\u200b\u6765\u200b\u62b5\u5fa1\u200b\u8fd9\u79cd\u200b\u653b\u51fb\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_39","title":"\u968f\u673a\u5316\u200b\u6808","text":"<p>\u200b\u53ea\u8981\u200b\u6211\u4eec\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u5f00\u59cb\u8fd0\u884c\u200b\u65f6\u200b\u5728\u200b\u6808\u200b\u4e0a\u200b\u5206\u914d\u200b 0 \u200b\u5230\u200b n \u200b\u4e2a\u200b\u5b57\u8282\u200b\u4e4b\u95f4\u200b\u7684\u200b\u968f\u673a\u200b\u7a7a\u95f4\u200b\uff08\u200b\u4f8b\u5982\u200b\u4f7f\u7528\u200b\u5206\u914d\u200b\u51fd\u6570\u200b<code>alloca</code>\uff09\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u8ba9\u200b\u76f8\u540c\u200b\u7684\u200b\u4ee3\u7801\u200b\u5728\u200b\u591a\u6b21\u200b\u8fd0\u884c\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u4e0d\u540c\u200b\u7684\u200b\u6808\u200b\u5730\u5740\u200b\u3002\u200b\u5206\u914d\u200b\u7684\u200b\u7a7a\u95f4\u200b\u8303\u56f4\u200b n \u200b\u9700\u8981\u200b\u8db3\u591f\u200b\u5927\u200b\uff0c\u200b\u4ee5\u4fbf\u200b\u6808\u200b\u5730\u5740\u200b\u80fd\u591f\u200b\u53d1\u751f\u200b\u8db3\u591f\u200b\u7684\u200b\u53d8\u5316\u200b\u3002\u200b\u4f46\u200b\u53c8\u200b\u8981\u200b\u8db3\u591f\u200b\u5c0f\u200b\uff0c\u200b\u5426\u5219\u200b\u7a0b\u5e8f\u200b\u5c06\u200b\u6d6a\u8d39\u200b\u592a\u591a\u200b\u7684\u200b\u5185\u5b58\u7a7a\u95f4\u200b\u3002</p> <p>\u200b\u4e0d\u8fc7\u200b\u653b\u51fb\u8005\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5b9e\u9645\u200b\u7684\u200b\u6f0f\u6d1e\u200b\u5229\u7528\u200b\u4ee3\u7801\u200b\u524d\u200b\u52a0\u5165\u200b\u4e00\u957f\u4e32\u200b\u7684\u200b<code>nop</code>\u200b\u6307\u4ee4\u200b\uff0c\u200b\u4ece\u800c\u200b\u66b4\u529b\u200b\u653b\u514b\u200b\u968f\u673a\u5316\u200b\u6808\u200b\u3002\u200b\u56e0\u6b64\u200b\u968f\u673a\u5316\u200b\u6808\u200b\u53ef\u4ee5\u200b\u589e\u52a0\u200b\u6210\u529f\u200b\u653b\u51fb\u200b\u7cfb\u7edf\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5de5\u4f5c\u91cf\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u80fd\u200b\u63d0\u4f9b\u200b\u53ef\u9760\u200b\u5b8c\u5584\u200b\u7684\u200b\u4fdd\u969c\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_40","title":"\u6808\u200b\u635f\u574f\u200b\u68c0\u6d4b","text":"<p>\u200b\u6211\u4eec\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u5c40\u90e8\u200b\u7f13\u51b2\u533a\u200b\u548c\u200b\u6808\u200b\u7684\u200b\u5269\u4f59\u200b\u90e8\u5206\u200b\u4e4b\u95f4\u200b\u63d2\u5165\u200b\u4e00\u4e2a\u200b\u91d1\u4e1d\u96c0\u200b\u503c\u200b\uff08Canary\uff09\u200b\u6765\u200b\u68c0\u6d4b\u200b\u6808\u200b\u662f\u5426\u200b\u635f\u574f\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch3/#_41","title":"\u9650\u5236\u200b\u53ef\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u533a\u57df","text":"<p>\u200b\u6700\u540e\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u9650\u5236\u200b\u53ea\u6709\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u7f16\u8bd1\u5668\u200b\u751f\u6210\u200b\u7684\u200b\u4ee3\u7801\u200b\u7684\u200b\u90a3\u200b\u90e8\u5206\u200b\u5185\u5b58\u200b\u533a\u57df\u200b\u662f\u200b\u53ef\u200b\u6267\u884c\u200b\u7684\u200b\uff0c\u200b\u5176\u4ed6\u200b\u90e8\u5206\u200b\u88ab\u200b\u9650\u5236\u200b\u4e3a\u200b\u53ea\u8bfb\u200b\u6216\u200b\u53ea\u200b\u5199\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_42","title":"\u652f\u6301\u200b\u53ef\u53d8\u200b\u5927\u5c0f\u200b\u7684\u200b\u6808\u200b\u5e27","text":"<p>\u200b\u5728\u200b\u4e4b\u524d\u200b\u6211\u4eec\u200b\u4ecb\u7ecd\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e2d\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4e3a\u200b\u7a0b\u5e8f\u200b\u5206\u914d\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u5927\u5c0f\u200b\u90fd\u200b\u662f\u200b\u786e\u5b9a\u200b\u7684\u200b\u3002\u200b\u800c\u200b\u6709\u4e9b\u200b\u7a0b\u5e8f\u200b\u5219\u200b\u9700\u8981\u200b\u5927\u5c0f\u200b\u53ef\u53d8\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</p> <pre><code>long vframe(long n, long idx, long *q)\n{\n    long i;\n    long *p[n];\n    p[0] = &amp;i;\n    for (i = 1; i &lt; n; i++)\n        p[i] = q;\n    return *p[idx];\n}\n</code></pre> <p>\u200b\u51fd\u6570\u200b<code>vframe</code>\u200b\u58f0\u660e\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u53d8\u957f\u200b\u7684\u200b\u6307\u9488\u200b\u6570\u7ec4\u200b<code>*p[n]</code>\uff0c\u200b\u5c06\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\u5360\u7528\u200b<code>8n</code>\u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\u3002\u200b\u7531\u4e8e\u200b<code>n</code>\u200b\u7684\u200b\u503c\u200b\u662f\u200b\u7531\u200b\u51fd\u6570\u200b\u7b2c\u4e00\u4e2a\u200b\u53c2\u6570\u200b\u7ed9\u51fa\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7f16\u8bd1\u5668\u200b\u65e0\u6cd5\u200b\u786e\u5b9a\u200b\u8981\u200b\u4e3a\u200b\u8be5\u200b\u51fd\u6570\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u5206\u914d\u200b\u591a\u5c11\u200b\u7a7a\u95f4\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u6d89\u53ca\u200b\u4e86\u200b\u5bf9\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>i</code>\u200b\u5730\u5740\u200b\u7684\u200b\u5f15\u7528\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8be5\u200b\u53d8\u91cf\u200b\u5fc5\u987b\u200b\u5b58\u50a8\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\u3002\u200b\u5f53\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u9700\u8981\u200b\u88ab\u200b\u56de\u6536\u200b\uff0c\u200b\u6808\u200b\u6307\u9488\u200b\u5c06\u200b\u6307\u5411\u200b\u5b58\u50a8\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p> <p>\u200b\u4e3a\u4e86\u200b\u7ba1\u7406\u200b\u53ef\u53d8\u200b\u5927\u5c0f\u200b\u7684\u200b\u6808\u200b\u5e27\u200b\uff0cx86-64 \u200b\u4f7f\u7528\u200b\u5bc4\u5b58\u5668\u200b %rbp \u200b\u4f5c\u4e3a\u200b\u5e27\u200b\u6307\u9488\u200b\uff08\u200b\u53c8\u79f0\u200b\u57fa\u200b\u6307\u9488\u200b\uff0cBase Pointer\uff09\u3002\u200b\u6808\u5e27\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c%rbp \u200b\u662f\u200b\u4e00\u4e2a\u200b \u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u4fdd\u5b58\u200b\u5bc4\u5b58\u5668\u200b \uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u539f\u503c\u200b\u5c06\u200b\u88ab\u200b\u4fdd\u5b58\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cSaved %rbp\u201d\uff09\u3002\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6267\u884c\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c%rbp \u200b\u4f1a\u200b\u4e00\u76f4\u200b\u6307\u5411\u200b\u8fd9\u4e2a\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u4e00\u4e9b\u200b\u56fa\u5b9a\u200b\u957f\u5ea6\u200b\u7684\u200b\u5c40\u90e8\u53d8\u91cf\u200b\uff0c\u200b\u6bd4\u5982\u200b<code>i</code>\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u5176\u200b\u76f8\u5bf9\u200b\u4e8e\u200b %rbp \u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u6765\u200b\u5f15\u7528\u200b\u3002\u200b\u51fd\u6570\u200b\u7f16\u8bd1\u200b\u540e\u200b\u751f\u6210\u200b\u7684\u200b\u90e8\u5206\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u5982\u4e0b\u200b\uff1a</p> <p></p> <p>\u200b\u51fd\u6570\u200b\u9996\u5148\u200b\u5c06\u200b %rbp \u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u7f6e\u200b\u4e3a\u200b\u5f53\u524d\u200b\u8fd0\u884c\u200b\u65f6\u6808\u200b\u7684\u200b\u5730\u5740\u200b\uff08\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7b2c\u200b 2 \u200b\u5230\u200b 3 \u200b\u884c\u200b\uff09\u3002\u200b\u63a5\u4e0b\u6765\u200b\u5728\u200b\u6808\u200b\u4e0a\u200b\u5206\u914d\u200b\u4e86\u200b 16 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7684\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u6808\u200b\u6307\u9488\u200b\u6307\u5411\u200b\u56fe\u4e2d\u200b s1 \u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u524d\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u7528\u4e8e\u200b\u5b58\u50a8\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>i</code>\uff0c\u200b\u540e\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u5e76\u672a\u200b\u4f7f\u7528\u200b\u3002\u200b\u7136\u540e\u200b\u5b83\u200b\u5f00\u59cb\u200b\u4e3a\u200b\u6570\u7ec4\u200b<code>*p[n]</code>\u200b\u5206\u914d\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u6808\u200b\u6307\u9488\u200b\u6307\u5411\u200b\u56fe\u4e2d\u200b s2 \u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5176\u200b\u76f8\u5bf9\u200b\u4e8e\u200b s1 \u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u662f\u200b\u901a\u8fc7\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7b2c\u200b 5 \u200b\u5230\u200b 7 \u200b\u884c\u200b\u8ba1\u7b97\u200b\u5f97\u5230\u200b\u7684\u200b\uff1a</p> \\[ (8n + 22) \\And (-16)= \\begin{cases}    8n + 8 &amp;\\text n \u200b\u4e3a\u200b\u5947\u6570\u200b \\cr    8n + 16 &amp;\\text n \u200b\u4e3a\u200b\u5076\u6570\u200b \\end{cases} \\] <p>\u200b\u7531\u4e8e\u200b\u8be5\u200b\u7ed3\u679c\u200b\u662f\u200b 16 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b9e\u73b0\u200b\u4e86\u200b\u6570\u636e\u200b\u5bf9\u9f50\u200b\u3002\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7b2c\u200b 8 \u200b\u5230\u200b 10 \u200b\u884c\u5c06\u200b\u56fe\u4e2d\u200b p \u200b\u7684\u200b\u503c\u7f6e\u200b\u4e3a\u200b\u6700\u200b\u63a5\u8fd1\u200b s2 \u200b\u7684\u200b 8 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u6700\u7ec8\u200b\u7531\u200b\u5bc4\u5b58\u5668\u200b %rcx \u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u4f5c\u4e3a\u200b<code>*p[n]</code>\u200b\u7684\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\u3002\u200b\u5047\u8bbe\u200b n \u200b\u4e3a\u200b 5 \u200b\u6216\u200b 6\uff0cs1 \u200b\u7684\u200b\u503c\u200b\u4e3a\u200b 2065 \u200b\u6216\u200b 2064\uff0c\u200b\u5219\u200b\u56fe\u4e2d\u200b\u5404\u503c\u200b\u4e3a\u200b\uff1a</p> n s1 s2 p e1 e2 5 2065 2017 2024 1 7 6 2064 2000 2000 16 0 <p>\u200b\u5728\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u7ed3\u675f\u200b\u524d\u200b\uff0c\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u7b2c\u200b 20 \u200b\u884c\u200b\u7684\u200b<code>leave</code>\u200b\u6307\u4ee4\u200b\u5c06\u200b\u5e27\u200b\u6307\u9488\u200b\u6062\u590d\u200b\u539f\u503c\u200b\u3002\u200b\u76f8\u5f53\u4e8e\u200b\u6267\u884c\u200b\u4e86\u200b\u4ee5\u4e0b\u200b\u4e24\u6761\u200b\u6307\u4ee4\u200b\uff1a</p> <pre><code>; Set stack pointer to beginning of frame \nmovq %rbp, %rsp\n; Restore saved %rbp and set stack ptr\n; to end of caller\u2019s frame\npopq %rbp\n</code></pre>"},{"location":"core/csapp/ch3/#_43","title":"\u6d6e\u70b9\u200b\u4ee3\u7801","text":"<p>\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u6d6e\u70b9\u200b\u67b6\u6784\u200b\u51b3\u5b9a\u200b\u4e86\u200b\u64cd\u4f5c\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u4e0e\u200b\u673a\u5668\u200b\u7ea7\u200b\u4ee3\u7801\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6620\u5c04\u200b\u65b9\u5f0f\u200b\uff0c\u200b\u5305\u62ec\u200b\u4ee5\u4e0b\u200b\u65b9\u9762\u200b\uff1a</p> <ul> <li>\u200b\u6d6e\u70b9\u6570\u200b\u662f\u200b\u88ab\u200b\u5982\u4f55\u200b\u88ab\u200b\u5b58\u50a8\u200b\u548c\u200b\u8bbf\u95ee\u200b\u7684\u200b\uff1b</li> <li>\u200b\u64cd\u4f5c\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u6307\u4ee4\u200b\uff1b</li> <li>\u200b\u6d6e\u70b9\u6570\u200b\u5982\u4f55\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u4f20\u9012\u200b\u7ed9\u200b\u51fd\u6570\u200b\u4ee5\u53ca\u200b\u5982\u4f55\u200b\u4f5c\u4e3a\u200b\u7ed3\u679c\u200b\u8fd4\u56de\u200b\uff1b</li> <li>\u200b\u5728\u200b\u51fd\u6570\u8c03\u7528\u200b\u65f6\u200b\u5982\u4f55\u200b\u4fdd\u5b58\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u3002</li> </ul> <p>\u200b\u6211\u4eec\u200b\u7684\u200b\u5185\u5bb9\u200b\u57fa\u4e8e\u200b AVX2\uff08Adcanced Vector Extensions2\uff09\u200b\u6269\u5c55\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b GCC \u200b\u7f16\u8bd1\u200b\u65f6\u200b\u52a0\u5165\u200b<code>-mavx2</code>\u200b\u53c2\u6570\u200b\u4ee5\u200b\u751f\u6210\u200b\u8fd9\u79cd\u200b\u67b6\u6784\u200b\u7684\u200b\u4ee3\u7801\u200b\u3002</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cAVX \u200b\u67b6\u6784\u200b\u5141\u8bb8\u200b\u6d6e\u70b9\u6570\u200b\u5b58\u50a8\u200b\u5728\u200b 16 \u200b\u4e2a\u200b YMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u957f\u5ea6\u200b\u5747\u200b\u4e3a\u200b 256 \u200b\u4f4d\u200b\uff0832 \u200b\u5b57\u8282\u200b\uff09\u3002\u200b\u5728\u200b\u5bf9\u200b\u6807\u91cf\u200b\u6570\u636e\u200b\u8fdb\u884c\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u5bc4\u5b58\u5668\u200b\u53ea\u4f1a\u200b\u4fdd\u5b58\u200b\u6d6e\u70b9\u200b\u578b\u200b\u6570\u636e\u200b\u3002\u200b\u800c\u200b\u5bf9\u4e8e\u200b<code>float</code>\u200b\u7c7b\u578b\u200b\u548c\u200b<code>double</code>\u200b\u7c7b\u578b\u200b\uff0c\u200b\u5206\u522b\u200b\u53ea\u6709\u200b\u8f83\u200b\u4f4e\u200b\u7684\u200b 32 \u200b\u4f4d\u200b\u548c\u200b 64 \u200b\u4f4d\u200b\u88ab\u200b\u4f7f\u7528\u200b\u3002\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u901a\u8fc7\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\uff08\u200b\u5373\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201c%xmm0\u201d\uff5e\u201c%xmm15\u201d\uff09\u200b\u7684\u200b\u540d\u79f0\u200b\u6765\u200b\u5f15\u7528\u200b\u5b83\u4eec\u200b\uff0c\u200b\u6bcf\u4e2a\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u662f\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b YMM \u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u4f4e\u200b 128 \u200b\u4f4d\u200b\uff0816 \u200b\u5b57\u8282\u200b\uff09\u3002</p>"},{"location":"core/csapp/ch3/#_44","title":"\u6d6e\u70b9\u6570\u200b\u7684\u200b\u79fb\u52a8\u200b\u548c\u200b\u8f6c\u6362\u200b\u64cd\u4f5c","text":"<p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u5728\u200b\u5185\u5b58\u200b\u548c\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e4b\u95f4\u200b\u548c\u200b\u5728\u200b\u4e24\u4e2a\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e4b\u95f4\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u7684\u200b\u4f20\u8f93\u6570\u636e\u200b\u6d6e\u70b9\u6570\u200b\u6307\u4ee4\u200b\uff1a</p> <p></p> <p>\u200b\u524d\u200b\u56db\u4e2a\u200b\u6307\u4ee4\u200b\u6d89\u53ca\u200b\u5230\u200b\u5bf9\u200b\u5185\u5b58\u200b\u7684\u200b\u5f15\u7528\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u5176\u4e3a\u200b Scalar \u200b\u6307\u4ee4\u200b\u3002\u200b\u5b83\u4eec\u200b\u64cd\u4f5c\u200b\u7684\u200b\u5bf9\u8c61\u200b\u662f\u200b\u5355\u72ec\u200b\u7684\u200b\u6570\u503c\u200b\uff0c\u200b\u53ea\u4f1a\u200b\u6539\u53d8\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b\u4f4e\u4f4d\u200b\u7684\u200b\u56db\u200b\u5b57\u8282\u200b\u6216\u200b\u516b\u5b57\u200b\u8282\u200b\u3002\u200b\u800c\u540e\u200b\u4e24\u4e2a\u200b\u6307\u4ee4\u200b\u5219\u200b\u5c5e\u4e8e\u200b Packed \u200b\u6307\u4ee4\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u66f4\u65b0\u200b\u76ee\u7684\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u5168\u90e8\u200b\u7684\u200b\u5185\u5bb9\u200b\u3002</p> <p>\u200b\u6d6e\u70b9\u6570\u200b\u548c\u200b\u6574\u578b\u200b\u4e4b\u95f4\u200b\u8fdb\u884c\u200b\u8f6c\u6362\u200b\u7684\u200b\u64cd\u4f5c\u200b\u6307\u4ee4\u200b\u4e3a\u200b\uff1a</p> <p></p> <p>\u200b\u5728\u200b C \u200b\u548c\u200b\u5927\u591a\u6570\u200b\u7f16\u7a0b\u8bed\u8a00\u200b\u4e2d\u200b\uff0c\u200b\u6d6e\u70b9\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u6574\u578b\u200b\u65f6\u4f1a\u200b\u5148\u200b\u8fdb\u884c\u200b\u622a\u65ad\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u5c06\u200b\u6570\u503c\u200b\u5411\u200b\u96f6\u200b\u820d\u5165\u200b\u3002\u200b\u800c\u200b\u6574\u578b\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u6d6e\u70b9\u6570\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u4e00\u822c\u200b\u4f1a\u200b\u5ffd\u7565\u200b\u7b2c\u4e8c\u4e2a\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u53ea\u200b\u5f71\u54cd\u200b\u7ed3\u679c\u200b\u7684\u200b\u9ad8\u4f4d\u200b\u5b57\u8282\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u901a\u5e38\u200b\u60c5\u51b5\u200b\u4e0b\u200b\u7b2c\u4e8c\u4e2a\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u548c\u200b\u76ee\u7684\u200b\u64cd\u4f5c\u6570\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\u3002</p> <p>\u200b\u6700\u540e\u200b\u5219\u200b\u662f\u200b\u4e24\u79cd\u200b\u6d6e\u70b9\u6570\u200b\u4e4b\u95f4\u200b\u7684\u200b\u7c7b\u578b\u8f6c\u6362\u200b\u3002\u200b\u5047\u8bbe\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u7684\u200b\u4f4e\u4f4d\u200b\u56db\u200b\u5b57\u8282\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5355\u7cbe\u5ea6\u200b\u6d6e\u70b9\u200b\u503c\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u5f88\u200b\u5bb9\u6613\u200b\u4f7f\u7528\u200b\u6307\u4ee4\u200b<code>vcvtss2sd %xmm0, %xmm0, %xmm0</code>\u200b\u6765\u200b\u628a\u200b\u5b83\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u6d6e\u70b9\u200b\u503c\u200b\u7136\u540e\u200b\u518d\u200b\u5b58\u50a8\u200b\u4e8e\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u7684\u200b\u4f4e\u4f4d\u200b\u516b\u5b57\u200b\u8282\u4e2d\u200b\u3002\u200b\u7136\u800c\u200b\u5b9e\u9645\u4e0a\u200b GCC \u200b\u751f\u6210\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\u4e3a\u200b\uff1a</p> <pre><code>; Replicate first vector element\nvunpcklps %xmm0, %xmm0, %xmm0\n; Convert two vector elements to double\nvcvtps2pd %xmm0, %xmm0\n</code></pre> <p>\u200b\u6307\u4ee4\u200b<code>vunpcklps</code>\u200b\u4f1a\u200b\u4ea4\u9519\u200b\u4e24\u4e2a\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5b83\u4eec\u200b\u5b58\u50a8\u200b\u5728\u200b\u7b2c\u4e09\u4e2a\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u3002\u200b\u4e3e\u4f8b\u6765\u8bf4\u200b\uff0c\u200b\u5982\u679c\u200b\u4e24\u4e2a\u200b\u6e90\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u5206\u522b\u200b\u4e3a\u200b\\([s_3, s_2, s_1, s_0]\\)\u200b\u548c\u200b\\([d_3, d_2, d_1, d_0]\\)\uff0c\u200b\u90a3\u4e48\u200b\u76ee\u6807\u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u503c\u200b\u5c31\u662f\u200b\\([s_1, d_1, s_0, d_0 ]\\)\u3002\u200b\u5728\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u4e2d\u200b\uff0c\u200b\u4e09\u4e2a\u200b\u64cd\u4f5c\u6570\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5982\u679c\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u4e2d\u200b\u7684\u200b\u539f\u59cb\u200b\u503c\u4e3a\u200b\\([x_3, x_2, x_1, x_0]\\)\uff0c\u200b\u5219\u200b\u8be5\u200b\u6307\u4ee4\u200b\u5c06\u200b\u66f4\u65b0\u200b\u5176\u503c\u200b\u4e3a\u200b\\([x_1, x_1, x_0, x_0]\\)\u3002</p> <p>\u200b\u6307\u4ee4\u200b<code>vcvtps2pd</code>\u200b\u5c06\u6e90\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u4f4e\u4f4d\u200b\u5355\u7cbe\u5ea6\u200b\u503c\u200b\u6269\u5c55\u200b\u4e3a\u200b\u76ee\u7684\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u503c\u200b\u3002\u200b\u8bbe\u200b \\(dx_0\\) \u200b\u4e3a\u200b\u5c06\u200b \\(x_0\\) \u200b\u8f6c\u6362\u200b\u4e3a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u7684\u200b\u7ed3\u679c\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8be5\u200b\u6307\u4ee4\u200b\u5c06\u200b\u5f97\u51fa\u200b\u503c\u200b\\([dx_0, dx_0]\\)\u3002\u200b\u7efc\u4e0a\u200b\uff0c\u200b\u8fd9\u200b\u4e24\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u6700\u7ec8\u200b\u6548\u679c\u200b\u662f\u200b\u5c06\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u4e2d\u200b\u4f4e\u4f4d\u200b\u56db\u200b\u5b57\u8282\u200b\u4e2d\u200b\u7684\u200b\u539f\u59cb\u200b\u5355\u7cbe\u5ea6\u200b\u503c\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u503c\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5b83\u200b\u7684\u200b\u4e24\u4e2a\u200b\u526f\u672c\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u4e2d\u200b\u3002</p> <p>\u200b\u540c\u6837\u200b\uff0cGCC \u200b\u4e3a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u503c\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5355\u7cbe\u5ea6\u200b\u751f\u6210\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u6c47\u7f16\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>; Replicate first vector element\nvmovddup %xmm0, %xmm0\n; Convert two vector elements to single\nvcvtpd2psx %xmm0, %xmm0\n</code></pre> <p>\u200b\u5047\u8bbe\u200b\u5bc4\u5b58\u5668\u200b %xmm0 \u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u53cc\u200b\u7cbe\u5ea6\u200b\u503c\u200b\\([x_1, x_0]\\)\uff0c\u200b\u5219\u200b\u6267\u884c\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\u7684\u200b\u7ed3\u679c\u200b\u4e3a\u200b\\([0.0, 0.0, x_0, x_0]\\)\u3002</p>"},{"location":"core/csapp/ch3/#_45","title":"\u8fc7\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u6d6e\u70b9\u200b\u4ee3\u7801","text":"<p>\u200b\u89c2\u5bdf\u200b\u56fe\u200b 3.45 \u200b\u4e2d\u200b\u6700\u200b\u53f3\u4fa7\u200b\u7684\u200b\u6ce8\u91ca\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u53d1\u73b0\u200b\u4ee5\u4e0b\u200b\u51c6\u5219\u200b\uff1a</p> <ul> <li>\u200b\u6700\u200b\u591a\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4f20\u9012\u200b\u516b\u4e2a\u200b\u53c2\u6570\u200b\uff08%xmm0-%xmm7\uff09\uff0c\u200b\u5176\u4f59\u200b\u7684\u200b\u5219\u200b\u9700\u8981\u200b\u901a\u8fc7\u200b\u6808\u200b\uff1b</li> <li>\u200b\u548c\u200b %rax \u200b\u7c7b\u4f3c\u200b\uff0c%xmm0 \u200b\u901a\u5e38\u200b\u4f5c\u4e3a\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u8fd4\u56de\u200b\u5bc4\u5b58\u5668\u200b\uff1b</li> <li>\u200b\u6240\u6709\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u5747\u200b\u4e3a\u200b\u8c03\u7528\u8005\u200b\u4fdd\u5b58\u200b\uff0c\u200b\u88ab\u200b\u8c03\u7528\u8005\u200b\u53ef\u4ee5\u200b\u8986\u76d6\u200b\u5176\u4e2d\u200b\u4efb\u610f\u200b\u4e00\u4e2a\u200b\uff1b</li> <li>\u200b\u5f53\u200b\u51fd\u6570\u53c2\u6570\u200b\u662f\u200b\u6307\u9488\u200b\u3001\u200b\u6574\u6570\u200b\u548c\u200b\u6d6e\u70b9\u6570\u200b\u7684\u200b\u7ec4\u5408\u200b\u65f6\u200b\uff0c\u200b\u6307\u9488\u200b\u548c\u200b\u6574\u6570\u200b\u5728\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u4f20\u9012\u200b\uff0c\u200b\u800c\u200b\u6d6e\u70b9\u200b\u503c\u5219\u200b\u5728\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u4f20\u9012\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch3/#_46","title":"\u6d6e\u70b9\u6570\u200b\u7684\u200b\u7b97\u6570\u200b\u64cd\u4f5c","text":"<p>\u200b\u6d6e\u70b9\u6570\u200b\u7b97\u6570\u200b\u64cd\u4f5c\u200b\u6307\u4ee4\u200b\u5982\u4e0b\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u6307\u4ee4\u200b\u90fd\u200b\u6709\u200b\u4e00\u5230\u200b\u4e24\u4e2a\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u548c\u200b\u4e00\u4e2a\u200b\u76ee\u7684\u200b\u64cd\u4f5c\u6570\u200b\u3002\u200b\u7b2c\u4e00\u4e2a\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u53ef\u4ee5\u200b\u662f\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u6216\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u6e90\u200b\u64cd\u4f5c\u6570\u200b\u548c\u200b\u76ee\u7684\u200b\u64cd\u4f5c\u6570\u200b\u53ea\u80fd\u200b\u662f\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\uff1b</p> <p></p>"},{"location":"core/csapp/ch3/#_47","title":"\u6d6e\u70b9\u200b\u5e38\u91cf\u200b\u7684\u200b\u5b9a\u4e49\u200b\u548c\u200b\u4f7f\u7528","text":"<p>\u200b\u4e0e\u200b\u6574\u6570\u200b\u7b97\u672f\u200b\u8fd0\u7b97\u200b\u4e0d\u540c\u200b\uff0cAVX \u200b\u6d6e\u70b9\u8fd0\u7b97\u200b\u4e0d\u80fd\u200b\u5c06\u200b\u7acb\u5373\u200b\u6570\u200b\u4f5c\u4e3a\u200b\u64cd\u4f5c\u6570\u200b\u3002\u200b\u7f16\u8bd1\u5668\u200b\u5fc5\u987b\u200b\u4e3a\u200b\u5e38\u91cf\u200b\u5206\u914d\u200b\u548c\u200b\u521d\u59cb\u5316\u200b\u5b58\u50a8\u7a7a\u95f4\u200b\uff0c\u200b\u518d\u200b\u7531\u200b\u4ee3\u7801\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u8bfb\u200b\u53d6\u503c\u200b\u3002</p>"},{"location":"core/csapp/ch3/#_48","title":"\u6d6e\u70b9\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8fd0\u7b97","text":"<p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u7528\u4e8e\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\u7684\u200b\u4f4d\u7ea7\u200b\u8fd0\u7b97\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5176\u200b\u64cd\u4f5c\u200b\u5bf9\u8c61\u200b\u5747\u200b\u4e3a\u200b Packed \u200b\u6570\u503c\u200b\uff08XMM \u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u5168\u90e8\u200b\u7684\u200b 128 \u200b\u4f4d\u200b\uff09\uff1a</p> <p></p>"},{"location":"core/csapp/ch3/#_49","title":"\u6d6e\u70b9\u6570\u200b\u7684\u200b\u6bd4\u8f83\u200b\u64cd\u4f5c","text":"<p>AVX 2 \u200b\u4e3a\u200b\u6d6e\u70b9\u200b\u6570\u503c\u200b\u7684\u200b\u6bd4\u8f83\u200b\u8fd0\u7b97\u200b\u63d0\u4f9b\u200b\u4e24\u79cd\u200b\u64cd\u4f5c\u200b\u6307\u4ee4\u200b\uff1a</p> Instruction Based on Description vucomiss \\(S_1\\), \\(S_2\\) \\(S_2 - S_1\\) Compare Single Precision vucomisd \\(S_1\\), \\(S_2\\) \\(S_2 - S_1\\) Compare Double Precision <p>\u200b\u4e0a\u8ff0\u200b\u6307\u4ee4\u200b\u4e0e\u200b \u200b\u6761\u4ef6\u200b\u7801\u200b \u200b\u4e2d\u200b\u4ecb\u7ecd\u200b\u7684\u200b CMP \u200b\u6307\u4ee4\u200b\u7c7b\u200b\u76f8\u4f3c\u200b\u3002\u200b\u53c2\u6570\u200b \\(S_2\\) \u200b\u5fc5\u987b\u200b\u662f\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u800c\u200b\u53c2\u6570\u200b \\(S_1\\) \u200b\u5219\u200b\u65e2\u200b\u53ef\u4ee5\u200b\u662f\u200b XMM \u200b\u5bc4\u5b58\u5668\u200b\uff0c\u200b\u53c8\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002</p> <p>\u200b\u6d6e\u70b9\u6570\u200b\u6bd4\u8f83\u200b\u64cd\u4f5c\u200b\u4f1a\u200b\u6539\u53d8\u200b\u4ee5\u4e0b\u200b\u6761\u4ef6\u200b\u7801\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u5176\u4e2d\u200b PF \u200b\u610f\u200b\u4e3a\u200b Parity Flag\uff1a</p> Ordering \\(S_2\\):\\(S_1\\) CF ZF PF Unordered 1 1 1 \\(S_2\\) &lt; \\(S_1\\) 1 0 0 \\(S_2\\) = \\(S_1\\) 0 1 0 \\(S_2\\) &gt; \\(S_1\\) 0 0 0 <p>\u200b\u5f53\u200b\u4efb\u610f\u200b\u64cd\u4f5c\u6570\u200b\u4e3a\u200b NaN \u200b\u65f6\u200b\uff0c\u200b\u56fe\u4e2d\u200b\u201cUnordered\u201d\u200b\u7684\u200b\u60c5\u51b5\u200b\u5c31\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u3002PF \u200b\u7684\u200b\u503c\u200b\u5c06\u200b\u88ab\u200b\u7f6e\u200b\u4e3a\u200b 1\uff0c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b\u4e3a\u200b<code>jp</code>\u3002\u200b\u5176\u4f59\u200b\u4e09\u79cd\u200b\u60c5\u51b5\u200b\u5219\u200b\u548c\u200b\u6574\u578b\u200b\u7684\u200b \u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b \u200b\u76f8\u540c\u200b\uff0c\u200b\u5206\u522b\u200b\u4e3a\u200b<code>jb</code>\u3001<code>je</code>\u200b\u548c\u200b<code>ja</code>\u3002</p>"},{"location":"core/csapp/ch4/","title":"\u5904\u7406\u5668\u200b\u4f53\u7cfb\u7ed3\u6784","text":""},{"location":"core/csapp/ch5/","title":"\u4f18\u5316\u200b\u7a0b\u5e8f\u200b\u6027\u80fd","text":""},{"location":"core/csapp/ch6/","title":"\u5b58\u50a8\u5668\u200b\u5c42\u6b21\u7ed3\u6784","text":"<p>\u200b\u5b58\u50a8\u7cfb\u7edf\u200b\uff08Memory System\uff09\u200b\u5305\u542b\u200b\u591a\u4e2a\u200b\u5c42\u7ea7\u200b\uff08Hierarchy\uff09\uff0c\u200b\u6bcf\u4e2a\u200b\u5c42\u7ea7\u200b\u7684\u200b\u5b58\u50a8\u8bbe\u5907\u200b\uff08Storage Device\uff09\u200b\u5177\u6709\u200b\u4e0d\u540c\u200b\u7684\u200b\u5bb9\u91cf\u200b\u3001\u200b\u6210\u672c\u200b\u548c\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u3002\u200b\u5c42\u7ea7\u200b\u8d8a\u4f4e\u200b\uff0c\u200b\u5b58\u50a8\u8bbe\u5907\u200b\u7684\u200b\u5bb9\u91cf\u200b\u5c31\u200b\u8d8a\u200b\u5927\u200b\uff0c\u200b\u6210\u672c\u200b\u4e5f\u200b\u8d8a\u200b\u4f4e\u200b\uff0c\u200b\u4f46\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u5374\u200b\u8d8a\u6162\u200b\u3002\u200b\u5b58\u50a8\u7cfb\u7edf\u200b\u7684\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u5bf9\u200b\u5e94\u7528\u200b\u6027\u80fd\u200b\u6709\u7740\u200b\u663e\u8457\u200b\u7684\u200b\u5f71\u54cd\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6700\u4e3a\u200b\u91cd\u8981\u200b\u7684\u200b\u4fbf\u662f\u200b CPU \u200b\u4e0e\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e4b\u95f4\u200b\u7684\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_2","title":"\u5b58\u50a8\u6280\u672f","text":""},{"location":"core/csapp/ch6/#_3","title":"\u968f\u673a\u5b58\u53d6\u200b\u5b58\u50a8\u5668","text":"<p>\u200b\u968f\u673a\u5b58\u53d6\u200b\u5b58\u50a8\u5668\u200b\uff08Random Access Memory\uff0cRAM\uff09\u200b\u6709\u200b\u4e24\u79cd\u200b\uff0c\u200b\u5206\u522b\u200b\u662f\u200b\u9759\u6001\u200b\uff08Static\uff09\u200b\u7684\u200b SRAM \u200b\u548c\u200b \u200b\u52a8\u6001\u200b\uff08Dynamic\uff09\u200b\u7684\u200b DRAM\u3002\u200b\u5176\u4e2d\u200b\uff0cSRAM \u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u6bd4\u200b DRAM \u200b\u66f4\u200b\u5feb\u200b\uff0c\u200b\u4e0d\u8fc7\u200b\u5176\u200b\u6210\u672c\u200b\u660e\u663e\u200b\u66f4\u9ad8\u200b\u3002SRAM \u200b\u7528\u4e8e\u200b CPU \u200b\u82af\u7247\u200b\u5185\u5916\u200b\u7684\u200b\u7f13\u5b58\u200b\uff0c\u200b\u800c\u200b DRAM \u200b\u5219\u200b\u7528\u4e8e\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u548c\u200b\u56fe\u5f62\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u5e27\u200b\u7f13\u5b58\u200b\uff08Frame Buffer\uff09\u3002</p>"},{"location":"core/csapp/ch6/#sram","title":"SRAM","text":"<p>SRAM \u200b\u5c06\u200b\u6bcf\u4e2a\u200b\u4f4d\u200b\u5b58\u50a8\u200b\u5728\u200b\u4e00\u4e2a\u200b\u53cc\u7a33\u6001\u200b\uff08Bistable\uff09\u200b\u7684\u200b\u5b58\u50a8\u5355\u5143\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5355\u5143\u200b\u662f\u200b\u7531\u200b\u4e00\u4e2a\u200b\u516d\u200b\u6676\u4f53\u7ba1\u200b\u7535\u8def\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u5176\u200b\u7ed3\u6784\u200b\u7c7b\u4f3c\u200b\u4e8e\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u5012\u8f6c\u200b\u6446\u9524\u200b\uff1a</p> <p></p> <p>\u200b\u8be5\u200b\u7535\u8def\u200b\u5c06\u200b\u6c38\u8fdc\u200b\u5904\u4e8e\u200b\u4e24\u79cd\u200b\u7535\u538b\u200b\u914d\u7f6e\u200b\uff08\u200b\u72b6\u6001\u200b\uff09\u200b\u4e4b\u4e00\u200b\u3002\u200b\u4efb\u4f55\u200b\u5176\u4ed6\u200b\u7684\u200b\u72b6\u6001\u200b\u90fd\u200b\u662f\u200b\u4e0d\u200b\u7a33\u5b9a\u200b\u7684\u200b\uff0c\u200b\u5c06\u4f1a\u200b\u5feb\u901f\u200b\u5730\u200b\u671d\u5411\u200b\u5176\u4e2d\u200b\u4e00\u4e2a\u200b\u7a33\u5b9a\u200b\u7684\u200b\u72b6\u6001\u200b\u79fb\u52a8\u200b\u3002\u200b\u56e0\u6b64\u200b\u53ea\u8981\u200b SRAM \u200b\u901a\u7535\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u6c38\u4e45\u200b\u5730\u200b\u4fdd\u5b58\u200b\u5176\u503c\u200b\u800c\u200b\u4e0d\u53d7\u200b\u4e00\u4e9b\u200b\u6270\u52a8\u200b\uff08\u200b\u5982\u7535\u200b\u566a\u58f0\u200b\uff09\u200b\u7684\u200b\u5f71\u54cd\u200b\u3002</p>"},{"location":"core/csapp/ch6/#dram","title":"DRAM","text":"<p>DRAM \u200b\u5c06\u200b\u6bcf\u200b\u4e00\u4f4d\u200b\u5b58\u50a8\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u7535\u5bb9\u200b\u4e0a\u200b\u7684\u200b\u7535\u8377\u200b\uff0c\u200b\u5176\u200b\u5b58\u50a8\u5355\u5143\u200b\u5bf9\u200b\u4efb\u4f55\u200b\u6270\u52a8\u200b\u90fd\u200b\u5341\u5206\u200b\u654f\u611f\u200b\u3002\u200b\u7535\u6d41\u200b\u6cc4\u9732\u200b\u4f1a\u200b\u5bfc\u81f4\u200b DRAM \u200b\u5355\u5143\u200b\u5728\u200b\u5927\u7ea6\u200b 10 \u200b\u5230\u200b 100 \u200b\u6beb\u79d2\u200b\u7684\u200b\u65f6\u95f4\u200b\u5185\u200b\u5931\u53bb\u200b\u7535\u8377\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b58\u50a8\u7cfb\u7edf\u200b\u5fc5\u987b\u200b\u5b9a\u671f\u200b\u5730\u200b\u901a\u8fc7\u200b\u8bfb\u53d6\u200b\u5e76\u200b\u91cd\u5199\u200b\u6765\u200b\u5237\u65b0\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4f4d\u200b\u3002</p> <p></p>"},{"location":"core/csapp/ch6/#dram_1","title":"\u4f20\u7edf\u200b\u7684\u200b DRAM","text":"<p>DRAM \u200b\u82af\u7247\u200b\u4e0a\u200b\u7684\u200b\u4f4d\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5212\u5206\u200b\u4e3a\u200b \\(d\\) \u200b\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\uff08Supercell\uff09\uff0c\u200b\u6bcf\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5305\u542b\u200b \\(w\\) \u200b\u4e2a\u200b DRAM \u200b\u5355\u5143\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e00\u4e2a\u200b \\(d \\times w\\) \u200b\u7684\u200b DRAM \u200b\u80fd\u591f\u200b\u5b58\u50a8\u200b \\(dw\\) \u200b\u4f4d\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u4e2a\u200b 16 \\(\\times\\) 8 \u200b\u7684\u200b DRAM \u200b\u82af\u7247\u200b\u7ed3\u6784\u200b\uff1a</p> <p> 16 \u200b\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u88ab\u200b\u6392\u5217\u6210\u200b\u4e00\u4e2a\u200b 4 \\(\\times\\) 4 \u200b\u7684\u200b\u77e9\u9635\u200b\uff0c\u200b\u56fe\u200b\u4e2d\u6807\u200b\u4e3a\u200b\u9634\u5f71\u200b\u7684\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5730\u5740\u200b\u4e3a\u200b (2, 1)\u3002\u200b\u4fe1\u606f\u200b\u901a\u8fc7\u200b\u5916\u90e8\u200b\u8fde\u63a5\u5668\u200b\uff08\u200b\u4e5f\u200b\u79f0\u200b Pin\uff09\u200b\u6d41\u5165\u200b\u6216\u200b\u6d41\u51fa\u200b\u82af\u7247\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Pin \u200b\u90fd\u200b\u53ef\u4ee5\u200b\u643a\u5e26\u200b\u4e00\u4f4d\u200b\u4fe1\u53f7\u200b\u3002\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u516b\u4e2a\u200b\u4f20\u8f93\u200b\u4fe1\u606f\u200b\u7684\u200b<code>data</code>Pin\uff0c\u200b\u4ee5\u53ca\u200b\u4e24\u4e2a\u200b\u643a\u5e26\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5730\u5740\u200b\u7684\u200b<code>addr</code>Pin\u3002</p> <p>\u200b\u6bcf\u4e2a\u200b DRAM \u200b\u82af\u7247\u200b\u90fd\u200b\u8fde\u63a5\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\uff08Memory Controller\uff09\u200b\u7684\u200b\u7535\u8def\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u4e00\u6b21\u200b\u4f20\u8f93\u200b \\(w\\) \u200b\u4f4d\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u4e3a\u4e86\u200b\u8bfb\u53d6\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b (i, j) \u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\uff0c\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u4f1a\u200b\u5411\u200b DRAM \u200b\u53d1\u9001\u200b\u884c\u200b\u5730\u5740\u200b i \u200b\u548c\u200b \u200b\u5217\u200b\u5730\u5740\u200b j \u200b\u7684\u200b\u5bfb\u5740\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u5206\u522b\u200b\u88ab\u200b\u79f0\u4e3a\u200b RAS\uff08Row Access Strobe\uff09\u200b\u8bf7\u6c42\u200b\u548c\u200b CAS\uff08Column Access Strobe\uff09\u200b\u8bf7\u6c42\u200b\u3002\u200b\u8be6\u7ec6\u200b\u7684\u200b\u8bfb\u53d6\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u9996\u5148\u200b\u53d1\u9001\u200b\u884c\u200b\u5730\u5740\u200b\u8bf7\u6c42\u200b\uff0cDRAM \u200b\u4f1a\u200b\u5c06\u200b\u6574\u4e2a\u200b\u7b2c\u200b 2 \u200b\u884c\u200b\u62f7\u8d1d\u5230\u200b\u5185\u90e8\u200b\u7684\u200b\u884c\u200b\u7f13\u51b2\u533a\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cInternal Row Buffer\u201d\uff09\u200b\u4e2d\u200b\u3002\u200b\u7136\u540e\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u518d\u200b\u53d1\u9001\u200b\u5217\u200b\u5730\u5740\u200b\u8bf7\u6c42\u200b\uff0cDRAM \u200b\u5c06\u200b\u4ece\u884c\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u62f7\u8d1d\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b (2, 1) \u200b\u7684\u200b\u503c\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u3002</p> <p>\u200b\u53ea\u8981\u200b\u5bf9\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u8bfb\u53d6\u200b DRAM \u200b\u7684\u200b\u8fc7\u7a0b\u200b\u6709\u6240\u200b\u4e86\u89e3\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u80fd\u200b\u660e\u767d\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u7684\u200b\u6392\u5217\u200b\u65b9\u5f0f\u200b\u4e3a\u4ec0\u4e48\u200b\u662f\u200b\u77e9\u9635\u200b\u800c\u200b\u975e\u200b\u4e00\u7ef4\u200b\u7ebf\u6027\u200b\u6570\u7ec4\u200b\u3002\u200b\u5728\u200b\u6211\u4eec\u200b\u7684\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0cDRAM \u200b\u5305\u542b\u200b\u4e86\u200b 16 \u200b\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u3002\u200b\u5982\u679c\u200b\u6309\u200b\u4e00\u7ef4\u200b\u6570\u7ec4\u200b\u6392\u5217\u200b\uff0c\u200b\u5219\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u7684\u200b\u5730\u5740\u200b\u8303\u56f4\u200b\u4e3a\u200b 0 \u200b\u5230\u200b 15\uff0c\u200b\u56e0\u6b64\u200b\u5c31\u200b\u9700\u8981\u200b\u56db\u4e2a\u200b Pin\uff08\u200b\u5373\u200b\u56db\u4f4d\u200b\uff09\u200b\u6765\u200b\u8fdb\u884c\u200b\u5bfb\u5740\u200b\u3002\u200b\u5f53\u7136\u200b\uff0c\u200b\u77e9\u9635\u200b\u6392\u5217\u200b\u65b9\u5f0f\u200b\u4e5f\u200b\u6709\u200b\u4e00\u5b9a\u200b\u7f3a\u70b9\u200b\u3002\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u8bfb\u53d6\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u9700\u8981\u200b\u5206\u4e3a\u200b\u4e24\u4e2a\u200b\u6b65\u9aa4\u200b\uff0c\u200b\u4ece\u800c\u200b\u589e\u52a0\u200b\u4e86\u200b\u8bbf\u95ee\u200b\u65f6\u95f4\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_4","title":"\u5b58\u50a8\u6a21\u5757","text":"<p>DRAM \u200b\u82af\u7247\u200b\u88ab\u200b\u5c01\u88c5\u200b\u5728\u200b\u5b58\u50a8\u6a21\u5757\u200b\uff08Memory Modules\uff09\u200b\u4e2d\u200b\uff0c\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u793a\u4f8b\u200b\u7684\u200b\u5b58\u50a8\u6a21\u5757\u200b\u5305\u542b\u200b 8 \u200b\u4e2a\u200b 8M \\(\\times\\) 8 DRAM \u200b\u82af\u7247\u200b\uff0c\u200b\u80fd\u591f\u200b\u5b58\u50a8\u200b 64 MB \u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5b58\u50a8\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u7684\u200b\u4e00\u200b\u5b57\u8282\u200b\uff08\u200b\u516b\u4f4d\u200b\uff09\u200b\u4fe1\u606f\u200b\uff0c\u200b\u516b\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u8868\u793a\u200b\u4e00\u4e2a\u200b\u5730\u5740\u200b\u4e3a\u200b\u201cA\u201d\u200b\u7684\u200b 64 \u200b\u4f4d\u200b Word\u3002\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u9996\u5148\u200b\u5c06\u200b\u5730\u5740\u200b\u201cA\u201d\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u5730\u5740\u200b (i, j)\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u53d1\u9001\u5230\u200b\u5b58\u50a8\u6a21\u5757\u200b\u4e2d\u200b\u3002\u200b\u5b58\u50a8\u6a21\u5757\u200b\u4f1a\u200b\u5411\u200b\u6240\u6709\u200b\u7684\u200b DRAM \u200b\u5e7f\u64ad\u200b\u5730\u5740\u200b i \u200b\u548c\u200b j\uff0c\u200b\u4ece\u800c\u200b\u5f97\u5230\u200b\u6bcf\u4e2a\u200b DRAM \u200b\u4e2d\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b (i, j) \u200b\u7684\u200b\u5185\u5bb9\u200b\u3002\u200b\u5b58\u50a8\u6a21\u5757\u200b\u4e2d\u200b\u7684\u200b\u7535\u8def\u200b\u4f1a\u200b\u5c06\u200b\u7ed3\u679c\u200b\u6574\u5408\u200b\u4e3a\u200b\u4e00\u4e2a\u200b 64 \u200b\u4f4d\u200b\u7684\u200b Word\uff0c\u200b\u6700\u7ec8\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u3002</p>"},{"location":"core/csapp/ch6/#dram_2","title":"\u6539\u8fdb\u200b\u7684\u200b DRAM","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u4f20\u7edf\u200b\u7684\u200b DRAM \u200b\u8fdb\u884c\u200b\u4f18\u5316\u200b\u4ee5\u200b\u63d0\u5347\u200b\u5176\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\uff1a</p> <ul> <li>FPM\uff08Fast Page Mode\uff09DRAM\uff1a\u200b\u4f20\u7edf\u200b DRAM \u200b\u5c06\u200b\u6574\u884c\u200b\u6570\u636e\u200b\u62f7\u8d1d\u5230\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\uff0c\u200b\u4f7f\u7528\u200b\u5176\u4e2d\u200b\u4e00\u4e2a\u200b\u5e76\u200b\u4e22\u5f03\u200b\u5269\u4f59\u200b\u7684\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\u3002FPM DRAM \u200b\u53ef\u4ee5\u200b\u8fde\u7eed\u200b\u8bbf\u95ee\u200b\u540c\u4e00\u200b\u884c\u200b\u7684\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\uff0c\u200b\u56e0\u6b64\u200b\u901f\u5ea6\u200b\u66f4\u200b\u5feb\u200b\u3002\u200b\u4f8b\u5982\u200b\u8bfb\u53d6\u200b\u4e00\u884c\u200b\u4e2d\u200b\u7684\u200b\u56db\u4e2a\u200b\u8d85\u7ea7\u200b\u5355\u5143\u200b\uff0c\u200b\u4f20\u7edf\u200b DRAM \u200b\u9700\u8981\u200b\u53d1\u9001\u200b\u56db\u6b21\u200b RAS \u200b\u8bf7\u6c42\u200b\u548c\u200b\u56db\u6b21\u200b CAS \u200b\u8bf7\u6c42\u200b\uff0c\u200b\u800c\u200b FPM DRAM \u200b\u5219\u200b\u53ea\u200b\u9700\u8981\u200b\u4e00\u6b21\u200b RAS \u200b\u8bf7\u6c42\u200b\u548c\u200b\u56db\u6b21\u200b CAS \u200b\u8bf7\u6c42\u200b\uff1b</li> <li>EDO\uff08Extended Data Out\uff09 DRAM\uff1a\u200b\u901a\u8fc7\u200b\u51cf\u5c11\u200b\u53d1\u9001\u200b CAS \u200b\u4fe1\u53f7\u200b\u7684\u200b\u65f6\u95f4\u200b\u95f4\u9694\u200b\u6765\u200b\u5bf9\u200b FPM DRAM \u200b\u8fdb\u884c\u200b\u4f18\u5316\u200b\uff1b</li> <li>SDRAM\uff08Synchronous DRAM\uff09\uff1a\u200b\u4e0a\u6587\u200b\u63d0\u53ca\u200b\u7684\u200b\u6240\u6709\u200b DRAM \u200b\u90fd\u200b\u662f\u200b\u5f02\u6b65\u200b\uff08Asynchronous\uff09\u200b\u5730\u5411\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u53d1\u9001\u200b\u4fe1\u53f7\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u540c\u6b65\u200b\u7684\u200b SDRAM \u200b\u4f20\u8f93\u6570\u636e\u200b\u7684\u200b\u901f\u7387\u200b\u66f4\u200b\u5feb\u200b\uff1b</li> <li>DDDR\uff08Double Data-Rate Synchronous\uff09DRAM\uff1a\u200b\u4f7f\u7528\u200b\u65f6\u949f\u200b\u8fb9\u7f18\u200b\uff08Clock Edge\uff09\u200b\u4f5c\u4e3a\u200b\u63a7\u5236\u200b\u4fe1\u53f7\u200b\u6765\u200b\u5c06\u200b SDRAM \u200b\u7684\u200b\u901f\u5ea6\u200b\u63d0\u5347\u200b\u4e00\u500d\u200b\uff1b</li> <li>VRAM\uff08Video RAM\uff09\uff1a\u200b\u5e38\u7528\u200b\u4e8e\u200b\u56fe\u5f62\u7cfb\u7edf\u200b\u7684\u200b\u5e27\u200b\u7f13\u5b58\u200b\uff0c\u200b\u5176\u672c\u8d28\u200b\u4e0e\u200b FPM DRAM \u200b\u7c7b\u4f3c\u200b\u3002\u200b\u533a\u522b\u200b\u5728\u4e8e\u200b VRAM \u200b\u901a\u8fc7\u200b\u4f9d\u6b21\u200b\u5bf9\u200b\u5185\u90e8\u200b\u7f13\u51b2\u533a\u200b\u7684\u200b\u5185\u5bb9\u200b\u79fb\u4f4d\u200b\u6765\u200b\u8f93\u51fa\u200b\u6570\u636e\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u5e76\u884c\u200b\u5730\u200b\u8bfb\u5199\u200b\u5185\u5b58\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch6/#_5","title":"\u975e\u6613\u200b\u5931\u6027\u200b\u5b58\u50a8\u5668","text":"<p>\u200b\u975e\u6613\u200b\u5931\u6027\u200b\u5b58\u50a8\u5668\u200b\uff08Nonvolatile Memory\uff09\u200b\u5728\u200b\u65ad\u7535\u200b\u540e\u200b\u8fd8\u200b\u4f1a\u200b\u7ee7\u7eed\u200b\u4fdd\u7559\u200b\u5176\u200b\u5b58\u50a8\u200b\u7684\u200b\u4fe1\u606f\u200b\u3002\u200b\u5373\u4f7f\u200b\u6709\u4e9b\u200b\u975e\u6613\u200b\u5931\u6027\u200b\u5b58\u50a8\u5668\u200b\u662f\u200b\u53ef\u200b\u8bfb\u5199\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u7531\u4e8e\u200b\u5386\u53f2\u200b\u539f\u56e0\u200b\uff0c\u200b\u5b83\u4eec\u200b\u88ab\u200b\u7edf\u4e00\u200b\u79f0\u4e3a\u200b ROM\uff08Read-only Memory\uff09\u3002\u200b\u4e0d\u540c\u200b\u79cd\u7c7b\u200b ROM \u200b\u7684\u200b\u533a\u522b\u200b\u5728\u4e8e\u200b\u5176\u200b\u80fd\u591f\u200b\u88ab\u200b\u91cd\u65b0\u200b\u7f16\u7a0b\u200b\uff08\u200b\u5199\u5165\u200b\uff09\u200b\u7684\u200b\u6700\u5927\u200b\u6b21\u6570\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u5199\u5165\u200b\u7684\u200b\u5b9e\u73b0\u200b\u673a\u5236\u200b\u3002</p> <ul> <li>PROM\uff08Programmable ROM\uff09\uff1a\u200b\u53ea\u80fd\u200b\u88ab\u200b\u7f16\u7a0b\u200b\u4e00\u6b21\u200b\uff1b</li> <li>EPROM\uff08Erasable programmable ROM\uff09\uff1a\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u64e6\u9664\u200b\u548c\u200b\u91cd\u65b0\u200b\u7f16\u7a0b\u200b\u7ea6\u200b 1000 \u200b\u6b21\u200b\uff1b</li> <li>EEPROM\uff08Electrically Erasable PROM\uff09\uff1a\u200b\u4e0e\u200b EPROM \u200b\u76f8\u6bd4\u200b\uff0c\u200b\u4e0d\u200b\u9700\u8981\u200b\u5355\u72ec\u200b\u7684\u200b\u7269\u7406\u200b\u7f16\u7a0b\u200b\u8bbe\u5907\u200b\uff0c\u200b\u4f46\u200b\u53ea\u200b\u53ef\u4ee5\u200b\u91cd\u65b0\u200b\u7f16\u7a0b\u200b 105 \u200b\u6b21\u200b\uff1b</li> <li>\u200b\u95ea\u5b58\u200b\uff08Flash Memory\uff09\uff1a\u200b\u57fa\u4e8e\u200b EEPROM \u200b\u7684\u200b\u4e00\u9879\u200b\u91cd\u8981\u200b\u5b58\u50a8\u6280\u672f\u200b\uff0cSSD \u200b\u5c31\u662f\u200b\u901a\u8fc7\u200b\u95ea\u5b58\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002</li> </ul> <p>\u200b\u5b58\u50a8\u200b\u5728\u200b ROM \u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u901a\u5e38\u200b\u79f0\u4e3a\u200b\u56fa\u4ef6\u200b\uff08Firmware\uff09\u3002\u200b\u4e00\u4e9b\u200b\u7cfb\u7edf\u200b\u4f1a\u200b\u5728\u200b\u56fa\u4ef6\u200b\u4e2d\u200b\u63d0\u4f9b\u200b\u7b80\u5355\u200b\u7684\u200b\u8f93\u5165\u200b/\u200b\u8f93\u51fa\u200b\u529f\u80fd\u200b\uff0c\u200b\u6bd4\u5982\u200b PC \u200b\u7684\u200b BIOS\uff08Basic Input/Output System\uff09\u3002</p>"},{"location":"core/csapp/ch6/#_6","title":"\u8bbf\u95ee\u200b\u4e3b\u5b58\u50a8\u5668","text":"<p>\u200b\u6570\u636e\u200b\u901a\u8fc7\u200b\u5171\u4eab\u200b\u7684\u200b\u7535\u6c14\u200b\u7ba1\u9053\u200b\u5728\u200b CPU \u200b\u548c\u200b DRAM \u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e4b\u95f4\u200b\u6d41\u52a8\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u7ba1\u9053\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u603b\u7ebf\u200b\uff08Bus\uff09\u3002\u200b\u6570\u636e\u4f20\u8f93\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u7531\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u603b\u7ebf\u200b\u4e8b\u52a1\u200b\uff08Bus Transaction\uff09\u200b\u7ec4\u6210\u200b\uff0c\u200b\u5176\u4e2d\u200b\u8bfb\u200b\u4e8b\u52a1\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u52a0\u8f7d\u200b\u5230\u200b CPU \u200b\u4e2d\u200b\uff0c\u200b\u5199\u200b\u4e8b\u52a1\u200b\u5219\u200b\u5c06\u200b\u6570\u636e\u200b\u4ece\u200b CPU \u200b\u4f20\u8f93\u200b\u5230\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u603b\u7ebf\u200b\u662f\u200b\u4e00\u7ec4\u200b\u53ef\u4ee5\u200b\u4f20\u8f93\u200b\u5730\u5740\u200b\u3001\u200b\u6570\u636e\u200b\u548c\u200b\u63a7\u5236\u200b\u4fe1\u53f7\u200b\u7684\u200b\u5e76\u884c\u200b\u7ebf\u200b\u7684\u200b\u96c6\u5408\u200b\uff0c\u200b\u5176\u4e2d\u200b\u63a7\u5236\u200b\u603b\u7ebf\u200b\u8d1f\u8d23\u200b\u540c\u6b65\u200b\u4e8b\u52a1\u200b\u5e76\u200b\u8bc6\u522b\u200b\u5f53\u524d\u200b\u6b63\u5728\u200b\u6267\u884c\u200b\u4e8b\u52a1\u200b\u7684\u200b\u7c7b\u578b\u200b\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u603b\u7ebf\u7ed3\u6784\u200b\uff1a</p> <p> \u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cI/O Bridge\u201d\u200b\u662f\u200b\u4e00\u7ec4\u200b\u82af\u7247\u200b\u7684\u200b\u96c6\u5408\u200b\uff0c\u200b\u5305\u542b\u200b\u4e86\u200b\u4e0a\u200b\u6587\u4e2d\u200b\u63d0\u5230\u200b\u7684\u200b\u5b58\u50a8\u200b\u63a7\u5236\u5668\u200b\u3002\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u7cfb\u7edf\u603b\u7ebf\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cSystem bus\u201d\uff09\u200b\u7684\u200b\u7535\u4fe1\u53f7\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u5b58\u50a8\u5668\u200b\u603b\u7ebf\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cMemory bus\u201d\uff09\u200b\u7684\u200b\u7535\u4fe1\u53f7\u200b\uff0c\u200b\u53cd\u4e4b\u4ea6\u7136\u200b\u3002\u200b\u5f53\u200b CPU \u200b\u6267\u884c\u200b\u6570\u636e\u200b\u8bfb\u53d6\u200b\u6307\u4ee4\u200b\u65f6\u200b\uff0c\u200b\u5176\u200b\u82af\u7247\u200b\u4e0a\u200b\u7684\u200b\u603b\u7ebf\u200b\u63a5\u53e3\u200b\uff08Bus Interface\uff09\u200b\u7535\u8def\u200b\u4f1a\u200b\u5728\u200b\u603b\u7ebf\u200b\u4e0a\u200b\u521d\u59cb\u5316\u200b\u4e00\u4e2a\u200b\u8bfb\u200b\u4e8b\u52a1\u200b\uff0c\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p> <p> \u200b\u5199\u200b\u4e8b\u52a1\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u4e0e\u200b\u4e4b\u200b\u7c7b\u4f3c\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch6/#_7","title":"\u78c1\u76d8\u200b\u5b58\u50a8","text":"<p>\u200b\u78c1\u76d8\u200b\uff08Disk\uff09\u200b\u662f\u200b\u4e3b\u529b\u200b\u5b58\u50a8\u8bbe\u5907\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5bb9\u7eb3\u200b\u6210\u767e\u4e0a\u5343\u200b GB \u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u4f46\u200b\u5176\u200b\u8bfb\u5199\u200b\u901f\u5ea6\u200b\u5374\u200b\u8fdc\u8fdc\u200b\u4f4e\u4e8e\u200b RAM\u3002\u200b\u672c\u8282\u200b\u4e2d\u200b\u7684\u200b\u78c1\u76d8\u200b\u4e3b\u8981\u200b\u6307\u200b\u7684\u200b\u662f\u200b\u65cb\u8f6c\u200b\u78c1\u76d8\u200b\uff0c\u200b\u5e76\u200b\u4e0d\u200b\u6d89\u53ca\u200b SSD\u3002</p>"},{"location":"core/csapp/ch6/#_8","title":"\u78c1\u76d8\u200b\u6784\u9020","text":"<p>\u200b\u78c1\u76d8\u200b\u662f\u200b\u7531\u200b\u76d8\u7247\u200b\uff08Platter\uff09\u200b\u7ec4\u6210\u200b\u7684\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u76d8\u7247\u200b\u90fd\u200b\u6709\u200b\u4e24\u4e2a\u200b\u76d8\u9762\u200b\uff08Surface\uff09\u3002\u200b\u4e0b\u56fe\u200b 6.9(a) \u200b\u5c55\u793a\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5178\u578b\u200b\u76d8\u9762\u200b\u7684\u200b\u7ed3\u6784\u200b\uff1a</p> <p> \u200b\u6bcf\u4e2a\u200b\u76d8\u9762\u200b\u5747\u200b\u7531\u200b\u4e00\u7ec4\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u78c1\u9053\u200b\uff08Track\uff09\u200b\u7684\u200b\u540c\u5fc3\u200b\u73af\u200b\u6784\u6210\u200b\uff0c\u200b\u6bcf\u6761\u200b\u78c1\u9053\u200b\u53c8\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5212\u5206\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u6247\u533a\u200b\uff08Section\uff09\u3002\u200b\u6bcf\u4e2a\u200b\u6247\u533a\u200b\u4e2d\u200b\u90fd\u200b\u5b58\u50a8\u200b\u4e86\u200b\u6570\u91cf\u200b\u76f8\u540c\u200b\u7684\u200b\u6570\u636e\u4f4d\u200b\uff08\u200b\u901a\u5e38\u200b\u4e3a\u200b 512 \u200b\u5b57\u8282\u200b\uff09\uff0c\u200b\u5b83\u4eec\u200b\u4e4b\u95f4\u200b\u7684\u200b\u95f4\u9699\u200b\uff08Gap\uff09\u200b\u5219\u200b\u53ea\u200b\u4fdd\u5b58\u200b\u6247\u533a\u200b\u7684\u200b\u6807\u8bc6\u200b\u3002</p> <p>\u200b\u5982\u4e0a\u56fe\u200b 6.9(b) \u200b\u6240\u793a\u200b\uff0c\u200b\u67f1\u9762\u200b\uff08Cylinder\uff09\u200b\u662f\u200b\u6240\u6709\u200b\u76d8\u9762\u200b\u4e0a\u200b\u4e0e\u200b\u4e3b\u8f74\u200b\uff08Spindle\uff09\u200b\u7b49\u8ddd\u200b\u7684\u200b\u78c1\u9053\u200b\u7684\u200b\u96c6\u5408\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_9","title":"\u78c1\u76d8\u200b\u5bb9\u91cf","text":"<p>\u200b\u78c1\u76d8\u200b\u7684\u200b\u5bb9\u91cf\u200b\u7531\u200b\u4ee5\u4e0b\u200b\u4e09\u4e2a\u200b\u53c2\u6570\u200b\u51b3\u5b9a\u200b\uff1a</p> <ul> <li>\u200b\u8bb0\u5f55\u200b\u5bc6\u5ea6\u200b\uff08\\(bits/in\\)\uff09\uff1a\u200b\u4e00\u82f1\u5bf8\u200b\u957f\u5ea6\u200b\u7684\u200b\u78c1\u9053\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u7684\u200b\u4f4d\u6570\u200b\uff1b</li> <li>\u200b\u8f68\u9053\u200b\u5bc6\u5ea6\u200b\uff08\\(tracks/in\\)\uff09\uff1a\u200b\u4ece\u200b\u4e3b\u8f74\u200b\u4e2d\u5fc3\u200b\u5904\u200b\u5ef6\u4f38\u200b\u4e00\u82f1\u5bf8\u200b\u534a\u5f84\u200b\u5185\u200b\u7684\u200b\u78c1\u9053\u200b\u6570\u91cf\u200b\uff1b</li> <li>\u200b\u9762\u5bc6\u5ea6\u200b\uff08\\(bits/in^2\\)\uff09\uff1a\u200b\u8bb0\u5f55\u200b\u5bc6\u5ea6\u200b\u548c\u200b\u8f68\u9053\u200b\u5bc6\u5ea6\u200b\u7684\u200b\u4e58\u79ef\u200b\u3002</li> </ul> <p>\u200b\u5728\u200b\u4ee5\u524d\u200b\u7684\u200b\u78c1\u76d8\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u6761\u200b\u78c1\u9053\u200b\u4e0a\u200b\u7684\u200b\u6247\u533a\u200b\u6570\u91cf\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\u3002\u200b\u8fd9\u6837\u200b\u5f53\u9762\u200b\u5bc6\u5ea6\u200b\u4e0a\u5347\u200b\u4e4b\u540e\u200b\uff0c\u200b\u95f4\u9699\u200b\u5c31\u200b\u4f1a\u200b\u8d8a\u6765\u8d8a\u200b\u5927\u200b\uff0c\u200b\u4ece\u800c\u200b\u9020\u6210\u200b\u6d6a\u8d39\u200b\u3002\u200b\u56e0\u6b64\u200b\u73b0\u4ee3\u200b\u5927\u5bb9\u91cf\u200b\u78c1\u76d8\u200b\u4f7f\u7528\u200b\u591a\u533a\u200b\u8bb0\u5f55\u200b\uff08Multiple Zone Recording\uff09\u200b\u6280\u672f\u200b\uff0c\u200b\u4ee4\u200b\u5916\u90e8\u200b\u78c1\u9053\u200b\u5305\u542b\u200b\u7684\u200b\u6247\u533a\u200b\u6570\u91cf\u200b\u5927\u4e8e\u200b\u5185\u90e8\u200b\u78c1\u9053\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_10","title":"\u78c1\u76d8\u64cd\u4f5c","text":"<p>\u200b\u78c1\u76d8\u200b\u4f7f\u7528\u200b\u8fde\u63a5\u200b\u5728\u200b\u4f20\u52a8\u200b\u81c2\u200b\uff08Actuator Arm\uff09\u200b\u672b\u7aef\u200b\u7684\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u6765\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u64cd\u4f5c\u200b\uff1a  \u200b\u4f20\u52a8\u200b\u81c2\u200b\u6cbf\u200b\u81ea\u8eab\u200b\u65cb\u8f6c\u8f74\u200b\u4e0d\u65ad\u200b\u79fb\u52a8\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u4efb\u610f\u200b\u78c1\u9053\u200b\u4e0a\u200b\uff0c\u200b\u8fd9\u4e00\u200b\u64cd\u4f5c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5bfb\u200b\u9053\u200b\uff08Seek\uff09\u3002\u200b\u5982\u4e0a\u56fe\u200b 6.10(b) \u200b\u6240\u793a\u200b\uff0c\u200b\u62e5\u6709\u200b\u591a\u4e2a\u200b\u76d8\u7247\u200b\u7684\u200b\u78c1\u76d8\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u78c1\u9762\u200b\u90fd\u200b\u6709\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u5728\u200b\u4efb\u4f55\u65f6\u523b\u200b\uff0c\u200b\u6240\u6709\u200b\u7684\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u5747\u200b\u5904\u5728\u200b\u76f8\u540c\u200b\u7684\u200b\u67f1\u9762\u200b\u4e0a\u200b\u3002\u200b\u4f20\u52a8\u200b\u81c2\u200b\u7684\u200b\u79fb\u52a8\u200b\u901f\u5ea6\u200b\u975e\u5e38\u200b\u5feb\u200b\uff0c\u200b\u5373\u4f7f\u200b\u662f\u200b\u5fae\u5c0f\u200b\u7684\u200b\u7070\u5c18\u200b\u4e5f\u200b\u4f1a\u200b\u5e72\u6270\u200b\u5230\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u7684\u200b\u5bfb\u9053\u200b\uff0c\u200b\u56e0\u6b64\u200b\u78c1\u76d8\u200b\u9700\u8981\u200b\u88ab\u200b\u5bc6\u5c01\u200b\u5305\u88c5\u200b\u3002</p> <p>\u200b\u78c1\u76d8\u200b\u4ee5\u200b\u6247\u533a\u200b\u5927\u5c0f\u200b\u7684\u200b\u5757\u200b\u4e3a\u200b\u5355\u5143\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u200b\uff0c\u200b\u5176\u200b\u8bbf\u95ee\u200b\u65f6\u95f4\u200b\u53d7\u200b\u4e09\u4e2a\u200b\u4e3b\u8981\u200b\u56e0\u7d20\u200b\u7684\u200b\u5f71\u54cd\u200b\uff1a</p> <ul> <li>\u200b\u5bfb\u200b\u9053\u200b\u65f6\u95f4\u200b\uff1a\u200b\u5373\u200b\u79fb\u52a8\u200b\u4f20\u52a8\u200b\u81c2\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u65f6\u95f4\u200b\uff1b</li> <li>\u200b\u65cb\u8f6c\u200b\u5ef6\u65f6\u200b\uff1a\u200b\u5f53\u8bfb\u200b/\u200b\u5199\u5934\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u76ee\u6807\u200b\u78c1\u9053\u200b\u4e0a\u65f6\u200b\uff0c\u200b\u78c1\u76d8\u200b\u8fd8\u200b\u9700\u8981\u200b\u5c06\u200b\u76ee\u6807\u200b\u6247\u533a\u200b\u7684\u200b\u9996\u4e2a\u200b\u4f4d\u200b\u65cb\u8f6c\u200b\u5230\u200b\u8bfb\u200b/\u200b\u5199\u5934\u200b\u4e0b\u200b\uff0c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u65f6\u95f4\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u65cb\u8f6c\u200b\u5ef6\u65f6\u200b\uff1b</li> <li>\u200b\u4f20\u8f93\u200b\u65f6\u95f4\u200b\uff1a\u200b\u78c1\u76d8\u200b\u8bfb\u5199\u200b\u76ee\u6807\u200b\u6247\u533a\u200b\u5185\u5bb9\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u65f6\u95f4\u200b\uff0c\u200b\u7531\u200b\u78c1\u76d8\u200b\u65cb\u8f6c\u200b\u901f\u5ea6\u200b\u548c\u200b\u6bcf\u6761\u200b\u78c1\u9053\u200b\u4e2d\u200b\u7684\u200b\u6247\u533a\u200b\u6570\u91cf\u200b\u6240\u200b\u51b3\u5b9a\u200b\u3002</li> </ul> <p>\u200b\u76f8\u6bd4\u200b\u5176\u4ed6\u200b\u4e24\u4e2a\u200b\u56e0\u7d20\u200b\uff0c\u200b\u4f20\u8f93\u200b\u65f6\u95f4\u200b\u5c0f\u5230\u200b\u53ef\u4ee5\u200b\u5ffd\u7565\u200b\u3002\u200b\u800c\u200b\u5bfb\u9053\u200b\u65f6\u95f4\u200b\u548c\u200b\u65cb\u8f6c\u200b\u5ef6\u65f6\u200b\u5927\u81f4\u200b\u76f8\u7b49\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u7528\u200b\u4e24\u500d\u200b\u7684\u200b\u5bfb\u9053\u200b\u65f6\u95f4\u200b\u6765\u200b\u4f30\u7b97\u200b\u78c1\u76d8\u200b\u7684\u200b\u8bbf\u95ee\u200b\u65f6\u95f4\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_11","title":"\u78c1\u76d8\u200b\u7684\u200b\u903b\u8f91\u200b\u5757","text":"<p>\u200b\u4e3a\u4e86\u200b\u5411\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u9690\u85cf\u200b\u78c1\u76d8\u200b\u6784\u9020\u200b\u7684\u200b\u590d\u6742\u6027\u200b\uff0c\u200b\u73b0\u4ee3\u200b\u78c1\u76d8\u200b\u5c06\u200b\u81ea\u8eab\u200b\u7b80\u5316\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u7531\u200b B \u200b\u4e2a\u200b\u903b\u8f91\u200b\u5757\u200b\u7ec4\u6210\u200b\u7684\u200b\u5e8f\u5217\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u903b\u8f91\u200b\u5757\u200b\u7684\u200b\u5c3a\u5bf8\u200b\u4e0e\u200b\u6247\u533a\u200b\u5927\u5c0f\u200b\u76f8\u540c\u200b\uff0c\u200b\u7f16\u53f7\u200b\u4e3a\u200b 0\uff0c1\uff0c... \uff0cB - 1\u3002\u200b\u78c1\u76d8\u63a7\u5236\u5668\u200b\uff08Disk Controller\uff09\u200b\u8d1f\u8d23\u200b\u7ef4\u62a4\u200b\u903b\u8f91\u200b\u5757\u200b\u7f16\u53f7\u200b\u4e0e\u200b\u5b9e\u9645\u200b\u7269\u7406\u200b\u78c1\u76d8\u200b\u6247\u533a\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u8bfb\u53d6\u200b\u7684\u200b\u76ee\u6807\u200b\u903b\u8f91\u200b\u5757\u200b\u7f16\u53f7\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\u7269\u7406\u200b\u6247\u533a\u200b\u7684\u200b\u4e09\u5143\u7ec4\u200b\uff08\u200b\u78c1\u9762\u200b\uff0c\u200b\u78c1\u9053\u200b\u548c\u200b\u6247\u533a\u200b\uff09\u3002\u200b\u8bfb\u53d6\u200b\u5230\u200b\u7684\u200b\u4fe1\u606f\u200b\u5c06\u200b\u9996\u5148\u200b\u4fdd\u5b58\u200b\u5728\u200b\u78c1\u76d8\u63a7\u5236\u5668\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u200b\u62f7\u8d1d\u5230\u200b\u4e3b\u5b58\u200b\u3002</p>"},{"location":"core/csapp/ch6/#io","title":"\u8fde\u63a5\u200b\u7684\u200b I/O \u200b\u8bbe\u5907","text":"<p>\u200b\u663e\u5361\u200b\u3001\u200b\u663e\u793a\u5668\u200b\u3001\u200b\u9f20\u6807\u200b\u3001\u200b\u952e\u76d8\u200b\u548c\u200b\u78c1\u76d8\u200b\u7b49\u200b\u8f93\u5165\u200b/\u200b\u8f93\u51fa\u200b (I/O) \u200b\u8bbe\u5907\u200b\u4f7f\u7528\u200b I/O \u200b\u603b\u7ebf\u200b\u8fde\u63a5\u200b\u5230\u200b CPU \u200b\u548c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e0a\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch6/#_12","title":"\u8bbf\u95ee\u200b\u78c1\u76d8","text":"<p>CPU \u200b\u4ece\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u8bfb\u53d6\u6570\u636e\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\uff1a</p> <p> CPU \u200b\u4f7f\u7528\u200b Memory-mapped I/O \u200b\u6280\u672f\u200b\u5411\u200b I/O \u200b\u8bbe\u5907\u200b\u53d1\u9001\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b (a) \u200b\u6240\u793a\u200b\u3002\u200b\u7cfb\u7edf\u200b\u4f1a\u200b\u5728\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u4fdd\u7559\u200b\u4e00\u5757\u200b\u5730\u5740\u200b\u533a\u200b\u7528\u4e8e\u200b\u4e0e\u200b I/O \u200b\u8bbe\u5907\u200b\u7684\u200b\u901a\u4fe1\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\u88ab\u200b\u79f0\u4e3a\u200b I/O Port\u3002\u200b\u6bcf\u4e2a\u200b\u8fde\u63a5\u200b\u5230\u200b\u603b\u7ebf\u200b\u4e0a\u200b\u7684\u200b\u8bbe\u5907\u200b\u90fd\u200b\u4f1a\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b I/O Port\u3002</p> <p>CPU \u200b\u5c06\u200b\u53d1\u9001\u200b\u4e09\u4e2a\u200b\u6307\u4ee4\u200b\u5230\u200b\u76ee\u6807\u200b I/O Port \u200b\u6765\u200b\u521d\u59cb\u5316\u200b\u8bfb\u53d6\u200b\u64cd\u4f5c\u200b\uff1a</p> <ul> <li>\u200b\u544a\u77e5\u200b\u78c1\u76d8\u200b\u542f\u52a8\u200b\u8bfb\u53d6\u200b\u7684\u200b\u547d\u4ee4\u200b</li> <li>\u200b\u76ee\u6807\u200b\u6570\u636e\u200b\u6240\u5728\u200b\u903b\u8f91\u200b\u5757\u200b\u7684\u200b\u7f16\u53f7\u200b</li> <li>\u200b\u6570\u636e\u200b\u5b58\u50a8\u200b\u7684\u200b\u4e3b\u5b58\u200b\u5730\u5740\u200b</li> </ul> <p>\u200b\u5728\u200b\u53d1\u51fa\u8bf7\u6c42\u200b\u4e4b\u540e\u200b\uff0cCPU \u200b\u901a\u5e38\u200b\u4f1a\u200b\u5728\u200b\u78c1\u76d8\u200b\u8bfb\u53d6\u200b\u65f6\u200b\u8fdb\u884c\u200b\u5176\u4ed6\u200b\u5de5\u4f5c\u200b\u3002\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b (b) \u200b\u6240\u793a\u200b\uff0c\u200b\u8bbe\u5907\u200b\u81ea\u884c\u200b\u6267\u884c\u200b\u8bfb\u5199\u200b\u603b\u7ebf\u200b\u4e8b\u52a1\u200b\uff0c\u200b\u65e0\u9700\u200b CPU \u200b\u7684\u200b\u53c2\u4e0e\u200b\uff0c\u200b\u8fd9\u4e00\u200b\u8fc7\u7a0b\u200b\u88ab\u200b\u79f0\u4e3a\u200b DMA\uff08Direct Memory Access \uff09\u3002\u200b\u5f53\u200b\u6570\u636e\u200b\u5b58\u50a8\u200b\u5728\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u4e4b\u540e\u200b\uff0c\u200b\u78c1\u76d8\u63a7\u5236\u5668\u200b\u4fbf\u4f1a\u200b\u5411\u200b CPU \u200b\u53d1\u9001\u200b\u4e2d\u65ad\u200b\u4fe1\u53f7\u200b\u4ee5\u200b\u901a\u77e5\u200b\u78c1\u76d8\u200b\u8bfb\u53d6\u200b\u5b8c\u6210\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b \u00a9 \u200b\u6240\u793a\u200b\u3002</p>"},{"location":"core/csapp/ch6/#ssd","title":"SSD","text":"<p>\u200b\u56fa\u6001\u200b\u786c\u76d8\u200b\uff08Solid State Disk\uff0cSSD\uff09\u200b\u662f\u200b\u4e00\u79cd\u200b\u57fa\u4e8e\u200b\u95ea\u5b58\u200b\u7684\u200b\u5b58\u50a8\u6280\u672f\u200b\uff0c\u200b\u5176\u200b\u57fa\u672c\u200b\u7406\u5ff5\u200b\u5982\u4e0b\u200b\uff1a</p> <p> SSD \u200b\u7531\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\u95ea\u5b58\u200b\u82af\u7247\u200b\u4ee5\u53ca\u200b\u95ea\u5b58\u200b\u8f6c\u6362\u200b\u5c42\u200b\uff08Flash Translation Layer\uff09\u200b\u7ec4\u6210\u200b\uff0c\u200b\u524d\u8005\u200b\u4ee3\u66ff\u200b\u4e86\u200b\u65cb\u8f6c\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u7684\u200b\u673a\u68b0\u200b\u9a71\u52a8\u5668\u200b\uff0c\u200b\u540e\u8005\u200b\u5219\u200b\u4e0e\u200b\u78c1\u76d8\u63a7\u5236\u5668\u200b\u7684\u200b\u4f5c\u7528\u200b\u76f8\u540c\u200b\u3002</p> <p>\u200b\u95ea\u5b58\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b B \u200b\u4e2a\u200b Block\uff0c\u200b\u6bcf\u4e2a\u200b Block \u200b\u53c8\u200b\u53ef\u4ee5\u200b\u5206\u6210\u200b P \u200b\u4e2a\u200b Page\u3002Page \u200b\u7684\u200b\u5927\u5c0f\u200b\u901a\u5e38\u200b\u5728\u200b 512 \u200b\u5b57\u8282\u200b\u5230\u200b 4 KB \u200b\u4e4b\u95f4\u200b\uff0c\u200b\u800c\u200b\u4e00\u4e2a\u200b Block \u200b\u4e00\u822c\u200b\u7531\u200b 32 \u200b\u5230\u200b 128 \u200b\u4e2a\u200b Page \u200b\u7ec4\u6210\u200b\uff0c\u200b\u56e0\u6b64\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u4e3a\u200b 16 KB \u200b\u5230\u200b 512 KB\u3002</p> <p>SSD \u200b\u4ee5\u200b Page \u200b\u4e3a\u200b\u5355\u4f4d\u200b\u8fdb\u884c\u200b\u8bfb\u5199\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ea\u6709\u200b\u5f53\u200b Page \u200b\u6240\u5728\u200b\u7684\u200b\u6574\u4e2a\u200b Block \u200b\u88ab\u200b\u64e6\u9664\u200b\uff08\u200b\u5373\u200b\u6240\u6709\u200b\u4f4d\u5747\u200b\u7f6e\u200b\u4e3a\u200b 1\uff09\u200b\u540e\u200b\u624d\u80fd\u200b\u5411\u200b\u5176\u200b\u5199\u5165\u200b\u3002\u200b\u4e0d\u8fc7\u200b\uff0c\u200b\u53ea\u8981\u200b\u4e00\u4e2a\u200b Block \u200b\u88ab\u200b\u64e6\u9664\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4e2a\u200b Page \u200b\u90fd\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5199\u5165\u200b\u4e00\u6b21\u200b\u800c\u200b\u65e0\u9700\u200b\u518d\u6b21\u200b\u64e6\u9664\u200b\u3002Block \u200b\u4f1a\u200b\u5728\u200b\u5927\u7ea6\u200b 100,000 \u200b\u6b21\u200b\u91cd\u590d\u200b\u5199\u5165\u200b\u540e\u200b\u53d1\u751f\u200b\u78e8\u635f\u200b\uff0c\u200b\u65e0\u6cd5\u200b\u518d\u200b\u88ab\u200b\u4f7f\u7528\u200b\u3002</p> <p>SSD \u200b\u7684\u200b\u968f\u673a\u200b\u5199\u5165\u200b\u901f\u5ea6\u200b\u6bd4\u200b\u8bfb\u53d6\u200b\u6162\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u64e6\u9664\u200b Block \u200b\u9700\u8981\u200b\u76f8\u5bf9\u200b\u8f83\u957f\u200b\u7684\u200b\u65f6\u95f4\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u5982\u679c\u200b\u5199\u200b\u64cd\u4f5c\u200b\u5c1d\u8bd5\u200b\u4fee\u6539\u200b\u5df2\u6709\u200b\u6570\u636e\u200b\u7684\u200b Page\uff0c\u200b\u90a3\u4e48\u200b\u5c31\u200b\u5fc5\u987b\u200b\u5148\u200b\u5c06\u200b\u540c\u4e00\u200b Block \u200b\u4e2d\u200b\u5176\u4ed6\u200b\u4efb\u4f55\u200b\u5305\u542b\u200b\u6709\u7528\u200b\u6570\u636e\u200b\u7684\u200b Page \u200b\u590d\u5236\u5230\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u5df2\u200b\u88ab\u200b\u64e6\u9664\u200b\u7684\u200b Block \u200b\u4e2d\u200b\u3002</p> <p>\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u65cb\u8f6c\u200b\u78c1\u76d8\u200b\uff0cSSD \u200b\u7684\u200b\u968f\u673a\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u66f4\u200b\u5feb\u200b\uff0c\u200b\u6d88\u8017\u200b\u7684\u200b\u529f\u7387\u200b\u66f4\u200b\u4f4e\u200b\uff0c\u200b\u540c\u65f6\u200b\u4e5f\u200b\u66f4\u52a0\u200b\u575a\u56fa\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_13","title":"\u5c40\u90e8\u6027","text":"<p>\u200b\u4f18\u79c0\u200b\u7684\u200b\u8ba1\u7b97\u673a\u7a0b\u5e8f\u200b\u901a\u5e38\u200b\u8868\u73b0\u200b\u51fa\u200b\u826f\u597d\u200b\u7684\u200b\u5c40\u90e8\u6027\u200b\uff08Locality\uff09\uff0c\u200b\u5373\u200b\u7a0b\u5e8f\u200b\u591a\u6b21\u200b\u5f15\u7528\u200b\u76f8\u540c\u200b\u7684\u200b\u6570\u636e\u200b\u6216\u200b\u6700\u8fd1\u200b\u5f15\u7528\u200b\u6570\u636e\u200b\u9644\u8fd1\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u524d\u8005\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u65f6\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff08Temporal Locality\uff09\uff0c\u200b\u540e\u8005\u200b\u5219\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff08Spatial Locality\uff09\u3002</p> <p>\u200b\u5c40\u90e8\u6027\u200b\u5728\u200b\u73b0\u4ee3\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u7684\u200b\u591a\u4e2a\u200b\u5c42\u7ea7\u200b\u4e2d\u200b\u90fd\u200b\u6709\u7740\u200b\u5e7f\u6cdb\u200b\u7684\u200b\u5e94\u7528\u200b\u3002\u200b\u5982\u200b\u5728\u200b\u786c\u4ef6\u200b\u7ea7\u522b\u200b\uff0c\u200b\u6211\u4eec\u200b\u5f15\u5165\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6765\u200b\u52a0\u5feb\u200b\u5bf9\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u7684\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u3002\u200b\u5728\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ea7\u522b\u200b\uff0c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u53ef\u4ee5\u200b\u7f13\u5b58\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e2d\u200b\u6700\u8fd1\u200b\u4f7f\u7528\u200b\u7684\u200b Block\u3002\u200b\u5728\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7ea7\u522b\u200b\uff0cWeb \u200b\u6d4f\u89c8\u5668\u200b\u4f1a\u200b\u5c06\u200b\u6700\u8fd1\u200b\u8bf7\u6c42\u200b\u7684\u200b\u6587\u6863\u200b\u7f13\u5b58\u200b\u5230\u200b\u672c\u5730\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_14","title":"\u5f15\u7528\u200b\u7a0b\u5e8f\u200b\u6570\u636e\u200b\u7684\u200b\u5c40\u90e8\u6027","text":"<p> \u200b\u53d8\u91cf\u200b<code>sum</code>\u200b\u5728\u200b\u6bcf\u6b21\u200b\u5faa\u73af\u200b\u4e2d\u200b\u90fd\u200b\u88ab\u200b\u5f15\u7528\u200b\u4e00\u6b21\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u51fd\u6570\u200b\u90fd\u200b\u5177\u6709\u200b\u4f18\u79c0\u200b\u7684\u200b\u65f6\u95f4\u200b\u5c40\u90e8\u6027\u200b\u3002\u200b\u800c\u200b\u5bf9\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b<code>a[i][j]</code>\u200b\u6765\u8bf4\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200b\u51fd\u6570\u200b<code>sumarrayrows</code>\u200b\u4f1a\u200b\u6309\u7167\u200b\u5176\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u7684\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u8bfb\u53d6\u200b\uff0c\u200b\u6240\u4ee5\u200b\u5faa\u73af\u200b\u7684\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\u4e5f\u200b\u5341\u5206\u200b\u826f\u597d\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u6bcf\u9694\u200b k \u200b\u4e2a\u200b\u5143\u7d20\u200b\u8bbf\u95ee\u200b\u8fde\u7eed\u200b\u5411\u91cf\u200b\u7684\u200b\u6a21\u5f0f\u200b\u79f0\u4e3a\u200b stride-k \u200b\u5f15\u7528\u200b\uff0c\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\u968f\u7740\u200b k \u200b\u7684\u200b\u589e\u52a0\u200b\u800c\u200b\u964d\u4f4e\u200b\u3002\u200b\u663e\u7136\u200b\uff0c\u200b\u91c7\u7528\u200b stride-2 \u200b\u5f15\u7528\u200b\u6a21\u5f0f\u200b\u7684\u200b\u51fd\u6570\u200b<code>sumarraycols</code>\u200b\u7684\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\u8f83\u5dee\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_15","title":"\u83b7\u53d6\u200b\u6307\u4ee4\u200b\u7684\u200b\u5c40\u90e8\u6027","text":"<p>\u200b\u6211\u4eec\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u8bc4\u4f30\u200b CPU \u200b\u8bfb\u53d6\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7a0b\u5e8f\u200b\u6307\u4ee4\u200b\u7684\u200b\u5c40\u90e8\u6027\u200b\u3002\u200b\u5faa\u73af\u4f53\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u4f1a\u200b\u6309\u7167\u200b\u5b58\u50a8\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u6267\u884c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5faa\u73af\u200b\u5177\u6709\u200b\u826f\u597d\u200b\u7684\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\u3002\u200b\u7531\u4e8e\u200b\u5faa\u73af\u4f53\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u4f1a\u200b\u88ab\u200b\u591a\u6b21\u200b\u8fed\u4ee3\u200b\u6267\u884c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u65f6\u95f4\u200b\u5c40\u90e8\u6027\u200b\u4e5f\u200b\u5f88\u200b\u4f18\u79c0\u200b\u3002\u200b\u4e0e\u200b\u7a0b\u5e8f\u200b\u6570\u636e\u200b\u76f8\u6bd4\u200b\uff0c\u200b\u6307\u4ee4\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5f88\u5c11\u200b\u88ab\u200b\u4fee\u6539\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_16","title":"\u5b58\u50a8\u7cfb\u7edf\u200b\u5c42\u7ea7","text":"<p> \u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5b58\u50a8\u200b\u5728\u200b\u5bb9\u91cf\u200b\u5927\u800c\u200b\u8bbf\u95ee\u200b\u901f\u5ea6\u6162\u200b\u7684\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u6682\u5b58\u200b\u5230\u200b\u5bb9\u91cf\u200b\u76f8\u5bf9\u200b\u8f83\u200b\u5c0f\u200b\u4f46\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u66f4\u5feb\u200b\u7684\u200b\u533a\u57df\u200b\u4e2d\u200b\uff0c\u200b\u8fd9\u200b\u4fbf\u662f\u200b\u7f13\u5b58\u200b\uff08Cache\uff09\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u5b58\u50a8\u7cfb\u7edf\u200b\u5c42\u7ea7\u200b\u4e2d\u200b\u7684\u200b\u7f13\u5b58\u200b\u6982\u5ff5\u200b\uff1a</p> <p> \u200b\u4e0d\u540c\u200b\u5c42\u7ea7\u200b\u7684\u200b\u8bbe\u5907\u200b\u4e4b\u95f4\u200b\u4ee5\u200b Block \u200b\u4e3a\u200b\u5355\u4f4d\u200b\u4f20\u8f93\u6570\u636e\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Block \u200b\u90fd\u200b\u6709\u200b\u552f\u4e00\u200b\u7684\u200b\u5730\u5740\u200b\u6216\u200b\u540d\u79f0\u200b\u3002\u200b\u76f8\u90bb\u200b\u5c42\u7ea7\u200b\u8bbe\u5907\u200b\u4e4b\u95f4\u200b\u7684\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u4e00\u822c\u200b\u662f\u200b\u56fa\u5b9a\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u662f\u200b\u53d8\u5316\u200b\u7684\u200b\uff08\u200b\u5982\u200b\u5b58\u50a8\u200b\u5728\u200b Web \u200b\u670d\u52a1\u5668\u200b\u4e0a\u200b\u7684\u200b HTML \u200b\u6587\u4ef6\u200b\uff09\u3002\u200b\u4e0d\u540c\u200b\u5c42\u7ea7\u200b\u4f7f\u7528\u200b\u7684\u200b Block \u200b\u5927\u5c0f\u200b\u5404\u4e0d\u76f8\u540c\u200b\uff0c\u200b\u5982\u200b L0 \u200b\u548c\u200b L1 \u200b\u4e4b\u95f4\u200b\u7684\u200b Block \u200b\u901a\u5e38\u200b\u4e3a\u200b\u4e00\u4e2a\u200b Word\uff0c\u200b\u800c\u200b L1 \u200b\u548c\u200b L2 \u200b\u4e4b\u95f4\u200b\u7684\u200b Block \u200b\u5219\u200b\u4e3a\u200b\u56db\u5230\u200b\u516b\u4e2a\u200b Word\u3002\u200b\u4e00\u822c\u6765\u8bf4\u200b\uff0c\u200b\u5c42\u7ea7\u200b\u8d8a\u4f4e\u200b\u7684\u200b\u8bbe\u5907\u200b\u8bbf\u95ee\u901f\u5ea6\u200b\u8d8a\u6162\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u4f7f\u7528\u200b\u7684\u200b Block \u200b\u4e5f\u200b\u4f1a\u200b\u8d8a\u200b\u5927\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_17","title":"\u7f13\u5b58\u200b\u547d\u4e2d\u200b\u4e0e\u200b\u7f3a\u5931","text":"<p>\u200b\u5f53\u200b\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u8bbf\u95ee\u200b\u5b58\u50a8\u200b\u5728\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b d \u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u9996\u5148\u200b\u4ece\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u67e5\u627e\u200b\u3002\u200b\u5982\u679c\u200b d \u200b\u6070\u597d\u200b\u7f13\u5b58\u200b\u5728\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u4e2d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u4fbf\u79f0\u200b\u7f13\u5b58\u200b\u547d\u4e2d\u200b\uff08Cache Hits\uff09\u3002\u200b\u53cd\u4e4b\u200b\u5219\u200b\u4e3a\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\uff08Cache Misses\uff09\uff0c\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u4f1a\u200b\u4ece\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u83b7\u53d6\u200b d \u200b\u6240\u5728\u200b\u7684\u200b Block\u3002\u200b\u5982\u679c\u200b\u6b64\u65f6\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u8bbe\u5907\u200b\u5df2\u6ee1\u200b\uff0c\u200b\u5219\u200b\u73b0\u6709\u200b\u7684\u200b Block \u200b\u5c06\u4f1a\u200b\u88ab\u200b\u8986\u76d6\u200b\uff08\u200b\u9a71\u9010\u200b\uff09\u3002Block \u200b\u7684\u200b\u9a71\u9010\u200b\u7b56\u7565\u200b\uff08Replacement Policy\uff09\u200b\u6709\u200b\u591a\u79cd\u200b\uff0c\u200b\u6bd4\u5982\u200b\u968f\u673a\u200b\u66ff\u6362\u200b\u548c\u200b LRU\uff08Least Recently Used\uff09\u3002LRU \u200b\u7b56\u7565\u200b\u4f1a\u200b\u5c06\u200b\u88ab\u200b\u8bbf\u95ee\u200b\u65f6\u95f4\u200b\u636e\u200b\u73b0\u5728\u200b\u6700\u200b\u4e45\u8fdc\u200b\u7684\u200b Block \u200b\u9a71\u9010\u200b\u3002</p> <p>\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u6709\u200b\u591a\u79cd\u4e0d\u540c\u200b\u7c7b\u578b\u200b\u3002\u200b\u5982\u679c\u200b\u7f13\u5b58\u200b\u4e3a\u7a7a\u200b\uff0c\u200b\u5219\u200b\u8bbf\u95ee\u200b\u4efb\u4f55\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u90fd\u200b\u5c06\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u5176\u4e3a\u200b\u5f3a\u5236\u200b\u7f3a\u5931\u200b\uff08Compulsory Misses\uff09\u200b\u6216\u200b\u51b7\u200b\u7f3a\u5931\u200b\uff08Cold Misses\uff09\u3002</p> <p>\u200b\u6bcf\u5f53\u200b\u51fa\u73b0\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u65f6\u200b\uff0c\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4f1a\u200b\u6839\u636e\u200b\u5176\u200b\u653e\u7f6e\u200b\u7b56\u7565\u200b\uff08Placement Policy\uff09\u200b\u5c06\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block \u200b\u62f7\u8d1d\u5230\u200b\u6307\u5b9a\u200b\u4f4d\u7f6e\u200b\u5904\u200b\u3002Block \u200b\u7684\u200b\u653e\u7f6e\u200b\u7b56\u7565\u200b\u540c\u6837\u200b\u6709\u200b\u591a\u79cd\u200b\uff0c\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u4fbf\u662f\u200b\u968f\u673a\u200b\u653e\u7f6e\u200b\u3002\u200b\u5b83\u200b\u7684\u200b\u7f3a\u70b9\u200b\u5341\u5206\u200b\u660e\u663e\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u88ab\u200b\u968f\u673a\u200b\u653e\u7f6e\u200b\u7684\u200b Block \u200b\u7684\u200b\u5bfb\u5740\u200b\u6210\u672c\u200b\u5f88\u200b\u9ad8\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block <code>i</code> \u200b\u653e\u7f6e\u200b\u5728\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block <code>i mod n</code> \u200b\u5904\u200b\uff0c\u200b\u8be5\u200b\u7b56\u7565\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u6620\u5c04\u200b\u653e\u7f6e\u200b\u3002\u200b\u82e5\u200b n \u200b\u4e3a\u200b 4\uff0c\u200b\u5219\u200b\u4e0a\u200b\u56fe\u200b\u4e2d\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 0\u30014\u30018 \u200b\u548c\u200b 12 \u200b\u5c06\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 0\uff0c\u200b\u800c\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 1\u30015\u30019 \u200b\u548c\u200b 13 \u200b\u5219\u200b\u5c06\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 1\u3002</p> <p>\u200b\u6620\u5c04\u200b\u653e\u7f6e\u200b\u7684\u200b\u7f3a\u70b9\u200b\u662f\u200b\u5bb9\u6613\u200b\u5bfc\u81f4\u200b\u51b2\u7a81\u200b\u7f3a\u5931\u200b\uff08Conflict Misses\uff09\u3002\u200b\u5982\u679c\u200b\u7a0b\u5e8f\u200b\u4f9d\u6b21\u200b\u8bf7\u6c42\u200b\u7b2c\u200b k + 1 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 0\u30014\u30018 \u200b\u548c\u200b 12\uff0c\u200b\u7531\u4e8e\u200b\u5b83\u4eec\u200b\u5747\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b Block 0\uff0c\u200b\u56e0\u6b64\u200b\u5373\u4f7f\u200b\u7f13\u5b58\u200b\u8db3\u4ee5\u200b\u5bb9\u7eb3\u200b\u56db\u4e2a\u200b Block\uff0c\u200b\u4e5f\u200b\u5c06\u200b\u8fde\u7eed\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u3002</p> <p>\u200b\u7a0b\u5e8f\u200b\u901a\u5e38\u200b\u5206\u200b\u591a\u4e2a\u200b\u9636\u6bb5\u200b\uff08\u200b\u5982\u200b\u5faa\u73af\u200b\uff09\u200b\u8fd0\u884c\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6bcf\u4e2a\u200b\u9636\u6bb5\u200b\u90fd\u200b\u4f1a\u200b\u8bbf\u95ee\u200b\u4e00\u4e9b\u200b\u6052\u5b9a\u200b\u7684\u200b Block \u200b\u96c6\u5408\u200b\uff08\u200b\u5373\u200b\u5de5\u4f5c\u200b\u96c6\u200b\uff09\u3002\u200b\u5982\u679c\u200b\u5de5\u4f5c\u200b\u96c6\u200b\uff08Working Set\uff09\u200b\u8d85\u8fc7\u200b\u4e86\u200b\u7f13\u5b58\u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5c31\u200b\u5c06\u200b\u53d1\u751f\u200b\u5bb9\u91cf\u200b\u7f3a\u5931\u200b\uff08Capacity Misses\uff09\u3002</p>"},{"location":"core/csapp/ch6/#_18","title":"\u7f13\u5b58\u200b\u7ba1\u7406","text":"<p>\u200b\u4e0d\u540c\u200b\u7ea7\u522b\u200b\u7684\u200b\u7f13\u5b58\u200b\u7ba1\u7406\u200b\u662f\u200b\u7531\u200b\u786c\u4ef6\u200b\u3001\u200b\u8f6f\u4ef6\u200b\u6216\u200b\u4e24\u8005\u200b\u7684\u200b\u7ec4\u5408\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a </p>"},{"location":"core/csapp/ch6/#_19","title":"\u7f13\u5b58\u200b\u7684\u200b\u5b9e\u73b0\u200b\u7ec6\u8282","text":"<p>\u200b\u5047\u8bbe\u200b\u5b58\u5728\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b\u5b58\u50a8\u7cfb\u7edf\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\uff0c\u200b\u5728\u200b CPU \u200b\u548c\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e4b\u95f4\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b L1 \u200b\u7ea7\u200b\u7684\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u901a\u8fc7\u200b\u8be5\u200b\u6a21\u578b\u200b\u4ecb\u7ecd\u200b\u7f13\u5b58\u200b\u7684\u200b\u5177\u4f53\u200b\u5b9e\u73b0\u200b\u7ec6\u8282\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_20","title":"\u901a\u7528\u200b\u7f13\u5b58\u200b\u7ba1\u7406","text":"<p>\u200b\u5047\u8bbe\u200b\u6211\u4eec\u200b\u6a21\u578b\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5185\u5b58\u5730\u5740\u200b\u90fd\u200b\u6709\u200b \\(m\\) \u200b\u4f4d\u200b\uff0c\u200b\u5219\u200b\u5171\u6709\u200b \\(M = 2^m\\) \u200b\u4e2a\u200b\u552f\u4e00\u200b\u5730\u5740\u200b\u3002\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u7f13\u5b58\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u4e86\u200b \\(S = 2^s\\) \u200b\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff08Cache Set\uff09\u200b\u7684\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u7531\u200b E \u200b\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\uff08Cache Line\uff09\u200b\u7ec4\u6210\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u4e2d\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u4e86\u200b \\(B = 2^b\\) \u200b\u5b57\u8282\u200b\u6570\u636e\u200b\u7684\u200b Block\uff0c\u200b\u4e00\u4e2a\u200b\u6807\u8bc6\u200b\u8be5\u884c\u200b\u662f\u5426\u200b\u5b58\u50a8\u200b\u4e86\u200b\u6709\u6548\u200b\u4fe1\u606f\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cValid\u201d\uff09\uff0c\u200b\u4ee5\u53ca\u200b \\(t\\) \u200b\u4f4d\u200b\uff08\\(t = m -(b + s)\\)\uff09\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\u884c\u5185\u200b Block \u200b\u7684\u200b\u6807\u8bb0\u200b\u4f4d\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cTag\u201d\uff09\u3002</p> <p> \u200b\u7f13\u5b58\u200b\u7684\u200b\u7ed3\u6784\u200b\u901a\u5e38\u200b\u53ef\u4ee5\u200b\u7528\u200b\u5143\u7956\u200b (S, E, B, m) \u200b\u6765\u200b\u8868\u5f81\u200b\uff0c\u200b\u5176\u200b\u5bb9\u91cf\u200b\u4e3a\u200b \\(C = S \\times E \\times B\\)\u3002</p>"},{"location":"core/csapp/ch6/#_21","title":"\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58","text":"<p>\u200b\u7f13\u5b58\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b E \u200b\u7684\u200b\u6570\u91cf\u200b\u8fdb\u884c\u200b\u5206\u7c7b\u200b\uff0cE \u200b\u4e3a\u200b 1 \u200b\u7684\u200b\u7f13\u5b58\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u3002\u200b\u5f53\u200b CPU \u200b\u60f3\u8981\u200b\u8bfb\u53d6\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b Word \u200b\u65f6\u200b\uff0c\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u5c06\u200b\u901a\u8fc7\u200b\u4ee5\u4e0b\u200b\u6b65\u9aa4\u200b\u786e\u5b9a\u200b\u7f13\u5b58\u200b\u662f\u5426\u200b\u547d\u4e2d\u200b\u4ee5\u53ca\u200b\u63d0\u53d6\u200b\u8bf7\u6c42\u200b\u7684\u200b Word\uff1a</p> <ul> <li>\u200b\u96c6\u5408\u200b\u9009\u62e9\u200b\uff08Set Selection\uff09</li> <li>\u200b\u884c\u200b\u5339\u914d\u200b\uff08Line Matching\uff09</li> <li>\u200b\u5b57\u200b\u63d0\u53d6\u200b\uff08Word Extraction\uff09</li> </ul> <p> \u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u7f13\u5b58\u200b\u770b\u6210\u200b\u4e00\u4e2a\u200b\u4ee5\u200b Set Index \u200b\u4e3a\u200b\u7d22\u5f15\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u200b\u6570\u7ec4\u200b\uff0c\u200b\u793a\u4f8b\u200b\u4e2d\u200b\u7684\u200b Set Index \u200b\u4e3a\u200b \\(0001_2\\)\uff0c\u200b\u56e0\u6b64\u200b\u5c06\u200b\u9009\u62e9\u200b\u7f13\u5b58\u200b\u96c6\u200b 1\u3002</p> <p> \u200b\u5982\u679c\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 1 \u200b\u4e14\u200b\u7f13\u5b58\u200b\u884c\u4e2d\u200b\u7684\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u4e0e\u200b\u5730\u5740\u200b\u4e2d\u200b\u7684\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u76f8\u5339\u914d\u200b\uff0c\u200b\u5219\u200b\u7f13\u5b58\u200b\u547d\u4e2d\u200b\u3002\u200b\u540c\u6837\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b Block \u200b\u770b\u4f5c\u200b\u4e00\u4e2a\u200b\u4ee5\u200b Block Offset \u200b\u4e3a\u200b\u7d22\u5f15\u200b\u7684\u200b\u5b57\u8282\u200b\u6570\u7ec4\u200b\u3002\u200b\u793a\u4f8b\u200b\u4e2d\u200b\u7684\u200b Block Offset \u200b\u4e3a\u200b \\(100_2\\)\uff0c\u200b\u56e0\u6b64\u200b\u76ee\u6807\u200b Word \u200b\u7684\u200b\u8d77\u59cb\u200b\u5b57\u8282\u200b\u4e3a\u200b 4\uff0c\u200b\u5373\u200b\u4e0a\u200b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201c\\(w_0\\)\u201d\u3002</p> <p>\u200b\u5982\u679c\u200b\u51fa\u73b0\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\uff0c\u200b\u5219\u200b\u7f13\u5b58\u200b\u5c06\u200b\u4ece\u200b\u4ee5\u4e0b\u200b\u4e00\u7ea7\u200b\u8bbe\u5907\u200b\u4e2d\u200b\u68c0\u7d22\u200b\u8bf7\u6c42\u200b\u7684\u200b Block\uff0c\u200b\u7136\u540e\u200b\u5b58\u50a8\u200b\u5728\u200b\u5176\u200b Set Index \u200b\u6307\u5b9a\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u4e2d\u200b\u3002\u200b\u82e5\u200b\u5f53\u524d\u200b\u7f13\u5b58\u200b\u5df2\u6ee1\u200b\uff0c\u200b\u8003\u8651\u200b\u5230\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7f13\u5b58\u200b\u884c\u5c06\u200b\u88ab\u200b\u66ff\u6362\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_22","title":"\u7f13\u5b58\u200b\u5b9e\u73b0\u200b\u793a\u4f8b","text":"<p>\u200b\u5047\u8bbe\u200b\u4e00\u4e2a\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u6709\u200b\u56db\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Block \u200b\u4e24\u4e2a\u200b\u5b57\u8282\u200b\u3002\u200b\u5730\u5740\u200b\u5747\u200b\u4e3a\u200b\u56db\u4f4d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Word \u200b\u90fd\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\uff1a  - \u200b\u7d22\u5f15\u200b\u4f4d\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cIndex Bits\u201d\uff09\u200b\u548c\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u552f\u4e00\u200b\u6807\u8bc6\u200b\u4e86\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b Block\uff1b - \u200b\u4e0d\u540c\u200b\u7684\u200b Block \u200b\u53ef\u4ee5\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u5982\u200b Block 0 \u200b\u548c\u200b 4\uff1b - \u200b\u4e0e\u200b\u76f8\u540c\u200b\u7f13\u5b58\u200b\u96c6\u200b\u6620\u5c04\u200b\u7684\u200b Block \u200b\u662f\u200b\u901a\u8fc7\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u8fdb\u884c\u200b\u533a\u5206\u200b\u7684\u200b\uff0c\u200b\u5982\u200b Block 0 \u200b\u7684\u200b\u6807\u8bb0\u200b\u4f4d\u4e3a\u200b 0\uff0c\u200b\u800c\u200b Block 1 \u200b\u7684\u200b\u6807\u8bb0\u200b\u4f4d\u4e3a\u200b 1\u3002</p> <p>\u200b\u82e5\u200b CPU \u200b\u60f3\u8981\u200b\u8bfb\u53d6\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e9b\u200b Word\uff0c\u200b\u4e0a\u8ff0\u200b\u7f13\u5b58\u200b\u5c06\u4f1a\u200b\u5f00\u5c55\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u5de5\u4f5c\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u5728\u200b\u5f00\u59cb\u200b\u65f6\u200b\uff0c\u200b\u7f13\u5b58\u200b\u662f\u200b\u7a7a\u200b\u7684\u200b\uff1a</p> Set Valid tag block[0] Block[1] 0 0 1 0 2 0 3 0 <p>\u200b\u5f53\u200b CPU \u200b\u8bfb\u53d6\u200b\u5730\u5740\u200b 0 \u200b\u5904\u200b\u7684\u200b Word \u200b\u65f6\u200b\uff0c\u200b\u7f13\u5b58\u200b\u5c06\u200b\u4ece\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u83b7\u53d6\u200b Block 0 \u200b\u5e76\u200b\u628a\u200b\u5b83\u200b\u5b58\u50a8\u200b\u5728\u200b Set 0 \u200b\u4e2d\u200b\uff1a</p> Set Valid tag block[0] Block[1] 0 1 0 m[0] m[1] 1 0 2 0 3 0 <p>\u200b\u6b64\u540e\u200b\u5982\u679c\u200b CPU \u200b\u60f3\u8981\u200b\u8bfb\u53d6\u200b\u5730\u5740\u200b 1 \u200b\u5904\u200b\u7684\u200b Word\uff0c\u200b\u5c31\u200b\u663e\u7136\u200b\u4f1a\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u547d\u4e2d\u200b\u3002\u200b\u800c\u200b\u5f53\u200b CPU \u200b\u8bfb\u53d6\u200b\u5730\u5740\u200b 13 \u200b\u5904\u200b\u7684\u200b Word \u200b\u65f6\u200b\uff0c\u200b\u7f13\u5b58\u200b\u5c06\u200b\u4ece\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u83b7\u53d6\u200b Block 6 \u200b\u5e76\u200b\u628a\u200b\u5b83\u200b\u5b58\u50a8\u200b\u5728\u200b Set 2 \u200b\u4e2d\u200b\uff1a</p> Set Valid tag block[0] Block[1] 0 1 0 m[0] m[1] 1 0 2 0 m[12] m[13] 3 0 <p>\u200b\u5f53\u200b CPU \u200b\u8bfb\u53d6\u200b\u5730\u5740\u200b 8 \u200b\u5904\u200b\u7684\u200b Word \u200b\u65f6\u200b\uff0c\u200b\u5373\u4f7f\u200b Set 0 \u200b\u4e2d\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 1\uff0c\u200b\u4f46\u200b Tag \u200b\u5e76\u200b\u4e0d\u200b\u5339\u914d\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5c06\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u3002\u200b\u7f13\u5b58\u200b\u4ece\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u83b7\u53d6\u200b Block 4 \u200b\u5e76\u200b\u8986\u76d6\u200b\u4e4b\u524d\u200b\u7684\u200b\u7f13\u5b58\u200b\u884c\u200b\uff0c\u200b\u4e00\u65e6\u200b CPU \u200b\u60f3\u8981\u200b\u518d\u6b21\u200b\u8bfb\u53d6\u200b\u5730\u5740\u200b 0 \u200b\u5904\u200b\u7684\u200b Word \u200b\u5c31\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u51b2\u7a81\u200b\u7f3a\u5931\u200b\u3002</p> Set Valid tag block[0] Block[1] 0 1 0 m[8] m[9] 1 0 2 0 m[12] m[13] 3 0"},{"location":"core/csapp/ch6/#_23","title":"\u51b2\u7a81\u200b\u7f3a\u5931","text":"<p>\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u7684\u200b\u51b2\u7a81\u200b\u7f3a\u5931\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u8bbf\u95ee\u200b\u957f\u5ea6\u200b\u4e3a\u200b 2 \u200b\u7684\u200b\u5e42\u200b\u7684\u200b\u6570\u7ec4\u200b\u65f6\u200b\u7ecf\u5e38\u51fa\u73b0\u200b\uff0c\u200b\u5982\u200b\uff1a</p> <pre><code>float dotprod(float x[8], float y[8])\n{\n    float sum = 0.0;\n    int i;\n    for (i = 0; i &lt; 8; i++)\n        sum += x[i] * y[i];\n    return sum;\n}\n</code></pre> <p>\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u5177\u6709\u200b\u826f\u597d\u200b\u7684\u200b\u5c40\u90e8\u6027\u200b\uff0c\u200b\u4f46\u200b\u5728\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u5374\u200b\u5f88\u200b\u5bb9\u6613\u200b\u53d1\u751f\u51b2\u7a81\u200b\u7f3a\u5931\u200b\u3002\u200b\u5047\u8bbe\u200b\u7f13\u5b58\u200b\u6709\u200b\u4e24\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Block \u200b\u5b58\u50a8\u200b 16 \u200b\u5b57\u8282\u200b\u7684\u200b\u6570\u636e\u200b\u3002\u200b\u90a3\u4e48\u200b\u7f13\u5b58\u200b\u7684\u200b\u5bb9\u91cf\u200b\u4fbf\u200b\u4e3a\u200b 32 \u200b\u5b57\u8282\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5b8c\u6574\u200b\u5730\u200b\u4fdd\u5b58\u200b\u6574\u4e2a\u200b\u6570\u7ec4\u200b\u3002\u200b\u6570\u7ec4\u200b<code>x[8]</code>\u200b\u548c\u200b<code>y[8]</code>\u200b\u4e2d\u200b\u7684\u200b\u5143\u7d20\u200b\u4e0e\u200b\u7f13\u5b58\u200b\u96c6\u200b\u7684\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\u5982\u4e0b\u200b\uff1a</p> <p> \u200b\u7531\u4e8e\u200b\u4e24\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u7d22\u5f15\u200b\u76f8\u540c\u200b\u7684\u200b\u5143\u7d20\u200b\u5747\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6bcf\u5f53\u200b\u5faa\u73af\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u8bfb\u53d6\u200b\u6570\u7ec4\u200b\u5143\u7d20\u200b\u65f6\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u51b2\u7a81\u200b\u7f3a\u5931\u200b\u3002\u200b\u6211\u4eec\u200b\u5c06\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u79f0\u4e3a\u200b\u98a0\u7c38\u200b\uff08Thrashing\uff09\uff0c\u200b\u5373\u200b\u7f13\u5b58\u200b\u91cd\u590d\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u9a71\u9010\u200b\u76f8\u540c\u200b\u7f13\u5b58\u200b\u96c6\u4e2d\u200b\u7684\u200b Block\u3002</p> <p>\u200b\u4e00\u79cd\u200b\u7b80\u5355\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b\u662f\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u6570\u7ec4\u200b\u672b\u5c3e\u200b\u586b\u5145\u200b\u82e5\u5e72\u200b\u5b57\u8282\u200b\u3002\u200b\u5982\u200b\u5c06\u200b\u6570\u7ec4\u200b<code>x[8]</code>\u200b\u91cd\u65b0\u200b\u58f0\u660e\u200b\u4e3a\u200b<code>x[12]</code>\uff0c\u200b\u5219\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\u5c31\u200b\u53d8\u6210\u200b\u4e86\u200b\uff1a</p> <p> \u200b\u663e\u7136\u200b\uff0c\u200b\u6b64\u65f6\u200b<code>x[i]</code>\u200b\u4e0e\u200b<code>y[i]</code>\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u4e86\u200b\u4e0d\u540c\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u98a0\u7c38\u200b\u5c06\u200b\u4e0d\u518d\u200b\u51fa\u73b0\u200b\u3002</p> <p>\u200b\u7ec6\u5fc3\u200b\u7684\u200b\u8bfb\u8005\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u60f3\u5230\u200b\uff0c\u200b\u4e3a\u4ec0\u4e48\u200b Set index \u200b\u5728\u200b\u5730\u5740\u200b\u7684\u200b\u4e2d\u95f4\u200b\u4f4d\u800c\u975e\u200b\u9ad8\u4f4d\u200b\uff1f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u82e5\u200b Set index \u200b\u4f4d\u4e8e\u200b\u5730\u5740\u200b\u7684\u200b\u9ad8\u4f4d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e00\u4e9b\u200b\u8fde\u7eed\u200b\u7684\u200b Block \u200b\u5c06\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u7f13\u5b58\u200b\u96c6\u200b\u3002\u200b\u56e0\u6b64\u200b\u53ea\u8981\u200b\u7a0b\u5e8f\u200b\u6309\u200b\u987a\u5e8f\u200b\u8bfb\u53d6\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u7684\u200b\u5143\u7d20\u200b\uff0c\u200b\u7f13\u5b58\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u98a0\u7c38\u200b\u3002</p> <p></p>"},{"location":"core/csapp/ch6/#_24","title":"\u96c6\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58","text":"<p>\u200b\u96c6\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\uff08Set Associative Caches\uff09\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u200b\u53ef\u4ee5\u200b\u5305\u542b\u200b\u591a\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\u3002\u200b\u6211\u4eec\u200b\u901a\u5e38\u200b\u5c06\u200b\u5305\u542b\u200b E \uff081 &lt; E &lt; C/B\uff09\u200b\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\u7684\u200b\u7f13\u5b58\u200b\u79f0\u4e3a\u200b E-\u200b\u8def\u200b\uff08E-way\uff09\u200b\u96c6\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\uff0c\u200b\u4e0b\u56fe\u200b\u5219\u200b\u662f\u200b\u4e00\u4e2a\u200b\u4e8c\u8def\u200b\u96c6\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\u7684\u200b\u7ed3\u6784\u200b\uff1a</p> <p> \u200b\u5176\u200b\u8bfb\u53d6\u200b Word \u200b\u7684\u200b\u6b65\u9aa4\u200b\u4e0e\u200b\u76f4\u63a5\u200b\u6620\u5c04\u200b\u7f13\u5b58\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u533a\u522b\u200b\u4e3b\u8981\u200b\u5728\u4e8e\u200b\u884c\u200b\u5339\u914d\u200b\u4e0a\u200b\u3002\u200b\u96c6\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\u5fc5\u987b\u200b\u68c0\u67e5\u200b\u591a\u884c\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u200b\u548c\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u662f\u5426\u200b\u4e0e\u200b\u8bf7\u6c42\u200b\u7684\u200b Word \u200b\u76f8\u5339\u914d\u200b\uff1a</p> <p> \u200b\u4e00\u65e6\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\uff0c\u200b\u7f13\u5b58\u200b\u5c06\u200b\u9996\u5148\u200b\u4ece\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4e2d\u200b\u63d0\u53d6\u200b\u6240\u200b\u9700\u200b\u7684\u200b Block\u3002\u200b\u5982\u679c\u200b\u6b64\u65f6\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u7a7a\u884c\u200b\uff0c\u200b\u5219\u200b\u5fc5\u987b\u200b\u6839\u636e\u200b\u7b56\u7565\u200b\u66ff\u6362\u200b\u5df2\u6709\u200b\u7684\u200b\u7f13\u5b58\u200b\u884c\u200b\u3002\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u65b9\u6cd5\u200b\u4fbf\u662f\u200b\u968f\u673a\u200b\u66ff\u6362\u200b\uff0c\u200b\u4f46\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u5229\u7528\u200b\u5c40\u90e8\u6027\u200b\u5c3d\u53ef\u80fd\u200b\u5730\u200b\u51cf\u5c0f\u200b\u88ab\u200b\u66ff\u6362\u200b\u7684\u200b\u884c\u200b\u672a\u6765\u200b\u518d\u6b21\u200b\u88ab\u200b\u4f7f\u7528\u200b\u7684\u200b\u53ef\u80fd\u200b\u3002\u200b\u9664\u4e86\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\u7684\u200b LRU \u200b\u4ee5\u5916\u200b\uff0c\u200b\u6211\u4eec\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u91c7\u7528\u200b LFU\uff08Least Frequently Used\uff09\u200b\u7b56\u7565\u200b\uff0c\u200b\u66ff\u6362\u200b\u8fc7\u53bb\u200b\u67d0\u4e2a\u200b\u65f6\u95f4\u6bb5\u200b\u5185\u200b\u88ab\u200b\u5f15\u7528\u200b\u6b21\u6570\u200b\u6700\u5c11\u200b\u7684\u200b\u884c\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_25","title":"\u5168\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58","text":"<p>\u200b\u5168\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\uff08Fully Associative Caches\uff09\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b\u7f13\u5b58\u200b\u96c6\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u591a\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\uff08E = C/B\uff09\uff1a  \u200b\u5176\u200b\u8bfb\u53d6\u200b Word \u200b\u7684\u200b\u6b65\u9aa4\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u4e24\u79cd\u200b\u7f13\u5b58\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4e0d\u8fc7\u200b Word \u200b\u7684\u200b\u5730\u5740\u200b\u5c06\u200b\u4e0d\u200b\u5305\u542b\u200b Set Index\uff1a  \u200b\u5bf9\u4e8e\u200b\u5168\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\uff0c\u200b\u7f13\u5b58\u200b\u7535\u8def\u200b\u5fc5\u987b\u200b\u5e76\u884c\u200b\u5730\u200b\u5339\u914d\u200b\u591a\u884c\u200b\u6807\u8bb0\u200b\u4f4d\u200b\u3002\u200b\u56e0\u6b64\u200b\u5b9e\u73b0\u200b\u4e00\u4e2a\u200b\u5bb9\u91cf\u200b\u5927\u4e14\u200b\u901f\u5ea6\u200b\u5feb\u200b\u7684\u200b\u5168\u200b\u5173\u8054\u200b\u578b\u200b\u7f13\u5b58\u200b\u662f\u200b\u5341\u5206\u56f0\u96be\u200b\u800c\u200b\u53c8\u200b\u6602\u8d35\u200b\u7684\u200b\uff0c\u200b\u5b83\u200b\u4ec5\u200b\u9002\u7528\u200b\u4e8e\u200b\u5c0f\u578b\u200b\u7f13\u5b58\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_26","title":"\u7f13\u5b58\u200b\u7684\u200b\u5199\u5165","text":"<p>\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u8bfb\u53d6\u200b\uff0c\u200b\u5199\u5165\u200b\u7684\u200b\u60c5\u51b5\u200b\u8981\u200b\u66f4\u52a0\u200b\u590d\u6742\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u6211\u4eec\u200b\u8fd8\u8981\u200b\u8003\u8651\u200b\u5982\u4f55\u200b\u66f4\u65b0\u200b\u4f4e\u200b\u7ea7\u522b\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u7684\u200b\u526f\u672c\u200b\u3002\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u65b9\u6cd5\u200b\u4fbf\u662f\u200b\u76f4\u63a5\u200b\u5199\u5165\u200b\uff08Write-through\uff09\uff0c\u200b\u4f46\u200b\u8fd9\u6837\u200b\u6bcf\u6b21\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u4f1a\u200b\u6d88\u8017\u200b\u603b\u7ebf\u200b\u7684\u200b\u6d41\u91cf\u200b\u3002\u200b\u53e6\u200b\u4e00\u79cd\u200b\u65b9\u6cd5\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u56de\u5199\u200b\uff08Write-back\uff09\uff0c\u200b\u5373\u200b\u53ea\u6709\u200b\u5f53\u200b\u66f4\u65b0\u200b\u7684\u200b Block \u200b\u88ab\u200b\u9a71\u9010\u200b\u65f6\u624d\u200b\u5411\u200b\u4f4e\u200b\u7ea7\u522b\u200b\u5199\u5165\u200b\u3002\u200b\u4e0d\u8fc7\u200b\u56de\u5199\u200b\u4e5f\u200b\u4f1a\u200b\u589e\u52a0\u200b\u7cfb\u7edf\u200b\u7684\u200b\u590d\u6742\u6027\u200b\uff0c\u200b\u7f13\u5b58\u200b\u5fc5\u987b\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u200b\u7ef4\u62a4\u200b\u4e00\u4e2a\u200b\u810f\u4f4d\u200b\uff08Dirty Bit\uff09\uff0c\u200b\u4ee5\u200b\u6807\u8bc6\u200b\u8be5\u200b Block \u200b\u662f\u5426\u200b\u5df2\u200b\u88ab\u200b\u4fee\u6539\u200b\u3002</p> <p>\u200b\u8fd8\u6709\u200b\u4e00\u4e2a\u200b\u95ee\u9898\u200b\u662f\u200b\u5982\u4f55\u200b\u5904\u7406\u200b\u5199\u5165\u200b\u65f6\u200b\u7684\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u3002\u200b\u4e00\u79cd\u200b\u65b9\u6cd5\u200b\u662f\u200b\u5c06\u200b\u76ee\u6807\u200b Block \u200b\u4ece\u200b\u4f4e\u200b\u7ea7\u522b\u200b\u52a0\u8f7d\u200b\u5230\u200b\u7f13\u5b58\u200b\u4e2d\u540e\u200b\u518d\u200b\u8fdb\u884c\u200b\u66f4\u65b0\u200b\uff0c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5199\u200b\u5206\u914d\u200b\uff08Write-allocate\uff09\u3002\u200b\u8be5\u200b\u65b9\u6cd5\u200b\u8bd5\u56fe\u200b\u5229\u7528\u200b\u5199\u5165\u200b\u7684\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff0c\u200b\u4f46\u200b\u7f3a\u70b9\u200b\u662f\u200b\u53ea\u8981\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u5c31\u200b\u5fc5\u987b\u200b\u4f20\u8f93\u200b Block\u3002\u200b\u53e6\u200b\u4e00\u79cd\u200b\u65b9\u6cd5\u200b\u4f1a\u200b\u7ed5\u8fc7\u200b\u7f13\u5b58\u200b\u76f4\u63a5\u200b\u5728\u200b\u4f4e\u200b\u7ea7\u522b\u200b\u4e2d\u200b\u4fee\u6539\u200b\u76ee\u6807\u200b Block\uff0c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u65e0\u5199\u200b\u5206\u914d\u200b\uff08No-write-allocate\uff09\u3002\u200b\u76f4\u63a5\u200b\u5199\u5165\u200b\u901a\u5e38\u200b\u4f7f\u7528\u200b\u65e0\u5199\u200b\u5206\u914d\u200b\uff0c\u200b\u800c\u200b\u56de\u200b\u5199\u200b\u5219\u200b\u4f7f\u7528\u200b\u5199\u200b\u5206\u914d\u200b\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u8bd5\u56fe\u200b\u7f16\u5199\u200b\u7f13\u5b58\u200b\u53cb\u597d\u200b\u578b\u200b\u4ee3\u7801\u200b\u7684\u200b\u7a0b\u5e8f\u5458\u200b\u6765\u8bf4\u200b\uff0c\u200b\u6211\u4eec\u200b\u63a8\u8350\u200b\u91c7\u7528\u200b\u56de\u5199\u200b\u548c\u200b\u5199\u200b\u5206\u914d\u200b\u7684\u200b\u5904\u7406\u200b\u65b9\u5f0f\u200b\u3002\u200b\u5c24\u5176\u200b\u662f\u200b\u5728\u200b\u4f4e\u7ea7\u200b\u522b\u7684\u200b\u7f13\u5b58\u200b\uff08\u200b\u5982\u200b\u865a\u62df\u5185\u5b58\u200b\uff09\u200b\u4e2d\u200b\uff0c\u200b\u4f20\u8f93\u6570\u636e\u200b\u7684\u200b\u65f6\u95f4\u200b\u8f83\u957f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u66f4\u200b\u5bb9\u6613\u200b\u4f53\u73b0\u200b\u51fa\u56de\u200b\u5199\u200b\u7684\u200b\u4f18\u52bf\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_27","title":"\u771f\u5b9e\u200b\u7f13\u5b58\u200b\u5c42\u7ea7\u200b\u5256\u6790","text":"<p> \u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u201ci-cache\u201d\u200b\u4ee3\u8868\u200b\u4fdd\u5b58\u200b\u6307\u4ee4\u200b\u7684\u200b\u7f13\u5b58\u200b\uff0c\u201cd-cache\u201d\u200b\u4ee3\u8868\u200b\u4fdd\u5b58\u200b\u7a0b\u5e8f\u200b\u6570\u636e\u200b\u7684\u200b\u7f13\u5b58\u200b\uff0c\u200b\u800c\u200b\u201cunified cache\u201d\u200b\u5219\u200b\u4ee3\u8868\u200b\u65e2\u200b\u5b58\u50a8\u200b\u6307\u4ee4\u200b\u53c8\u200b\u5b58\u50a8\u200b\u6570\u636e\u200b\u7684\u200b\u7f13\u5b58\u200b\u3002\u200b\u6709\u8da3\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u6240\u6709\u200b\u7684\u200b SRAM \u200b\u7f13\u5b58\u200b\u90fd\u200b\u5728\u200b CPU \u200b\u82af\u7247\u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch6/#_28","title":"\u7f13\u5b58\u200b\u53c2\u6570\u200b\u5bf9\u200b\u6027\u80fd\u200b\u7684\u200b\u5f71\u54cd","text":"<p>\u200b\u7f13\u5b58\u200b\u7684\u200b\u6027\u80fd\u6307\u6807\u200b\u4e3b\u8981\u200b\u6709\u200b\uff1a</p> <ul> <li>\u200b\u7f3a\u5931\u200b\u7387\u200b\uff08Miss Rate\uff09\uff1a# missed / # references</li> <li>\u200b\u547d\u4e2d\u7387\u200b\uff08Hit Rate\uff09\uff1a1 - Miss Rate</li> <li>\u200b\u547d\u4e2d\u200b\u65f6\u95f4\u200b\uff08Hit Time\uff09\uff1aCPU \u200b\u4ece\u200b\u7f13\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e00\u4e2a\u200b Word \u200b\u6240\u200b\u9700\u200b\u7684\u200b\u65f6\u95f4\u200b</li> <li>\u200b\u7f3a\u5931\u200b\u60e9\u7f5a\u200b\uff08Miss Penalty\uff09\uff1a\u200b\u56e0\u4e3a\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u800c\u200b\u589e\u52a0\u200b\u7684\u200b\u8bfb\u53d6\u200b\u65f6\u95f4\u200b</li> </ul> <p>\u200b\u7f13\u5b58\u200b\u7684\u200b\u4e0d\u540c\u200b\u53c2\u6570\u200b\u5bf9\u200b\u5176\u200b\u6027\u80fd\u200b\u7684\u200b\u5f71\u54cd\u200b\u4e3a\u200b\uff1a</p> <ul> <li>\u200b\u7f13\u5b58\u200b\u5bb9\u91cf\u200b\uff1a\u200b\u66f4\u5927\u200b\u7684\u200b\u7f13\u5b58\u200b\u53ef\u4ee5\u200b\u589e\u52a0\u200b\u547d\u4e2d\u7387\u200b\uff0c\u200b\u4f46\u200b\u4e5f\u200b\u4f1a\u200b\u589e\u52a0\u200b\u547d\u4e2d\u200b\u65f6\u95f4\u200b\uff1b</li> <li>Block \u200b\u7684\u200b\u5927\u5c0f\u200b\uff1a\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5229\u7528\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff0c\u200b\u901a\u8fc7\u200b\u589e\u5927\u200b Block \u200b\u6765\u200b\u63d0\u5347\u200b\u547d\u4e2d\u7387\u200b\u3002\u200b\u4f46\u200b\u5728\u200b\u7f13\u5b58\u200b\u5bb9\u91cf\u200b\u4e00\u5b9a\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0cBlock \u200b\u8d8a\u5927\u200b\uff0c\u200b\u7f13\u5b58\u200b\u884c\u200b\u7684\u200b\u6570\u91cf\u200b\u5c31\u200b\u8d8a\u5c11\u200b\u3002\u200b\u6b64\u5916\u200b\uff0c\u200b\u66f4\u5927\u200b\u7684\u200b Block \u200b\u8fd8\u4f1a\u200b\u589e\u52a0\u200b\u6570\u636e\u4f20\u8f93\u200b\u7684\u200b\u65f6\u95f4\u200b\uff1b</li> <li>\u200b\u5173\u8054\u6027\u200b\uff08\u200b\u7f13\u5b58\u200b\u884c\u200b\u7684\u200b\u6570\u91cf\u200b\uff09\uff1a\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u7f13\u5b58\u200b\u884c\u200b\u53ef\u4ee5\u200b\u907f\u514d\u200b\u56e0\u200b\u51b2\u7a81\u200b\u7f3a\u5931\u200b\u800c\u200b\u5bfc\u81f4\u200b\u7684\u200b\u98a0\u7c38\u200b\uff0c\u200b\u4f46\u200b\u7ef4\u62a4\u200b\u66f4\u200b\u591a\u200b\u7684\u200b\u7f13\u5b58\u200b\u884c\u200b\u4e5f\u200b\u9700\u8981\u200b\u5927\u91cf\u200b\u6210\u672c\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch6/#_29","title":"\u7f16\u5199\u200b\u7f13\u5b58\u200b\u53cb\u597d\u200b\u578b\u200b\u4ee3\u7801","text":"<p>\u200b\u7f16\u5199\u200b\u7f13\u5b58\u200b\u53cb\u597d\u200b\u578b\u200b\u4ee3\u7801\u200b\u7684\u200b\u4e24\u4e2a\u200b\u57fa\u672c\u51c6\u5219\u200b\u5982\u4e0b\u200b\uff1a</p> <ul> <li>\u200b\u5173\u6ce8\u200b\u6838\u5fc3\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u5185\u90e8\u200b\u5faa\u73af\u200b\u5e76\u200b\u5ffd\u7565\u200b\u5176\u4ed6\u200b\u90e8\u5206\u200b\uff1b</li> <li>\u200b\u51cf\u5c11\u200b\u6bcf\u4e2a\u200b\u5185\u90e8\u200b\u5faa\u73af\u200b\u4e2d\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u7684\u200b\u6570\u91cf\u200b\u3002</li> </ul> <p>\u200b\u5176\u4e2d\u200b\u7b2c\u4e8c\u4e2a\u200b\u51c6\u5219\u200b\u53c8\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u5c40\u90e8\u6027\u200b\u5206\u4e3a\u200b\u4e24\u200b\u65b9\u9762\u200b\uff1a</p> <ul> <li>\u200b\u6700\u5927\u5316\u200b\u7a7a\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff1a\u200b\u91c7\u7528\u200b stride-1 \u200b\u6a21\u5f0f\u200b\uff0c\u200b\u6309\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u7684\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u8bfb\u53d6\u200b\uff1b</li> <li>\u200b\u6700\u5927\u5316\u200b\u65f6\u95f4\u200b\u5c40\u90e8\u6027\u200b\uff1a\u200b\u4e00\u65e6\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u4e86\u200b\u67d0\u4e2a\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5c31\u200b\u5c3d\u53ef\u80fd\u200b\u591a\u5730\u200b\u4f7f\u7528\u200b\u5b83\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch6/#_30","title":"\u7f13\u5b58\u200b\u5bf9\u200b\u7a0b\u5e8f\u200b\u6027\u80fd\u200b\u7684\u200b\u5f71\u54cd","text":""},{"location":"core/csapp/ch7/","title":"\u94fe\u63a5","text":"<p>\u200b\u94fe\u63a5\u200b\uff08Linking\uff09\u200b\u662f\u200b\u5c06\u200b\u5404\u200b\u90e8\u5206\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u6536\u96c6\u200b\u5e76\u200b\u7ec4\u6210\u200b\u5355\u4e2a\u200b\u6587\u4ef6\u200b\u7684\u200b\u8fc7\u7a0b\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u52a0\u8f7d\u200b\uff08\u200b\u590d\u5236\u200b\uff09\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u6267\u884c\u200b\u3002\u200b\u94fe\u63a5\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\uff08\u200b\u5373\u200b\u6e90\u4ee3\u7801\u200b\u88ab\u200b\u7ffb\u8bd1\u6210\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u65f6\u200b\uff09\u200b\u6267\u884c\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u52a0\u8f7d\u200b\u65f6\u200b\uff08\u200b\u5373\u200b\u7a0b\u5e8f\u200b\u88ab\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u5e76\u200b\u7531\u200b\u52a0\u8f7d\u200b\u5668\u200b\u6267\u884c\u200b\u65f6\u200b\uff09\u200b\u6267\u884c\u200b\uff0c\u200b\u751a\u81f3\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u7531\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u6267\u884c\u200b\u3002\u200b\u5728\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u80fd\u591f\u200b\u81ea\u52a8\u200b\u6267\u884c\u200b\u94fe\u63a5\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u94fe\u63a5\u200b\u5668\u200b\uff08Linker\uff09\u3002</p> <p>\u200b\u94fe\u63a5\u200b\u5668\u200b\u652f\u6301\u200b\u5355\u72ec\u200b\u7f16\u8bd1\u200b\uff08Separate Compilation\uff09\uff0c\u200b\u56e0\u6b64\u200b\u5728\u200b\u8f6f\u4ef6\u5f00\u53d1\u200b\u4e2d\u8d77\u200b\u7740\u200b\u81f3\u5173\u91cd\u8981\u200b\u7684\u200b\u4f5c\u7528\u200b\u3002\u200b\u4e0e\u5176\u200b\u5c06\u200b\u5927\u578b\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7ec4\u7ec7\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5355\u4e00\u200b\u7684\u200b\u5927\u5757\u200b\u6e90\u6587\u4ef6\u200b\uff0c\u200b\u4e0d\u5982\u200b\u5c06\u200b\u5176\u200b\u5206\u89e3\u200b\u4e3a\u200b\u4e00\u4e9b\u200b\u66f4\u200b\u5c0f\u200b\u3001\u200b\u66f4\u200b\u6613\u4e8e\u200b\u7ba1\u7406\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u5355\u72ec\u200b\u4fee\u6539\u200b\u548c\u200b\u7f16\u8bd1\u200b\u7684\u200b\u6a21\u5757\u200b\u3002\u200b\u4e00\u65e6\u200b\u6211\u4eec\u200b\u4fee\u6539\u200b\u4e86\u200b\u5176\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u6a21\u5757\u200b\uff0c\u200b\u53ea\u200b\u9700\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u200b\u8be5\u200b\u6a21\u5757\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u94fe\u63a5\u200b\u5230\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\uff0c\u200b\u4e0d\u5fc5\u200b\u518d\u6b21\u200b\u7f16\u8bd1\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_2","title":"\u7f16\u8bd1\u5668\u200b\u9a71\u52a8","text":"<p>\u200b\u5927\u591a\u6570\u200b\u7f16\u8bd1\u7cfb\u7edf\u200b\u90fd\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u7f16\u8bd1\u5668\u200b\u9a71\u52a8\u200b\uff08Compiler Driver\uff09\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u7528\u6237\u200b\u9700\u6c42\u200b\u8c03\u7528\u200b\u8bed\u8a00\u200b\u9884\u200b\u5904\u7406\u5668\u200b\uff08Language Preprocessor\uff09\u3001\u200b\u7f16\u8bd1\u5668\u200b\u3001\u200b\u6c47\u7f16\u5668\u200b\u548c\u200b\u94fe\u63a5\u200b\u5668\u200b\u7b49\u200b\u3002\u200b\u4f8b\u5982\u200b\u8981\u200b\u5728\u200b GNU \u200b\u7f16\u8bd1\u7cfb\u7edf\u200b\u4e2d\u200b\u6784\u5efa\u200b\u4e0b\u5217\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b   \u200b\u4f7f\u7528\u200b\u547d\u4ee4\u200b<code>gcc -Og -o prog main.c sum.c</code>:</p> <p> \u200b\u7f16\u8bd1\u5668\u200b\u9a71\u52a8\u200b\u5c06\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4ece\u200b ASCII \u200b\u6e90\u6587\u4ef6\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u65f6\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u9996\u5148\u200b\uff0c\u200b\u9a71\u52a8\u200b\u8fd0\u884c\u200b C \u200b\u9884\u200b\u5904\u7406\u5668\u200b\uff08C Preprocessor\uff0cCPP\uff09\uff0c\u200b\u5c06\u200b\u6e90\u6587\u4ef6\u200b<code>main.c</code>\u200b\u8f6c\u6362\u200b\u4e3a\u200b ASCII \u200b\u4e2d\u95f4\u200b\u6587\u4ef6\u200b<code>main.i</code>\uff1b\u200b\u63a5\u4e0b\u6765\u200b\uff0c\u200b\u9a71\u52a8\u200b\u8fd0\u884c\u200b C \u200b\u7f16\u8bd1\u5668\u200b (C Compiler\uff0cCC)\uff0c\u200b\u5c06\u200b<code>main.i</code>\u200b\u8f6c\u6362\u200b\u4e3a\u200b ASCII \u200b\u6c47\u7f16\u8bed\u8a00\u200b\u6587\u4ef6\u200b<code>main.s</code>\uff1b\u200b\u7136\u540e\u200b\uff0c\u200b\u9a71\u52a8\u200b\u8fd0\u884c\u200b\u6c47\u7f16\u5668\u200b\uff0c\u200b\u5c06\u200b<code>main.s</code>\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\uff08Relocatable\uff09\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b<code>main.o</code>\uff08<code>sum.o</code>\u200b\u7684\u200b\u751f\u6210\u200b\u8fc7\u7a0b\u200b\u76f8\u540c\u200b\uff09\uff1b\u200b\u6700\u540e\u200b\uff0c\u200b\u9a71\u52a8\u200b\u8fd0\u884c\u200b\u94fe\u63a5\u200b\u5668\u200b\uff0c\u200b\u5c06\u200b<code>main.o</code>\u3001<code>sum.o</code>\u200b\u548c\u200b\u4e00\u4e9b\u200b\u5fc5\u8981\u200b\u7684\u200b\u7cfb\u7edf\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7ec4\u5408\u200b\uff0c\u200b\u521b\u5efa\u200b\u4e8c\u8fdb\u5236\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b<code>prog</code>\u3002</p>"},{"location":"core/csapp/ch7/#_3","title":"\u9759\u6001\u200b\u94fe\u63a5","text":"<p>\u200b\u9759\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\uff08Static Linker\uff09\u200b\u5c06\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u548c\u200b\u547d\u4ee4\u884c\u200b\u53c2\u6570\u200b\u4f5c\u4e3a\u200b\u8f93\u5165\u200b\uff0c\u200b\u751f\u6210\u200b\u5b8c\u5168\u200b\u94fe\u63a5\u200b\u7684\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u3002\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7531\u200b\u5404\u79cd\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u7ec4\u6210\u200b\uff0c\u200b\u6307\u4ee4\u200b\u3001\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u548c\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u53d8\u91cf\u200b\u5206\u522b\u200b\u5904\u4e8e\u200b\u4e0d\u540c\u200b\u90e8\u5206\u200b\u3002</p> <p>\u200b\u94fe\u63a5\u200b\u5668\u200b\u9700\u8981\u200b\u5b8c\u6210\u200b\u4e24\u4e2a\u200b\u4e3b\u8981\u200b\u4efb\u52a1\u200b\uff1a</p> <ul> <li>\u200b\u7b26\u53f7\u200b\u89e3\u6790\u200b\uff08Symbol Resolution\uff09\uff1a\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u5e76\u200b\u5f15\u7528\u200b\u7b26\u53f7\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u5bf9\u5e94\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u3001\u200b\u5168\u5c40\u53d8\u91cf\u200b\u6216\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\uff08\u200b\u5373\u200b\u4f7f\u7528\u200b<code>static</code>\u200b\u58f0\u660e\u200b\u7684\u200b\u4efb\u4f55\u200b\u53d8\u91cf\u200b\uff09\u3002\u200b\u7b26\u53f7\u200b\u89e3\u6790\u200b\u7684\u200b\u76ee\u7684\u200b\u662f\u200b\u5c06\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\u4e0e\u200b\u4e00\u4e2a\u200b\u7b26\u53f7\u200b\u5b9a\u4e49\u200b\u76f8\u5173\u8054\u200b\uff1b</li> <li>\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\uff08Relocation\uff09\uff1a\u200b\u7f16\u8bd1\u5668\u200b\u548c\u200b\u6c47\u7f16\u5668\u200b\u751f\u6210\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u6bb5\u200b\u662f\u4ece\u200b\u5730\u5740\u200b 0 \u200b\u5f00\u59cb\u200b\u7684\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u4f1a\u91cd\u200b\u5b9a\u4f4d\u200b\u6240\u6709\u200b\u7684\u200b\u7b26\u53f7\u200b\u5b9a\u4e49\u200b\u5e76\u200b\u4fee\u6539\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\u3002</li> </ul> <p>\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u53ea\u662f\u200b\u5b57\u8282\u200b\u5757\u200b\u7684\u200b\u96c6\u5408\u200b\uff0c\u200b\u5176\u4e2d\u200b\u53ef\u80fd\u200b\u5305\u542b\u200b\u4ee3\u7801\u200b\u3001\u200b\u6570\u636e\u200b\u6216\u200b\u6307\u5bfc\u200b\u94fe\u63a5\u200b\u5668\u200b\u548c\u200b\u52a0\u8f7d\u200b\u5668\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u3002\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u5404\u4e2a\u200b\u5757\u200b\u8fde\u63a5\u200b\u5728\u200b\u4e00\u8d77\u200b\uff0c\u200b\u786e\u5b9a\u200b\u6574\u4e2a\u200b\u5757\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u5e76\u200b\u4fee\u6539\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u5757\u200b\u4e2d\u200b\u7684\u200b\u4e0d\u540c\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u7f16\u8bd1\u5668\u200b\u548c\u200b\u6c47\u7f16\u5668\u200b\u5728\u200b\u751f\u6210\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u65f6\u200b\u5df2\u7ecf\u200b\u5b8c\u6210\u200b\u4e86\u200b\u5927\u90e8\u5206\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u56e0\u800c\u200b\u94fe\u63a5\u200b\u5668\u200b\u5bf9\u200b\u76ee\u6807\u200b\u673a\u5668\u200b\u7684\u200b\u4e86\u89e3\u200b\u751a\u200b\u5c11\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_4","title":"\u76ee\u6807\u200b\u6587\u4ef6","text":"<p>\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff08Object File\uff09\u200b\u6709\u200b\u4e09\u79cd\u200b\u5f62\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff1a\u200b\u5305\u542b\u200b\u4e8c\u8fdb\u5236\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7ec4\u5408\u200b\u4ee5\u200b\u521b\u5efa\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff1b</li> <li>\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff1a\u200b\u5305\u542b\u200b\u4e8c\u8fdb\u5236\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u5f62\u5f0f\u200b\uff0c\u200b\u53ef\u200b\u76f4\u63a5\u200b\u88ab\u200b\u590d\u5236\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u6267\u884c\u200b\uff1b</li> <li>\u200b\u5171\u4eab\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff1a\u200b\u4e00\u79cd\u200b\u7279\u6b8a\u200b\u7c7b\u578b\u200b\u7684\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u5728\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u6216\u200b\u8fd0\u884c\u200b\u65f6\u200b\u88ab\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u5e76\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch7/#_5","title":"\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6","text":"<p>\u200b\u5178\u578b\u200b\u7684\u200b ELF\uff08Executable and Linkable Format\uff09\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u683c\u5f0f\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> - ELF \u200b\u5934\u200b\uff08ELF Header\uff09\uff1a\u200b\u5f00\u5934\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8868\u5f81\u200b\u7cfb\u7edf\u200b\u5b57\u957f\u200b\uff08Word Size\uff09\u200b\u548c\u200b\u5b57\u8282\u200b\u987a\u5e8f\u200b\uff08Byte Ordering\uff09\u200b\u7684\u200b 16 \u200b\u5b57\u8282\u200b\u5e8f\u5217\u200b\u3002\u200b\u5176\u4f59\u90e8\u5206\u200b\u5305\u62ec\u200b ELF \u200b\u5934\u200b\u7684\u200b\u5927\u5c0f\u200b\u3001\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u7c7b\u578b\u200b\uff08\u200b\u5982\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u3001\u200b\u53ef\u200b\u6267\u884c\u200b\u6216\u200b\u5171\u4eab\u200b\uff09\u3001\u200b\u673a\u5668\u200b\u7c7b\u578b\u200b\uff08\u200b\u5982\u200b x86-64\uff09\u3001\u200b\u8282\u5934\u8868\u200b\uff08Section Header Table\uff09\u200b\u7684\u200b\u6587\u4ef6\u200b\u504f\u79fb\u91cf\u200b\u4ee5\u53ca\u200b\u5176\u4e2d\u200b\u6761\u200b\u76ee\u7684\u200b\u5927\u5c0f\u200b\u548c\u200b\u6570\u91cf\u200b\uff1b - \u200b\u8282\u5934\u8868\u200b\uff1a\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b Section \u200b\u7684\u200b\u4f4d\u7f6e\u200b\u548c\u200b\u5927\u5c0f\u200b\uff1b - Section\uff1a\u200b\u4f4d\u4e8e\u200b ELF \u200b\u5934\u200b\u548c\u200b\u8282\u5934\u8868\u200b\u4e4b\u95f4\u200b\uff0c\u200b\u5305\u62ec\u200b\uff1a   - .text\uff1a\u200b\u7f16\u8bd1\u200b\u540e\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u673a\u5668\u7801\u200b\uff1b   - .rodata\uff1a\u200b\u53ea\u8bfb\u200b\u6570\u636e\u200b\uff0c\u200b\u4f8b\u5982\u200b<code>printf</code>\u200b\u4e2d\u200b\u7684\u200b\u683c\u5f0f\u200b\u5b57\u7b26\u4e32\u200b\uff0cSwitch \u200b\u8bed\u53e5\u200b\u7684\u200b \u200b\u8df3\u8f6c\u200b\u8868\u200b \u200b\u7b49\u200b\uff1b   - .data\uff1a\u200b\u5df2\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u548c\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\u3002\u200b\u975e\u200b\u9759\u6001\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u4e8e\u200b\u6808\u4e2d\u200b\uff0c\u200b\u4e0d\u4f1a\u200b\u51fa\u73b0\u200b\u5728\u200b .data \u200b\u6216\u200b .bss \u200b\u4e2d\u200b\uff1b   - .bss\uff1a\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u548c\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\u3002\u200b\u6b64\u200b Section \u200b\u53ea\u662f\u200b\u4e00\u4e2a\u200b\u5360\u4f4d\u200b\u7b26\u200b\uff0c\u200b\u5728\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u4e0d\u200b\u5360\u7528\u200b\u5b9e\u9645\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u63d0\u5347\u200b\u7a7a\u95f4\u200b\u6548\u7387\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u53d8\u91cf\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u88ab\u200b\u5206\u914d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u521d\u59cb\u503c\u200b\u4e3a\u200b\u96f6\u200b\uff1b   - .symtab \uff1a\u200b\u4e00\u4e2a\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u88ab\u200b\u5b9a\u4e49\u200b\u548c\u200b\u5f15\u7528\u200b\u7684\u200b\u51fd\u6570\u200b\u548c\u200b\u5168\u5c40\u53d8\u91cf\u200b\u4fe1\u606f\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\uff08Symbol Table\uff09\u3002\u200b\u4e0e\u200b\u7f16\u8bd1\u5668\u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\u4e0d\u540c\u200b\uff0c.symtab \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\u4e0d\u200b\u5305\u542b\u200b\u4efb\u4f55\u200b\u5c40\u90e8\u53d8\u91cf\u200b\uff1b   - .rel.text\uff1a\u200b\u5f53\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u7ec4\u5408\u200b\u65f6\u200b\uff0c.text \u200b\u4e2d\u200b\u7684\u200b\u8bb8\u591a\u200b\u4f4d\u7f6e\u200b\u90fd\u200b\u9700\u8981\u200b\u88ab\u200b\u4fee\u6539\u200b\uff0c\u200b\u800c\u200b .rel.text \u200b\u4e2d\u5219\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u4e0e\u200b\u4e4b\u200b\u76f8\u5173\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u4fe1\u606f\u200b\u3002\u200b\u901a\u5e38\u200b\uff0c\u200b\u4efb\u4f55\u200b\u8c03\u7528\u200b\u5916\u90e8\u200b\u51fd\u6570\u200b\u6216\u200b\u5f15\u7528\u200b\u5168\u5c40\u53d8\u91cf\u200b\u7684\u200b\u6307\u4ee4\u200b\u90fd\u200b\u9700\u8981\u200b\u88ab\u200b\u4fee\u6539\u200b\uff0c\u200b\u800c\u200b\u8c03\u7528\u200b\u5c40\u90e8\u200b\u51fd\u6570\u200b\u7684\u200b\u6307\u4ee4\u200b\u5219\u200b\u4e0d\u53d8\u200b\u3002\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e00\u822c\u200b\u4e0d\u200b\u9700\u8981\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u4fe1\u606f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8fd9\u90e8\u5206\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\uff1b   - .rel.data\uff1a\u200b\u88ab\u200b\u5f15\u7528\u200b\u6216\u200b\u5b9a\u4e49\u200b\u7684\u200b\u4efb\u4f55\u200b\u5168\u5c40\u53d8\u91cf\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u4fe1\u606f\u200b\u3002\u200b\u901a\u5e38\u200b\uff0c\u200b\u6240\u6709\u200b\u521d\u59cb\u503c\u200b\u4e3a\u200b\u5168\u5c40\u53d8\u91cf\u200b\u5730\u5740\u200b\u6216\u200b\u5916\u90e8\u200b\u5b9a\u4e49\u200b\u51fd\u6570\u200b\u5730\u5740\u200b\u7684\u200b\u5df2\u200b\u521d\u59cb\u5316\u200b\u5168\u5c40\u53d8\u91cf\u200b\u90fd\u200b\u9700\u8981\u200b\u88ab\u200b\u4fee\u6539\u200b\uff1b   - .debug\uff1a\u200b\u8c03\u8bd5\u200b\u7b26\u53f7\u8868\u200b\uff0c\u200b\u4ec5\u200b\u5728\u200b\u4f7f\u7528\u200b<code>-g</code>\u200b\u9009\u9879\u200b\u8c03\u7528\u200b\u7f16\u8bd1\u5668\u200b\u9a71\u52a8\u200b\u65f6\u200b\u51fa\u73b0\u200b\uff1b   - .line\uff1a\u200b\u539f\u59cb\u200b\u7a0b\u5e8f\u200b\u4e2d\u884c\u200b\u53f7\u200b\u4e0e\u200b .text \u200b\u4e2d\u200b\u673a\u5668\u200b\u4ee3\u7801\u200b\u6307\u4ee4\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\uff0c\u200b\u4ec5\u200b\u5728\u200b\u4f7f\u7528\u200b<code>-g</code>\u200b\u9009\u9879\u200b\u8c03\u7528\u200b\u7f16\u8bd1\u5668\u200b\u9a71\u52a8\u200b\u65f6\u200b\u51fa\u73b0\u200b\uff1b   - .strtab\uff1a\u200b\u4e00\u4e2a\u200b\u4ee5\u200b<code>NULL</code>\u200b\u7ed3\u5c3e\u200b\uff0c\u200b\u5305\u542b\u200b .symtab \u200b\u548c\u200b .debug \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\u4ee5\u53ca\u200b Section \u200b\u540d\u79f0\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\u5e8f\u5217\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_6","title":"\u7b26\u53f7\u200b\u548c\u200b\u7b26\u53f7\u8868","text":"<p>\u200b\u6bcf\u4e2a\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u7b26\u53f7\u8868\u200b\uff0c\u200b\u5176\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u8be5\u200b\u6587\u4ef6\u200b\u6240\u200b\u5b9a\u4e49\u200b\u548c\u200b\u5f15\u7528\u200b\u7684\u200b\u7b26\u53f7\u200b\u4fe1\u606f\u200b\u3002\u200b\u7b26\u53f7\u200b\u6709\u200b\u4ee5\u4e0b\u200b\u4e09\u79cd\u200b\uff1a</p> <ul> <li>\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\uff08Global Symbols\uff09\uff1a\u200b\u7531\u8be5\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u5f15\u7528\u200b\u7684\u200b\u7b26\u53f7\u200b\uff1b</li> <li>\u200b\u5916\u90e8\u200b\u7b26\u53f7\u200b\uff08Externals\uff09\uff1a\u200b\u88ab\u200b\u8be5\u200b\u6587\u4ef6\u200b\u5f15\u7528\u200b\u4f46\u200b\u7531\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\uff1b</li> <li>\u200b\u5c40\u90e8\u200b\u7b26\u53f7\u200b\uff08Local Symbols\uff09\uff1a\u200b\u7531\u8be5\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u4e14\u200b\u65e0\u6cd5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u5f15\u7528\u200b\u7684\u200b\u7b26\u53f7\u200b\uff0c\u200b\u5373\u200b\u4f7f\u7528\u200b<code>static</code>\u200b\u58f0\u660e\u200b\u7684\u200b\u51fd\u6570\u200b\u548c\u200b\u53d8\u91cf\u200b\u3002</li> </ul> <p>\u200b\u4e0a\u200b\u8282\u200b\u63d0\u5230\u200b\uff0c\u200b\u975e\u200b\u9759\u6001\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f4d\u4e8e\u200b\u6808\u4e2d\u200b\uff0c\u200b\u4e0e\u200b\u94fe\u63a5\u200b\u5668\u200b\u65e0\u5173\u200b\u3002\u200b\u800c\u200b\u9759\u6001\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u5219\u200b\u4fdd\u5b58\u200b\u5728\u200b .data \u200b\u6216\u200b .bss \u200b\u4e2d\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u5728\u200b\u7b26\u53f7\u8868\u200b\u4e2d\u4e3a\u200b\u5176\u200b\u521b\u5efa\u200b\u540d\u79f0\u200b\u552f\u4e00\u200b\u7684\u200b\u5c40\u90e8\u200b\u7b26\u53f7\u200b\u3002\u200b\u4f8b\u5982\u200b\u540c\u4e00\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u51fd\u6570\u200b\u90fd\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u9759\u6001\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>x</code>\uff1a</p> <pre><code>int f()\n{\n    static int x = 0;\n    return x;\n}\nint g()\n{\n    static int x = 1;\n    return x;\n}\n</code></pre> <p>\u200b\u90a3\u4e48\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u80fd\u200b\u5c06\u200b<code>x.1</code>\u200b\u4f5c\u4e3a\u200b\u51fd\u6570\u200b<code>f()</code>\u200b\u4e2d\u200b\u7684\u200b\u53d8\u91cf\u200b\u7b26\u53f7\u200b\uff0c\u200b\u5c06\u200b<code>x.2</code>\u200b\u4f5c\u4e3a\u200b\u51fd\u6570\u200b<code>g()</code>\u200b\u4e2d\u200b\u7684\u200b\u53d8\u91cf\u200b\u7b26\u53f7\u200b\u53d1\u9001\u7ed9\u200b\u6c47\u7f16\u5668\u200b\u3002\u200b\u6c47\u7f16\u5668\u200b\u4f7f\u7528\u200b\u63a5\u6536\u200b\u5230\u200b\u7684\u200b<code>.s</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u6784\u5efa\u200b\u7b26\u53f7\u8868\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6bcf\u4e2a\u200b\u6761\u200b\u76ee\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u4e3a\u200b\uff1a</p> <p> - <code>name</code>\uff1a\u200b\u7b26\u53f7\u200b\u540d\u200b\u5728\u200b\u5b57\u7b26\u4e32\u200b\u8868\u200b .strtab \u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\uff1b - <code>value</code>\uff1a\u200b\u5bf9\u4e8e\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u662f\u200b\u7b26\u53f7\u200b\u5728\u200b\u5176\u200b Section \u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\uff0c\u200b\u5bf9\u4e8e\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u662f\u200b\u7b26\u53f7\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\uff1b - <code>size</code>\uff1a\u200b\u7b26\u53f7\u200b\u7684\u200b\u5927\u5c0f\u200b\uff1b - <code>type</code>\uff1a\u200b\u7b26\u53f7\u200b\u7684\u200b\u7c7b\u578b\u200b\uff1b - <code>binding</code>\uff1a\u200b\u7b26\u53f7\u200b\u662f\u200b\u5c40\u90e8\u200b\u7684\u200b\u8fd8\u662f\u200b\u5168\u5c40\u200b\u7684\u200b\uff1b - <code>section</code>\uff1a\u200b\u7b26\u53f7\u200b\u6240\u5728\u200b\u7684\u200b Section \u200b\u5728\u200b\u8282\u5934\u200b\u8868\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\u3002</p> <p>\u200b\u503c\u5f97\u4e00\u63d0\u7684\u662f\u200b\uff0c\u200b\u6709\u200b\u4e09\u4e2a\u200b\u4f2a\u200b Section \u200b\u5728\u200b\u8282\u5934\u200b\u8868\u4e2d\u200b\u6ca1\u6709\u200b\u6761\u76ee\u200b\uff1a</p> <ul> <li>ABS\uff1a\u200b\u4e0d\u5e94\u91cd\u200b\u5b9a\u4f4d\u200b\u7684\u200b\u7b26\u53f7\u200b\uff1b</li> <li>UNDEF\uff1a\u200b\u5728\u200b\u6b64\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5f15\u7528\u200b\u4f46\u200b\u5728\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\uff1b</li> <li>COMMON\uff1a\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\u3002</li> </ul> <p>\u200b\u4e0a\u8ff0\u200b\u4e09\u4e2a\u200b Section \u200b\u4ec5\u200b\u5b58\u5728\u200b\u4e8e\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5728\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5e76\u200b\u4e0d\u200b\u5b58\u5728\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b READELF \u200b\u5de5\u5177\u200b\u9605\u8bfb\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\uff0c\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b main.c \u200b\u751f\u6210\u200b\u7684\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7b26\u53f7\u8868\u200b\u6761\u76ee\u200b\u5982\u4e0b\u200b\uff1a</p> <p> READELF \u200b\u901a\u8fc7\u200b\u6574\u6570\u200b\u7d22\u5f15\u200b Ndx \u200b\u6807\u8bc6\u200b\u6bcf\u4e2a\u200b Section\uff0c1 \u200b\u8868\u793a\u200b .text\uff0c3 \u200b\u8868\u793a\u200b .data\u3002\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b<code>main</code>\u200b\u548c\u200b<code>array</code>\u200b\u5206\u522b\u200b\u4f4d\u4e8e\u200b\u4e0a\u8ff0\u200b\u4e24\u4e2a\u200b Section \u200b\u9996\u90e8\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u504f\u79fb\u91cf\u200b<code>value</code>\u200b\u5747\u200b\u4e3a\u200b 0\u3002\u200b\u5916\u90e8\u200b\u7b26\u53f7\u200b<code>sum</code>\u200b\u672a\u200b\u5728\u200b\u672c\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\uff0c\u200b\u4f4d\u4e8e\u200b UNDEF\u3002</p>"},{"location":"core/csapp/ch7/#_7","title":"\u7b26\u53f7\u200b\u89e3\u6790","text":"<p>\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\u4e0e\u200b\u7b26\u53f7\u8868\u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u5b9a\u4e49\u200b\u76f8\u5173\u8054\u200b\u4ee5\u200b\u5b8c\u6210\u200b\u7b26\u53f7\u200b\u89e3\u6790\u200b\uff08Symbol Resolution\uff09\u3002\u200b\u5f53\u200b\u7f16\u8bd1\u5668\u200b\u9047\u5230\u200b\u672a\u200b\u5728\u200b\u5f53\u524d\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5047\u8bbe\u200b\u8be5\u200b\u7b26\u53f7\u200b\u5df2\u200b\u5728\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\uff0c\u200b\u7136\u540e\u200b\u751f\u6210\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\u6761\u76ee\u200b\u3002\u200b\u5982\u679c\u200b\u94fe\u63a5\u200b\u5668\u200b\u65e0\u6cd5\u200b\u5728\u200b\u4efb\u4f55\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u627e\u5230\u200b\u8be5\u200b\u7b26\u53f7\u200b\u7684\u200b\u5b9a\u4e49\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u200b\u5c31\u200b\u4f1a\u200b\u7ec8\u6b62\u200b\u94fe\u63a5\u200b\u3002</p> <p>\u200b\u4e0d\u540c\u200b\u6587\u4ef6\u200b\u53ef\u80fd\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u76f8\u540c\u200b\u540d\u79f0\u200b\u7684\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\u3002\u200b\u5bf9\u4e8e\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u8981\u4e48\u200b\u76f4\u63a5\u200b\u62a5\u9519\u200b\uff0c\u200b\u8981\u4e48\u200b\u9009\u53d6\u200b\u5176\u4e2d\u200b\u4e4b\u4e00\u200b\u3002</p> <p>C++ \u200b\u548c\u200b Java \u200b\u5141\u8bb8\u200b\u91cd\u8f7d\u200b\u540d\u79f0\u200b\u76f8\u540c\u200b\u4f46\u200b\u53c2\u6570\u200b\u5217\u8868\u200b\u4e0d\u540c\u200b\u7684\u200b\u65b9\u6cd5\u200b\u3002\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u5c06\u200b\u6bcf\u4e2a\u200b\u65b9\u6cd5\u200b\u548c\u200b\u53c2\u6570\u200b\u5217\u8868\u200b\u7ec4\u5408\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u540d\u79f0\u200b\uff0c\u200b\u8fd9\u6837\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u533a\u5206\u200b\u5b83\u4eec\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c<code>Foo::bar(int, long)</code>\u200b\u4f1a\u200b\u88ab\u200b\u7f16\u7801\u200b\u4e3a\u200b<code>bar__3Fooil</code>\u3002\u200b\u5176\u4e2d\u200b\uff0c3 \u200b\u4ee3\u8868\u200b\u7c7b\u540d\u200b Foo \u200b\u7684\u200b\u5b57\u7b26\u200b\u6570\u200b\uff0ci \u200b\u548c\u200b l \u200b\u5219\u200b\u5206\u522b\u200b\u4ee3\u8868\u200b\u53c2\u6570\u200b\u5217\u8868\u200b\u4e2d\u200b\u7684\u200b<code>int</code>\u200b\u548c\u200b<code>long</code>\u3002</p>"},{"location":"core/csapp/ch7/#_8","title":"\u89e3\u6790\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\u7684\u200b\u7b26\u53f7","text":"<p>Linux \u200b\u7f16\u8bd1\u7cfb\u7edf\u200b\u4f1a\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u5c06\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\u5206\u4e3a\u200b\u4e24\u79cd\u200b\u7c7b\u578b\u200b\uff1a\u200b\u51fd\u6570\u200b\u548c\u200b\u5df2\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u662f\u200b\u5f3a\u200b\u7b26\u53f7\u200b\uff0c\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u662f\u200b\u5f31\u200b\u7b26\u53f7\u200b\u3002\u200b\u6c47\u7f16\u5668\u200b\u5c06\u200b\u7b26\u53f7\u200b\u7684\u200b\u5f3a\u5f31\u200b\u4fe1\u606f\u200b\u9690\u5f0f\u200b\u5730\u200b\u7f16\u7801\u200b\u5230\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u7b26\u53f7\u8868\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u94fe\u63a5\u200b\u5668\u200b\u89e3\u6790\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\u7684\u200b\u7b26\u53f7\u200b\u7684\u200b\u89c4\u5219\u200b\u4e3a\u200b\uff1a</p> <ul> <li>\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u591a\u4e2a\u200b\u5f3a\u200b\u7b26\u53f7\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\uff1b</li> <li>\u200b\u82e5\u200b\u4e00\u4e2a\u200b\u5f3a\u200b\u7b26\u53f7\u200b\u548c\u200b\u591a\u4e2a\u200b\u5f31\u200b\u7b26\u53f7\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\uff0c\u200b\u9009\u62e9\u200b\u5f3a\u200b\u7b26\u53f7\u200b\uff1b</li> <li>\u200b\u82e5\u200b\u591a\u4e2a\u200b\u5f31\u200b\u7b26\u53f7\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\uff0c\u200b\u4ece\u4e2d\u200b\u4efb\u9009\u200b\u5176\u4e00\u200b\u3002</li> </ul> <p>\u200b\u6ce8\u200b\uff1a\u200b\u6700\u65b0\u200b\u7248\u672c\u200b\u7684\u200b GCC\uff08\u200b\u5982\u200b GCC 10\uff09\u200b\u9ed8\u8ba4\u200b\u4f7f\u7528\u200b\u6807\u8bc6\u200b\u4f4d\u200b<code>-fno-common</code>\uff0c\u200b\u56e0\u6b64\u200b\u82e5\u200b\u7a0b\u5e8f\u200b\u5305\u542b\u200b\u591a\u4e2a\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\u7684\u200b\u5f31\u200b\u7b26\u53f7\u200b\u5c06\u200b\u5f15\u53d1\u200b\u94fe\u63a5\u200b\u9519\u8bef\u200b\u3002</p> <pre><code>/* foo3.c */\n#include &lt;stdio.h&gt;\nvoid f(void);\n\nint x = 15213;\nint main()\n{\n\n    f();\n    printf(\"x = %d\\n\", x);\n    return 0;\n}\n/* bar3.c */\nint x;\n\nvoid f()\n{\n    x = 15212;\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u6587\u4ef6\u200b<code>bar3.c</code>\u200b\u4e2d\u200b\u7684\u200b\u51fd\u6570\u200b<code>f</code>\u200b\u662f\u200b\u5f3a\u200b\u7b26\u53f7\u200b\uff0c\u200b\u6587\u4ef6\u200b<code>foo3.c</code>\u200b\u4e2d\u200b\u7684\u200b\u51fd\u6570\u200b<code>f</code>\u200b\u662f\u200b\u5f31\u200b\u7b26\u53f7\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e3b\u200b\u51fd\u6570\u200b\u7684\u200b\u8f93\u51fa\u200b<code>x</code>\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b 15212\u3002</p> <p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u4fdd\u5b58\u200b\u5728\u200b COMMON \u200b\u4e2d\u200b\uff0c\u200b\u800c\u200b\u672a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u548c\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\u4fdd\u5b58\u200b\u5728\u200b .bss \u200b\u4e2d\u200b\u3002\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u524d\u8005\u200b\u662f\u200b\u5f31\u200b\u7b26\u53f7\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u65e0\u6cd5\u200b\u77e5\u6653\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u662f\u5426\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u76f8\u540c\u200b\u540d\u79f0\u200b\u7684\u200b\u53d8\u91cf\u200b\uff0c\u200b\u5fc5\u987b\u200b\u5c06\u200b\u5176\u200b\u5206\u914d\u200b\u5230\u200b COMMON \u200b\u4e2d\u200b\u5e76\u200b\u968f\u540e\u200b\u7531\u200b\u94fe\u63a5\u200b\u5668\u200b\u5904\u7406\u200b\u3002\u200b\u5df2\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u662f\u200b\u5f3a\u200b\u7b26\u53f7\u200b\uff0c\u200b\u6839\u636e\u200b\u7b2c\u4e8c\u6761\u200b\u89e3\u6790\u200b\u89c4\u5219\u200b\uff0c\u200b\u8be5\u200b\u53d8\u91cf\u200b\u4e00\u5b9a\u200b\u662f\u200b\u552f\u4e00\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7f16\u8bd1\u5668\u200b\u53ef\u4ee5\u200b\u5b89\u5fc3\u200b\u5730\u200b\u628a\u200b\u5b83\u200b\u653e\u5230\u200b .bss \u200b\u4e2d\u200b\u3002\u200b\u9759\u6001\u200b\u53d8\u91cf\u200b\u65e0\u6cd5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u6587\u4ef6\u200b\u5f15\u7528\u200b\uff0c\u200b\u81ea\u7136\u200b\u4e5f\u200b\u65e0\u9700\u200b\u62c5\u5fc3\u200b\u540d\u79f0\u200b\u91cd\u590d\u200b\u7684\u200b\u95ee\u9898\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_9","title":"\u4e0e\u200b\u9759\u6001\u200b\u5e93\u200b\u94fe\u63a5","text":"<p>\u200b\u7f16\u8bd1\u7cfb\u7edf\u200b\u5c06\u200b\u4e00\u4e9b\u200b\u76f8\u5173\u200b\u7684\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\u6253\u5305\u200b\u5230\u200b\u4e00\u4e2a\u200b\u6587\u4ef6\u200b\u4e2d\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u9759\u6001\u200b\u5e93\u200b\uff08Static Library\uff09\u3002\u200b\u5728\u200b\u6784\u5efa\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u4ec5\u200b\u590d\u5236\u200b\u9759\u6001\u200b\u5e93\u4e2d\u200b\u88ab\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5f15\u7528\u200b\u7684\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\uff0c\u200b\u4ece\u800c\u200b\u51cf\u5c0f\u200b\u4e86\u200b\u78c1\u76d8\u200b\u548c\u200b\u5185\u5b58\u200b\u4e2d\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u7684\u200b\u5927\u5c0f\u200b\u3002\u200b\u9759\u6001\u200b\u5e93\u4e3a\u200b\u6211\u4eec\u200b\u63d0\u4f9b\u200b\u4e86\u200b I/O\u3001\u200b\u5b57\u7b26\u4e32\u200b\u64cd\u4f5c\u200b\u548c\u200b\u6570\u5b66\u200b\u8fd0\u7b97\u200b\u7b49\u200b\u6807\u51c6\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u9759\u6001\u200b\u5e93\u4ee5\u200b\u7279\u5b9a\u200b\u7684\u200b\u6587\u4ef6\u683c\u5f0f\u200b\uff08\u200b\u540e\u7f00\u200b\u4e3a\u200b<code>.a</code>\uff09\u200b\u5b58\u50a8\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u3002\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u6307\u5b9a\u200b\u6587\u4ef6\u540d\u200b\u6765\u200b\u4f7f\u7528\u200b\u9759\u6001\u200b\u5e93\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u4efb\u4f55\u200b\u51fd\u6570\u200b\uff08\u200b\u5b9e\u9645\u4e0a\u200b\uff0cC \u200b\u7f16\u8bd1\u5668\u200b\u9a71\u52a8\u200b\u603b\u662f\u200b\u5c06\u200b<code>libc.a</code>\u200b\u4f20\u9012\u200b\u7ed9\u200b\u94fe\u63a5\u200b\u5668\u200b\uff09\uff0c\u200b\u5982\u200b\uff1a</p> <pre><code>linux&gt; gcc main.c /usr/lib/libm.a /usr/lib/libc.a\n</code></pre> <p>\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b AR \u200b\u547d\u4ee4\u200b\u5c06\u200b\u4e0b\u5217\u200b\u7a0b\u5e8f\u200b\u6253\u5305\u200b\u4e3a\u200b\u9759\u6001\u200b\u5e93\u200b\u6587\u4ef6\u200b<code>libvector.a</code>\uff1a</p> <p> <pre><code>linux&gt; gcc -c addvec.c multvec.c\nlinux&gt; ar rcs libvector.a addvec.o multvec.o\n</code></pre></p> <p>\u200b\u63a5\u4e0b\u6765\u200b\u518d\u200b\u7f16\u5199\u200b\u4e00\u4e2a\u200b\u7a0b\u5e8f\u200b<code>main2.c</code>\u200b\u8c03\u7528\u200b\u8be5\u200b\u9759\u6001\u200b\u5e93\u200b\uff0c\u200b\u5934\u6587\u4ef6\u200b<code>vector.h</code>\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u5e93\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u51fd\u6570\u200b\u539f\u578b\u200b\uff1a</p> <p> \u200b\u6700\u540e\u200b\u4f7f\u7528\u200b\u5982\u4e0b\u200b\u547d\u4ee4\u200b\u7f16\u8bd1\u200b\u5e76\u200b\u94fe\u63a5\u200b<code>main2.o</code>\u200b\u548c\u200b<code>libvector.a</code>\uff1a</p> <pre><code>linux&gt; gcc -c main2.c\nlinux&gt; gcc -static -o prog2c main2.o ./libvector.a\n</code></pre> <p><code>-static</code>\u200b\u53c2\u6570\u200b\u8868\u793a\u200b\u94fe\u63a5\u200b\u5668\u200b\u5e94\u5f53\u200b\u6784\u5efa\u200b\u4e00\u4e2a\u200b\u5b8c\u5168\u200b\u94fe\u63a5\u200b\u7684\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u800c\u200b\u65e0\u9700\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\u94fe\u63a5\u200b\u3002\u200b\u5b8c\u6574\u200b\u7684\u200b\u94fe\u63a5\u200b\u6d41\u7a0b\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch7/#_10","title":"\u9759\u6001\u200b\u5e93\u200b\u7684\u200b\u7b26\u53f7\u200b\u89e3\u6790","text":"<p>\u200b\u7b26\u53f7\u200b\u89e3\u6790\u200b\u65f6\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u4f1a\u200b\u6309\u7167\u200b\u4ece\u5de6\u5230\u53f3\u200b\u7684\u200b\u987a\u5e8f\u200b\u4f9d\u6b21\u200b\u626b\u63cf\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u7684\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u548c\u200b\u9759\u6001\u200b\u5e93\u200b\u3002\u200b\u5728\u200b\u8fd9\u4e2a\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0cE \u200b\u4e3a\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u96c6\u5408\u200b\uff0cU \u200b\u4e3a\u200b\u88ab\u200b\u5f15\u7528\u200b\u4f46\u200b\u8fd8\u200b\u672a\u627e\u5230\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\uff0cD \u200b\u4e3a\u200b\u5df2\u200b\u626b\u63cf\u200b\u8fc7\u200b\u7684\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\uff0c\u200b\u5f00\u59cb\u200b\u65f6\u200b\u4e09\u8005\u200b\u5747\u200b\u4e3a\u200b\u7a7a\u200b\u3002</p> <ul> <li>\u200b\u82e5\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u7684\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b\u4e3a\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5219\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u5176\u200b\u6dfb\u52a0\u200b\u5230\u200b E \u200b\u4e2d\u200b\u5e76\u200b\u66f4\u65b0\u200b U \u200b\u548c\u200b D \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\uff1b</li> <li>\u200b\u82e5\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u7684\u200b\u8f93\u5165\u200b\u6587\u4ef6\u200b\u4e3a\u200b\u9759\u6001\u200b\u5e93\u200b\uff0c\u200b\u5219\u200b\u94fe\u63a5\u200b\u5668\u4f1a\u200b\u5c06\u200b U \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u4e0e\u200b\u8be5\u200b\u9759\u6001\u200b\u5e93\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7b26\u53f7\u200b\u76f8\u5339\u914d\u200b\u3002\u200b\u5339\u914d\u200b\u6210\u529f\u200b\u7684\u200b\u6a21\u5757\u200b\u4f1a\u200b\u88ab\u200b\u6dfb\u52a0\u200b\u5230\u200b E \u200b\u4e2d\u200b\uff0c\u200b\u968f\u540e\u200b\u94fe\u63a5\u200b\u5668\u200b\u66f4\u65b0\u200b U \u200b\u548c\u200b D \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u3002\u200b\u5f53\u200b U \u200b\u548c\u200b D \u200b\u4e2d\u200b\u7684\u200b\u7b26\u53f7\u200b\u4e0d\u518d\u200b\u6539\u53d8\u200b\u65f6\u200b\uff0c\u200b\u5339\u914d\u200b\u7ed3\u675f\u200b\uff0c\u200b\u4efb\u4f55\u200b\u4e0d\u200b\u5728\u200b E \u200b\u4e2d\u200b\u7684\u200b\u9759\u6001\u200b\u5e93\u200b\u6a21\u5757\u200b\u90fd\u200b\u5c06\u200b\u88ab\u200b\u76f4\u63a5\u200b\u4e22\u5f03\u200b\uff1b</li> <li>\u200b\u82e5\u200b\u626b\u63cf\u200b\u5168\u90e8\u200b\u5b8c\u6210\u200b\u65f6\u200b U \u200b\u4e3a\u7a7a\u200b\uff0c\u200b\u5219\u200b\u94fe\u63a5\u200b\u5668\u200b\u5408\u5e76\u200b\u5e76\u91cd\u200b\u5b9a\u4f4d\u200b E \u200b\u4e2d\u200b\u6240\u6709\u200b\u7684\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4ee5\u200b\u6784\u5efa\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u3002\u200b\u5426\u5219\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u62a5\u9519\u200b\u5e76\u200b\u7ec8\u6b62\u200b\u3002</li> </ul> <p>\u200b\u94fe\u63a5\u200b\u5668\u200b\u7684\u200b\u8fd9\u79cd\u200b\u884c\u4e3a\u200b\u9650\u5236\u200b\u4e86\u200b\u547d\u4ee4\u884c\u200b\u4e2d\u200b\u7684\u200b\u6587\u4ef6\u200b\u987a\u5e8f\u200b\u3002\u200b\u5982\u679c\u200b\u5b9a\u4e49\u200b\u7b26\u53f7\u200b\u7684\u200b\u9759\u6001\u200b\u5e93\u200b\u51fa\u73b0\u200b\u5728\u200b\u5f15\u7528\u200b\u8be5\u200b\u7b26\u53f7\u200b\u7684\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e4b\u524d\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5c31\u200b\u4f1a\u200b\u5931\u8d25\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_11","title":"\u91cd\u200b\u5b9a\u4f4d","text":"<p>\u200b\u7b26\u53f7\u200b\u89e3\u6790\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u4f1a\u200b\u5c06\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\u4e0e\u200b\u4e00\u4e2a\u200b\u7b26\u53f7\u200b\u5b9a\u4e49\u200b\u76f8\u5173\u8054\u200b\u3002\u200b\u63a5\u4e0b\u6765\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u5f00\u59cb\u200b\u5bf9\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\uff1a</p> <ul> <li>\u200b\u91cd\u200b\u5b9a\u4f4d\u200b Section \u200b\u548c\u200b\u7b26\u53f7\u200b\u5b9a\u4e49\u200b\uff1a\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u6240\u6709\u200b\u8f93\u5165\u200b\u6a21\u5757\u200b\u4e2d\u200b\u76f8\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b Section \u200b\u5408\u5e76\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u805a\u5408\u200b Section\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u5206\u914d\u200b\u7ed9\u200b\u6bcf\u4e2a\u200b Section \u200b\u548c\u200b\u7b26\u53f7\u200b\uff1b</li> <li>\u200b\u5728\u200b Section \u200b\u5185\u91cd\u200b\u5b9a\u4f4d\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\uff1a\u200b\u94fe\u63a5\u200b\u5668\u200b\u4fee\u6539\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u6bb5\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u5f15\u7528\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u6307\u5411\u200b\u6b63\u786e\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch7/#_12","title":"\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee","text":"<p>\u200b\u6c47\u7f16\u5668\u200b\u5728\u200b\u751f\u6210\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u5e76\u200b\u4e0d\u200b\u77e5\u6653\u200b\u4ee3\u7801\u200b\u3001\u200b\u6570\u636e\u200b\u548c\u200b\u5f15\u7528\u200b\u7684\u200b\u5916\u90e8\u200b\u7b26\u53f7\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6700\u7ec8\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5b83\u200b\u53ea\u4f1a\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u5f15\u7528\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\uff08Relocation Entry\uff09\uff0c\u200b\u6307\u5bfc\u200b\u94fe\u63a5\u200b\u5668\u200b\u5982\u4f55\u200b\u4fee\u6539\u200b\u5b83\u4eec\u200b\u3002\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c\u200b\u4ee3\u7801\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\u653e\u5728\u200b .rel.text \u200b\u4e2d\u200b\uff0c\u200b\u6570\u636e\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\u5219\u200b\u653e\u5728\u200b .rel.data \u200b\u4e2d\u200b\u3002</p> <p>ELF \u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u200b\u76ee\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u4e3a\u200b\uff1a</p> <pre><code>typedef struct {\n    long offset;    /* Offset of the reference to relocate */\n    long type:32,   /* Relocation type */\n         symbol:32; /* Symbol table index */\n    long addend;    /* Constant part of relocation expression */\n} Elf64_Rela;\n</code></pre> <p><code>offset</code>\u200b\u662f\u200b\u88ab\u200b\u4fee\u6539\u200b\u7684\u200b\u5f15\u7528\u200b\u5728\u200b\u5176\u200b Section \u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\uff1b<code>symbol</code>\u200b\u662f\u200b\u5f15\u7528\u200b\u6307\u5411\u200b\u7684\u200b\u7b26\u53f7\u200b\u5728\u200b\u7b26\u53f7\u8868\u200b\u4e2d\u200b\u7684\u200b\u7d22\u5f15\u200b\uff1b<code>type</code>\u200b\u544a\u77e5\u200b\u94fe\u63a5\u200b\u5668\u200b\u5982\u4f55\u200b\u4fee\u6539\u200b\u5f15\u7528\u200b\uff1b<code>addend</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u6709\u200b\u7b26\u53f7\u200b\u5e38\u91cf\u200b\uff0c\u200b\u67d0\u4e9b\u200b\u7c7b\u578b\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u4f7f\u7528\u200b\u5b83\u200b\u6765\u200b\u504f\u7f6e\u200b\u88ab\u200b\u4fee\u6539\u200b\u7684\u200b\u5f15\u7528\u200b\u503c\u200b\u3002</p> <p>\u200b\u6700\u200b\u57fa\u672c\u200b\u7684\u200b\u4e24\u79cd\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u7c7b\u578b\u200b\u4e3a\u200b\uff1a</p> <ul> <li>R_X86_64_PC32\uff1a\u200b\u4f7f\u7528\u200b 32 \u200b\u4f4d\u200b PC \u200b\u76f8\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5f15\u7528\u200b\u3002\u200b\u5f53\u200b CPU \u200b\u6267\u884c\u200b\u4e00\u6761\u200b\u4f7f\u7528\u200b PC \u200b\u76f8\u5bf9\u200b\u5730\u5740\u200b\u7684\u200b\u6307\u4ee4\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u6307\u4ee4\u200b\u4e2d\u200b\u7684\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u4e0e\u200b PC \u200b\u5f53\u524d\u200b\u503c\u200b\uff08\u200b\u5373\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u5730\u5740\u200b\uff09\u200b\u76f8\u52a0\u200b\u5f97\u5230\u200b\u6709\u6548\u200b\u5730\u5740\u200b\uff08\u200b\u5728\u200b \u200b\u8df3\u8f6c\u200b\u6307\u4ee4\u200b \u200b\u4e00\u8282\u200b\u4e2d\u200b\u6211\u4eec\u200b\u8ba8\u8bba\u200b\u8fc7\u200b\u8fd9\u200b\u4e00\u200b\u95ee\u9898\u200b\uff09\uff1b</li> <li>R_X86_64_32\uff1a\u200b\u4f7f\u7528\u200b 32 \u200b\u4f4d\u200b\u7edd\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5f15\u7528\u200b\u3002CPU \u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\u6307\u4ee4\u200b\u4e2d\u200b\u7684\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u4f5c\u4e3a\u200b\u6709\u6548\u200b\u5730\u5740\u200b\uff0c\u200b\u65e0\u9700\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\u4fee\u6539\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch7/#_13","title":"\u91cd\u200b\u5b9a\u4f4d\u200b\u7b26\u53f7\u200b\u5f15\u7528","text":"<p>\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u7b97\u6cd5\u200b\u7684\u200b\u4f2a\u7801\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u94fe\u63a5\u200b\u5668\u200b\u904d\u5386\u200b\u6bcf\u4e2a\u200b Section\uff08<code>s</code>\uff09\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\uff08<code>r</code>\uff09\uff0c<code>s</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u6570\u7ec4\u200b\uff0c<code>r</code>\u200b\u662f\u200b\u4e0a\u200b\u4e00\u8282\u200b\u4ecb\u7ecd\u200b\u7684\u200b<code>Elf64_Rela</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b\uff0c<code>*refptr</code>\u200b\u662f\u200b\u6307\u4ee4\u200b\u4e2d\u200b\u7684\u200b\u76ee\u6807\u200b\u5730\u5740\u200b\u3002\u200b\u5047\u8bbe\u200b\u8be5\u200b\u7b97\u6cd5\u200b\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u5df2\u7ecf\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b Section \u200b\u548c\u200b\u6bcf\u4e2a\u200b\u7b26\u53f7\u200b\u9009\u62e9\u200b\u4e86\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b<code>ADDR(s)</code>\u200b\u548c\u200b<code>ADDR(r.symbol)</code>\u3002</p> <p>\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u547d\u4ee4\u200b<code>objdump -dx main.o</code>\u200b\u5f97\u5230\u200b\u6c47\u7f16\u5668\u200b\u4e3a\u200b \u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b main.c \u200b\u751f\u6210\u200b\u7684\u200b\u673a\u5668\u7801\u200b\u548c\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\uff1a</p> <p> \u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7b2c\u200b 5 \u200b\u884c\u200b\u548c\u200b\u7b2c\u200b 7 \u200b\u884c\u200b\uff09\u200b\u544a\u77e5\u200b\u94fe\u63a5\u200b\u5668\u200b\u5bf9\u200b\u7b26\u53f7\u200b<code>array</code>\u200b\u7684\u200b\u5f15\u7528\u200b\u4f7f\u7528\u200b\u7edd\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\uff0c\u200b\u800c\u200b\u5bf9\u200b\u7b26\u53f7\u200b<code>sum()</code>\u200b\u7684\u200b\u5f15\u7528\u200b\u5219\u200b\u4f7f\u7528\u200b PC \u200b\u76f8\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u3002</p>"},{"location":"core/csapp/ch7/#pc","title":"PC \u200b\u76f8\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d","text":"<p>\u200b\u5982\u4e0a\u56fe\u200b\u7b2c\u200b 6 \u200b\u884c\u200b\u6240\u793a\u200b\uff1a\u200b\u6307\u4ee4\u200b<code>callq</code>\u200b\u5728\u200b\u5176\u200b Section \u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b 0xe\uff0c\u200b\u5b83\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u4e00\u200b\u5b57\u8282\u200b\u7684\u200b\u6307\u4ee4\u7801\u200b 0xe8 \u200b\u548c\u200b\u4e00\u4e2a\u200b\u7528\u4e8e\u200b\u6307\u5411\u200b<code>sum()</code>\u200b\u7684\u200b 32 \u200b\u4f4d\u200b PC \u200b\u76f8\u5bf9\u200b\u5f15\u7528\u200b\u7684\u200b\u5360\u4f4d\u200b\u7b26\u200b\u3002\u200b\u8be5\u200b\u5f15\u7528\u200b\u5bf9\u5e94\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\u4e3a\u200b\uff1a</p> <pre><code>r.offset = 0xf\nr.symbol = sum\nr.type   = R_X86_64_PC32\nr.addend = -4\n</code></pre> <p>\u200b\u4e0a\u8ff0\u200b\u5b57\u200b\u6bb5\u200b\u544a\u8bc9\u200b\u94fe\u63a5\u200b\u5668\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u4ece\u200b\u504f\u79fb\u91cf\u200b 0xf \u200b\u5f00\u59cb\u200b\u7684\u200b 32 \u200b\u4f4d\u200b PC \u200b\u76f8\u5bf9\u200b\u5f15\u7528\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6307\u5411\u200b<code>sum()</code>\u3002 \u200b\u5047\u8bbe\u200b<code>ADDR(s) = ADDR(.text) = 0x4004d0</code>\uff0c<code>ADDR(r.symbol) = ADDR(sum) = 0x4004e8</code>\uff0c\u200b\u90a3\u4e48\u200b\u9996\u5148\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u8ba1\u7b97\u200b\u5f97\u5230\u200b\u8be5\u200b\u5f15\u7528\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u4e3a\u200b\uff1a</p> <pre><code>refaddr = ADDR(s)  + r.offset\n        = 0x4004d0 + 0xf\n        = 0x4004df\n</code></pre> <p>\u200b\u7136\u540e\u200b\u6839\u636e\u200b\u4e0a\u8282\u200b\u4e2d\u200b\u7684\u200b\u7b97\u6cd5\u200b\u66f4\u65b0\u200b\u5f15\u7528\u200b\u4f7f\u200b\u5176\u200b\u6307\u5411\u200b<code>sum()</code>\uff1a</p> <pre><code>*refptr = (unsigned) (ADDR(r.symbol) + r.addend - refaddr)\n        = (unsigned) (0x4004e8       + (-4)     - 0x4004df)\n        = (unsigned) (0x5)\n</code></pre> <p>\u200b\u6307\u4ee4\u200b<code>callq</code>\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u4e3a\u200b 0x4004de\uff08<code>0x4004df -1</code>\uff09\u3002\u200b\u5f53\u200b CPU \u200b\u6267\u884c\u200b\u8be5\u200b\u6307\u4ee4\u200b\u65f6\u200b\uff0cPC \u200b\u4e2d\u200b\u7684\u200b\u503c\u200b\u4e3a\u200b\u8be5\u200b\u6307\u4ee4\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b 0x4004e3\uff08<code>0x4004de + (0xe - 9)</code>\uff09\u3002CPU \u200b\u5c06\u200b\u8be5\u503c\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u52a0\u4e0a\u200b 0x5\uff08\u200b\u5373\u200b<code>*refptr</code>\uff09\uff0c\u200b\u5c31\u200b\u5f97\u5230\u200b\u4e86\u200b<code>sum()</code>\u200b\u7684\u200b\u5730\u5740\u200b 0x4004e8\u3002</p>"},{"location":"core/csapp/ch7/#_14","title":"\u7edd\u5bf9\u200b\u5730\u5740\u200b\u91cd\u200b\u5b9a\u4f4d","text":"<p>\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u56db\u884c\u200b\u6240\u793a\u200b\uff1a\u200b\u6307\u4ee4\u200b<code>mov</code>\u200b\u5c06\u200b\u6570\u7ec4\u200b\u5730\u5740\u200b\u62f7\u8d1d\u5230\u200b\u5bc4\u5b58\u5668\u200b %edi \u200b\u4e2d\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b Section \u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b 0x9\uff0c\u200b\u5305\u542b\u200b\u4e00\u4e2a\u200b\u4e00\u200b\u5b57\u8282\u200b\u7684\u200b\u6307\u4ee4\u7801\u200b 0xbf \u200b\u548c\u200b\u4e00\u4e2a\u200b\u7528\u4e8e\u200b\u6307\u5411\u200b<code>array</code>\u200b\u7684\u200b 32 \u200b\u4f4d\u200b\u7edd\u5bf9\u200b\u5f15\u7528\u200b\u7684\u200b\u5360\u4f4d\u200b\u7b26\u200b\u3002\u200b\u8be5\u200b\u5f15\u7528\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u6761\u76ee\u200b\u4e3a\u200b\uff1a</p> <pre><code>r.offset = 0xa\nr.symbol = array\nr.type   = R_X86_64_32\nr.addend = 0\n</code></pre> <p>\u200b\u4e0a\u8ff0\u200b\u5b57\u200b\u6bb5\u200b\u544a\u8bc9\u200b\u94fe\u63a5\u200b\u5668\u200b\u9700\u8981\u200b\u4fee\u6539\u200b\u4ece\u200b\u504f\u79fb\u91cf\u200b 0xa \u200b\u5f00\u59cb\u200b\u7684\u200b 32 \u200b\u4f4d\u200b PC \u200b\u7edd\u5bf9\u200b\u5f15\u7528\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6307\u5411\u200b<code>array</code>\u3002 \u200b\u5047\u8bbe\u200b<code>ADDR(r.symbol) = ADDR(array) = 0x601018</code>\uff0c\u200b\u90a3\u4e48\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b\u4e0a\u8282\u200b\u4e2d\u200b\u7684\u200b\u7b97\u6cd5\u200b\u66f4\u65b0\u200b\u8be5\u200b\u5f15\u7528\u200b\u4e3a\u200b\uff1a</p> <pre><code>*refptr = (unsigned) (ADDR(r.symbol) + r.addend)\n        = (unsigned) (0x601018       + 0)\n        = (unsigned) (0x601018)\n</code></pre> <p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u6700\u7ec8\u200b\u751f\u6210\u200b\u7684\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b .text \u200b\u548c\u200b .data\uff1a</p> <p> \u200b\u52a0\u8f7d\u200b\u5668\u200b\u5728\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u5c06\u200b\u8fd9\u4e9b\u200b Section \u200b\u4e2d\u200b\u7684\u200b\u5b57\u8282\u200b\u76f4\u63a5\u200b\u62f7\u8d1d\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u65e0\u9700\u200b\u4efb\u4f55\u200b\u4fee\u6539\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_15","title":"\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6","text":"<p>ELF \u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\uff1a</p> <p> ELF \u200b\u5934\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u6587\u4ef6\u200b\u7684\u200b\u6574\u4f53\u200b\u683c\u5f0f\u200b\uff0c\u200b\u5e76\u200b\u5305\u542b\u200b\u4e86\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6267\u884c\u200b\u7684\u200b\u7b2c\u4e00\u6761\u200b\u6307\u4ee4\u200b\u7684\u200b\u5730\u5740\u200b\u3002.init \u200b\u5b9a\u4e49\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u540d\u4e3a\u200b<code>_init</code>\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u88ab\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u4ee3\u7801\u200b\u6240\u200b\u8c03\u7528\u200b\u3002\u200b\u5176\u4f59\u200b Section \u200b\u4e0e\u200b\u53ef\u91cd\u200b\u5b9a\u4f4d\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u53ea\u4e0d\u8fc7\u200b\u5b83\u4eec\u200b\u5df2\u200b\u88ab\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u8fd0\u884c\u200b\u65f6\u200b\u7684\u200b\u5185\u5b58\u5730\u5740\u200b\u3002\u200b\u6b63\u56e0\u5982\u6b64\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u6ca1\u6709\u200b .rel.text \u200b\u548c\u200b .rel.data\u3002</p> <p>\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u8fde\u7eed\u200b\u5757\u200b\u4e0e\u200b\u8fde\u7eed\u200b\u5185\u5b58\u200b\u6bb5\u200b\u4e4b\u95f4\u200b\u7684\u200b\u6620\u5c04\u200b\u5173\u7cfb\u200b\u7531\u200b\u7a0b\u5e8f\u200b\u5934\u8868\u200b\uff08Program Header Table\uff09\u200b\u63cf\u8ff0\u200b\uff1a</p> <p> \u200b\u7b2c\u4e00\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\u5177\u6709\u200b\u8bfb\u53d6\u200b\u548c\u200b\u6267\u884c\u200b\u6743\u9650\u200b\uff0c\u200b\u4ece\u200b\u5185\u5b58\u5730\u5740\u200b 0x400000 \u200b\u5f00\u59cb\u200b\uff0c\u200b\u5927\u5c0f\u200b\u4e3a\u200b 0x69c \u200b\u4e2a\u200b\u5b57\u8282\u200b\u3002\u200b\u8be5\u200b\u5185\u5b58\u200b\u6bb5\u200b\u662f\u200b\u7531\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b\u524d\u200b 0x69c \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff08\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b 0\uff09\u200b\u521d\u59cb\u5316\u200b\u5f97\u5230\u200b\u7684\u200b\uff0c\u200b\u5305\u542b\u200b\u4e86\u200b ELF \u200b\u5934\u200b\u3001\u200b\u7a0b\u5e8f\u200b\u5934\u8868\u200b\u3001.init\u3001.text \u200b\u548c\u200b .rodata\u3002</p> <p>\u200b\u7b2c\u4e8c\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\u5177\u6709\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b\u6743\u9650\u200b\uff0c\u200b\u4ece\u200b\u5185\u5b58\u5730\u5740\u200b 0x600df8 \u200b\u5f00\u59cb\u200b\uff0c\u200b\u5927\u5c0f\u200b\u4e3a\u200b  0x230 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u3002\u200b\u8be5\u200b\u5185\u5b58\u200b\u6bb5\u200b\u5bf9\u5e94\u200b\u4e86\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b 0xdf8 \u200b\u7684\u200b 0x228 \u200b\u4e2a\u200b\u5b57\u8282\u200b\uff0c\u200b\u5305\u542b\u200b\u4e86\u200b .data \u200b\u548c\u200b .bss\uff08\u200b\u4e24\u8005\u200b\u5927\u5c0f\u200b\u4e4b\u5dee\u200b\u7684\u200b 8 \u200b\u4e2a\u200b\u5b57\u8282\u200b\u5373\u200b\u4fdd\u5b58\u200b\u5728\u200b .bss \u200b\u5e76\u200b\u5c06\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b 0 \u200b\u7684\u200b\u6570\u636e\u200b\uff09\u3002</p> <p>\u200b\u5bf9\u4e8e\u200b\u6bcf\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\uff0c\u200b\u94fe\u63a5\u200b\u5668\u200b\u5fc5\u987b\u200b\u9009\u62e9\u200b\u4e00\u4e2a\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b vaddr\uff0c\u200b\u4f7f\u5f97\u200b\uff1a</p> \\[vaddr\\space mod\\space align = off\\space mod\\space align\\] <p>\u200b\u5176\u4e2d\u200b\uff0coff \u200b\u662f\u200b\u8be5\u200b\u5185\u5b58\u200b\u6bb5\u200b\u4e2d\u200b\u7b2c\u4e00\u4e2a\u200b Section \u200b\u5728\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\uff0calign \u200b\u662f\u200b\u7a0b\u5e8f\u200b\u5934\u8868\u4e2d\u200b\u6307\u5b9a\u200b\u7684\u200b\u5bf9\u9f50\u200b\u65b9\u5f0f\u200b\u3002\u200b\u8fd9\u79cd\u200b\u5bf9\u9f50\u200b\u8981\u6c42\u200b\u662f\u200b\u4e00\u79cd\u200b\u4f18\u5316\u200b\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u4f7f\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u88ab\u200b\u66f4\u52a0\u200b\u6709\u6548\u200b\u5730\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_16","title":"\u52a0\u8f7d\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6","text":"<p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b Linux \u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5185\u5b58\u200b\u7ed3\u6784\u200b\uff1a</p> <p> \u200b\u52a0\u8f7d\u200b\u5668\u200b\u9996\u5148\u200b\u6839\u636e\u200b\u7a0b\u5e8f\u200b\u5934\u8868\u200b\u5c06\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u5757\u200b\u590d\u5236\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u6bb5\u200b\uff0c\u200b\u7136\u540e\u200b\u8df3\u8f6c\u200b\u5230\u200b\u7a0b\u5e8f\u200b\u5165\u53e3\u200b\uff0c\u200b\u5373\u200b<code>_start_</code>\u200b\u51fd\u6570\u200b\uff08\u200b\u5728\u200b\u7cfb\u7edf\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b<code>crt1.o</code>\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\uff09\u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u518d\u200b\u8c03\u7528\u200b<code>libc.so</code>\u200b\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7cfb\u7edf\u542f\u52a8\u200b\u51fd\u6570\u200b<code>__libc_start_main</code>\uff0c\u200b\u7531\u200b\u5b83\u200b\u521d\u59cb\u5316\u200b\u6267\u884c\u200b\u73af\u5883\u200b\uff0c\u200b\u8c03\u7528\u200b\u7528\u6237\u200b\u7ea7\u200b\u7684\u200b\u4e3b\u200b\u51fd\u6570\u200b\u5e76\u200b\u5904\u7406\u200b\u5176\u200b\u8fd4\u56de\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_17","title":"\u4f7f\u7528\u200b\u5171\u4eab\u200b\u5e93\u200b\u52a8\u6001\u200b\u94fe\u63a5","text":"<p>\u200b\u9759\u6001\u200b\u5e93\u4f1a\u200b\u88ab\u200b\u5b9a\u671f\u7ef4\u62a4\u200b\u548c\u200b\u66f4\u65b0\u200b\uff0c\u200b\u56e0\u6b64\u200b\u7a0b\u5e8f\u5458\u200b\u9700\u8981\u200b\u77e5\u6653\u200b\u5176\u200b\u53d8\u52a8\u200b\u5e76\u200b\u5c06\u200b\u91cd\u65b0\u200b\u94fe\u63a5\u200b\u7a0b\u5e8f\u200b\u3002\u200b\u6b64\u5916\u200b\uff0c\u200b\u51e0\u4e4e\u200b\u6240\u6709\u200b C \u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u4f1a\u200b\u4f7f\u7528\u200b\u4e00\u4e9b\u200b\u6807\u51c6\u200b I/O \u200b\u51fd\u6570\u200b\uff0c\u200b\u4f8b\u5982\u200b<code>printf</code>\u3002\u200b\u8fd9\u4e9b\u200b\u51fd\u6570\u200b\u7684\u200b\u4ee3\u7801\u200b\u5c06\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u88ab\u200b\u590d\u5236\u5230\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4ee3\u7801\u6bb5\u200b\u4e2d\u200b\uff0c\u200b\u4ece\u800c\u200b\u5bfc\u81f4\u200b\u4e25\u91cd\u200b\u7684\u200b\u5185\u5b58\u200b\u6d6a\u8d39\u200b\u3002</p> <p>\u200b\u5171\u4eab\u200b\u5e93\u200b\uff08Shared Libraries\uff09\u200b\u53ef\u4ee5\u200b\u89e3\u51b3\u200b\u4e0a\u8ff0\u200b\u9759\u6001\u200b\u5e93\u200b\u7684\u200b\u7f3a\u70b9\u200b\u3002\u200b\u5b83\u200b\u662f\u200b\u4e00\u79cd\u200b\u53ef\u4ee5\u200b\u5728\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u6216\u200b\u8fd0\u884c\u200b\u65f6\u4e8e\u200b\u4efb\u610f\u200b\u5185\u5b58\u5730\u5740\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u4e0e\u200b\u7a0b\u5e8f\u200b\u94fe\u63a5\u200b\u7684\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\uff0c\u200b\u8be5\u200b\u8fc7\u7a0b\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\uff08Dynamic Linking\uff09\u3002\u200b\u5171\u4eab\u200b\u5e93\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e2d\u4ee5\u200b<code>.so</code>\u200b\u4e3a\u200b\u540e\u7f00\u200b\uff0c\u200b\u800c\u200b\u5728\u200b Windows \u200b\u7cfb\u7edf\u200b\u4e2d\u5219\u200b\u88ab\u200b\u79f0\u4e3a\u200b DLL\uff08Dynamic Linking Libraries\uff09\u3002</p> <p>\u200b\u5728\u200b\u4efb\u610f\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e2d\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5171\u4eab\u200b\u5e93\u200b\u90fd\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b<code>.so</code>\u200b\u6587\u4ef6\u200b\u3002\u200b\u4e0e\u200b\u9759\u6001\u200b\u5e93\u200b\u4e0d\u540c\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u8be5\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5f15\u7528\u200b\u8be5\u5e93\u200b\u7684\u200b\u6240\u6709\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u5171\u4eab\u200b\uff0c\u200b\u800c\u200b\u4e0d\u200b\u9700\u8981\u200b\u590d\u5236\u5230\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a <pre><code>/* $begin main2 */\n/* main2.c */\n#include &lt;stdio.h&gt;\n#include \"vector.h\"\n\nint x[2] = {1, 2};\nint y[2] = {3, 4};\nint z[2];\n\nint main() \n{\n    addvec(x, y, z, 2);\n    printf(\"z = [%d %d]\\n\", z[0], z[1]);\n    return 0;\n}\n/* $end main2 */\n</code></pre> </p> <p>\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u5982\u4e0b\u200b\u6307\u4ee4\u200b\u5c06\u200b addvec.c \u200b\u548c\u200b multvec.c\uff08\u200b\u89c1\u4e0a\u56fe\u200b7.6\uff09 \u200b\u6784\u5efa\u200b\u4e3a\u200b\u5171\u4eab\u200b\u5e93\u200b\u6587\u4ef6\u200b<code>libvector.so</code>:</p> <pre><code>linux&gt; gcc -shared -fpic -o libvector.so addvec.c multvec.c\n</code></pre> <p>\u200b\u5176\u4e2d\u200b\uff0c<code>-fpic</code>\u200b\u6307\u793a\u200b\u7f16\u8bd1\u5668\u200b\u751f\u6210\u200b \u200b\u4e0e\u200b\u4f4d\u7f6e\u200b\u65e0\u5173\u200b\u4ee3\u7801\u200b\uff08Position-Independent Code\uff09\uff0c\u200b\u800c\u200b<code>-shared</code>\u200b\u5219\u200b\u6307\u793a\u200b\u94fe\u63a5\u200b\u5668\u200b\u521b\u5efa\u200b\u5171\u4eab\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u3002\u200b\u4e00\u65e6\u200b\u5171\u4eab\u200b\u5e93\u200b\u6587\u4ef6\u521b\u5efa\u200b\u6210\u529f\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u94fe\u63a5\u200b\u5230\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff1a</p> <pre><code>inux&gt; gcc -o prog2l main2.c ./libvector.so\n</code></pre> <p>\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u660e\u786e\u200b\u7684\u200b\u662f\u200b\uff0c<code>libvector.so</code>\u200b\u7684\u200b\u4efb\u610f\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u90fd\u200b\u6ca1\u6709\u200b\u88ab\u200b\u590d\u5236\u5230\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b<code>prog2l</code>\u200b\u4e2d\u200b\u3002\u200b\u94fe\u63a5\u200b\u5668\u200b\u53ea\u4f1a\u200b\u590d\u5236\u200b\u4e00\u4e9b\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u548c\u200b\u7b26\u53f7\u8868\u200b\u4fe1\u606f\u200b\uff0c\u200b\u5b83\u4eec\u200b\u5c06\u200b\u5728\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u7528\u4e8e\u200b\u89e3\u6790\u200b\u5f15\u7528\u200b\u4e86\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u7b26\u53f7\u200b\u3002</p> <p>\u200b\u52a0\u8f7d\u200b\u5668\u200b\u968f\u540e\u200b\u8bfb\u53d6\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u4e2d\u200b\u5305\u542b\u200b\u7684\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u8def\u5f84\u200b\uff0c\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u8fd0\u884c\u200b\u5b83\u200b\u3002\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u4e5f\u200b\u662f\u200b\u4e00\u4e2a\u200b\u5171\u4eab\u200b\u5e93\u200b\u6587\u4ef6\u200b\uff0c\u200b\u5982\u200b Linux \u200b\u7cfb\u7edf\u200b\u7684\u200b<code>ld-linux.so</code>\u3002\u200b\u5b83\u200b\u901a\u8fc7\u200b\u6267\u884c\u200b\u4ee5\u4e0b\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u64cd\u4f5c\u200b\u6765\u200b\u5b8c\u6210\u200b\u94fe\u63a5\u200b\uff1a</p> <ul> <li>\u200b\u5c06\u200b<code>libc.so</code>\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u67d0\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\uff1b</li> <li>\u200b\u5c06\u200b<code>libvector.so</code>\u200b\u4e2d\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5230\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u5185\u5b58\u200b\u6bb5\u200b\uff1b</li> <li>\u200b\u5c06\u200b<code>prog2l</code>\u200b\u4e2d\u200b\u6240\u6709\u200b\u5f15\u7528\u200b\u4e86\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u7b26\u53f7\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u3002</li> </ul> <p>\u200b\u6700\u7ec8\u200b\uff0c\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u7ed9\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\uff0c\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u4e0d\u4f1a\u200b\u5728\u200b\u7a0b\u5e8f\u6267\u884c\u200b\u671f\u95f4\u200b\u6539\u53d8\u200b\u3002</p>"},{"location":"core/csapp/ch7/#_18","title":"\u4ece\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4e2d\u200b\u52a0\u8f7d\u200b\u548c\u200b\u94fe\u63a5\u200b\u5171\u4eab\u200b\u5e93","text":"<p>\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u8bf7\u6c42\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u52a0\u8f7d\u200b\u548c\u200b\u94fe\u63a5\u200b\u5171\u4eab\u200b\u5e93\u200b\uff0c\u200b\u5176\u200b\u5e94\u7528\u200b\u573a\u666f\u200b\u5305\u62ec\u200b\uff1aWindows \u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u5f00\u53d1\u4eba\u5458\u200b\u4f7f\u7528\u200b\u5171\u4eab\u200b\u5e93\u6765\u200b\u5206\u53d1\u200b\u8f6f\u4ef6\u200b\u66f4\u65b0\u200b\uff1b\u200b\u73b0\u4ee3\u200b Web \u200b\u670d\u52a1\u5668\u200b\u4f7f\u7528\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u6709\u6548\u200b\u5730\u200b\u66f4\u65b0\u200b\u6216\u200b\u6dfb\u52a0\u200b\u529f\u80fd\u200b\u3002</p> <p>Linux \u200b\u7cfb\u7edf\u200b\u4e3a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e9b\u200b\u7b80\u5355\u200b\u63a5\u53e3\u200b\u4ee5\u200b\u5b9e\u73b0\u200b\u4e0a\u8ff0\u200b\u529f\u80fd\u200b\uff1a</p> <pre><code>#include &lt;dlfcn.h&gt;\nvoid *dlopen(const char *filename, int flag);\n// Returns: pointer to handle if OK, NULL on error\n</code></pre> <p>\u200b\u51fd\u6570\u200b<code>dlopen</code>\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u94fe\u63a5\u200b\u5171\u4eab\u200b\u5e93\u200b\u6587\u4ef6\u200b<code>filename</code>\uff0c\u200b\u53c2\u6570\u200b<code>flag</code>\u200b\u53ef\u4ee5\u200b\u662f\u200b<code>RTLD_GLOBAL</code>\u3001<code>RTLD_NOW</code>\u200b\u548c\u200b<code>RTLD_LAZY</code>\u200b\u4e2d\u200b\u7684\u200b\u4e00\u4e2a\u200b\u6216\u200b\u591a\u4e2a\u200b\uff08\u200b\u8be6\u89c1\u200b dlopen\uff09\u3002</p> <pre><code>#include &lt;dlfcn.h&gt;\nvoid *dlsym(void *handle, char *symbol);\n// Returns: pointer to symbol if OK, NULL on error\n</code></pre> <p>\u200b\u7c7b\u4f3c\u200b\u7684\u200b\u63a5\u53e3\u51fd\u6570\u200b\u8fd8\u6709\u200b dlsym\u3001dlclose \u200b\u548c\u200b dlerror\u3002</p> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u5c55\u793a\u200b\u4e86\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u662f\u200b\u5982\u4f55\u200b\u8c03\u7528\u200b\u5b83\u4eec\u200b\u6765\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5171\u4eab\u200b\u5e93\u200b\u7684\u200b\u3002 <pre><code>/* $begin dll */\n#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n#include &lt;dlfcn.h&gt;\n\nint x[2] = {1, 2};\nint y[2] = {3, 4};\nint z[2];\n\nint main() \n{\n    void *handle;\n    void (*addvec)(int *, int *, int *, int);\n    char *error; \n\n    /* dynamically load the shared library that contains addvec() */\n    handle = dlopen(\"./libvector.so\", RTLD_LAZY);\n    if (!handle) {\n    fprintf(stderr, \"%s\\n\", dlerror());\n    exit(1);\n    }\n\n    /* get a pointer to the addvec() function we just loaded */\n    addvec = dlsym(handle, \"addvec\");\n    if ((error = dlerror()) != NULL) {\n    fprintf(stderr, \"%s\\n\", error);\n    exit(1);\n    }\n\n    /* Now we can call addvec() it just like any other function */\n    addvec(x, y, z, 2);\n    printf(\"z = [%d %d]\\n\", z[0], z[1]);\n\n    /* unload the shared library */\n    if (dlclose(handle) &lt; 0) {\n    fprintf(stderr, \"%s\\n\", dlerror());\n    exit(1);\n    }\n    return 0;\n}\n/* $end dll */\n</code></pre></p>"},{"location":"core/csapp/ch7/#_19","title":"\u4e0e\u200b\u4f4d\u7f6e\u200b\u65e0\u5173\u200b\u4ee3\u7801","text":"<p>\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u5728\u200b\u7f16\u8bd1\u200b\u5171\u4eab\u200b\u5e93\u200b\u65f6\u4f1a\u200b\u751f\u6210\u200b\u4e00\u79cd\u200b\u65e0\u9700\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u5373\u53ef\u200b\u88ab\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u4efb\u610f\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u4ee3\u7801\u200b\uff0c\u200b\u5373\u200b\u4e0e\u200b\u4f4d\u7f6e\u200b\u65e0\u5173\u200b\u4ee3\u7801\u200b\uff08Position-Independent Code\uff0cPIC\uff09\uff0c\u200b\u8fd9\u6837\u200b\u5171\u4eab\u200b\u5e93\u200b\u5c31\u200b\u80fd\u200b\u88ab\u200b\u591a\u4e2a\u200b\u6b63\u5728\u200b\u8fd0\u884c\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u540c\u65f6\u200b\u5f15\u7528\u200b\u3002</p>"},{"location":"core/csapp/ch7/#pic","title":"PIC \u200b\u6570\u636e\u200b\u5f15\u7528","text":"<p>\u200b\u7f16\u8bd1\u5668\u200b\u5728\u200b PIC \u200b\u6570\u636e\u200b\u6bb5\u200b\u7684\u200b\u5f00\u5934\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5168\u5c40\u200b\u504f\u79fb\u91cf\u200b\u8868\u200b\uff08Global Offset Table\uff0cGOT\uff09\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e00\u4e2a\u200b\u88ab\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\u5f15\u7528\u200b\u7684\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\u3002\u200b\u7f16\u8bd1\u5668\u200b\u8fd8\u4f1a\u200b\u4e3a\u200b\u8fd9\u4e9b\u200b\u6761\u76ee\u200b\u751f\u6210\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u8bb0\u5f55\u200b\u3002\u200b\u52a0\u8f7d\u200b\u65f6\u200b\uff0c\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u91cd\u200b\u5b9a\u4f4d\u200b\u6bcf\u4e2a\u200b GOT \u200b\u6761\u76ee\u200b\uff0c\u200b\u4f7f\u200b\u5176\u200b\u5305\u542b\u200b\u88ab\u200b\u5f15\u7528\u200b\u7b26\u53f7\u200b\u7684\u200b\u7edd\u5bf9\u200b\u5730\u5740\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u5f15\u7528\u200b\u4e86\u200b\u5168\u5c40\u200b\u7b26\u53f7\u200b\u7684\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\u90fd\u200b\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b GOT\u3002</p> <p>\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u793a\u4f8b\u200b\u5171\u4eab\u200b\u5e93\u200b<code>libvector.so</code>\u200b\u4e2d\u200b\u7684\u200b GOT\uff1a</p> <p></p> <p>\u200b\u65e0\u8bba\u200b\u6211\u4eec\u200b\u5728\u200b\u4f55\u5904\u200b\u52a0\u8f7d\u200b\u5171\u4eab\u200b\u6a21\u5757\u200b\uff0c\u200b\u5176\u200b\u6570\u636e\u200b\u6bb5\u200b\u4e0e\u200b\u4ee3\u7801\u6bb5\u200b\u4e4b\u95f4\u200b\u7684\u200b\u8ddd\u79bb\u200b\u59cb\u7ec8\u200b\u76f8\u540c\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u4ee3\u7801\u6bb5\u200b\u4e2d\u200b\u7684\u200b<code>addl</code>\u200b\u4e0e\u200b\u6570\u636e\u200b\u6bb5\u200b\u4e2d\u200b\u7684\u200b GOT[3] \u200b\u4e4b\u95f4\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5e38\u91cf\u200b\u3002\u200b\u5f53\u200b\u51fd\u6570\u200b<code>addvec</code>\u200b\u5f15\u7528\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>addcnt</code>\u200b\u65f6\u200b\uff0c\u200b\u5148\u200b\u901a\u8fc7\u200b<code>0x2008b9(%rip)</code>\u200b\u8ba1\u7b97\u200b\u5f97\u5230\u200b GOT[3] \u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u7136\u540e\u200b\u4ece\u4e2d\u200b\u8bfb\u53d6\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u88ab\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u8d4b\u4e88\u200b\u7684\u200b<code>addcnt</code>\u200b\u7684\u200b\u7edd\u5bf9\u200b\u5730\u5740\u200b\u3002</p>"},{"location":"core/csapp/ch7/#pic_1","title":"PIC \u200b\u51fd\u6570\u8c03\u7528","text":"<p>PIC \u200b\u51fd\u6570\u8c03\u7528\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u662f\u200b\u5728\u200b\u8be5\u200b\u51fd\u6570\u200b\u7b2c\u4e00\u6b21\u200b\u88ab\u200b\u8c03\u7528\u200b\u65f6\u200b\u786e\u5b9a\u200b\u7684\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u6280\u672f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5ef6\u8fdf\u200b\u7ed1\u5b9a\u200b\uff08Lazy Binding\uff09\u3002\u200b\u5f53\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5bfc\u5165\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u6210\u767e\u4e0a\u5343\u200b\u4e2a\u200b\u51fd\u6570\u200b\u7684\u200b\u5171\u4eab\u200b\u5e93\u200b\uff08\u200b\u5982\u200b<code>libc.so</code>\uff09\uff0c\u200b\u5374\u200b\u53ea\u200b\u8c03\u7528\u200b\u5176\u4e2d\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u7684\u200b\u51fd\u6570\u200b\u65f6\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u6280\u672f\u200b\u53ef\u4ee5\u200b\u5927\u5927\u51cf\u5c11\u200b\u52a0\u8f7d\u200b\u65f6\u200b\u4e0d\u5fc5\u8981\u200b\u7684\u200b\u91cd\u200b\u5b9a\u4f4d\u200b\u64cd\u4f5c\u200b\u3002</p> <p>\u200b\u5ef6\u8fdf\u200b\u7ed1\u5b9a\u200b\u662f\u200b\u901a\u8fc7\u200b GOT \u200b\u548c\u200b\u8fc7\u7a0b\u200b\u94fe\u63a5\u8868\u200b\uff08Procedure Linkage Table\uff0cPLT\uff09\u200b\u5171\u540c\u200b\u5b9e\u73b0\u200b\u7684\u200b\u3002\u200b\u53ea\u8981\u200b\u76ee\u6807\u200b\u6a21\u5757\u200b\u8c03\u7528\u200b\u4e86\u200b\u5171\u4eab\u200b\u5e93\u4e2d\u200b\u5b9a\u4e49\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u200b\u5c31\u200b\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b GOT \u200b\u548c\u200b PLT\u3002\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0cGOT \u200b\u662f\u200b\u6570\u636e\u200b\u6bb5\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u800c\u200b PLT \u200b\u5219\u200b\u662f\u200b\u4ee3\u7801\u6bb5\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u3002</p> <p>GOT \u200b\u548c\u200b PLT \u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u534f\u540c\u5de5\u4f5c\u200b\u89e3\u6790\u200b\u51fd\u6570\u200b\u5730\u5740\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p></p> <p>\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b\u5bf9\u200b\u5171\u4eab\u200b\u5e93\u51fd\u6570\u200b\u7684\u200b\u8c03\u7528\u200b\u90fd\u200b\u4e0e\u200b PLT \u200b\u6570\u7ec4\u200b\u4e2d\u200b\u7684\u200b\u6761\u76ee\u200b\u5bf9\u5e94\u200b\u3002\u200b\u5176\u4e2d\u200b\uff0cPLT[0] \u200b\u662f\u200b\u8df3\u8f6c\u200b\u5230\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u7684\u200b\u7279\u6b8a\u200b\u6761\u76ee\u200b\uff0cPLT[1] \u200b\u5bf9\u5e94\u200b\u7cfb\u7edf\u542f\u52a8\u200b\u51fd\u6570\u200b<code>__libc_start_main</code>\u3002\u200b\u4ece\u200b PLT[2] \u200b\u5f00\u59cb\u200b\u7684\u200b\u6761\u76ee\u200b\u5bf9\u5e94\u200b\u7528\u6237\u200b\u4ee3\u7801\u200b\u8c03\u7528\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u5982\u56fe\u200b\u4e2d\u200b\u7684\u200b<code>addvec</code>\u3002</p> <p>\u200b\u5f53\u200b\u4e0e\u200b PLT \u200b\u4e00\u8d77\u200b\u4f7f\u7528\u200b\u65f6\u200b\uff0cGOT [0] \u200b\u548c\u200b GOT[1] \u200b\u5305\u542b\u200b\u4e86\u200b\u52a8\u6001\u200b\u8fde\u63a5\u5668\u200b\u5728\u200b\u89e3\u6790\u200b\u51fd\u6570\u200b\u5730\u5740\u200b\u65f6\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u4fe1\u606f\u200b\uff0cGOT[2] \u200b\u662f\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u7684\u200b\u5165\u53e3\u200b\u70b9\u200b\u3002\u200b\u5176\u4f59\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b\u5747\u200b\u5bf9\u5e94\u200b\u4e8e\u200b\u4e00\u4e2a\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u9700\u8981\u200b\u88ab\u200b\u89e3\u6790\u200b\u5730\u5740\u200b\u7684\u200b\u8c03\u7528\u51fd\u6570\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u4e2a\u200b PLT \u200b\u6761\u76ee\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0cGOT[4] \u200b\u548c\u200b PLT[2] \u200b\u4e0e\u200b<code>addvec</code>\u200b\u5bf9\u5e94\u200b\u3002</p> <p>\u200b\u7a0b\u5e8f\u200b\u7b2c\u4e00\u6b21\u200b\u8c03\u7528\u200b<code>addvec</code>\u200b\u5e76\u200b\u89e3\u6790\u200b\u5176\u200b\u5730\u5740\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u5982\u4e0a\u56fe\u200b\uff08a\uff09\u200b\u6240\u793a\u200b\uff1a</p> <ol> <li>PLT[2] \u200b\u662f\u200b\u8be5\u200b\u51fd\u6570\u200b\u7684\u200b\u5165\u53e3\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u9996\u5148\u200b\u8c03\u7528\u200b\u5b83\u200b\uff1b</li> <li>PLT[2] \u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u6761\u200b\u6307\u4ee4\u200b\u95f4\u63a5\u200b\u8df3\u8f6c\u200b\u5230\u200b GOT[4]\u3002\u200b\u7531\u4e8e\u200b\u6700\u521d\u200b\u6bcf\u4e2a\u200b GOT \u200b\u6761\u76ee\u200b\u90fd\u200b\u6307\u5411\u200b\u5bf9\u5e94\u200b PLT \u200b\u6761\u76ee\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e8c\u6761\u200b\u6307\u4ee4\u200b\uff0c\u200b\u56e0\u6b64\u200b\u63a7\u5236\u6743\u200b\u5c06\u200b\u8f6c\u79fb\u200b\u5230\u200b PLT[2] \u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e8c\u6761\u200b\u6307\u4ee4\u200b\uff1b</li> <li>PLT[2] \u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e8c\u6761\u200b\u6307\u4ee4\u200b\u5c06\u200b<code>addvec</code>\u200b\u7684\u200b ID 0x1 \u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7b2c\u4e09\u6761\u200b\u6307\u4ee4\u200b\u8df3\u8f6c\u200b\u5230\u200b PLT[0]\uff1b</li> <li>PLT[0] \u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u6761\u200b\u6307\u4ee4\u200b\u5c06\u200b *GOT[1] \u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7b2c\u4e8c\u6761\u200b\u6307\u4ee4\u200b\u901a\u8fc7\u200b GOT[2] \u200b\u95f4\u63a5\u200b\u8df3\u8f6c\u200b\u5230\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u3002\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5668\u200b\u6839\u636e\u200b\u88ab\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\u7684\u200b\u4e24\u4e2a\u200b\u6761\u76ee\u200b\u786e\u5b9a\u200b<code>addvec</code>\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u5730\u5740\u200b\u5e76\u7528\u200b\u5b83\u200b\u8986\u76d6\u200b GOT[4]\uff0c\u200b\u6700\u7ec8\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u7ed9\u200b<code>addvec</code>\u3002</li> </ol> <p>\u200b\u7a0b\u5e8f\u200b\u518d\u6b21\u200b\u8c03\u7528\u200b<code>addvec</code>\u200b\u7684\u200b\u8fc7\u7a0b\u200b\u5982\u4e0a\u56fe\u200b\uff08b\uff09\u200b\u6240\u793a\u200b\uff1a</p> <ol> <li>\u200b\u7a0b\u5e8f\u200b\u4f9d\u7136\u200b\u9996\u5148\u200b\u8c03\u7528\u200b PLT[2]\uff1b</li> <li>\u200b\u6b64\u65f6\u200b GOT[4] \u200b\u6307\u5411\u200b\u4e86\u200b<code>addvec</code>\uff0c\u200b\u56e0\u6b64\u200b\u63a7\u5236\u6743\u200b\u5c06\u200b\u88ab\u200b\u76f4\u63a5\u200b\u8f6c\u79fb\u200b\u5230\u200b\u8be5\u200b\u51fd\u6570\u200b\u3002</li> </ol>"},{"location":"core/csapp/ch7/#_20","title":"\u5e93\u200b\u63d2\u5165","text":"<p>\u200b\u5e93\u200b\u63d2\u5165\u200b\uff08Library Interpositioning\uff09\u200b\u80fd\u591f\u200b\u62e6\u622a\u200b\u7a0b\u5e8f\u200b\u5bf9\u200b\u5171\u4eab\u200b\u5e93\u51fd\u6570\u200b\u7684\u200b\u8c03\u7528\u200b\uff0c\u200b\u5e76\u200b\u6267\u884c\u200b\u7528\u6237\u200b\u81ea\u5b9a\u4e49\u200b\u7684\u200b\u4ee3\u7801\u200b\u3002\u200b\u57fa\u4e8e\u200b\u8fd9\u9879\u200b\u6280\u672f\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u8ba1\u7b97\u200b\u5e93\u51fd\u6570\u200b\u7684\u200b\u8c03\u7528\u200b\u6b21\u6570\u200b\uff0c\u200b\u9a8c\u8bc1\u200b\u5e76\u200b\u8ddf\u8e2a\u200b\u5176\u200b\u8f93\u5165\u200b\u548c\u200b\u8f93\u51fa\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u751a\u81f3\u200b\u5c06\u200b\u5176\u200b\u66ff\u6362\u200b\u4e3a\u200b\u5b8c\u5168\u200b\u4e0d\u540c\u200b\u7684\u200b\u51fd\u6570\u200b\u3002</p> <p>\u200b\u5e93\u200b\u63d2\u5165\u200b\u7684\u200b\u57fa\u672c\u200b\u601d\u60f3\u200b\u662f\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u5e93\u51fd\u6570\u200b\u539f\u578b\u200b\u76f8\u540c\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\uff0c\u200b\u7136\u540e\u200b\u201c\u200b\u6b3a\u9a97\u200b\u201d\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\u800c\u200b\u975e\u200b\u5e93\u51fd\u6570\u200b\u3002\u200b\u901a\u5e38\u200b\uff0c\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\u4f1a\u200b\u6267\u884c\u200b\u81ea\u5df1\u200b\u7684\u200b\u903b\u8f91\u200b\uff0c\u200b\u8c03\u7528\u200b\u5e93\u51fd\u6570\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u8fd4\u56de\u503c\u200b\u4f20\u9012\u200b\u7ed9\u200b\u8c03\u7528\u8005\u200b\u3002</p> <p>\u200b\u5e93\u200b\u63d2\u5165\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7f16\u8bd1\u200b\u65f6\u200b\u3001\u200b\u94fe\u63a5\u200b\u65f6\u200b\u4ee5\u53ca\u200b\u8fd0\u884c\u200b\u65f6\u200b\u4f7f\u7528\u200b\u3002</p>"},{"location":"core/csapp/ch8/","title":"\u5f02\u5e38\u200b\u63a7\u5236\u6d41","text":"<p>\u200b\u5728\u200b\u8ba1\u7b97\u673a\u200b\u7684\u200b\u8fd0\u884c\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u4f9d\u6b21\u200b\u6307\u5411\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u503c\u200b\uff1a\\(a_0, a_1, ..., a_n\\)\u3002\u200b\u5176\u4e2d\u200b\uff0c\\(a_k\\) \u200b\u662f\u200b\u5176\u200b\u5bf9\u5e94\u200b\u6307\u4ee4\u200b \\(I_k\\) \u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u4ece\u200b \\(a_k\\) \u200b\u5230\u200b \\(a_{k+1}\\) \u200b\u7684\u200b\u8f6c\u6362\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u63a7\u5236\u200b\u8f6c\u79fb\u200b\uff08Control Transfer\uff09\uff0c\u200b\u4e00\u7cfb\u5217\u200b\u7684\u200b\u63a7\u5236\u200b\u8f6c\u79fb\u200b\u5219\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\uff08Control Flow\uff09\u3002</p> <p>\u200b\u6700\u200b\u7b80\u5355\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\u4fbf\u662f\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u7684\u200b\u6307\u4ee4\u200b\u6309\u200b\u987a\u5e8f\u200b\u6267\u884c\u200b\uff0c\u200b\u5373\u200b \\(I_k\\) \u200b\u4e0e\u200b \\(I_{k+1}\\) \u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u76f8\u90bb\u200b\u3002\u200b\u4e0d\u8fc7\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u201c\u200b\u5e73\u6ed1\u200b\u201d\u200b\u7684\u200b\u63a7\u5236\u6d41\u200b\u901a\u5e38\u200b\u56e0\u200b\u6307\u4ee4\u200b\u7684\u200b\u8df3\u8f6c\u200b\u3001\u200b\u8c03\u7528\u200b\u548c\u200b\u8fd4\u56de\u200b\u800c\u200b\u7a81\u7136\u200b\u6539\u53d8\u200b\uff0c\u200b\u6b64\u65f6\u200b \\(I_k\\) \u200b\u4fbf\u200b\u4e0d\u518d\u200b\u4e0e\u200b \\(I_{k+1}\\) \u200b\u76f8\u90bb\u200b\u3002</p> <p>\u200b\u7a0b\u5e8f\u200b\u5185\u90e8\u200b\u7684\u200b\u72b6\u6001\u200b\u662f\u200b\u7531\u200b\u7a0b\u5e8f\u200b\u53d8\u91cf\u200b\u8868\u793a\u200b\u7684\u200b\uff0c\u200b\u63a7\u5236\u6d41\u200b\u4f7f\u5f97\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u5176\u200b\u66f4\u65b0\u200b\u505a\u51fa\u200b\u53cd\u5e94\u200b\u3002\u200b\u4f46\u200b\u7cfb\u7edf\u200b\u8fd8\u200b\u5fc5\u987b\u200b\u80fd\u591f\u200b\u5e94\u5bf9\u200b\u81ea\u8eab\u200b\u72b6\u6001\u200b\u7684\u200b\u53d8\u5316\u200b\uff0c\u200b\u5b83\u4eec\u200b\u65e0\u6cd5\u200b\u88ab\u200b\u5185\u90e8\u200b\u7a0b\u5e8f\u200b\u53d8\u91cf\u200b\u6355\u83b7\u200b\uff0c\u200b\u751a\u81f3\u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u4e0e\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u6267\u884c\u200b\u6709\u5173\u200b\u3002\u200b\u6bd4\u5982\u200b\uff0c\u200b\u6570\u636e\u5305\u200b\u5728\u200b\u5230\u8fbe\u200b\u7f51\u7edc\u9002\u914d\u5668\u200b\u540e\u200b\u9700\u8981\u200b\u88ab\u200b\u5b58\u50a8\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff1b\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\u65f6\u200b\u9700\u8981\u200b\u5f97\u77e5\u200b\u5176\u200b\u4f55\u65f6\u200b\u53ef\u7528\u200b\uff1b\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5fc5\u987b\u200b\u5728\u200b\u5176\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u65f6\u200b\u6536\u5230\u200b\u901a\u77e5\u200b\u7b49\u200b\u3002</p> <p>\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u901a\u8fc7\u200b\u5f02\u5e38\u200b\u63a7\u5236\u6d41\u200b\uff08Exceptional Control Flow\uff0cECF\uff09\u200b\u6765\u200b\u5904\u7406\u200b\u4e0a\u8ff0\u60c5\u51b5\u200b\uff0c\u200b\u5b83\u200b\u5e94\u7528\u200b\u4e8e\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u7684\u200b\u6240\u6709\u200b\u7ea7\u522b\u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_2","title":"\u5f02\u5e38","text":"<p>\u200b\u5f02\u5e38\u200b\uff08Exception\uff09\u200b\u662f\u200b\u4e3a\u4e86\u200b\u54cd\u5e94\u200b\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u6539\u53d8\u200b\u800c\u200b\u5728\u200b\u63a7\u5236\u6d41\u200b\u4e2d\u200b\u7a81\u7136\u200b\u53d1\u751f\u200b\u7684\u200b\u53d8\u5316\u200b\uff0c\u200b\u5176\u200b\u57fa\u672c\u200b\u601d\u60f3\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff1a</p> <p> \u200b\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u7684\u200b\u53d8\u5316\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u4e8b\u4ef6\u200b\uff08Event\uff09\uff0c\u200b\u5b83\u200b\u53ef\u80fd\u200b\u4e0e\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\uff08\\(I_{curr}\\)\uff09\u200b\u7684\u200b\u6267\u884c\u200b\u76f4\u63a5\u200b\u76f8\u5173\u200b\uff0c\u200b\u6bd4\u5982\u200b\u7b97\u672f\u200b\u6ea2\u51fa\u200b\u6216\u200b\u9664\u6570\u200b\u4e3a\u200b\u96f6\u200b\uff1b\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u4e0e\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u7684\u200b\u6267\u884c\u200b\u65e0\u5173\u200b\uff0c\u200b\u6bd4\u5982\u200b\u7cfb\u7edf\u200b\u8ba1\u65f6\u5668\u200b\u5173\u95ed\u200b\u6216\u200b I/O \u200b\u8bf7\u6c42\u200b\u5b8c\u6210\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_3","title":"\u5f02\u5e38\u200b\u5904\u7406","text":"<p>\u200b\u5f02\u5e38\u200b\u5904\u7406\u200b\u6d89\u53ca\u200b\u5230\u200b\u8f6f\u4ef6\u200b\u548c\u200b\u786c\u4ef6\u200b\u7684\u200b\u5bc6\u5207\u5408\u4f5c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f88\u200b\u5bb9\u6613\u200b\u5c06\u200b\u4e0d\u540c\u200b\u7ec4\u4ef6\u200b\u6267\u884c\u200b\u7684\u200b\u5de5\u4f5c\u200b\u76f8\u200b\u6df7\u6dc6\u200b\u3002\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u6bcf\u79cd\u200b\u53ef\u80fd\u200b\u7684\u200b\u5f02\u5e38\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u975e\u8d1f\u200b\u6574\u6570\u200b\uff0c\u200b\u5373\u200b\u5f02\u5e38\u200b\u6570\u5b57\u200b\uff08Exception Number\uff09\u3002\u200b\u5f53\u200b\u8ba1\u7b97\u673a\u7cfb\u7edf\u200b\u542f\u52a8\u200b\u65f6\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4f1a\u200b\u521d\u59cb\u5316\u200b\u4e00\u4e2a\u200b\u8df3\u8f6c\u200b\u8868\u200b\uff0c\u200b\u4e5f\u200b\u79f0\u200b\u5f02\u5e38\u200b\u8868\u200b\uff08Exception Table\uff09\u3002\u200b\u5f02\u5e38\u200b\u6570\u5b57\u200b\u662f\u200b\u5f02\u5e38\u200b\u8868\u200b\u7684\u200b\u7d22\u5f15\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u6761\u76ee\u200b k \u200b\u5747\u200b\u5305\u542b\u200b\u4e86\u200b\u5f02\u5e38\u200b k \u200b\u7684\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5730\u5740\u200b\uff1a</p> <p> \u200b\u5f53\u200b\u5904\u7406\u5668\u200b\u68c0\u6d4b\u200b\u5230\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u53d1\u751f\u200b\u65f6\u200b\uff0c\u200b\u9996\u5148\u200b\u5c06\u200b\u786e\u5b9a\u200b\u5f02\u5e38\u200b\u6570\u5b57\u200b\uff0c\u200b\u7136\u540e\u200b\u6839\u636e\u200b\u5f02\u5e38\u200b\u8868\u200b\u8c03\u7528\u200b\u5bf9\u5e94\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u3002</p> <p> \u200b\u5f02\u5e38\u200b\u4e0e\u200b\u8fc7\u7a0b\u200b\u8c03\u7528\u200b\u7c7b\u4f3c\u200b\uff0c\u200b\u4f46\u200b\u4e5f\u200b\u6709\u200b\u4e00\u4e9b\u200b\u91cd\u8981\u200b\u533a\u522b\u200b\uff1a</p> <ul> <li>\u200b\u5f02\u5e38\u200b\u7684\u200b\u8fd4\u56de\u200b\u5730\u5740\u200b\u8981\u4e48\u200b\u662f\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\uff08\\(I_{curr}\\)\uff09\uff0c\u200b\u8981\u4e48\u200b\u662f\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\uff08\\(I_{next}\\)\uff09\uff1b</li> <li>\u200b\u5904\u7406\u5668\u200b\u8fd8\u4f1a\u200b\u5c06\u200b\u4e00\u4e9b\u200b\u989d\u5916\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\u538b\u5165\u200b\u6808\u200b\u4e2d\u200b\u3002\u200b\u5f53\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u540e\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u4fe1\u606f\u200b\u662f\u200b\u91cd\u542f\u200b\u88ab\u200b\u4e2d\u65ad\u200b\u7a0b\u5e8f\u200b\u6240\u200b\u5fc5\u9700\u200b\u7684\u200b\uff1b</li> <li>\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u200b\u8fd0\u884c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u8bbf\u95ee\u200b\u6240\u6709\u200b\u7cfb\u7edf\u8d44\u6e90\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch8/#_4","title":"\u5f02\u5e38\u200b\u7684\u200b\u5206\u7c7b","text":""},{"location":"core/csapp/ch8/#_5","title":"\u4e2d\u65ad","text":"<p>\u200b\u4e2d\u65ad\u200b\uff08Interrupt\uff09\u200b\u5f02\u6b65\u200b\u53d1\u751f\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u662f\u200b\u7531\u200b\u5904\u7406\u5668\u200b\u5916\u90e8\u200b\u7684\u200b I/O \u200b\u8bbe\u5907\u200b\u53d1\u51fa\u200b\u7684\u200b\u4fe1\u53f7\u200b\u4ea7\u751f\u200b\u7684\u200b\u3002</p> <p> \u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\u540e\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u6ce8\u610f\u200b\u5230\u200b\u4e2d\u65ad\u200b\u5f15\u811a\u200b\u53d8\u9ad8\u200b\uff0c\u200b\u4e8e\u662f\u200b\u4ece\u200b\u7cfb\u7edf\u603b\u7ebf\u200b\u8bfb\u53d6\u200b\u5f02\u5e38\u200b\u6570\u5b57\u200b\uff0c\u200b\u7136\u540e\u200b\u8c03\u7528\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4e2d\u65ad\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u3002\u200b\u5f53\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u3002\u200b\u968f\u540e\u200b\u7a0b\u5e8f\u200b\u7ee7\u7eed\u6267\u884c\u200b\uff0c\u200b\u5c31\u200b\u597d\u50cf\u200b\u4e2d\u65ad\u200b\u4ece\u672a\u200b\u53d1\u751f\u200b\u8fc7\u200b\u4e00\u6837\u200b\u3002</p> <p>\u200b\u5176\u4f59\u200b\u51e0\u79cd\u200b\u5f02\u5e38\u200b\u4f5c\u4e3a\u200b\u5f53\u524d\u200b\u6307\u4ee4\u200b\u7684\u200b\u6267\u884c\u200b\u7ed3\u679c\u200b\u540c\u6b65\u200b\u53d1\u751f\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u4e4b\u4e3a\u200b\u6545\u969c\u200b\u6307\u4ee4\u200b\uff08Faulting Instruction\uff09\u3002</p>"},{"location":"core/csapp/ch8/#_6","title":"\u9677\u9631\u200b\u548c\u200b\u7cfb\u7edf\u200b\u8c03\u7528","text":"<p>\u200b\u4e0e\u200b\u4e2d\u65ad\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4e00\u6837\u200b\uff0c\u200b\u9677\u9631\u200b\uff08Trap\uff09\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4e5f\u200b\u5c06\u200b\u63a7\u5236\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u3002\u200b\u5176\u200b\u6700\u200b\u91cd\u8981\u200b\u7684\u200b\u7528\u9014\u200b\u662f\u200b\u5728\u200b\u7528\u6237\u7a0b\u5e8f\u200b\u548c\u200b\u5185\u6838\u200b\u4e4b\u95f4\u200b\u63d0\u4f9b\u200b\u63a5\u53e3\u200b\uff0c\u200b\u5373\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff08System Call\uff09\u3002</p> <p>\u200b\u7528\u6237\u7a0b\u5e8f\u200b\u901a\u8fc7\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u5411\u200b\u5185\u6838\u200b\u8bf7\u6c42\u200b\u670d\u52a1\u200b\uff0c\u200b\u5982\u200b\u8bfb\u53d6\u200b\u6587\u4ef6\u200b\uff08<code>read</code>\uff09\u3001\u200b\u521b\u5efa\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\uff08<code>fork</code>\uff09\u3001\u200b\u52a0\u8f7d\u200b\u65b0\u200b\u7a0b\u5e8f\u200b\uff08<code>execve</code>\uff09\u200b\u548c\u200b\u7ec8\u6b62\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\uff08<code>exit</code>\uff09\u200b\u7b49\u200b\u3002  \u200b\u5728\u200b\u7a0b\u5e8f\u5458\u200b\u770b\u6765\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u548c\u200b\u5e38\u89c4\u200b\u51fd\u6570\u200b\u6ca1\u6709\u200b\u4ec0\u4e48\u200b\u533a\u522b\u200b\u3002\u200b\u4f46\u200b\u5e38\u89c4\u200b\u51fd\u6570\u200b\u8fd0\u884c\u200b\u5728\u200b\u7528\u6237\u200b\u6001\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u53ef\u200b\u6267\u884c\u200b\u7684\u200b\u6307\u4ee4\u200b\u7c7b\u578b\u200b\u53d7\u9650\u200b\uff0c\u200b\u4e5f\u200b\u53ea\u80fd\u200b\u8bbf\u95ee\u200b\u7528\u6237\u200b\u6808\u200b\u3002\u200b\u800c\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u8fd0\u884c\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u200b\uff0c\u200b\u80fd\u591f\u200b\u6267\u884c\u200b\u7279\u6743\u200b\u6307\u4ee4\u200b\u5e76\u200b\u8bbf\u95ee\u200b\u5185\u6838\u200b\u6808\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_7","title":"\u6545\u969c","text":"<p>\u200b\u6545\u969c\u200b\uff08Faulting\uff09\u200b\u662f\u200b\u7531\u200b\u4e00\u4e9b\u200b\u9519\u8bef\u200b\u72b6\u51b5\u200b\u5f15\u8d77\u200b\u7684\u200b\u5f02\u5e38\u200b\uff0c\u200b\u800c\u200b\u8fd9\u4e9b\u200b\u9519\u8bef\u200b\u60c5\u51b5\u200b\u6709\u200b\u53ef\u80fd\u200b\u88ab\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4fee\u6b63\u200b\uff0c\u200b\u5426\u5219\u200b\u5c06\u200b\u8fd4\u56de\u200b\u5230\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u4e2d\u6b62\u200b\u4f8b\u7a0b\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201cabort\u201d\uff09\uff1a</p> <p></p>"},{"location":"core/csapp/ch8/#_8","title":"\u4e2d\u6b62","text":"<p>\u200b\u4e0e\u200b\u6545\u969c\u200b\u76f8\u6bd4\u200b\uff0c\u200b\u5f15\u53d1\u200b\u4e2d\u6b62\u200b\uff08Abort\uff09\u200b\u7684\u200b\u9519\u8bef\u200b\u72b6\u51b5\u200b\u65e0\u6cd5\u633d\u6551\u200b\u3002\u200b\u901a\u5e38\u200b\u662f\u200b\u786c\u4ef6\u200b\u51fa\u73b0\u200b\u95ee\u9898\u200b\uff0c\u200b\u5982\u200b RAM \u200b\u4f4d\u200b\u635f\u574f\u200b\u5f15\u8d77\u200b\u7684\u200b\u5947\u5076\u6821\u9a8c\u200b\u9519\u8bef\u200b\u3002\u200b\u4e2d\u6b62\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u6c38\u8fdc\u200b\u4e0d\u4f1a\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch8/#linuxx86-64","title":"Linux/x86-64 \u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u5f02\u5e38","text":"Exception Number Description Exception Class 0 Divide Error Fault 13 General Protection Fault Fault 14 Page Fault Fault 18 Machine Check Abort 32-255 OS-defined Exception Interrupt or Trap"},{"location":"core/csapp/ch8/#_9","title":"\u6545\u969c\u200b\u548c\u200b\u4e2d\u6b62","text":"<ul> <li>\u200b\u9664\u6cd5\u200b\u6545\u969c\u200b\uff08Divide Error\uff09\uff1a\u200b\u5f53\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5c1d\u8bd5\u200b\u9664\u4ee5\u200b 0 \u200b\u6216\u200b\u9664\u6cd5\u200b\u6307\u4ee4\u200b\u7684\u200b\u7ed3\u679c\u200b\u5bf9\u200b\u76ee\u6807\u200b\u64cd\u4f5c\u6570\u200b\u6765\u8bf4\u200b\u592a\u5927\u65f6\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u9664\u6cd5\u200b\u6545\u969c\u200b\u3002Unix \u200b\u4e0d\u4f1a\u200b\u8bd5\u56fe\u200b\u7ea0\u6b63\u200b\u9664\u6cd5\u200b\u6545\u969c\u200b\uff0c\u200b\u800c\u662f\u200b\u76f4\u63a5\u200b\u4e2d\u6b62\u200b\u7a0b\u5e8f\u200b\uff1b</li> <li>\u200b\u4e00\u822c\u200b\u4fdd\u62a4\u200b\u6545\u969c\u200b\uff08General Protection Fault\uff09\uff1a\u200b\u4e00\u822c\u200b\u4fdd\u62a4\u200b\u6545\u969c\u200b\u51fa\u73b0\u200b\u7684\u200b\u539f\u56e0\u200b\u6709\u200b\u5f88\u591a\u200b\uff0c\u200b\u901a\u5e38\u200b\u662f\u200b\u7a0b\u5e8f\u200b\u5f15\u7528\u200b\u4e86\u200b\u672a\u5b9a\u4e49\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\uff0c\u200b\u6216\u200b\u8bd5\u56fe\u200b\u5411\u200b\u53ea\u8bfb\u200b\u6587\u672c\u200b\u6bb5\u200b\u5199\u5165\u200b\u3002Linux \u200b\u4e0d\u4f1a\u200b\u8bd5\u56fe\u200b\u7ea0\u6b63\u200b\u8be5\u200b\u6545\u969c\u200b\uff0c\u200b\u800c\u200b Shell \u200b\u4e00\u822c\u200b\u5c06\u200b\u5176\u200b\u62a5\u544a\u200b\u4e3a\u200b\u5206\u6bb5\u200b\u6545\u969c\u200b\uff08Segmentation Faults\uff09\uff1b</li> <li>\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\uff08Page Fault\uff09\uff1a\u200b\u7a0b\u5e8f\u200b\u5f15\u7528\u200b\u4e0d\u200b\u5728\u200b\u5185\u5b58\u200b\u800c\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u4f1a\u200b\u5bfc\u81f4\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\u3002\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5c06\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u5408\u9002\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u9875\u9762\u200b\u6620\u5c04\u200b\u5230\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u9875\u9762\u200b\uff0c\u200b\u7136\u540e\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u6545\u969c\u200b\u6307\u4ee4\u200b\uff1b</li> <li>\u200b\u673a\u5668\u200b\u68c0\u67e5\u200b\uff08Machine Check\uff09\uff1a\u200b\u4e00\u65e6\u200b\u7cfb\u7edf\u200b\u5728\u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\u671f\u95f4\u200b\u68c0\u6d4b\u200b\u5230\u200b\u81f4\u547d\u200b\u7684\u200b\u786c\u4ef6\u200b\u9519\u8bef\u200b\uff0c\u200b\u4fbf\u4f1a\u200b\u53d1\u751f\u200b\u673a\u5668\u200b\u68c0\u67e5\u200b\u3002\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u6c38\u8fdc\u200b\u4e0d\u4f1a\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch8/#_10","title":"\u7cfb\u7edf\u200b\u8c03\u7528","text":"<p> \u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u6570\u5b57\u200b\uff0c\u200b\u5bf9\u5e94\u200b\u4e86\u200b\u5185\u6838\u200b\u4e2d\u200b\u8df3\u8f6c\u200b\u8868\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u3002\u200b\u6ce8\u610f\u200b\uff0c\u200b\u8be5\u200b\u8df3\u8f6c\u200b\u8868\u4e0e\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\u7684\u200b\u5f02\u5e38\u200b\u8868\u200b\u4e0d\u540c\u200b\u3002</p> <p>C \u200b\u6807\u51c6\u200b\u5e93\u4e3a\u200b\u5927\u591a\u6570\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u7ec4\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\uff08Wrapper Function\uff09\uff0c\u200b\u5b83\u4eec\u200b\u6bd4\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u66f4\u52a0\u200b\u65b9\u4fbf\u200b\u3002\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u53ca\u5176\u200b\u76f8\u5173\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\u88ab\u200b\u7edf\u79f0\u200b\u4e3a\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u51fd\u6570\u200b\u3002\u200b\u4e3e\u4f8b\u6765\u8bf4\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u51fd\u6570\u200b<code>write</code>\u200b\u4ee3\u66ff\u200b<code>printf</code>\uff1a</p> <pre><code>int main()\n{\n    write(1, \"hello, world\\n\", 13);\n    _exit(0);\n}\n</code></pre> <p>X86-64 \u200b\u7cfb\u7edf\u200b\u901a\u8fc7\u200b<code>syscall</code>\u200b\u6307\u4ee4\u200b\u4f7f\u7528\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff0c\u200b\u5176\u200b\u6240\u6709\u200b\u53c2\u6570\u5747\u200b\u901a\u8fc7\u200b\u5bc4\u5b58\u5668\u200b\u4f20\u9012\u200b\u3002\u200b\u6309\u7167\u200b\u60ef\u4f8b\u200b\uff0c\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4fdd\u5b58\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u7f16\u53f7\u200b\uff0c\u200b\u5bc4\u5b58\u5668\u200b %rdi\u3001%rsi\u3001%rdx\u3001%r10\u3001%r8 \u200b\u548c\u200b %r9 \u200b\u4f9d\u6b21\u200b\u4fdd\u5b58\u200b\u5404\u200b\u53c2\u6570\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u7684\u200b\u8fd4\u56de\u503c\u200b\u5c06\u200b\u5199\u5165\u200b\u5230\u200b\u5bc4\u5b58\u5668\u200b %rax \u200b\u4e2d\u200b\uff0c\u200b\u82e5\u4e3a\u200b\u8d1f\u5219\u200b\u8868\u793a\u200b\u53d1\u751f\u200b\u4e86\u200b\u4e0e\u200b\u8d1f\u200b<code>errno</code>\u200b\u76f8\u5173\u200b\u7684\u200b\u9519\u8bef\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u4e0a\u9762\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u7528\u200b\u6c47\u7f16\u8bed\u8a00\u200b\u8868\u793a\u200b\u4e3a\u200b\uff1a </p>"},{"location":"core/csapp/ch8/#_11","title":"\u8fdb\u7a0b","text":"<p>\u200b\u8fdb\u7a0b\u200b\u662f\u200b\u6b63\u5728\u200b\u6267\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u5b9e\u4f8b\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u7a0b\u5e8f\u200b\u90fd\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u8fd0\u884c\u200b\u3002\u200b\u4e0a\u4e0b\u6587\u200b\u7531\u200b\u7a0b\u5e8f\u200b\u6b63\u786e\u200b\u8fd0\u884c\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u72b6\u6001\u200b\u7ec4\u6210\u200b\uff0c\u200b\u5305\u62ec\u200b\u5b58\u50a8\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u3001\u200b\u6808\u200b\u3001\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\u3001\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u3001\u200b\u73af\u5883\u53d8\u91cf\u200b\u4ee5\u53ca\u200b\u6253\u5f00\u200b \u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b \u3002</p> <p>\u200b\u8fdb\u7a0b\u200b\u4e3a\u200b\u5e94\u7528\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u5173\u952e\u200b\u62bd\u8c61\u200b\uff1a</p> <ul> <li>\u200b\u4e00\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\uff0c\u200b\u8ba9\u200b\u6211\u4eec\u200b\u4ea7\u751f\u200b\u7a0b\u5e8f\u200b\u72ec\u5360\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u9519\u89c9\u200b\uff1b</li> <li>\u200b\u4e00\u4e2a\u200b\u79c1\u6709\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u8ba9\u200b\u6211\u4eec\u200b\u4ea7\u751f\u200b\u7a0b\u5e8f\u200b\u72ec\u5360\u200b\u5185\u5b58\u200b\u7684\u200b\u9519\u89c9\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch8/#_12","title":"\u903b\u8f91\u200b\u63a7\u5236\u6d41","text":"<p>\u200b\u8fdb\u7a0b\u200b\u8f6e\u6d41\u200b\u4f7f\u7528\u200b\u5904\u7406\u5668\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u5176\u200b\u6d41\u7a0b\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\uff0c\u200b\u7136\u540e\u200b\u5728\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u65f6\u200b\u88ab\u200b\u62a2\u5360\u200b\uff08\u200b\u5373\u200b\u6682\u65f6\u200b\u6302\u200b\u8d77\u200b\uff09\u3002</p>"},{"location":"core/csapp/ch8/#_13","title":"\u5e76\u53d1\u6d41","text":"<p>\u200b\u6267\u884c\u200b\u65f6\u95f4\u91cd\u53e0\u200b\u7684\u200b\u4e24\u4e2a\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5e76\u53d1\u6d41\u200b\uff08Concurrent Flow\uff09\uff0c\u200b\u5b83\u4eec\u200b\u5e76\u53d1\u200b\u8fd0\u884c\u200b\u3002\u200b\u5982\u4e0a\u56fe\u200b 8.12 \u200b\u6240\u793a\u200b\uff0c\u200b\u8fdb\u7a0b\u200b A \u200b\u548c\u200b \u200b\u8fdb\u7a0b\u200b B \u200b\u5e76\u53d1\u200b\u8fd0\u884c\u200b\uff0c\u200b\u4f46\u200b\u8fdb\u7a0b\u200b B \u200b\u548c\u200b\u8fdb\u7a0b\u200b C \u200b\u5219\u200b\u4e0d\u662f\u200b\u3002</p> <p>\u200b\u5e76\u53d1\u6d41\u200b\u7684\u200b\u6982\u5ff5\u200b\u4e0e\u200b\u5904\u7406\u5668\u200b\u7684\u200b\u6838\u6570\u200b\u4ee5\u53ca\u200b\u8ba1\u7b97\u673a\u200b\u7684\u200b\u6570\u91cf\u200b\u65e0\u5173\u200b\uff0c\u200b\u53ea\u8981\u200b\u4e24\u4e2a\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u5728\u200b\u65f6\u95f4\u200b\u4e0a\u200b\u91cd\u53e0\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u4eec\u200b\u4fbf\u662f\u200b\u5e76\u53d1\u200b\u7684\u200b\u3002\u200b\u5982\u679c\u200b\u4e24\u4e2a\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u5904\u7406\u5668\u200b\u5185\u6838\u200b\u6216\u200b\u8ba1\u7b97\u673a\u200b\u4e0a\u200b\u540c\u65f6\u200b\u8fd0\u884c\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u5b83\u4eec\u200b\u4e3a\u200b\u5e76\u884c\u200b\u6d41\u200b\uff08Parallel Flow\uff09\u3002\u200b\u663e\u7136\u200b\uff0c\u200b\u5e76\u884c\u200b\u6d41\u662f\u200b\u5e76\u53d1\u6d41\u200b\u7684\u200b\u5b50\u96c6\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_14","title":"\u79c1\u6709\u200b\u5730\u5740\u200b\u7a7a\u95f4","text":"<p>\u200b\u8fdb\u7a0b\u200b\u4e3a\u200b\u7a0b\u5e8f\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u72ec\u4eab\u200b\u7684\u200b\u79c1\u6709\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u4e0e\u200b\u7a7a\u95f4\u200b\u5185\u200b\u7279\u5b9a\u200b\u5730\u5740\u200b\u76f8\u5173\u200b\u7684\u200b\u5185\u5b58\u200b\u5b57\u8282\u200b\u901a\u5e38\u200b\u4e0d\u80fd\u200b\u88ab\u200b\u5176\u4ed6\u200b\u4efb\u4f55\u200b\u8fdb\u7a0b\u200b\u8bfb\u53d6\u200b\u6216\u200b\u5199\u5165\u200b\u3002\u200b\u5c3d\u7ba1\u200b\u79c1\u6709\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u7684\u200b\u5185\u5bb9\u200b\u4e0d\u540c\u200b\uff0c\u200b\u4f46\u200b\u5176\u200b\u5177\u6709\u200b\u76f8\u540c\u200b\u7684\u200b\u7ec4\u7ec7\u200b\u7ed3\u6784\u200b\uff08\u200b\u56fe\u4e2d\u200b\u7684\u200b\u201c%esp\u201d\u200b\u5e94\u4e3a\u200b\u201c%rsp\u201d\uff09\uff1a</p> <p></p> <p>\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5e95\u90e8\u200b\u662f\u200b\u4e3a\u200b\u7528\u6237\u7a0b\u5e8f\u200b\u4fdd\u7559\u200b\u7684\u200b\uff0c\u200b\u4ee3\u7801\u6bb5\u200b\u603b\u662f\u200b\u4ece\u200b\u5730\u5740\u200b 0x400000 \u200b\u5f00\u59cb\u200b\u3002\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u9876\u90e8\u200b\u662f\u200b\u4e3a\u200b\u5185\u6838\u200b\u4fdd\u7559\u200b\u7684\u200b\uff0c\u200b\u5305\u542b\u200b\u4e86\u200b\u5185\u6838\u200b\u4e3a\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\uff08\u200b\u5982\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\uff09\u200b\u65f6\u200b\u4f7f\u7528\u200b\u7684\u200b\u4ee3\u7801\u200b\u3001\u200b\u6570\u636e\u200b\u548c\u200b\u6808\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_15","title":"\u7528\u6237\u200b\u6001\u200b\u548c\u200b\u5185\u6838\u200b\u6001","text":"<p>\u200b\u5904\u7406\u5668\u200b\u901a\u8fc7\u200b\u4fdd\u5b58\u200b\u5728\u200b\u63a7\u5236\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u7684\u200b\u6a21\u5f0f\u200b\u4f4d\u200b\uff08Mode Bit\uff09\u200b\u6765\u200b\u8bc6\u522b\u200b\u8fdb\u7a0b\u200b\u5f53\u524d\u200b\u4eab\u6709\u200b\u7684\u200b\u7279\u6743\u200b\u3002\u200b\u5f53\u200b\u6a21\u5f0f\u200b\u4f4d\u200b\u88ab\u200b\u8bbe\u7f6e\u200b\u65f6\u200b\uff0c\u200b\u8fdb\u7a0b\u200b\u8fd0\u884c\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u200b\uff08Kernel Mode\uff09\uff0c\u200b\u53cd\u4e4b\u200b\u5219\u200b\u8fd0\u884c\u200b\u5728\u200b\u7528\u6237\u200b\u6001\u200b\uff08User Mode\uff09\u3002\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\u96c6\u4e2d\u200b\u7684\u200b\u4efb\u610f\u200b\u6307\u4ee4\u200b\uff0c\u200b\u5e76\u4e14\u200b\u80fd\u591f\u200b\u8bbf\u95ee\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u4efb\u610f\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u800c\u200b\u5728\u200b\u7528\u6237\u200b\u6001\u4e2d\u200b\u8fd0\u884c\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u5219\u200b\u53d7\u5230\u9650\u5236\u200b\uff0c\u200b\u53ea\u80fd\u200b\u4f7f\u7528\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u95f4\u63a5\u200b\u5730\u200b\u8bbf\u95ee\u200b\u5185\u6838\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u3002</p> <p>\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u53ea\u80fd\u200b\u901a\u8fc7\u200b\u5f02\u5e38\u200b\u6765\u200b\u4ece\u200b\u7528\u6237\u200b\u6001\u200b\u5207\u6362\u200b\u5230\u200b\u5185\u6838\u200b\u6001\u200b\u3002\u200b\u5f53\u200b\u5f02\u5e38\u200b\u53d1\u751f\u200b\u4e14\u200b\u63a7\u5236\u200b\u8f6c\u79fb\u200b\u5230\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u65f6\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u5207\u6362\u200b\u5230\u200b\u5185\u6838\u200b\u6001\u200b\u3002\u200b\u968f\u540e\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u4e2d\u200b\u8fd0\u884c\u200b\uff0c\u200b\u5904\u7406\u5668\u200b\u5c06\u200b\u5728\u200b\u5b83\u200b\u8fd4\u56de\u200b\u65f6\u200b\u5207\u6362\u200b\u56de\u200b\u7528\u6237\u200b\u6001\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_16","title":"\u4e0a\u4e0b\u6587\u200b\u5207\u6362","text":"<p>\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u671f\u95f4\u200b\uff0c\u200b\u5185\u6838\u200b\u53ef\u4ee5\u200b\u6682\u65f6\u200b\u6302\u200b\u8d77\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u5e76\u200b\u91cd\u542f\u200b\u5148\u524d\u200b\u88ab\u200b\u62a2\u5360\u200b\u7684\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u8fd9\u4e00\u200b\u884c\u4e3a\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u8c03\u5ea6\u200b\uff08Scheduling\uff09\u3002\u200b\u5185\u6838\u200b\u8c03\u5ea6\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u662f\u200b\u901a\u8fc7\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\uff08Context Switch\uff09\u200b\u673a\u5236\u200b\u6765\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff0c\u200b\u8be5\u200b\u673a\u5236\u200b\uff1a</p> <ul> <li>\u200b\u4fdd\u5b58\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff1b</li> <li>\u200b\u6062\u590d\u200b\u4e4b\u524d\u200b\u88ab\u200b\u62a2\u5360\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\uff1b</li> <li>\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u7ed9\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u3002</li> </ul> <p>\u200b\u7a0b\u5e8f\u6267\u884c\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u65f6\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u53d1\u751f\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u3002\u200b\u6bd4\u5982\u200b\u7cfb\u7edf\u200b\u8c03\u7528\u200b<code>read</code>\u200b\u9700\u8981\u200b\u8bbf\u95ee\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u7684\u200b\u6570\u636e\u200b\uff0c\u200b\u5185\u6838\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u6765\u200b\u8c03\u5ea6\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u8fd9\u6837\u200b\u5c31\u200b\u65e0\u9700\u200b\u7b49\u5f85\u200b\u6570\u636e\u200b\u4ece\u200b\u78c1\u76d8\u200b\u52a0\u8f7d\u200b\u5230\u200b\u5185\u5b58\u200b\u4e2d\u200b\u3002</p> <p></p>"},{"location":"core/csapp/ch8/#_17","title":"\u7cfb\u7edf\u200b\u8c03\u7528\u200b\u9519\u8bef\u5904\u7406","text":"<p>\u200b\u5f53\u200b\u6267\u884c\u200b Unix \u200b\u7cfb\u7edf\u200b\u7ea7\u200b\u51fd\u6570\u200b\u9047\u5230\u200b\u9519\u8bef\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u8fd4\u56de\u200b -1 \u200b\u5e76\u200b\u8bbe\u7f6e\u200b\u5168\u5c40\u200b\u6574\u578b\u200b\u53d8\u91cf\u200b<code>errno</code>\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u68c0\u67e5\u200b\u8c03\u7528\u200b\u662f\u5426\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\uff0c\u200b\u5982\u200b\uff1a</p> <pre><code>if ((pid = fork()) &lt; 0)\n{\n    fprintf(stderr, \"fork error: %s\\n\", strerror(errno));\n    exit(0);\n}\n</code></pre> <p>\u200b\u5176\u4e2d\u200b\uff0c<code>strerror</code>\u200b\u51fd\u6570\u200b\u4f1a\u200b\u6839\u636e\u200b<code>errno</code>\u200b\u7684\u200b\u503c\u200b\u8fd4\u56de\u200b\u76f8\u5173\u200b\u7684\u200b\u6587\u672c\u200b\u5b57\u7b26\u4e32\u200b\u3002\u200b\u6211\u4eec\u200b\u5b9a\u4e49\u200b\u4e00\u4e2a\u200b\u9519\u8bef\u62a5\u544a\u200b\uff08Error-reporting\uff09\u200b\u51fd\u6570\u200b\u4ee5\u200b\u7b80\u5316\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u200b\uff1a</p> <pre><code>void unix_error(char *msg) /* Unix-style error */\n{\n    fprintf(stderr, \"%s: %s\\n\", msg, strerror(errno));\n    exit(0);\n}\n\nif ((pid = fork()) &lt; 0)\n    unix_error(\"fork error\");\n</code></pre> <p>\u200b\u5f53\u7136\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u8fdb\u4e00\u6b65\u200b\u5730\u200b\u5c06\u200b\u4ee3\u7801\u200b\u7b80\u5316\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u9519\u8bef\u5904\u7406\u200b\uff08Error-handling\uff09\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>pid_t Fork(void)\n{\n    pid_t pid;\n    if ((pid = fork()) &lt; 0)\n        unix_error(\"Fork error\");\n    return pid;\n}\n\npid = Fork();\n</code></pre> <p>\u200b\u8fd9\u6837\u200b\u6211\u4eec\u200b\u4fbf\u200b\u80fd\u591f\u200b\u4f7f\u7528\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b<code>Fork</code>\u200b\u4ee3\u66ff\u200b<code>fork</code>\u200b\u53ca\u5176\u200b\u9519\u8bef\u200b\u68c0\u67e5\u200b\u4ee3\u7801\u200b\u3002\u200b\u672c\u4e66\u200b\u4f7f\u7528\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b\u5747\u200b\u5b9a\u4e49\u200b\u5728\u200b <code>csapp.h</code> \u200b\u548c\u200b  <code>csapp.c</code> \u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_18","title":"\u8fdb\u7a0b\u200b\u63a7\u5236","text":""},{"location":"core/csapp/ch8/#id","title":"\u83b7\u53d6\u200b\u8fdb\u7a0b\u200b ID","text":"<p>\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u4e14\u200b\u5927\u4e8e\u200b 0 \u200b\u7684\u200b\u8fdb\u7a0b\u200b ID\uff08PID\uff09\u3002\u200b\u51fd\u6570\u200b<code>getpid</code>\u200b\u8fd4\u56de\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u7684\u200b PID\uff0c\u200b\u800c\u200b\u51fd\u6570\u200b<code>getppid</code>\u200b\u5219\u200b\u8fd4\u56de\u200b\u521b\u5efa\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u5373\u7236\u200b\u8fdb\u7a0b\u200b\uff09 \u200b\u7684\u200b PID\u3002</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\npid_t getpid(void);\npid_t getppid(void);\n</code></pre> <p>\u200b\u4e8c\u8005\u200b\u8fd4\u56de\u503c\u200b\u7684\u200b\u7c7b\u578b\u200b\u5747\u200b\u4e3a\u200b<code>pid_t</code>\uff0c\u200b\u5b83\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u7684\u200b<code>sys/types.h</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u88ab\u200b\u5b9a\u4e49\u200b\u4e3a\u200b<code>int</code>\u3002</p>"},{"location":"core/csapp/ch8/#_19","title":"\u521b\u5efa\u200b\u548c\u200b\u7ec8\u6b62\u200b\u8fdb\u7a0b","text":"<p>\u200b\u5728\u200b\u7a0b\u5e8f\u5458\u200b\u770b\u6765\u200b\uff0c\u200b\u8fdb\u7a0b\u200b\u6709\u200b\u4e09\u79cd\u200b\u72b6\u6001\u200b\uff1a</p> <ul> <li>\u200b\u8fd0\u884c\u200b\uff08Running\uff09\uff1a\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u8981\u4e48\u200b\u5728\u200b CPU \u200b\u4e2d\u200b\u6267\u884c\u200b\uff0c\u200b\u8981\u4e48\u200b\u5728\u200b\u7b49\u5f85\u200b\u5185\u6838\u200b\u8c03\u5ea6\u200b\uff1b</li> <li>\u200b\u505c\u6b62\u200b\uff08Stopped\uff09\uff1a\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\u6682\u505c\u200b\uff0c\u200b\u5e76\u4e14\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u8c03\u5ea6\u200b\uff1b</li> <li>\u200b\u7ec8\u6b62\u200b\uff08Terminated\uff09\uff1a\u200b\u8fdb\u7a0b\u200b\u6c38\u4e45\u200b\u5730\u200b\u505c\u6b62\u200b\u3002</li> </ul> <p>\u200b\u51fd\u6570\u200b<code>exit</code>\u200b\u4f1a\u4ee5\u200b\u53c2\u6570\u200b<code>status</code>\u200b\u4f5c\u4e3a\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u7ec8\u6b62\u200b\u8fdb\u7a0b\u200b\uff1a</p> <pre><code>#include &lt;stdlib.h&gt;\nvoid exit(int status);\n</code></pre> <p>\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>fork</code>\u200b\u51fd\u6570\u200b\u6765\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;unistd.h&gt;\npid_t fork(void);\n</code></pre> <p>\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5c06\u200b\u83b7\u5f97\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u76f8\u540c\u200b\u4f46\u200b\u72ec\u7acb\u200b\u7684\u200b\u7528\u6237\u200b\u7ea7\u200b\u865a\u62df\u5185\u5b58\u200b\u7a7a\u95f4\u200b\u526f\u672c\u200b\uff0c\u200b\u5305\u62ec\u200b\u4ee3\u7801\u200b\u3001\u200b\u6570\u636e\u200b\u3001\u200b\u5806\u200b\u3001\u200b\u5171\u4eab\u200b\u5e93\u200b\u548c\u200b\u7528\u6237\u200b\u6808\u200b\u7b49\u200b\u3002\u200b\u5b83\u200b\u8fd8\u200b\u4f1a\u200b\u5f97\u5230\u200b\u4e0e\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u76f8\u540c\u200b\u7684\u200b\u6253\u5f00\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b\u526f\u672c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u80fd\u591f\u200b\u8bfb\u5199\u200b\u4efb\u610f\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u6253\u5f00\u200b\u7684\u200b\u6587\u4ef6\u200b\u3002\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u548c\u5b50\u200b\u8fdb\u7a0b\u200b\u4e4b\u95f4\u200b\u6700\u200b\u663e\u8457\u200b\u7684\u200b\u533a\u522b\u200b\u4fbf\u662f\u200b PID \u200b\u4e0d\u540c\u200b\u3002</p> <p>\u200b\u51fd\u6570\u200b<code>fork</code>\u200b\u6267\u884c\u200b\u4e00\u6b21\u200b\u5374\u200b\u8fd4\u56de\u200b\u4e24\u6b21\u200b\uff1a\u200b\u5728\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u8fd4\u56de\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b PID\uff0c\u200b\u5728\u5b50\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u8fd4\u56de\u200b 0\u3002\u200b\u7531\u4e8e\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b PID \u200b\u59cb\u7ec8\u200b\u5927\u4e8e\u200b 0 \uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8fd4\u56de\u503c\u200b\u5224\u65ad\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u54ea\u4e2a\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u6267\u884c\u200b\u3002</p> <pre><code>#include \"csapp.h\"\n\nint main()\n{\n    pid_t pid;\n    int x = 1;\n\n    pid = Fork();\n    if (pid == 0)\n    { /* Child */\n        printf(\"child : x=%d\\n\", ++x);\n        exit(0);\n    }\n\n    /* Parent */\n    printf(\"parent: x=%d\\n\", --x);\n    exit(0);\n}\n</code></pre> <p>\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u7f16\u8bd1\u200b\u540e\u200b\u8fd0\u884c\u200b\u7684\u200b\u53ef\u80fd\u200b\u7ed3\u679c\u200b\u4e3a\u200b\uff1a</p> <pre><code>linux&gt; ./fork\nparent: x=0\nchild : x=2\n</code></pre> <p>\u200b\u4ece\u200b\u7ed3\u679c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u770b\u51fa\u200b\uff1a\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u548c\u5b50\u200b\u8fdb\u7a0b\u200b\u5e76\u53d1\u200b\u6267\u884c\u200b\uff0c\u200b\u6211\u4eec\u200b\u6c38\u8fdc\u200b\u65e0\u6cd5\u200b\u9884\u6d4b\u200b\u5176\u200b\u6267\u884c\u200b\u987a\u5e8f\u200b\uff1b\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u662f\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u526f\u672c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f53\u200b\u7b2c\u516d\u200b\u884c\u200b\u7684\u200b\u51fd\u6570\u200b<code>Fork</code>\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u4e24\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u5c40\u90e8\u53d8\u91cf\u200b<code>x</code>\u200b\u5747\u200b\u4e3a\u200b 1\uff1b\u200b\u4e24\u200b\u8fdb\u7a0b\u200b\u5bf9\u200b\u53d8\u91cf\u200b\u7684\u200b\u66f4\u6539\u200b\u4e92\u4e0d\u200b\u5f71\u54cd\u200b\uff0c\u200b\u6240\u4ee5\u200b\u6700\u7ec8\u200b\u8f93\u51fa\u200b\u7684\u200b\u503c\u200b\u4e0d\u540c\u200b\u3002</p> <p>\u200b\u7ed8\u5236\u200b\u8fdb\u7a0b\u200b\u56fe\u200b\uff08Process Graph\uff09\u200b\u5bf9\u200b\u7406\u89e3\u200b<code>fork</code>\u200b\u51fd\u6570\u200b\u5f88\u200b\u6709\u200b\u5e2e\u52a9\u200b\uff0c\u200b\u5982\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch8/#_20","title":"\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b","text":"<p>\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u540e\u200b\uff0c\u200b\u5185\u6838\u200b\u4e0d\u4f1a\u200b\u7acb\u5373\u200b\u5c06\u200b\u5176\u200b\u79fb\u9664\u200b\u3002\u200b\u5b83\u200b\u9700\u8981\u200b\u88ab\u200b\u5176\u7236\u200b\u8fdb\u7a0b\u200b\u56de\u6536\u200b\uff08Reap\uff09\uff0c\u200b\u5426\u5219\u200b\u5c06\u200b\u6210\u4e3a\u200b\u50f5\u5c38\u200b\uff08Zombie\uff09\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u5f53\u7236\u200b\u8fdb\u7a0b\u200b\u56de\u6536\u200b\u5176\u200b\u7ec8\u6b62\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u5c06\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u4f20\u9012\u200b\u7ed9\u7236\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u7136\u540e\u200b\u518d\u200b\u4e22\u5f03\u200b\u5b83\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u200b\u5b89\u6392\u200b<code>init</code>\u200b\u8fdb\u7a0b\u200b\uff08PID \u200b\u4e3a\u200b 1\uff09\u201c\u200b\u6536\u517b\u200b\u201d\u200b\u5b64\u513f\u200b\u8fdb\u7a0b\u200b\uff1b\u200b\u5982\u679c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5728\u200b\u7ec8\u6b62\u200b\u524d\u200b\u6ca1\u6709\u200b\u56de\u6536\u200b\u50f5\u5c38\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5219\u200b\u7531\u200b<code>init</code>\u200b\u8fdb\u7a0b\u200b\u56de\u6536\u200b\u5b83\u4eec\u200b\u3002</p> <p>\u200b\u8fdb\u7a0b\u200b\u901a\u8fc7\u200b\u8c03\u7528\u51fd\u6570\u200b<code>waitpid</code>\u200b\u7b49\u5f85\u200b\u5176\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u6216\u200b\u505c\u6b62\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;sys/wait.h&gt;\npid_t waitpid(pid_t pid, int *statusp, int options);\n// Returns: PID of child if OK, 0 (if WNOHANG), or \u22121 on error\n</code></pre> <p>\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff08\u200b\u53c2\u6570\u200b<code>options</code>\u200b\u4e3a\u200b 0 \u200b\u65f6\u200b\uff09\uff0c\u200b\u51fd\u6570\u200b<code>waitpid</code>\u200b\u4f1a\u200b\u6682\u505c\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u76f4\u81f3\u200b\u5176\u200b\u7b49\u5f85\u200b\u96c6\u200b\uff08Wait Set\uff09\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u59cb\u7ec8\u200b\u8fd4\u56de\u200b\u7b2c\u4e00\u4e2a\u200b\u7ec8\u6b62\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b PID\u3002\u200b\u6b64\u65f6\u200b\uff0c\u200b\u7ec8\u6b62\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5df2\u200b\u88ab\u200b\u56de\u6536\u200b\uff0c\u200b\u5185\u6838\u200b\u4ece\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u5220\u9664\u200b\u4e86\u200b\u5b83\u200b\u7684\u200b\u6240\u6709\u200b\u75d5\u8ff9\u200b\u3002</p> <p>\u200b\u82e5\u200b\u53c2\u6570\u200b<code>pid_t</code>\u200b\u5927\u4e8e\u200b 0 \uff0c\u200b\u5219\u200b\u7b49\u5f85\u200b\u96c6\u4e2d\u200b\u53ea\u6709\u200b\u4e00\u4e2a\u200b PID \u200b\u4e0e\u200b\u8be5\u200b\u53c2\u6570\u200b\u76f8\u7b49\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u82e5\u200b\u53c2\u6570\u200b<code>pid_t</code>\u200b\u7b49\u4e8e\u200b -1\uff0c\u200b\u5219\u200b\u7b49\u5f85\u200b\u96c6\u200b\u5305\u542b\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u6240\u6709\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u4fee\u6539\u200b\u53c2\u6570\u200b<code>options</code>\u200b\u7684\u200b\u503c\u6765\u200b\u6539\u53d8\u200b\u51fd\u6570\u200b<code>waitpid</code>\u200b\u7684\u200b\u884c\u4e3a\u200b\uff1a</p> <ul> <li><code>WNOHANG</code>\uff1a\u200b\u5982\u679c\u200b\u7b49\u5f85\u200b\u96c6\u4e2d\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u8fd8\u200b\u672a\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5219\u200b\u7acb\u5373\u200b\u8fd4\u56de\u200b 0\uff1b</li> <li><code>WUNTRACED</code>\uff1a\u200b\u6682\u505c\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\uff0c\u200b\u76f4\u5230\u200b\u7b49\u5f85\u200b\u96c6\u4e2d\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u6216\u200b\u505c\u6b62\u200b\uff08\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u4ec5\u200b\u8fd4\u56de\u200b\u7ec8\u6b62\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b PID\uff09\uff1b</li> <li><code>WCONTINUED</code>\uff1a\u200b\u6682\u505c\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u6267\u884c\u200b\uff0c\u200b\u76f4\u5230\u200b\u7b49\u5f85\u200b\u96c6\u4e2d\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u6216\u200b\u7b49\u5f85\u200b\u96c6\u4e2d\u200b\u505c\u6b62\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u6536\u5230\u200b SIGCONT \u200b\u4fe1\u53f7\u200b\u6062\u590d\u200b\u3002</li> </ul> <p>\u200b\u82e5\u200b\u53c2\u6570\u200b<code>statusp</code>\u200b\u4e0d\u200b\u4e3a\u200b<code>NULL</code>\uff0c\u200b\u90a3\u4e48\u200b<code>waitpid</code>\u200b\u8fd8\u4f1a\u200b\u5c06\u200b\u8fd4\u56de\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\u7f16\u7801\u200b\u5230\u200b<code>status</code>\u200b\u4e2d\u200b\uff08<code>*statusp = status</code>\uff09\u3002<code>wait.h</code>\u200b\u6587\u4ef6\u200b\u5b9a\u4e49\u200b\u4e86\u200b\u51e0\u4e2a\u200b\u7528\u4e8e\u200b\u89e3\u91ca\u200b\u53c2\u6570\u200b<code>status</code>\u200b\u7684\u200b\u5b8f\u200b\uff1a</p> <ul> <li><code>WIFEXITED(status)</code>\uff1a\u200b\u5982\u679c\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u6b63\u5e38\u200b\u7ec8\u6b62\u200b\uff08\u200b\u6bd4\u5982\u200b\u8c03\u7528\u200b<code>exit</code>\u200b\u6216\u200b\u8fd4\u56de\u200b\uff09\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b<code>True</code>\uff1b</li> <li><code>WEXITSTATUS(status)</code>\uff1a\u200b\u5982\u679c\u200b<code>WIFEXITED()</code>\u200b\u8fd4\u56de\u200b<code>True</code>\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b\u7ec8\u6b62\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\uff1b</li> <li><code>WIFSIGNALED(status)</code>\uff1a\u200b\u5982\u679c\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7531\u4e8e\u200b\u672a\u200b\u6355\u83b7\u200b\u7684\u200b\u4fe1\u53f7\u200b\u800c\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b<code>True</code>\uff1b</li> <li><code>WTERMSIG(status)</code>\uff1a\u200b\u5982\u679c\u200b<code>WIFSIGNALED()</code>\u200b\u8fd4\u56de\u200b<code>True</code>\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b\u5bfc\u81f4\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7f16\u53f7\u200b\uff1b</li> <li><code>WIFSTOPPED(status)</code>\uff1a\u200b\u5982\u679c\u200b\u8fd4\u56de\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5f53\u524d\u200b\u5df2\u200b\u505c\u6b62\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b<code>True</code>\uff1b</li> <li><code>WSTOPSIG(status)</code>\uff1a\u200b\u5982\u679c\u200b<code>WIFSTOPPED()</code>\u200b\u8fd4\u56de\u200b<code>True</code>\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b\u5bfc\u81f4\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u505c\u6b62\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7f16\u53f7\u200b\uff1b</li> <li><code>WIFCONTINUED(status)</code>\uff1a\u200b\u5982\u679c\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u6536\u5230\u200b SIGCONT \u200b\u4fe1\u53f7\u200b\u540e\u200b\u6062\u590d\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b<code>True</code>\u3002</li> </ul> <p>\u200b\u5982\u679c\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u6ca1\u6709\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c<code>waitpid</code>\u200b\u5c06\u200b\u8fd4\u56de\u200b -1 \u200b\u5e76\u200b\u5c06\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>errno</code>\u200b\u8bbe\u200b\u4e3a\u200b<code>ECHILD</code>\uff1b\u200b\u5982\u679c\u200b<code>waitpid</code>\u200b\u88ab\u200b\u4fe1\u53f7\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b -1 \u200b\u5e76\u200b\u5c06\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>errno</code>\u200b\u8bbe\u200b\u4e3a\u200b<code>EINTR</code>\u3002</p> <p>\u200b\u51fd\u6570\u200b<code>wait</code>\u200b\u662f\u200b<code>waitpid</code>\u200b\u7684\u200b\u7b80\u5316\u200b\u7248\u672c\u200b\uff0c<code>wait(&amp;status)</code>\u200b\u7b49\u6548\u4e8e\u200b<code>waitpid(-1, &amp;status, 0)</code>\u3002</p> <pre><code>#include \"csapp.h\"\n#define N 2\n\nint main()\n{\n    int status, i;\n    pid_t pid;\n\n    /* Parent creates N children */\n    for (i = 0; i &lt; N; i++)\n        if ((pid = Fork()) == 0) /* child */\n            exit(100 + i);\n\n    /* Parent reaps N children in no particular order */\n    while ((pid = waitpid(-1, &amp;status, 0)) &gt; 0)\n    {\n        if (WIFEXITED(status))\n            printf(\"child %d terminated normally with exit status=%d\\n\", pid, WEXITSTATUS(status));\n        else\n            printf(\"child %d terminated abnormally\\n\", pid);\n    }\n\n    /* The only normal termination is if there are no more children */\n    if (errno != ECHILD)\n        unix_error(\"waitpid error\");\n\n    exit(0);\n}\n</code></pre> <p>\u200b\u5982\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u6240\u793a\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u9996\u5148\u200b\u8c03\u7528\u200b<code>Fork</code>\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e24\u4e2a\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u552f\u4e00\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff08<code>exit(100+i)</code>\uff09\u3002 \u200b\u968f\u540e\u200b\u5728\u200b While \u200b\u5faa\u73af\u200b\u7684\u200b\u6d4b\u8bd5\u200b\u6761\u4ef6\u200b\u4e2d\u200b\u901a\u8fc7\u200b<code>waitpid</code>\u200b\u7b49\u5f85\u200b\u5176\u200b\u6240\u6709\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\uff0c\u200b\u5e76\u6253\u5370\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u9000\u51fa\u200b\u72b6\u6001\u200b\u3002\u200b\u6700\u7ec8\u200b\u6240\u6709\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5747\u200b\u88ab\u200b\u56de\u6536\u200b\uff0c<code>waitpid</code>\u200b\u8fd4\u56de\u200b -1 \u200b\u4e14\u200b\u5c06\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>errno</code>\u200b\u8bbe\u200b\u4e3a\u200b<code>ECHILD</code>\uff0c\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u5b8c\u6bd5\u200b\u3002</p> <p>\u200b\u5728\u200b Linux \u200b\u7cfb\u7edf\u200b\u4e0a\u200b\u8fd0\u884c\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u4ea7\u751f\u200b\u4ee5\u4e0b\u200b\u8f93\u51fa\u200b\uff1a</p> <pre><code>linux&gt; ./waitpid1\nchild 22966 terminated normally with exit status=100 \nchild 22967 terminated normally with exit status=101\n</code></pre> <p>\u200b\u503c\u5f97\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u987a\u5e8f\u200b\u662f\u200b\u968f\u673a\u200b\u7684\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u4e0a\u8ff0\u200b\u7a0b\u5e8f\u200b\u8fdb\u884c\u200b\u4e00\u5b9a\u200b \u200b\u4fee\u6539\u200b\uff0c\u200b\u4ece\u800c\u200b\u4f7f\u200b\u5176\u200b\u6309\u5b50\u200b\u8fdb\u7a0b\u200b\u7684\u200b PID \u200b\u987a\u5e8f\u200b\u8f93\u51fa\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_21","title":"\u8ba9\u200b\u8fdb\u7a0b\u200b\u4f11\u7720","text":"<p>\u200b\u51fd\u6570\u200b<code>sleep</code>\u200b\u53ef\u4ee5\u200b\u8ba9\u200b\u8fdb\u7a0b\u200b\u6682\u505c\u200b\u6267\u884c\u200b\u4e00\u6bb5\u65f6\u95f4\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nunsigned int sleep(unsigned int secs);\n// Returns: seconds left to sleep\n</code></pre> <p>\u200b\u5982\u679c\u200b\u8bf7\u6c42\u200b\u7684\u200b\u6682\u505c\u200b\u65f6\u95f4\u200b\u5df2\u7ecf\u200b\u8fc7\u53bb\u200b\uff0c\u200b\u5219\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b 0\uff1b\u200b\u5982\u679c\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u88ab\u200b\u4fe1\u53f7\u200b\u4e2d\u65ad\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b\u5269\u4f59\u200b\u7684\u200b\u6682\u505c\u200b\u65f6\u95f4\u200b\u3002</p> <p>\u200b\u51fd\u6570\u200b<code>pause</code>\u200b\u4f1a\u200b\u4f7f\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u8fdb\u5165\u200b\u4f11\u7720\u72b6\u6001\u200b\uff0c\u200b\u76f4\u81f3\u200b\u6536\u5230\u200b\u4fe1\u53f7\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u59cb\u7ec8\u200b\u8fd4\u56de\u200b -1:</p> <pre><code>#include &lt;unistd.h&gt;\nint pause(void);\n</code></pre>"},{"location":"core/csapp/ch8/#_22","title":"\u52a0\u8f7d\u200b\u5e76\u200b\u8fd0\u884c\u200b\u7a0b\u5e8f","text":"<p>\u200b\u51fd\u6570\u200b<code>execve</code>\u200b\u5728\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u8fd0\u884c\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7a0b\u5e8f\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nint execve(const char *filename, const char *argv[], const char *envp[]);\n</code></pre> <p>\u200b\u53c2\u6570\u200b<code>filename</code>\u200b\u662f\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u8fd0\u884c\u200b\u7684\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u540d\u79f0\u200b\uff0c<code>argv</code>\u200b\u548c\u200b<code>envp</code>\u200b\u5219\u200b\u5206\u522b\u200b\u662f\u200b\u53c2\u6570\u200b\u548c\u200b\u73af\u5883\u53d8\u91cf\u200b\u5217\u8868\u200b\u3002\u200b\u51fd\u6570\u200b<code>execve</code>\u200b\u901a\u5e38\u200b\u6ca1\u6709\u200b\u8fd4\u56de\u503c\u200b\uff0c\u200b\u4ec5\u200b\u5728\u200b\u51fa\u73b0\u200b\u9519\u8bef\u200b\u65f6\u200b\u8fd4\u56de\u200b -1\u3002</p> <p>\u200b\u53d8\u91cf\u200b<code>argv</code>\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u4ee5\u200b<code>NULL</code>\u200b\u4e3a\u200b\u7ed3\u5c3e\u200b\u7684\u200b\u6307\u9488\u200b\u6570\u7ec4\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5143\u7d20\u200b\u90fd\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u53c2\u6570\u200b\u5b57\u7b26\u4e32\u200b\u3002\u200b\u4e00\u822c\u6765\u8bf4\u200b\uff0c<code>argv[0]</code>\u200b\u662f\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u540d\u79f0\u200b\uff1b\u200b\u53d8\u91cf\u200b<code>envp</code>\u200b\u4e5f\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u4ee5\u200b<code>NULL</code>\u200b\u7ed3\u5c3e\u200b\u7684\u200b\u6307\u9488\u200b\u6570\u7ec4\u200b\uff0c\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5143\u7d20\u200b\u5747\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u73af\u5883\u53d8\u91cf\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u5b57\u7b26\u4e32\u200b\u90fd\u200b\u662f\u200b\u4e00\u4e2a\u200b<code>name=value</code>\u200b\u5f62\u5f0f\u200b\u7684\u200b\u952e\u503c\u200b\u5bf9\u200b\u3002\u200b\u4e24\u8005\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u5982\u4e0b\u200b\uff1a</p> <p> <code>execve</code>\u200b\u52a0\u8f7d\u200b\u6587\u4ef6\u540d\u200b\u540e\u200b\uff0c\u200b\u4f1a\u200b\u8c03\u7528\u200b\u542f\u52a8\u200b\u4ee3\u7801\u200b\u3002 \u200b\u542f\u52a8\u200b\u4ee3\u7801\u200b\u8bbe\u7f6e\u200b\u6808\u200b\u5e76\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u4f20\u9012\u200b\u7ed9\u200b\u65b0\u200b\u7a0b\u5e8f\u200b\u7684\u200b<code>main</code>\u200b\u51fd\u6570\u200b\uff0c\u200b\u5176\u200b\u539f\u578b\u200b\u4e3a\u200b\uff1a</p> <pre><code>int main(int argc, char *argv[], char *envp[]);\n</code></pre> <p><code>main</code>\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u65f6\u200b\u7684\u200b\u7528\u6237\u200b\u6808\u200b\u7ed3\u6784\u200b\u5982\u4e0b\u200b\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4ece\u200b\u6808\u5e95\u200b\u5230\u200b\u6808\u9876\u200b\u5206\u522b\u200b\u662f\u200b\uff1a\u200b\u73af\u5883\u53d8\u91cf\u200b\u5b57\u7b26\u4e32\u200b\u3001\u200b\u53c2\u6570\u200b\u5b57\u7b26\u4e32\u200b\u3001\u200b\u6307\u5411\u200b\u73af\u5883\u53d8\u91cf\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u6307\u9488\u200b\u6570\u7ec4\u200b\u548c\u200b\u6307\u5411\u200b\u53c2\u6570\u200b\u5b57\u7b26\u4e32\u200b\u7684\u200b\u6307\u9488\u200b\u6570\u7ec4\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u7684\u200b\u4e09\u4e2a\u200b\u53c2\u6570\u200b\u5206\u522b\u200b\u4fdd\u5b58\u200b\u5728\u200b\u4e0d\u540c\u200b\u7684\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\uff1a\u200b\u53c2\u6570\u200b<code>argc</code>\u200b\u7ed9\u51fa\u200b\u6570\u7ec4\u200b<code>argv[]</code>\u200b\u4e2d\u200b\u7684\u200b\u975e\u7a7a\u200b\u6307\u9488\u200b\u6570\u91cf\u200b\uff1b\u200b\u53c2\u6570\u200b<code>argv</code>\u200b\u6307\u5411\u200b\u6570\u7ec4\u200b<code>argv[]</code>\u200b\u4e2d\u200b\u7b2c\u4e00\u4e2a\u200b\u5143\u7d20\u200b\uff1b\u200b\u53c2\u6570\u200b<code>envp</code>\u200b\u5219\u200b\u6307\u5411\u200b\u6570\u7ec4\u200b<code>envp[]</code>\u200b\u4e2d\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u5143\u7d20\u200b\uff1a</p> <p> Linux \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u51e0\u4e2a\u200b\u7528\u4e8e\u200b\u64cd\u4f5c\u200b\u73af\u5883\u53d8\u91cf\u200b\u6570\u7ec4\u200b\u7684\u200b\u51fd\u6570\u200b\uff1a</p> <pre><code>#include &lt;stdlib.h&gt;\nchar *getenv(const char *name);\nint setenv(const char *name, const char *newvalue, int overwrite);\nvoid unsetenv(const char *name);\n</code></pre> <p>\u200b\u5982\u679c\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u5305\u542b\u200b\u4ee5\u200b\u53c2\u6570\u200b<code>name</code>\u200b\u4e3a\u952e\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5219\u200b\u51fd\u6570\u200b<code>getenv</code>\u200b\u8fd4\u56de\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u51fd\u6570\u200b<code>unsetenv</code>\u200b\u5220\u9664\u200b\u8be5\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u51fd\u6570\u200b<code>setenv</code>\u200b\u5c06\u503c\u200b\u66ff\u6362\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>newvalue</code>\uff08<code>overwrite</code>\u200b\u975e\u200b\u96f6\u65f6\u200b\uff09\uff1b\u200b\u5982\u679c\u200b\u4e0d\u200b\u5b58\u5728\u200b\u4ee5\u200b<code>name</code>\u200b\u4e3a\u952e\u200b\u7684\u200b\u5b57\u7b26\u4e32\u200b\uff0c\u200b\u5219\u200b\u51fd\u6570\u200b<code>setenv</code>\u200b\u4f1a\u200b\u5c06\u200b<code>name=newvalue</code>\u200b\u6dfb\u52a0\u200b\u5230\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u3002</p>"},{"location":"core/csapp/ch8/#fork-execve","title":"\u4f7f\u7528\u200b fork \u200b\u548c\u200b execve \u200b\u8fd0\u884c\u200b\u7a0b\u5e8f","text":"<p>Unix shell \u200b\u548c\u200b Web \u200b\u670d\u52a1\u5668\u200b\u7b49\u200b\u7a0b\u5e8f\u200b\u5927\u91cf\u200b\u4f7f\u7528\u200b\u4e86\u200b<code>fork</code>\u200b\u548c\u200b<code>execve</code>\u200b\u51fd\u6570\u200b\u3002\u200b\u672c\u4e66\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b shell \u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5176\u200b\u7f3a\u9677\u200b\u5728\u4e8e\u200b\u6ca1\u6709\u200b\u56de\u6536\u200b\u4efb\u4f55\u200b\u540e\u53f0\u200b\u8fd0\u884c\u200b\u7684\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u4f7f\u7528\u200b\u4e0b\u200b\u4e00\u8282\u200b\u4ecb\u7ecd\u200b\u7684\u200b\u4fe1\u53f7\u200b\u6765\u200b\u89e3\u51b3\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_23","title":"\u4fe1\u53f7","text":"<p>\u200b\u4fe1\u53f7\u200b\uff08Signal\uff09\u200b\u662f\u200b\u4e00\u79cd\u200b\u9ad8\u7ea7\u200b\u7684\u200b\u5f02\u5e38\u200b\u63a7\u5236\u6d41\u200b\uff0c\u200b\u5b83\u200b\u5141\u8bb8\u200b\u8fdb\u7a0b\u200b\u548c\u200b\u5185\u6838\u200b\u5c06\u200b\u67d0\u4e9b\u200b\u7c7b\u578b\u200b\u7684\u200b\u7cfb\u7edf\u200b\u4e8b\u4ef6\u200b\u901a\u77e5\u200b\u7ed9\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u3002Linux \u200b\u652f\u6301\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7c7b\u578b\u200b\u591a\u8fbe\u200b\u4e09\u5341\u79cd\u200b\uff1a</p> <p> \u200b\u4f4e\u7ea7\u200b\u522b\u7684\u200b\u786c\u4ef6\u200b\u5f02\u5e38\u200b\u7531\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5904\u7406\u200b\uff0c\u200b\u901a\u5e38\u200b\u4e0d\u4f1a\u200b\u5bf9\u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b\u53ef\u89c1\u200b\uff0c\u200b\u800c\u200b\u4fe1\u53f7\u200b\u5219\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u6b64\u7c7b\u200b\u5f02\u5e38\u200b\u66b4\u9732\u200b\u7ed9\u200b\u7528\u6237\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u8bd5\u56fe\u200b\u9664\u4ee5\u200b 0\uff0c\u200b\u5185\u6838\u200b\u5c31\u200b\u4f1a\u200b\u5411\u200b\u5b83\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200b SIGFPE\uff08\u200b\u7f16\u53f7\u200b 8\uff09\u200b\u4fe1\u53f7\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_24","title":"\u4fe1\u53f7\u200b\u672f\u8bed","text":"<p>\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\u5230\u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200b\u9700\u8981\u200b\u5b8c\u6210\u200b\u4e24\u4e2a\u200b\u6b65\u9aa4\u200b\uff1a</p> <ol> <li>\u200b\u53d1\u9001\u200b\uff08\u200b\u4f20\u9012\u200b\uff09\u200b\u4fe1\u53f7\u200b\uff1a\u200b\u5185\u6838\u200b\u901a\u8fc7\u200b\u66f4\u65b0\u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e9b\u200b\u72b6\u6001\u200b\u6765\u200b\u5411\u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\u3002\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\u7684\u200b\u539f\u56e0\u200b\u6709\u200b\u4e24\u79cd\u200b\uff1a\u2460 \u200b\u5185\u6838\u200b\u68c0\u6d4b\u200b\u5230\u200b\u7cfb\u7edf\u200b\u4e8b\u4ef6\u200b\u7684\u200b\u53d1\u751f\u200b\uff0c\u200b\u5982\u200b\u88ab\u200b 0 \u200b\u9664\u200b\u9519\u8bef\u200b\u6216\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u7b49\u200b\uff1b\u2461 \u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b\u4e86\u200b<code>kill</code>\u200b\u51fd\u6570\u200b\uff08\u200b\u5c06\u200b\u5728\u200b\u4e0b\u200b\u4e00\u8282\u200b\u4ecb\u7ecd\u200b\uff09\u3002\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u5411\u200b\u81ea\u5df1\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\uff1b</li> <li>\u200b\u63a5\u6536\u200b\u4fe1\u53f7\u200b\uff1a\u200b\u5f53\u200b\u5185\u6838\u200b\u5f3a\u5236\u200b\u76ee\u6807\u200b\u8fdb\u7a0b\u200b\u4ee5\u200b\u67d0\u79cd\u200b\u65b9\u5f0f\u200b\u5bf9\u200b\u4fe1\u53f7\u200b\u505a\u51fa\u200b\u54cd\u5e94\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u4fbf\u200b\u63a5\u6536\u200b\u5230\u200b\u4e86\u200b\u4fe1\u53f7\u200b\u3002\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u6267\u884c\u200b\u7528\u6237\u200b\u7ea7\u522b\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\uff08Signal Handler\uff09\u200b\u6765\u200b\u5ffd\u7565\u200b\u3001\u200b\u7ec8\u6b62\u200b\u6216\u200b\u6355\u83b7\u200b\u4fe1\u53f7\u200b\u3002</li> </ol> <p> \u200b\u5df2\u200b\u53d1\u9001\u200b\u4f46\u200b\u8fd8\u200b\u672a\u200b\u63a5\u6536\u200b\u7684\u200b\u4fe1\u53f7\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5f85\u5904\u7406\u200b\u4fe1\u53f7\u200b\uff08Pending Signal\uff09\u3002\u200b\u5728\u200b\u4efb\u610f\u200b\u65f6\u95f4\u200b\u70b9\u200b\uff0c\u200b\u76f8\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u5f85\u5904\u7406\u200b\u4fe1\u53f7\u200b\u6700\u200b\u591a\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u3002\u200b\u8fd9\u200b\u610f\u5473\u7740\u200b\u5982\u679c\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u5df2\u7ecf\u200b\u6709\u200b\u4e00\u4e2a\u200b\u7c7b\u578b\u200b\u4e3a\u200b k \u200b\u7684\u200b\u5f85\u5904\u7406\u200b\u4fe1\u53f7\u200b\uff0c\u200b\u90a3\u4e48\u200b\u540e\u7eed\u200b\u6240\u6709\u200b\u53d1\u9001\u7ed9\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u7684\u200b k \u200b\u7c7b\u578b\u200b\u4fe1\u53f7\u200b\u90fd\u200b\u5c06\u200b\u88ab\u200b\u4e22\u5f03\u200b\u3002\u200b\u8fdb\u7a0b\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u9009\u62e9\u6027\u200b\u5730\u200b\u963b\u585e\u200b\uff08Block\uff09\u200b\u67d0\u4e9b\u200b\u4fe1\u53f7\u200b\u7684\u200b\u63a5\u6536\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_25","title":"\u53d1\u9001\u200b\u4fe1\u53f7","text":""},{"location":"core/csapp/ch8/#_26","title":"\u8fdb\u7a0b\u200b\u7ec4","text":"<p>\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u5c5e\u4e8e\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b\uff08Process Group\uff09\uff0c\u200b\u5b83\u200b\u7531\u200b\u4e00\u4e2a\u200b\u6b63\u6574\u6570\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b ID \u200b\u6240\u200b\u6807\u8bc6\u200b\u3002<code>getpgrp</code>\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b ID\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\npid_t getpgrp(void);\n</code></pre> <p>\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4e0e\u200b\u5176\u7236\u200b\u8fdb\u7a0b\u200b\u5c5e\u4e8e\u200b\u540c\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b\u3002\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b<code>setpgid</code>\u200b\u51fd\u6570\u200b\u6539\u53d8\u200b\u81ea\u5df1\u200b\u6216\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nint setpgid(pid_t pid, pid_t pgid);\n</code></pre> <p>\u200b\u8be5\u200b\u51fd\u6570\u200b\u4f1a\u200b\u628a\u200b\u8fdb\u7a0b\u200b<code>pid</code>\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec4\u66f4\u200b\u6539\u4e3a\u200b<code>pgid</code>\u3002\u200b\u82e5\u200b\u5c06\u200b\u53c2\u6570\u200b<code>pid</code>\u200b\u6216\u200b<code>pgid</code>\u200b\u8bbe\u200b\u4e3a\u200b 0\uff0c\u200b\u5219\u200b\u76f8\u5f53\u4e8e\u200b\u4f7f\u7528\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u7684\u200b PID \u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u200b\u3002\u200b\u4e3e\u4f8b\u6765\u8bf4\u200b\uff0c\u200b\u5982\u679c\u200b\u8fdb\u7a0b\u200b 15213 \u200b\u8c03\u7528\u51fd\u6570\u200b<code>setpgid(0, 0)</code>\uff0c\u200b\u90a3\u4e48\u200b\u5c06\u4f1a\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b ID \u200b\u4e3a\u200b 15213 \u200b\u7684\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b\uff0c\u200b\u5e76\u200b\u4f7f\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u52a0\u5165\u200b\u6b64\u7ec4\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_27","title":"\u4ece\u200b\u952e\u76d8\u200b\u53d1\u9001\u200b\u4fe1\u53f7","text":"<p>Unix Shell \u200b\u4f7f\u7528\u200b\u4efb\u52a1\u200b\uff08Job\uff09\u200b\u8868\u793a\u200b\u5355\u4e2a\u200b\u547d\u4ee4\u884c\u200b\uff08\u200b\u5982\u200b<code>ls | sort</code>\uff09\u200b\u521b\u5efa\u200b\u7684\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u540c\u4e00\u65f6\u95f4\u200b\u5185\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u524d\u53f0\u200b\u4efb\u52a1\u200b\u548c\u200b\u591a\u4e2a\u200b\u540e\u53f0\u4efb\u52a1\u200b\u3002</p> <p> \u200b\u5728\u200b\u952e\u76d8\u200b\u4e0a\u200b\u8f93\u5165\u200b Ctrl+C \u200b\u4f1a\u200b\u4f7f\u200b\u5185\u6838\u200b\u5411\u524d\u200b\u53f0\u200b\u8fdb\u7a0b\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u200b SIGINT \u200b\u4fe1\u53f7\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u7ec8\u6b62\u200b\u524d\u53f0\u200b\u4efb\u52a1\u200b\u3002\u200b\u540c\u6837\u200b\uff0c\u200b\u8f93\u5165\u200b Ctrl+Z \u200b\u4f1a\u200b\u4f7f\u200b\u5185\u6838\u200b\u5411\u524d\u200b\u53f0\u200b\u8fdb\u7a0b\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u200b SIGTSTP \u200b\u4fe1\u53f7\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u505c\u6b62\u200b\uff08\u200b\u6302\u200b\u8d77\u200b\uff09\u200b\u524d\u53f0\u200b\u4efb\u52a1\u200b\u3002</p>"},{"location":"core/csapp/ch8/#kill","title":"\u4f7f\u7528\u200b kill \u200b\u51fd\u6570\u200b\u53d1\u9001\u200b\u4fe1\u53f7","text":"<p>\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>kill</code>\u200b\u51fd\u6570\u200b\u5411\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\uff08\u200b\u5305\u62ec\u200b\u5176\u200b\u81ea\u8eab\u200b\uff09\u200b\u53d1\u9001\u200b\u4fe1\u53f7\u200b\uff1a</p> <pre><code>#include &lt;sys/types.h&gt;\n#include &lt;signal.h&gt;\nint kill(pid_t pid, int sig);\n// Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u82e5\u200b\u53c2\u6570\u200b<code>pid</code>\u200b\u5927\u4e8e\u200b 0\uff0c\u200b\u5219\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u7f16\u53f7\u200b\u4e3a\u200b<code>sig</code>\u200b\u7684\u200b\u4fe1\u53f7\u200b\u53d1\u9001\u7ed9\u200b\u8fdb\u7a0b\u200b<code>pid</code>\uff1b\u200b\u82e5\u200b\u53c2\u6570\u200b<code>pid</code>\u200b\u7b49\u4e8e\u200b 0\uff0c\u200b\u5219\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u4fe1\u53f7\u200b\u53d1\u9001\u7ed9\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u6240\u5728\u200b\u8fdb\u7a0b\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\uff1b\u200b\u5982\u679c\u200b\u53c2\u6570\u200b<code>pid</code>\u200b\u5c0f\u4e8e\u200b 0\uff0c\u200b\u5219\u200b\u8be5\u200b\u51fd\u6570\u200b\u5c06\u200b\u4fe1\u53f7\u200b\u53d1\u9001\u7ed9\u200b\u8fdb\u7a0b\u200b\u7ec4\u200b ID \u200b\u4e3a\u200b<code>|pid|</code>\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u7ec4\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u3002</p>"},{"location":"core/csapp/ch8/#alarm","title":"\u4f7f\u7528\u200b alarm \u200b\u51fd\u6570\u200b\u53d1\u9001\u200b\u4fe1\u53f7","text":"<p>\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>alarm</code>\u200b\u51fd\u6570\u200b\u5411\u200b\u81ea\u5df1\u200b\u53d1\u9001\u200b SIGALRM \u200b\u4fe1\u53f7\u200b\uff1a</p> <pre><code>#include &lt;unistd.h&gt;\nunsigned int alarm(unsigned int secs);\n// Returns: remaining seconds of previous alarm, or 0 if no previous alarm\n</code></pre> <p>\u200b\u5185\u6838\u200b\u5c06\u200b\u5728\u200b<code>secs</code>\u200b\u79d2\u200b\u540e\u200b\u5411\u200b\u8c03\u7528\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u200b SIGALRM \u200b\u4fe1\u53f7\u200b\uff0c\u200b\u53d6\u6d88\u200b\u6240\u6709\u200b\u4e4b\u524d\u200b\u8bbe\u7f6e\u200b\u7684\u200b<code>alarm</code>\uff0c\u200b\u5e76\u200b\u8fd4\u56de\u200b\u5176\u200b\u5269\u4f59\u200b\u7684\u200b\u79d2\u6570\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_28","title":"\u63a5\u6536\u200b\u4fe1\u53f7","text":"<p>\u200b\u5f53\u200b\u5185\u6838\u200b\u5c06\u200b\u8fdb\u7a0b\u200b p \u200b\u4ece\u200b\u5185\u6838\u200b\u6001\u200b\u5207\u6362\u200b\u5230\u200b\u7528\u6237\u200b\u6001\u65f6\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u68c0\u67e5\u200b p \u200b\u672a\u200b\u963b\u585e\u200b\u4e14\u200b\u672a\u200b\u5904\u7406\u200b\uff08Pending &amp; ~Blocked\uff09\u200b\u7684\u200b\u4fe1\u53f7\u200b\u96c6\u200b\u3002\u200b\u901a\u5e38\u200b\u8be5\u200b\u96c6\u5408\u200b\u4e3a\u7a7a\u200b\uff0c\u200b\u5185\u6838\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u7ed9\u200b p \u200b\u7684\u200b\u903b\u8f91\u200b\u63a7\u5236\u6d41\u200b\u4e2d\u200b\u7684\u200b\u4e0b\u200b\u4e00\u6761\u200b\u6307\u4ee4\u200b\u3002\u200b\u4f46\u200b\u5982\u679c\u200b\u8be5\u200b\u96c6\u5408\u200b\u975e\u7a7a\u200b\uff0c\u200b\u5185\u6838\u200b\u5c31\u200b\u4f1a\u200b\u9009\u62e9\u200b\u4fe1\u53f7\u200b\u96c6\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u4fe1\u53f7\u200b k \u200b\u5e76\u200b\u5f3a\u5236\u200b p \u200b\u63a5\u6536\u200b\u5b83\u200b\u3002\u200b\u4fe1\u53f7\u200b\u5c06\u200b\u89e6\u53d1\u200b\u8fdb\u7a0b\u200b\u5b8c\u6210\u200b\u4e00\u4e9b\u200b\u52a8\u4f5c\u200b\uff08Action\uff09\uff0c\u200b\u9884\u5b9a\u200b\u4e49\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u52a8\u4f5c\u200b\u6709\u200b\uff1a</p> <ul> <li>\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\uff1b</li> <li>\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u5e76\u200b\u8f6c\u50a8\u200b\u6838\u5fc3\u200b\uff08Dump Core\uff0c\u200b\u5373\u5c06\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u5185\u5b58\u200b\u6bb5\u200b\u7684\u200b\u955c\u50cf\u200b\u5199\u5165\u200b\u78c1\u76d8\u200b\uff09\uff1b</li> <li>\u200b\u8fdb\u7a0b\u200b\u505c\u6b62\u200b\uff08\u200b\u6682\u505c\u200b\uff09\uff0c\u200b\u76f4\u5230\u200b\u63a5\u6536\u200b SIGCONT \u200b\u4fe1\u53f7\u200b\u91cd\u65b0\u542f\u52a8\u200b\uff1b</li> <li>\u200b\u8fdb\u7a0b\u200b\u5ffd\u7565\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u3002</li> </ul> <p>\u200b\u6bcf\u79cd\u200b\u4fe1\u53f7\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u52a8\u4f5c\u200b\u89c1\u200b\uff08\u200b\u4e0a\u200b\u56fe\u200b 8.26\uff09\u3002\u200b\u9664\u200b SIGSTOP \u200b\u548c\u200b SIGKILL \u200b\u4fe1\u53f7\u200b\u5916\u200b\uff0c\u200b\u8fdb\u7a0b\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u51fd\u6570\u200b<code>signal</code>\u200b\u4fee\u6539\u200b\u4fe1\u53f7\u200b\u7684\u200b\u9ed8\u8ba4\u200b\u52a8\u4f5c\u200b\uff1a</p> <pre><code>#include &lt;signal.h&gt;\ntypedef void (*sighandler_t)(int);\nsighandler_t signal(int signum, sighandler_t handler);\n// Returns: pointer to previous handler if OK, SIG_ERR on error (does not set errno)\n</code></pre> <p>\u200b\u82e5\u200b\u53c2\u6570\u200b<code>handler</code>\u200b\u4e3a\u200b<code>SIG_IGN</code>\uff0c\u200b\u5219\u200b<code>signum</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u4fe1\u53f7\u200b\u5c06\u4f1a\u200b\u88ab\u200b\u5ffd\u7565\u200b\uff1b\u200b\u82e5\u200b\u53c2\u6570\u200b<code>handler</code>\u200b\u4e3a\u200b<code>SIG_DFL</code>\uff0c\u200b\u5219\u200b<code>signum</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7684\u200b\u52a8\u4f5c\u200b\u5c06\u200b\u6062\u590d\u200b\u4e3a\u200b\u9ed8\u8ba4\u200b\uff1b\u200b\u82e5\u200b\u53c2\u6570\u200b<code>handler</code>\u200b\u4e3a\u200b\u7528\u6237\u200b\u5b9a\u4e49\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u5730\u5740\u200b\uff0c\u200b\u5219\u200b\u8fdb\u7a0b\u200b\u63a5\u6536\u200b\u5230\u200b<code>signum</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u4fe1\u53f7\u200b\u540e\u200b\u4f1a\u200b\u8c03\u7528\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5b89\u88c5\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff08Installing Handler\uff09\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u8c03\u7528\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u6355\u83b7\u200b\u4fe1\u53f7\u200b\uff08Catching Signal\uff09\uff0c\u200b\u6267\u884c\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5904\u7406\u200b\u4fe1\u53f7\u200b\uff08Handling Signal\uff09\u3002</p> <p>\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u5728\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u65f6\u200b\u6309\u200b\u4e0b\u200b Ctrl+C\uff0c\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u5c31\u200b\u4e0d\u4f1a\u200b\u76f4\u63a5\u200b\u7ec8\u6b62\u200b\u800c\u662f\u200b\u8f93\u51fa\u200b\u4e00\u6bb5\u200b\u4fe1\u606f\u200b\u540e\u200b\u624d\u200b\u7ec8\u6b62\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nvoid handler(int sig) /* SIGINT handler */\n{\n    printf(\"Caught SIGINT\\n\");\n    exit(0);\n}\n\nint main()\n{\n    /* Install the SIGINT handler */\n    if (signal(SIGINT, handler) == SIG_ERR)\n        unix_error(\"signal error\");\n\n    Pause(); /* Wait for the receipt of a signal */\n    exit(0);\n}\n</code></pre> <p>\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5176\u4ed6\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4e2d\u65ad\u200b\uff08\u200b\u4fe1\u53f7\u200b \\(s \\ne t\\)\uff09\uff1a</p> <p></p>"},{"location":"core/csapp/ch8/#_29","title":"\u963b\u585e\u200b\u4fe1\u53f7","text":"<p>Linux \u200b\u4e3a\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u663e\u5f0f\u200b\u548c\u200b\u9690\u5f0f\u200b\u7684\u200b\u5b9e\u73b0\u200b\u673a\u5236\u200b\uff1a</p> <ul> <li>\u200b\u9690\u5f0f\u200b\uff1a\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u200b\u963b\u585e\u200b\u4efb\u4f55\u200b\u4e0e\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5f53\u524d\u200b\u6b63\u5728\u200b\u5904\u7406\u200b\u7684\u200b\u4fe1\u53f7\u200b\u7c7b\u578b\u200b\u76f8\u540c\u200b\u7684\u200b\u672a\u200b\u5904\u7406\u200b\u4fe1\u53f7\u200b\u3002\u200b\u6bd4\u5982\u200b\u4e0a\u200b\u56fe\u200b 8.31 \u200b\u4e2d\u200b\uff0c\u200b\u82e5\u200b\u4fe1\u53f7\u200b \\(t\\) \u200b\u7684\u200b\u7c7b\u578b\u200b\u4e0e\u200b \\(s\\) \u200b\u76f8\u540c\u200b\uff0c\u200b\u5219\u200b \\(t\\) \u200b\u5c06\u200b\u5728\u200b\u5904\u7406\u7a0b\u5e8f\u200b \\(S\\) \u200b\u8fd4\u56de\u200b\u524d\u200b\u6301\u7eed\u200b\u6302\u200b\u8d77\u200b\uff1b</li> <li>\u200b\u663e\u5f0f\u200b\uff1a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u8c03\u7528\u200b<code>sigprocmask</code>\u200b\u7b49\u200b\u51fd\u6570\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u6216\u200b\u89e3\u9664\u200b\u4fe1\u53f7\u200b\u7684\u200b\u963b\u585e\u200b\u3002</li> </ul> <pre><code>#include &lt;signal.h&gt;\nint sigprocmask(int how, const sigset_t *set, sigset_t *oldset);\nint sigemptyset(sigset_t *set);\nint sigfillset(sigset_t *set);\nint sigaddset(sigset_t *set, int signum);\nint sigdelset(sigset_t *set, int signum);\n// Returns: 0 if OK, \u22121 on error\n\nint sigismember(const sigset_t *set, int signum);\n// Returns: 1 if member, 0 if not, \u22121 on error\n</code></pre> <p><code>sigprocmask</code>\u200b\u51fd\u6570\u200b\u53ef\u4ee5\u200b\u6539\u53d8\u200b\u5f53\u524d\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u7684\u200b\u96c6\u5408\u200b\uff08\u200b\u8bbe\u200b\u4e3a\u200b<code>blocked</code>\uff09\uff0c\u200b\u5177\u4f53\u200b\u884c\u4e3a\u200b\u53d6\u51b3\u4e8e\u200b\u53c2\u6570\u200b<code>how</code>\u200b\u7684\u200b\u503c\u200b\uff1a</p> <ul> <li><code>SIG_BLOCK</code>\uff1a\u200b\u5c06\u200b\u53c2\u6570\u200b<code>set</code>\u200b\u4e2d\u200b\u7684\u200b\u4fe1\u53f7\u200b\u963b\u585e\u200b\uff08<code>blocked = blocked | set</code>\uff09\uff1b</li> <li><code>SIG_UNBLOCK</code>\uff1a\u200b\u4e3a\u200b<code>set</code>\u200b\u4e2d\u200b\u7684\u200b\u4fe1\u53f7\u200b\u89e3\u9664\u200b\u963b\u585e\u200b\uff08<code>blocked = blocked &amp; ~set</code>\uff09\uff1b</li> <li><code>SIG_SETMASK</code>\uff1a\u200b\u5c06\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u96c6\u5408\u200b\u8bbe\u200b\u4e3a\u200b<code>set</code>\uff08<code>blocked = set</code>\uff09\u3002</li> </ul> <p>\u200b\u5982\u679c\u200b\u53c2\u6570\u200b<code>oldset</code>\u200b\u975e\u7a7a\u200b\uff0c\u200b\u5219\u200b\u5148\u524d\u200b<code>blocked</code>\u200b\u7684\u200b\u503c\u4f1a\u200b\u5b58\u50a8\u200b\u5728\u200b<code>oldset</code>\u200b\u4e2d\u200b\u3002</p> <p>\u200b\u9664\u6b64\u4e4b\u5916\u200b\uff0c\u200b\u51fd\u6570\u200b<code>sigemptyset</code>\u200b\u5c06\u200b<code>set</code>\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b\u7a7a\u96c6\u200b\uff1b<code>sigfillset</code>\u200b\u5c06\u200b\u6240\u6709\u200b\u4fe1\u53f7\u200b\u52a0\u5165\u200b\u5230\u200b<code>set</code>\u200b\u4e2d\u200b\uff1b<code>sigaddset</code>\u200b\u5c06\u200b\u7f16\u53f7\u200b\u4e3a\u200b<code>signum</code>\u200b\u7684\u200b\u4fe1\u53f7\u200b\u52a0\u5165\u200b\u5230\u200b<code>set</code>\u200b\u4e2d\u200b\uff1b<code>sigdelset</code>\u200b\u5c06\u200b\u7f16\u53f7\u200b\u4e3a\u200b<code>signum</code>\u200b\u7684\u200b\u4fe1\u53f7\u200b\u4ece\u200b<code>set</code>\u200b\u4e2d\u200b\u5220\u9664\u200b\uff1b\u200b\u5982\u679c\u200b<code>signum</code>\u200b\u4fe1\u53f7\u200b\u5728\u200b<code>set</code>\u200b\u4e2d\u200b\uff0c\u200b\u5219\u200b\u51fd\u6570\u200b<code>sigismember</code>\u200b\u8fd4\u56de\u200b 1\uff0c\u200b\u5426\u5219\u200b\u8fd4\u56de\u200b 0\u3002</p> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u6682\u65f6\u200b\u963b\u585e\u200b\u4e86\u200b SIGINT \u200b\u4fe1\u53f7\u200b\u7684\u200b\u63a5\u6536\u200b\uff1a</p> <pre><code>sigset_t mask, prev_mask;\nsigemptyset(&amp;mask);\nsigaddset(&amp;mask, SIGINT);\n/* Block SIGINT and save previous blocked set */\nsigprocmask(SIG_BLOCK, &amp;mask, &amp;prev_mask);\n\n// Code region that will not be interrupted by SIGINT\n\n/* Restore previous blocked set, unblocking SIGINT */\nsigprocmask(SIG_SETMASK, &amp;prev_mask, NULL);\n</code></pre>"},{"location":"core/csapp/ch8/#_30","title":"\u7f16\u5199\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f","text":""},{"location":"core/csapp/ch8/#_31","title":"\u5b89\u5168\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406","text":"<p>\u200b\u5982\u679c\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u548c\u200b\u4e3b\u7a0b\u5e8f\u200b\u5e76\u53d1\u200b\u5730\u200b\u8bbf\u95ee\u200b\u540c\u4e00\u4e2a\u200b\u5168\u5c40\u200b\u6570\u636e\u7ed3\u6784\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u53d1\u751f\u200b\u4e0d\u53ef\u200b\u9884\u77e5\u200b\u7684\u200b\u4e25\u91cd\u200b\u95ee\u9898\u200b\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5728\u200b\u7f16\u5199\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u65f6\u200b\u5e94\u5f53\u200b\u9075\u5faa\u200b\u4ee5\u4e0b\u200b\u5b88\u5219\u200b\uff1a</p> <ul> <li>\u200b\u4f7f\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u5c3d\u53ef\u80fd\u200b\u7684\u200b\u7b80\u5355\u200b\uff1b</li> <li>\u200b\u4ec5\u200b\u8c03\u7528\u200b\u5f02\u6b65\u200b\u4fe1\u53f7\u200b\u5b89\u5168\u200b\uff08Async-Signal-Safe\uff09\u200b\u7684\u200b\u51fd\u6570\u200b\u3002\u200b\u8fd9\u79cd\u200b\u51fd\u6570\u200b\u4e00\u822c\u200b\u53ea\u200b\u8bbf\u95ee\u200b\u5c40\u90e8\u53d8\u91cf\u200b\uff0c\u200b\u6216\u8005\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u5176\u4ed6\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u4e2d\u65ad\u200b\u3002\u200b\u503c\u5f97\u6ce8\u610f\u200b\u7684\u200b\u662f\u200b\uff0c\u200b\u8bb8\u591a\u200b\u5e38\u7528\u200b\u7684\u200b\u51fd\u6570\u200b\uff0c\u200b\u5982\u200b<code>printf</code>\u3001<code>sprintf</code>\u3001<code>malloc</code>\u200b\u548c\u200b<code>exit</code>\u200b\u7b49\u200b\u5e76\u975e\u200b\u5f02\u6b65\u200b\u4fe1\u53f7\u200b\u5b89\u5168\u200b\u3002\u200b\u8c03\u7528\u200b<code>write</code>\u200b\u51fd\u6570\u200b\u662f\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u751f\u6210\u200b\u8f93\u51fa\u200b\u7684\u200b\u552f\u4e00\u200b\u5b89\u5168\u200b\u65b9\u6cd5\u200b\uff1b</li> <li>\u200b\u4fdd\u5b58\u200b\u5e76\u200b\u6062\u590d\u200b\u53d8\u91cf\u200b<code>errno</code>\uff1a\u200b\u8bb8\u591a\u200b Linux \u200b\u5f02\u6b65\u200b\u4fe1\u53f7\u200b\u5b89\u5168\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b\u9519\u8bef\u200b\u65f6\u4f1a\u200b\u8bbe\u7f6e\u200b\u53d8\u91cf\u200b<code>errno</code>\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u5e72\u6270\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\u5176\u4ed6\u200b\u4f9d\u8d56\u200b<code>errno</code>\u200b\u7684\u200b\u90e8\u5206\u200b\u3002\u200b\u5f53\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u6709\u200b\u8fd4\u56de\u200b\u65f6\u200b\uff0c\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u5728\u200b\u8c03\u7528\u200b\u524d\u200b\u5c06\u200b<code>errno</code>\u200b\u4fdd\u5b58\u200b\u5230\u200b\u5c40\u90e8\u53d8\u91cf\u200b\u4e2d\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u8fd4\u56de\u200b\u524d\u200b\u6062\u590d\u200b\u5176\u503c\u200b\uff1b</li> <li>\u200b\u8bbf\u95ee\u200b\u5168\u5c40\u200b\u6570\u636e\u7ed3\u6784\u200b\u65f6\u200b\u963b\u585e\u200b\u6240\u6709\u200b\u4fe1\u53f7\u200b\uff1b</li> <li>\u200b\u5047\u8bbe\u200b\u4e3b\u7a0b\u5e8f\u200b\u548c\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u5171\u4eab\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>g</code>\uff0c\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u66f4\u65b0\u200b<code>g</code>\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u4e3b\u7a0b\u5e8f\u200b\u5b9a\u671f\u200b\u8bfb\u53d6\u200b<code>g</code>\u200b\u7684\u200b\u503c\u200b\u3002\u200b\u4f18\u5316\u200b\u7684\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u4ece\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u5df2\u200b\u7f13\u5b58\u200b\u7684\u200b<code>g</code>\uff0c\u200b\u56e0\u6b64\u200b\u4e3b\u200b\u51fd\u6570\u200b\u4e2d\u200b\u7684\u200b<code>g</code>\u200b\u53ef\u80fd\u200b\u6c38\u8fdc\u200b\u4e0d\u53d8\u200b\uff0c\u200b\u5e76\u4e14\u200b\u6bcf\u6b21\u200b\u5bf9\u200b<code>g</code>\u200b\u7684\u200b\u5f15\u7528\u200b\u4e5f\u200b\u90fd\u200b\u662f\u200b\u5b89\u5168\u200b\u7684\u200b\u3002\u200b\u82e5\u200b\u4f7f\u7528\u200b<code>volatile</code>\u200b\u58f0\u660e\u200b\u5168\u5c40\u53d8\u91cf\u200b\uff0c\u200b\u5982\u200b<code>volatile int g;</code>\uff0c\u200b\u90a3\u4e48\u200b\u5f53\u200b\u4ee3\u7801\u200b\u5f15\u7528\u200b<code>g</code>\u200b\u65f6\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u5c31\u200b\u4f1a\u200b\u4ece\u200b\u5185\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b\u5176\u503c\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u6211\u4eec\u200b\u5e94\u5f53\u200b\u4e34\u65f6\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u4ee5\u200b\u4fdd\u62a4\u200b\u5bf9\u200b<code>g</code>\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff1b</li> <li>\u200b\u5728\u200b\u5e38\u89c1\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u4e2d\u200b\uff0c\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u901a\u8fc7\u200b\u5199\u5165\u200b\u5168\u5c40\u200b\u6807\u8bc6\u200b\uff08Flag\uff09\u200b\u6765\u200b\u8bb0\u5f55\u200b\u4fe1\u53f7\u200b\u7684\u200b\u63a5\u6536\u200b\u3002\u200b\u82e5\u200b\u4f7f\u7528\u200b<code>sig_atomic_t</code>\u200b\u7c7b\u578b\u200b\u58f0\u660e\u200b\u6807\u8bc6\u200b\uff0c\u200b\u5982\u200b<code>volatile sig_atomic_t flag;</code>\uff0c\u200b\u90a3\u4e48\u200b\u4fbf\u200b\u53ef\u4ee5\u200b\u4fdd\u8bc1\u200b<code>flag</code>\u200b\u5199\u5165\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\uff08Atomic/Uninterruptible\uff09\u3002</li> </ul>"},{"location":"core/csapp/ch8/#_32","title":"\u6b63\u786e\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406","text":"<p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5fc5\u987b\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4ee5\u200b\u907f\u514d\u200b\u5728\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u7559\u4e0b\u200b\u50f5\u5c38\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u4f46\u200b\u6211\u4eec\u200b\u4e5f\u200b\u5e0c\u671b\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u53ef\u4ee5\u200b\u5728\u5b50\u200b\u8fdb\u7a0b\u200b\u8fd0\u884c\u200b\u65f6\u200b\u81ea\u7531\u200b\u5730\u200b\u6267\u884c\u200b\u5176\u4ed6\u200b\u4efb\u52a1\u200b\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b SIGCHILD \u200b\u5904\u7406\u7a0b\u5e8f\u200b\u6765\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u663e\u5f0f\u200b\u5730\u200b\u8c03\u7528\u200b<code>waitpid</code>\u200b\u7b49\u5f85\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nvoid handler1(int sig)\n{\n    pid_t pid;\n\n    if ((pid = waitpid(-1, NULL, 0)) &lt; 0)\n        unix_error(\"waitpid error\");\n    printf(\"Handler reaped child %d\\n\", (int)pid);\n    Sleep(2);\n    return;\n}\n\nint main()\n{\n    int i, n;\n    char buf[MAXBUF];\n\n    if (signal(SIGCHLD, handler1) == SIG_ERR)\n        unix_error(\"signal error\");\n\n    /* Parent creates children */\n    for (i = 0; i &lt; 3; i++)\n    {\n        if (Fork() == 0)\n        {\n            fprintf(\"Hello from child %d\\n\", (int)getpid());\n            Sleep(1);\n            exit(0);\n        }\n    }\n\n    /* Parent waits for terminal input and then processes it */\n    if ((n = read(STDIN_FILENO, buf, sizeof(buf))) &lt; 0)\n        unix_error(\"read\");\n\n    printf(\"Parent processing input\\n\");\n    while (1)\n        ;\n\n    exit(0);\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5b89\u88c5\u200b\u4e86\u200b\u5904\u7406\u7a0b\u5e8f\u200b<code>handler1</code>\u200b\u5e76\u200b\u521b\u5efa\u200b\u4e09\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u5b83\u200b\u7b49\u5f85\u200b\u6765\u81ea\u200b\u7ec8\u7aef\u200b\u7684\u200b\u8f93\u5165\u200b\uff0c\u200b\u7136\u540e\u200b\u8fdb\u5165\u200b While \u200b\u5faa\u73af\u200b\u3002\u200b\u6bcf\u5f53\u200b\u4e00\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u5c06\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200b SIGCHLD \u200b\u4fe1\u53f7\u200b\u901a\u77e5\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u3002\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u6355\u83b7\u200b\u4fe1\u53f7\u200b\u540e\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u8f93\u51fa\u200b\u4e00\u6bb5\u200b\u4fe1\u606f\u200b\u7136\u540e\u200b\u8fd4\u56de\u200b\u3002</p> <p>\u200b\u5728\u200b Linux \u200b\u4e0a\u200b\u8fd0\u884c\u200b\u8be5\u200b\u7a0b\u5e8f\u200b\u5f97\u5230\u200b\u7684\u200b\u8f93\u51fa\u200b\u7ed3\u679c\u200b\u4e3a\u200b\uff1a</p> <pre><code>linux&gt; ./signal1\nHello from child 14073 \nHello from child 14074 \nHello from child 14075 \nHandler reaped child \nHandler reaped child\nCR\nParent processing input\n</code></pre> <p>\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u521b\u5efa\u200b\u4e86\u200b\u4e09\u4e2a\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u7136\u800c\u200b\u5374\u200b\u53ea\u200b\u56de\u6536\u200b\u4e86\u200b\u4e24\u4e2a\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\u540c\u4e00\u65f6\u95f4\u200b\u5185\u200b\u76f8\u540c\u200b\u7c7b\u578b\u200b\u7684\u200b\u672a\u200b\u5904\u7406\u200b\u4fe1\u53f7\u200b\u6700\u200b\u591a\u200b\u53ea\u80fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u3002\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u5728\u200b\u5904\u7406\u200b\u7b2c\u4e00\u4e2a\u200b\u4fe1\u53f7\u200b\u65f6\u200b\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200b\u4fe1\u53f7\u200b\u5230\u8fbe\u200b\u5e76\u200b\u88ab\u200b\u6dfb\u52a0\u200b\u5230\u200b\u672a\u200b\u5904\u7406\u200b\u4fe1\u53f7\u200b\u96c6\u4e2d\u200b\u3002\u200b\u7531\u4e8e\u200b\u5df2\u6709\u200b\u4e00\u4e2a\u200b\u672a\u200b\u5904\u7406\u200b\u7684\u200b SIGCHLD \u200b\u4fe1\u53f7\u200b\uff0c\u200b\u6b64\u65f6\u200b\u82e5\u200b\u7b2c\u4e09\u4e2a\u200b\u4fe1\u53f7\u200b\u5230\u8fbe\u200b\u4fbf\u4f1a\u200b\u88ab\u200b\u76f4\u63a5\u200b\u4e22\u5f03\u200b\u3002\u200b\u5f53\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u540e\u200b\uff0c\u200b\u5185\u6838\u200b\u53d1\u73b0\u200b\u7b2c\u4e8c\u4e2a\u200b\u4fe1\u53f7\u200b\u8fd8\u200b\u672a\u200b\u5904\u7406\u200b\uff0c\u200b\u4e8e\u662f\u200b\u5f3a\u5236\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u63a5\u6536\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u5e76\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u3002\u200b\u7b49\u5230\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u518d\u6b21\u200b\u8fd4\u56de\u200b\uff0c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5c31\u200b\u4e0d\u518d\u200b\u6709\u200b\u4efb\u4f55\u200b\u672a\u200b\u5904\u7406\u200b\u7684\u200b SIGCHLD \u200b\u4fe1\u53f7\u200b\u4e86\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u8ba9\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5728\u200b\u88ab\u200b\u8c03\u7528\u200b\u65f6\u200b\u5c3d\u53ef\u80fd\u200b\u591a\u5730\u200b\u56de\u6536\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4ee5\u200b\u89e3\u51b3\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\uff1a</p> <pre><code>void handler2(int sig)\n{\n    pid_t pid;\n\n    while ((pid = waitpid(-1, NULL, WNOHANG)) &gt; 0)\n        printf(\"Handler reaped child %d\\n\", (int)pid);\n    if (errno != ECHILD)\n        unix_error(\"waitpid error\");\n    Sleep(2);\n    return;\n}\n</code></pre>"},{"location":"core/csapp/ch8/#_33","title":"\u53ef\u79fb\u690d\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406","text":"<p>\u200b\u4e0d\u540c\u200b\u7684\u200b\u7cfb\u7edf\u200b\u6709\u7740\u200b\u4e0d\u540c\u200b\u7684\u200b\u4fe1\u53f7\u5904\u7406\u200b\u8bed\u4e49\u200b\uff0c\u200b\u56e0\u6b64\u200b Posix \u200b\u6807\u51c6\u200b\u5b9a\u4e49\u200b\u4e86\u200b<code>sigaction</code>\u200b\u51fd\u6570\u200b\uff0c\u200b\u5b83\u200b\u5141\u8bb8\u200b\u7528\u6237\u200b\u5728\u200b\u5b89\u88c5\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u65f6\u200b\u660e\u786e\u200b\u5730\u200b\u6307\u5b9a\u200b\u4ed6\u4eec\u200b\u60f3\u8981\u200b\u7684\u200b\u8bed\u4e49\u200b\uff1a</p> <pre><code>#include &lt;signal.h&gt;\nint sigaction(int signum,  struct sigaction *act,\n              struct sigaction *oldact);\n// Returns: 0 if OK, \u22121 on error\n</code></pre> <p>\u200b\u7136\u800c\u200b<code>sigaction</code>\u200b\u51fd\u6570\u200b\u5341\u5206\u200b\u7b28\u91cd\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5e38\u200b\u4f7f\u7528\u200b\u5b83\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b<code>Signal</code>\uff1a</p> <pre><code>handler_t *Signal(int signum, handler_t *handler)\n{\n    struct sigaction action, old_action;\n    action.sa_handler = handler;\n    sigemptyset(&amp;action.sa_mask); /* Block sigs of type being handled */\n    action.sa_flags = SA_RESTART; /* Restart syscalls if possible */\n\n    if (sigaction(signum, &amp;action, &amp;old_action) &lt; 0)\n        unix_error(\"Signal error\");\n    return (old_action.sa_handler);\n}\n</code></pre>"},{"location":"core/csapp/ch8/#_34","title":"\u907f\u514d\u200b\u5e76\u53d1\u200b\u9519\u8bef","text":"<p>\u200b\u4e0a\u6587\u200b\u63d0\u5230\u200b\uff0c\u200b\u6211\u4eec\u200b\u6c38\u8fdc\u200b\u65e0\u6cd5\u200b\u9884\u6d4b\u200b\u4e24\u4e2a\u200b\u540c\u6b65\u200b\uff08\u200b\u5e76\u53d1\u200b\uff09\u200b\u8fd0\u884c\u200b\u7684\u200b\u51fd\u6570\u200b\u7684\u200b\u8c03\u7528\u200b\u987a\u5e8f\u200b\u3002\u200b\u5982\u679c\u200b\u8c03\u7528\u200b\u987a\u5e8f\u200b\u4f1a\u200b\u5f71\u54cd\u200b\u7ed3\u679c\u200b\u7684\u200b\u6b63\u786e\u6027\u200b\uff0c\u200b\u90a3\u4e48\u200b\u8fd9\u79cd\u200b\u9519\u8bef\u200b\u5c31\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7ade\u4e89\u200b\uff08Race\uff09\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u963b\u585e\u200b\u76f8\u5173\u200b\u4fe1\u53f7\u200b\u6765\u200b\u907f\u514d\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\u3002</p>"},{"location":"core/csapp/ch8/#_35","title":"\u663e\u5f0f\u200b\u7b49\u5f85\u200b\u4fe1\u53f7","text":"<p>\u200b\u6709\u65f6\u5019\u200b\u4e3b\u7a0b\u5e8f\u200b\u9700\u8981\u200b\u663e\u5f0f\u200b\u7b49\u5f85\u200b\u67d0\u4e2a\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u8fd0\u884c\u200b\u5b8c\u6bd5\u200b\u3002\u200b\u4f8b\u5982\u200b Linux Shell \u200b\u521b\u5efa\u200b\u524d\u53f0\u200b\u4efb\u52a1\u200b\u540e\u200b\uff0c\u200b\u5fc5\u987b\u200b\u7b49\u5f85\u200b\u4efb\u52a1\u200b\u7ec8\u6b62\u200b\u5e76\u200b\u88ab\u200b SIGCHLD \u200b\u5904\u7406\u7a0b\u5e8f\u200b\u56de\u6536\u200b\uff0c\u200b\u7136\u540e\u200b\u624d\u80fd\u200b\u63a5\u6536\u200b\u4e0b\u200b\u4e00\u6761\u200b\u7528\u6237\u200b\u547d\u4ee4\u200b\u3002\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u5c55\u793a\u200b\u4e86\u200b\u5176\u200b\u57fa\u672c\u200b\u601d\u60f3\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nvolatile sig_atomic_t pid;\n\nvoid sigchld_handler(int s)\n{\n    int olderrno = errno;\n    pid = waitpid(-1, NULL, 0);\n    errno = olderrno;\n}\nvoid sigint_handler(int s)\n{\n}\nint main(int argc, char **argv)\n{\n    sigset_t mask, prev;\n    Signal(SIGCHLD, sigchld_handler);\n    Signal(SIGINT, sigint_handler);\n    Sigemptyset(&amp;mask);\n    Sigaddset(&amp;mask, SIGCHLD);\n    while (1)\n    {\n        Sigprocmask(SIG_BLOCK, &amp;mask, &amp;prev); /* Block SIGCHLD */\n        if (Fork() == 0)                      /* Child */\n            exit(0);\n        /* Parent */\n        pid = 0;\n        Sigprocmask(SIG_SETMASK, &amp;prev, NULL); /* Unblock SIGCHLD */\n        /* Wait for SIGCHLD to be received (wasteful) */\n        while (!pid)\n            ;\n        /* Do some work after receiving SIGCHLD */\n        printf(\".\");\n    }\n    exit(0);\n}\n</code></pre> <p>\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5148\u200b\u4e3a\u200b\u4fe1\u53f7\u200b SIGCHLD \u200b\u548c\u200b SIGINT \u200b\u5b89\u88c5\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff0c\u200b\u7136\u540e\u200b\u521b\u5efa\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u5e76\u200b\u5c06\u200b\u5168\u5c40\u53d8\u91cf\u200b<code>pid</code>\u200b\u8bbe\u200b\u4e3a\u200b 0\uff0c\u200b\u6700\u540e\u200b\u8fdb\u5165\u200b\u81ea\u65cb\u200b\u5faa\u73af\u200b\uff08<code>while (!pid)</code>\uff09\u3002\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u540e\u200b\uff0c<code>pid</code>\u200b\u53d8\u4e3a\u200b\u975e\u200b 0\uff0c\u200b\u4e8e\u662f\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u9000\u51fa\u200b\u81ea\u65cb\u200b\u5faa\u73af\u200b\u3002\u200b\u4e3a\u4e86\u200b\u9632\u6b62\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u8fdb\u5165\u200b\u81ea\u65cb\u200b\u5faa\u73af\u200b\u524d\u200b\u63a5\u6536\u200b\u5230\u200b SIGCHLD \uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u5728\u200b\u521b\u5efa\u200b\u5b50\u200b\u8fdb\u7a0b\u200b\u4e4b\u524d\u200b\u963b\u585e\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u3002</p> <p>\u200b\u8fd9\u200b\u6bb5\u200b\u4ee3\u7801\u200b\u662f\u200b\u6b63\u786e\u200b\u7684\u200b\uff0c\u200b\u4f46\u200b\u81ea\u65cb\u200b\u5faa\u73af\u200b\u4f1a\u200b\u6d6a\u8d39\u200b\u5904\u7406\u5668\u200b\u8d44\u6e90\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5176\u200b\u6539\u4e3a\u200b\uff1a</p> <pre><code>while (!pid) /* Race! */\n    pause();\n</code></pre> <p>\u200b\u95ee\u9898\u200b\u5728\u4e8e\u200b\uff1a\u200b\u5982\u679c\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u5728\u200b While \u200b\u7684\u200b\u6761\u4ef6\u200b\u6d4b\u8bd5\u200b\u4e4b\u540e\u200b\u800c\u200b<code>pause</code>\u200b\u7684\u200b\u6267\u884c\u200b\u4e4b\u524d\u200b\u63a5\u6536\u200b\u5230\u200b SIGCHLD\uff0c\u200b\u90a3\u4e48\u200b\u7a0b\u5e8f\u200b\u5c31\u200b\u4f1a\u200b\u6c38\u8fdc\u200b\u4f11\u7720\u200b\u3002\u200b\u6211\u4eec\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u5c06\u200b<code>pause</code>\u200b\u6539\u4e3a\u200b<code>sleep</code>\uff1a</p> <pre><code>while (!pid) /* Too slow! */\n    sleep(1);\n</code></pre> <p>\u200b\u8fd9\u6837\u200b\u867d\u7136\u200b\u907f\u514d\u200b\u4e86\u200b\u7ade\u4e89\u200b\u95ee\u9898\u200b\uff0c\u200b\u4f46\u4f1a\u200b\u589e\u52a0\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u95f4\u200b\u3002\u200b\u6b63\u786e\u200b\u7684\u200b\u89e3\u51b3\u65b9\u6848\u200b\u662f\u200b\u8c03\u7528\u51fd\u6570\u200b<code>sigsuspend</code>\uff1a</p> <pre><code>#include &lt;signal.h&gt;\nint sigsuspend(const sigset_t *mask);\n// Returns: -1\n</code></pre> <p>\u200b\u8be5\u200b\u51fd\u6570\u200b\u4f7f\u7528\u200b\u53c2\u6570\u200b<code>mask</code>\u200b\u66ff\u6362\u200b\u5f53\u524d\u200b\u7684\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u96c6\u5408\u200b\uff0c\u200b\u7136\u540e\u200b\u6682\u505c\u200b\u8fdb\u7a0b\u200b\u76f4\u81f3\u200b\u5176\u200b\u63a5\u6536\u200b\u4fe1\u53f7\u200b\u3002\u200b\u5982\u679c\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u7684\u200b\u52a8\u4f5c\u200b\u662f\u200b\u7ec8\u6b62\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u5219\u200b\u8fdb\u7a0b\u200b\u7ec8\u6b62\u200b\u4e14\u200b\u4e0d\u200b\u4ece\u200b<code>sigsuspend</code>\u200b\u8fd4\u56de\u200b\uff1b\u200b\u5982\u679c\u200b\u8be5\u200b\u4fe1\u53f7\u200b\u7684\u200b\u52a8\u4f5c\u200b\u662f\u200b\u8fd0\u884c\u200b\u4e00\u4e2a\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff0c\u200b\u5219\u200b<code>sigsuspend</code>\u200b\u5728\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u540e\u200b\u8fd4\u56de\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u963b\u585e\u200b\u4fe1\u53f7\u200b\u96c6\u5408\u200b\u7684\u200b\u72b6\u6001\u200b\u6062\u590d\u200b\u3002</p> <p>\u200b\u5b9e\u9645\u4e0a\u200b\u5b83\u200b\u7b49\u6548\u4e8e\u200b\u4e0b\u5217\u200b\u51fd\u6570\u200b\u7ec4\u5408\u200b\u7684\u200b\u539f\u5b50\u200b\u6027\u200b\uff08Atomic\uff0c\u200b\u5373\u200b\u4e0d\u53ef\u200b\u4e2d\u65ad\u200b\uff09\u200b\u7248\u672c\u200b\uff1a</p> <pre><code>sigprocmask(SIG_SETMASK, &amp;mask, &amp;prev);\npause();\nsigprocmask(SIG_SETMASK, &amp;prev, NULL);\n</code></pre> <p>\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u793a\u4f8b\u200b\u51fd\u6570\u200b\u4fee\u6539\u200b\u4e3a\u200b\uff1a</p> <pre><code>while (1)\n{\n    Sigprocmask(SIG_BLOCK, &amp;mask, &amp;prev); /* Block SIGCHLD */\n    if (Fork() == 0)                      /* Child */\n        exit(0);\n    /* Wait for SIGCHLD to be received */\n    pid = 0;\n    while (!pid)\n        sigsuspend(&amp;prev);\n    /* Optionally unblock SIGCHLD */\n    Sigprocmask(SIG_SETMASK, &amp;prev, NULL);\n    /* Do some work after receiving SIGCHLD */\n    printf(\".\");\n}\n</code></pre>"},{"location":"core/csapp/ch8/#_36","title":"\u975e\u200b\u672c\u5730\u200b\u8df3\u8f6c","text":"<p>C \u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u79cd\u200b\u7528\u6237\u200b\u7ea7\u522b\u200b\u7684\u200b\u5f02\u5e38\u200b\u63a7\u5236\u6d41\u200b\uff0c\u200b\u5373\u975e\u200b\u672c\u5730\u200b\u8df3\u8f6c\u200b\uff08Nonlocal Jump\uff09\u3002\u200b\u5b83\u200b\u65e0\u9700\u200b\u5b8c\u6210\u200b\u6b63\u5e38\u200b\u7684\u200b\u8c03\u7528\u200b/\u200b\u8fd4\u56de\u200b\u5e8f\u5217\u200b\uff0c\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u4ece\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u76f4\u63a5\u200b\u8f6c\u79fb\u200b\u5230\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u5f53\u524d\u200b\u6b63\u5728\u200b\u6267\u884c\u200b\u7684\u200b\u51fd\u6570\u200b\u3002\u200b\u975e\u200b\u672c\u5730\u200b\u8df3\u8f6c\u200b\u662f\u200b\u901a\u8fc7\u200b<code>setjmp</code>\u200b\u548c\u200b<code>longjmp</code>\u200b\u51fd\u6570\u200b\u5b9e\u73b0\u200b\u7684\u200b\uff1a</p> <pre><code>#include &lt;setjmp.h&gt;\nint setjmp(jmp_buf env);\nint sigsetjmp(sigjmp_buf env, int savesigs);\n// Returns: 0 from setjmp, nonzero from longjmps\n\nvoid longjmp(jmp_buf env, int retval);\nvoid siglongjmp(sigjmp_buf env, int retval);\n// Never returns\n</code></pre> <p><code>setjmp</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u5f53\u524d\u200b\u8c03\u7528\u200b\u73af\u5883\u200b\uff08Calling Environment\uff0c\u200b\u5305\u62ec\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u3001\u200b\u6808\u200b\u6307\u9488\u200b\u548c\u200b\u901a\u7528\u5bc4\u5b58\u5668\u200b\u7b49\u200b\uff09\uff0c\u200b\u4fdd\u5b58\u200b\u5728\u200b\u53c2\u6570\u200b<code>env</code>\u200b\u6307\u5b9a\u200b\u7684\u200b\u7f13\u51b2\u533a\u200b\u4e2d\u200b\u5e76\u200b\u8fd4\u56de\u200b 0\u3002<code>longjmp</code>\u200b\u51fd\u6570\u200b\u4f1a\u200b\u4ece\u200b<code>env</code>\u200b\u7f13\u51b2\u533a\u200b\u6062\u590d\u200b\u8c03\u7528\u200b\u73af\u5883\u200b\uff0c\u200b\u7136\u540e\u200b\u89e6\u53d1\u200b\u6700\u8fd1\u200b\u8c03\u7528\u200b\u7684\u200b<code>setjmp</code>\u200b\u51fd\u6570\u200b\u7684\u200b\u8fd4\u56de\u200b\u3002\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c<code>setjmp</code>\u200b\u4f1a\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u975e\u96f6\u503c\u200b<code>retval</code>\u3002\u200b\u5728\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b<code>sigsetjmp</code>\u200b\u548c\u200b<code>siglongjmp</code>\u200b\u4ee3\u66ff\u200b\u5b83\u4eec\u200b\u3002</p> <p>\u200b\u975e\u200b\u5c40\u90e8\u200b\u8df3\u8f6c\u200b\u7684\u200b\u4e00\u4e2a\u200b\u91cd\u8981\u200b\u5e94\u7528\u200b\u662f\u200b\u53ef\u4ee5\u200b\u5728\u200b\u68c0\u6d4b\u200b\u5230\u200b\u67d0\u4e9b\u200b\u9519\u8bef\u200b\u6761\u4ef6\u200b\u65f6\u200b\uff0c\u200b\u4ece\u200b\u6df1\u5ea6\u200b\u5d4c\u5957\u200b\u7684\u200b\u51fd\u6570\u8c03\u7528\u200b\u4e2d\u200b\u7acb\u5373\u200b\u8fd4\u56de\u200b\u3002\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u975e\u200b\u672c\u5730\u200b\u8df3\u8f6c\u200b\u76f4\u63a5\u200b\u8fd4\u56de\u200b\u5230\u200b\u5e38\u89c1\u200b\u7684\u200b\u9519\u8bef\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff0c\u200b\u65e0\u9700\u200b\u8d39\u529b\u200b\u5730\u200b\u5c55\u5f00\u200b\u6808\u200b\uff08Unwind Stack\uff09\u3002</p> <pre><code>#include \"csapp.h\"\n\njmp_buf buf;\n\nint error1 = 0;\nint error2 = 1;\n\nvoid foo(void), bar(void);\n\nint main()\n{\n    switch (setjmp(buf))\n    {\n    case 0:\n        foo();\n        break;\n    case 1:\n        printf(\"Detected an error1 condition in foo\\n\");\n        break;\n    case 2:\n        printf(\"Detected an error2 condition in foo\\n\");\n        break;\n    default:\n        printf(\"Unknown error condition in foo\\n\");\n    }\n    exit(0);\n}\n\n/* Deeply nested function foo */\nvoid foo(void)\n{\n    if (error1)\n        longjmp(buf, 1);\n    bar();\n}\n\nvoid bar(void)\n{\n    if (error2)\n        longjmp(buf, 2);\n}\n</code></pre> <p>\u200b\u793a\u4f8b\u200b\u7a0b\u5e8f\u200b\u4e2d\u4e3b\u200b\u51fd\u6570\u200b\u9996\u5148\u200b\u8c03\u7528\u200b<code>setjmp</code>\u200b\u4fdd\u5b58\u200b\u5f53\u524d\u200b\u8c03\u7528\u200b\u73af\u5883\u200b\uff0c\u200b\u7136\u540e\u200b\u4f9d\u6b21\u200b\u8c03\u7528\u51fd\u6570\u200b<code>foo</code>\u200b\u548c\u200b<code>bar</code>\u3002 \u200b\u4e00\u65e6\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u53d1\u751f\u200b\u9519\u8bef\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u7acb\u5373\u200b\u901a\u8fc7\u200b<code>longjmp</code>\u200b\u4ece\u200b<code>setjmp</code>\u200b\u8fd4\u56de\u200b\u3002<code>setjmp</code>\u200b\u7684\u200b\u975e\u200b\u96f6\u200b\u8fd4\u56de\u503c\u200b\u8868\u793a\u200b\u9519\u8bef\u200b\u7684\u200b\u7c7b\u578b\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u4ee3\u7801\u200b\u4e2d\u200b\u7684\u200b\u67d0\u5904\u200b\u5bf9\u200b\u5176\u200b\u8fdb\u884c\u200b\u5904\u7406\u200b\u3002</p> <p>\u200b\u975e\u200b\u5c40\u90e8\u200b\u8df3\u8f6c\u200b\u7684\u200b\u53e6\u200b\u4e00\u4e2a\u200b\u91cd\u8981\u200b\u5e94\u7528\u200b\u662f\u4ece\u200b\u4fe1\u53f7\u5904\u7406\u200b\u7a0b\u5e8f\u200b\u8df3\u8f6c\u200b\u5230\u200b\u7279\u5b9a\u200b\u4ee3\u7801\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b\u50cf\u200b\u5f80\u5e38\u200b\u90a3\u6837\u200b\u8fd4\u56de\u200b\u5230\u200b\u56e0\u200b\u4fe1\u53f7\u200b\u4e2d\u65ad\u200b\u7684\u200b\u6307\u4ee4\u200b\u3002</p>"},{"location":"core/csapp/ch9/","title":"\u865a\u62df\u5185\u5b58","text":"<p>\u200b\u4e3a\u4e86\u200b\u66f4\u52a0\u200b\u6709\u6548\u200b\u5730\u200b\u7ba1\u7406\u200b\u5185\u5b58\u200b\u5e76\u200b\u51cf\u5c11\u200b\u9519\u8bef\u200b\u7684\u200b\u53d1\u751f\u200b\uff0c\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u79cd\u200b\u5bf9\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u7684\u200b\u62bd\u8c61\u200b\uff0c\u200b\u5373\u200b\u865a\u62df\u5185\u5b58\u200b\uff08Virtual Memory\uff0cVM\uff09\u3002\u200b\u865a\u62df\u5185\u5b58\u200b\u662f\u200b\u786c\u4ef6\u200b\u5f02\u5e38\u200b\u3001\u200b\u786c\u4ef6\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u3001\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u3001\u200b\u78c1\u76d8\u200b\u6587\u4ef6\u200b\u548c\u200b\u5185\u6838\u200b\u8f6f\u4ef6\u200b\u4e4b\u95f4\u200b\u7684\u200b\u4f18\u96c5\u200b\u4ea4\u4e92\u200b\uff0c\u200b\u5b83\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u63d0\u4f9b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5927\u200b\u7684\u200b\u3001\u200b\u7edf\u4e00\u200b\u7684\u200b\u548c\u200b\u79c1\u6709\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u3002</p> <p>\u200b\u865a\u62df\u5185\u5b58\u200b\u6709\u200b\u4ee5\u4e0b\u200b\u4e09\u4e2a\u200b\u91cd\u8981\u200b\u529f\u80fd\u200b\uff1a</p> <ul> <li>\u200b\u5c06\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u4f5c\u4e3a\u200b\u78c1\u76d8\u200b\u7684\u200b\u7f13\u5b58\u200b\uff0c\u200b\u53ea\u200b\u4fdd\u7559\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6d3b\u8dc3\u200b\u533a\u57df\u200b\u5e76\u200b\u6839\u636e\u200b\u9700\u8981\u200b\u4e0d\u65ad\u200b\u5730\u200b\u5728\u200b\u4e24\u8005\u4e4b\u95f4\u200b\u4f20\u8f93\u6570\u636e\u200b\uff1b</li> <li>\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u63d0\u4f9b\u200b\u7edf\u4e00\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u4ece\u800c\u200b\u7b80\u5316\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\uff1b</li> <li>\u200b\u4fdd\u62a4\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e0d\u200b\u88ab\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u6240\u200b\u7834\u574f\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch9/#_2","title":"\u7269\u7406\u200b\u5bfb\u5740\u200b\u4e0e\u200b\u865a\u62df\u200b\u5bfb\u5740","text":"<p>\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5b57\u8282\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\uff08Physical Address\uff0cPA\uff09\uff0cCPU \u200b\u4f7f\u7528\u200b\u7269\u7406\u5730\u5740\u200b\u8bbf\u95ee\u200b\u5185\u5b58\u200b\u7684\u200b\u65b9\u5f0f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u7269\u7406\u200b\u5bfb\u5740\u200b\uff08Physical Addressing\uff09\uff1a</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cCPU \u200b\u751f\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u6709\u6548\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\u5e76\u200b\u901a\u8fc7\u200b\u5b58\u50a8\u5668\u200b\u603b\u7ebf\u200b\u4f20\u9012\u200b\u7ed9\u200b\u4e3b\u5b58\u50a8\u5668\u200b\uff0c\u200b\u8be6\u89c1\u200b \u200b\u8bbf\u95ee\u200b\u4e3b\u5b58\u50a8\u5668\u200b\u3002</p> <p>CPU \u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u865a\u62df\u5730\u5740\u200b\uff08Virtual Address\uff0cVA\uff09\u200b\u8bbf\u95ee\u200b\u4e3b\u5b58\u200b\uff0c\u200b\u53ea\u4e0d\u8fc7\u200b\u8be5\u200b\u5730\u5740\u200b\u5728\u200b\u53d1\u9001\u5230\u200b\u4e3b\u5b58\u200b\u4e4b\u524d\u200b\u9700\u8981\u200b\u88ab\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u9002\u5f53\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\u3002\u200b\u8fd9\u79cd\u200b\u5bfb\u5740\u200b\u65b9\u5f0f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u865a\u62df\u200b\u5bfb\u5740\u200b\uff08Virtual Addressing\uff09\uff1a</p> <p></p> <p>\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\uff08Address Translation \uff09\u200b\u9700\u8981\u200b CPU \u200b\u786c\u4ef6\u200b\u548c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e4b\u95f4\u200b\u5bc6\u5207\u5408\u4f5c\u200b\uff0c\u200b\u4f4d\u4e8e\u200b CPU \u200b\u82af\u7247\u200b\u4e0a\u200b\u7684\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u5355\u5143\u200b\uff08Memory Management Unit\uff0cMMU\uff09\u200b\u6839\u636e\u200b \u200b\u9875\u8868\u200b\uff08Page Table\uff09\u200b\u52a8\u6001\u200b\u5730\u200b\u5c06\u200b\u865a\u62df\u5730\u5740\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u7269\u7406\u5730\u5740\u200b\u3002\u200b\u9875\u8868\u200b\u5b58\u50a8\u200b\u5728\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u5176\u200b\u5185\u5bb9\u200b\u7531\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u7ef4\u62a4\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_3","title":"\u5730\u5740\u200b\u7a7a\u95f4","text":"<p>\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff08Address Space\uff09\u200b\u662f\u200b\u4e00\u7ec4\u200b\u6709\u5e8f\u200b\u7684\u200b\u975e\u8d1f\u200b\u6574\u6570\u200b\u5730\u5740\u200b\uff1a</p> \\[\\lbrace0, 1, 2, . . .\\rbrace\\] <p>\u200b\u5982\u679c\u200b\u8fd9\u4e9b\u200b\u6574\u6570\u200b\u662f\u200b\u8fde\u7eed\u200b\u7684\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u5176\u200b\u4e3a\u200b\u7ebf\u6027\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff08Linear Address Space\uff09\u3002\u200b\u5728\u200b\u62e5\u6709\u200b\u865a\u62df\u5185\u5b58\u200b\u7684\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0cCPU \u200b\u4ece\u200b n \u200b\u4f4d\u200b\u7ebf\u6027\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u751f\u6210\u200b\u865a\u62df\u5730\u5740\u200b\uff0c\u200b\u8be5\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5171\u6709\u200b N = \\(2^n\\) \u200b\u4e2a\u200b\u5730\u5740\u200b\uff1a</p> \\[\\lbrace0,1,2,...,N -1\\rbrace\\] <p>\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u901a\u5e38\u200b\u652f\u6301\u200b 32 \u200b\u4f4d\u200b\u6216\u200b 64 \u200b\u4f4d\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u3002\u200b\u540c\u6837\u200b\u5730\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4e5f\u200b\u6709\u200b\u4e00\u4e2a\u200b\u7269\u7406\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff1a</p> \\[\\lbrace0,1,2,...,M -1\\rbrace\\] <p>\u200b\u4e0e\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e0d\u540c\u200b\uff0cM \u200b\u4e0d\u200b\u4e00\u5b9a\u200b\u4e3a\u200b 2 \u200b\u7684\u200b\u5e42\u200b\u3002\u200b\u4f46\u200b\u4e3a\u4e86\u200b\u7b80\u5316\u200b\u8ba8\u8bba\u200b\uff0c\u200b\u6211\u4eec\u200b\u5047\u8bbe\u200b M = \\(2^m\\)\u3002</p> <p>\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u660e\u786e\u200b\u5730\u200b\u5c06\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\uff08\u200b\u5b57\u8282\u200b\uff09\u200b\u548c\u200b\u5176\u200b\u5c5e\u6027\u200b\uff08\u200b\u5730\u5740\u200b\uff09\u200b\u533a\u5206\u200b\u5f00\u6765\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6bcf\u4e2a\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u6709\u200b\u591a\u4e2a\u200b\u72ec\u7acb\u200b\u7684\u200b\u5730\u5740\u200b\uff0c\u200b\u8fd9\u200b\u4fbf\u662f\u200b\u865a\u62df\u5185\u5b58\u200b\u7684\u200b\u57fa\u672c\u200b\u601d\u60f3\u200b\u3002\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5b57\u8282\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u4ece\u200b\u7269\u7406\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u9009\u62e9\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u4e2a\u200b\u4ece\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u9009\u62e9\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_4","title":"\u865a\u62df\u5185\u5b58\u200b\u4f5c\u4e3a\u200b\u7f13\u5b58\u200b\u7684\u200b\u5de5\u5177","text":"<p>\u200b\u4e0e\u200b\u5b58\u50a8\u200b\u5c42\u7ea7\u200b\u7ed3\u6784\u200b\u4e2d\u200b\u7684\u200b\u5176\u4ed6\u200b\u7f13\u5b58\u200b\u4e00\u6837\u200b\uff0c\u200b\u78c1\u76d8\u200b\u4e0e\u200b\u4e3b\u5b58\u200b\u4e4b\u95f4\u200b\u4ee5\u200b Block \u200b\u4e3a\u200b\u5355\u4f4d\u200b\u4f20\u8f93\u6570\u636e\u200b\u3002\u200b\u800c\u200b\u5728\u200b\u865a\u62df\u5185\u5b58\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\uff0cBlock \u200b\u88ab\u200b\u79f0\u4e3a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\uff08Virtual Page\uff0cVP\uff09\uff0c\u200b\u5176\u200b\u5927\u5c0f\u200b\u4e3a\u200b P = \\(2^p\\)\u3002\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u88ab\u200b\u5212\u5206\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u5927\u5c0f\u200b\u4e3a\u200b P \u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\uff08Physical Page\uff0cPP\uff09\u3002</p> <p>\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u6709\u200b\u4ee5\u4e0b\u200b\u4e09\u79cd\u200b\u72b6\u6001\u200b\uff1a</p> <ul> <li>\u200b\u672a\u200b\u5206\u914d\u200b\uff08Unallocated\uff09\uff1a\u200b\u6ca1\u6709\u200b\u88ab\u200b\u8fdb\u7a0b\u200b\u7533\u8bf7\u200b\u4f7f\u7528\u200b\u7684\u200b\u9875\u9762\u200b\uff0c\u200b\u4e0d\u200b\u5360\u7528\u200b\u4efb\u4f55\u200b\u78c1\u76d8\u7a7a\u95f4\u200b\uff1b</li> <li>\u200b\u672a\u200b\u7f13\u5b58\u200b\uff08Uncached\uff09\uff1a\u200b\u4ec5\u200b\u52a0\u8f7d\u200b\u5230\u200b\u78c1\u76d8\u200b\u800c\u200b\u672a\u200b\u7f13\u5b58\u200b\u5230\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\uff1b</li> <li>\u200b\u5df2\u200b\u7f13\u5b58\u200b\uff08Cached\uff09\uff1a\u200b\u5df2\u200b\u7f13\u5b58\u200b\u5728\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch9/#dram","title":"DRAM \u200b\u7f13\u5b58","text":"<p>\u200b\u6211\u4eec\u200b\u5c06\u200b CPU \u200b\u548c\u200b\u4e3b\u5b58\u200b\u4e4b\u95f4\u200b\u7684\u200b L1\u3001L2 \u200b\u548c\u200b L3 \u200b\u7ea7\u200b\u7f13\u5b58\u200b\u79f0\u4e3a\u200b SRAM \u200b\u7f13\u5b58\u200b\uff0c\u200b\u800c\u200b\u5c06\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7528\u6765\u200b\u7f13\u5b58\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u7684\u200b\u7f13\u5b58\u200b\u79f0\u4e3a\u200b DRAM \u200b\u7f13\u5b58\u200b\u3002</p> <p>\u200b\u4e0e\u200b SRAM \u200b\u7f13\u5b58\u200b\u76f8\u6bd4\u200b\uff0cDRAM \u200b\u7f13\u5b58\u200b\u53d1\u751f\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u7684\u200b\u6210\u672c\u200b\u5f88\u200b\u9ad8\u200b\uff08\u200b\u9700\u8981\u200b\u4ece\u200b\u78c1\u76d8\u200b\u4e2d\u200b\u52a0\u8f7d\u200b\u6570\u636e\u200b\uff09\uff0c\u200b\u56e0\u6b64\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u5f80\u5f80\u200b\u6bd4\u8f83\u200b\u5927\u200b\u2014\u2014\u200b\u901a\u5e38\u200b\u4e3a\u200b 4 KB \u200b\u5230\u200b 2 MB\u3002DRAM \u200b\u7f13\u5b58\u200b\u662f\u200b \u200b\u5168\u200b\u5173\u8054\u200b\u578b\u200b \u200b\u7684\u200b\uff0c\u200b\u8fd9\u6837\u200b\u4efb\u4f55\u200b\u4e00\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u90fd\u200b\u53ef\u4ee5\u200b\u653e\u5728\u200b\u4efb\u4f55\u200b\u4e00\u4e2a\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u4e2d\u200b\u3002</p> <p>Due to the large miss penalty, DRAM caches are fully associative; that is, any virtual page can be placed in any physical page.</p>"},{"location":"core/csapp/ch9/#_5","title":"\u9875\u8868","text":"<p>\u200b\u9875\u8868\u200b\u662f\u200b\u7531\u200b\u9875\u8868\u200b\u6761\u76ee\u200b\uff08Page Table Entries\uff0cPTEs\uff09\u200b\u7ec4\u6210\u200b\u7684\u200b\u6570\u7ec4\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u5728\u200b\u9875\u8868\u200b\u90fd\u200b\u6709\u200b\u4e00\u6761\u200b PTE\uff0c\u200b\u5b83\u200b\u5728\u200b\u9875\u8868\u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u662f\u200b\u56fa\u5b9a\u200b\u7684\u200b\u3002\u200b\u6bcf\u6761\u200b PTE \u200b\u4e2d\u200b\u90fd\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u8868\u793a\u200b\u8be5\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u662f\u5426\u200b\u5df2\u200b\u7f13\u5b58\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u4e2a\u200b n \u200b\u4f4d\u200b\u7684\u200b\u5730\u5740\u200b\u5b57\u200b\u6bb5\u200b\u3002\u200b\u82e5\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 1\uff0c\u200b\u5219\u200b\u5730\u5740\u200b\u5b57\u6bb5\u200b\u662f\u200b\u7f13\u5b58\u200b\u8be5\u200b\u9875\u9762\u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u7684\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\uff1b\u200b\u82e5\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 0 \u200b\u4e14\u200b\u5730\u5740\u200b\u5b57\u6bb5\u200b\u4e3a\u200b\u7a7a\u200b\uff0c\u200b\u5219\u200b\u4ee3\u8868\u200b\u8be5\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u672a\u200b\u5206\u914d\u200b\uff1b\u200b\u82e5\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 0 \u200b\u4e14\u200b\u5730\u5740\u200b\u5b57\u6bb5\u200b\u975e\u7a7a\u200b\uff0c\u200b\u5219\u200b\u5730\u5740\u200b\u5b57\u6bb5\u200b\u662f\u200b\u8be5\u200b\u9875\u9762\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\u3002</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u7cfb\u7edf\u200b\u4e2d\u200b\u5b58\u5728\u200b 8 \u200b\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u548c\u200b 4 \u200b\u4e2a\u200b\u7269\u7406\u200b\u9875\u9762\u200b\uff1a\u200b\u9875\u9762\u200b 1\uff0c2\uff0c4 \u200b\u548c\u200b 7 \u200b\u7f13\u5b58\u200b\u5728\u200b DRAM \u200b\u4e2d\u200b\uff1b\u200b\u9875\u9762\u200b 3 \u200b\u548c\u200b 6 \u200b\u5df2\u200b\u5206\u914d\u200b\u4f46\u200b\u672a\u200b\u7f13\u5b58\u200b\uff1b\u200b\u9875\u9762\u200b 0 \u200b\u548c\u200b 5 \u200b\u672a\u200b\u5206\u914d\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_6","title":"\u7f3a\u9875\u200b\u6545\u969c","text":"<p>\u200b\u6211\u4eec\u200b\u5c06\u200b\u8bbf\u95ee\u200b DRAM \u200b\u7f13\u5b58\u200b\u65f6\u200b\u53d1\u751f\u200b\u7684\u200b\u7f13\u5b58\u200b\u7f3a\u5931\u200b\u79f0\u4e3a\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\uff08Page Fault\uff09\u3002\u200b\u82e5\u200b CPU \u200b\u5f15\u7528\u200b\u4e0a\u200b\u56fe\u200b\u9875\u9762\u200b 3 \u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u5b57\u200b\uff0c\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u786c\u4ef6\u200b\u4f1a\u200b\u4ece\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u8bfb\u53d6\u200b PTE 3 \uff0c\u200b\u7136\u540e\u200b\u6839\u636e\u200b\u5176\u200b\u6709\u6548\u200b\u4f4d\u200b\u5224\u65ad\u200b\u51fa\u8be5\u200b\u9875\u9762\u200b\u672a\u200b\u7f13\u5b58\u200b\u3002\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\u5f02\u5e38\u200b\u5c06\u200b\u8c03\u7528\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff0c\u200b\u9009\u62e9\u200b\u53d7\u5bb3\u8005\u200b\u9875\u9762\u200b\uff08Victim Page\uff09\u200b\u9010\u51fa\u200b\u4e3b\u5b58\u200b\u3002</p> <p>\u200b\u5728\u200b\u672c\u4f8b\u200b\u4e2d\u200b\uff0c\u200b\u53d7\u5bb3\u8005\u200b\u9875\u9762\u200b\u4e3a\u200b VP 4\uff0c\u200b\u56e0\u6b64\u200b\u5185\u6838\u200b\u4f1a\u5148\u200b\u5c06\u200b PTE 4 \u200b\u4e2d\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u200b\u91cd\u7f6e\u200b\u4e3a\u200b 0\u3002\u200b\u5982\u679c\u200b\u8be5\u200b\u9875\u9762\u200b\u5df2\u200b\u53d1\u751f\u200b\u66f4\u6539\u200b\uff0c\u200b\u5185\u6838\u200b\u8fd8\u200b\u9700\u8981\u200b\u5c06\u200b\u5176\u200b\u590d\u5236\u200b\u56de\u200b\u78c1\u76d8\u200b\u3002\u200b\u63a5\u4e0b\u6765\u200b\uff0c\u200b\u5185\u6838\u200b\u628a\u200b VP 3 \u200b\u4ece\u200b\u78c1\u76d8\u200b\u590d\u5236\u5230\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7684\u200b PP 3\uff0c\u200b\u5e76\u200b\u66f4\u65b0\u200b PTE 3 \u200b\u4e2d\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u200b\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u540e\u200b\u793a\u4f8b\u200b\u9875\u8868\u200b\u7684\u200b\u72b6\u6001\u200b\uff1a</p> <p> \u200b\u4e0a\u8ff0\u200b\u5728\u200b\u78c1\u76d8\u200b\u548c\u200b\u4e3b\u5b58\u200b\u4e4b\u95f4\u200b\u4f20\u8f93\u200b\u9875\u9762\u200b\u7684\u200b\u6d3b\u52a8\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u4ea4\u6362\u200b\uff08Swapping\uff09\u200b\u6216\u8005\u200b\u5206\u9875\u200b\uff08Paging\uff09\u3002\u200b\u9875\u9762\u200b\u4ece\u200b\u78c1\u76d8\u200b\u4f20\u8f93\u200b\u5230\u200b\u4e3b\u5b58\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u6362\u5165\u200b\uff08Swapping In \u200b\u6216\u200b Paging In\uff09\uff0c\u200b\u53cd\u4e4b\u200b\u5219\u200b\u4e3a\u200b\u6362\u200b\u51fa\u200b\uff08Swapping Out \u200b\u6216\u200b Paging Out\uff09\u3002\u200b\u5c3d\u7ba1\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u8bd5\u56fe\u200b\u9884\u6d4b\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\u5e76\u200b\u5728\u200b\u5f15\u7528\u200b\u672a\u200b\u7f13\u5b58\u200b\u7684\u200b\u9875\u200b\u9762\u524d\u200b\u5206\u9875\u200b\uff0c\u200b\u4f46\u200b\u73b0\u4ee3\u200b\u7cfb\u7edf\u200b\u5747\u200b\u5728\u200b\u5f02\u5e38\u200b\u53d1\u751f\u200b\u540e\u200b\u5206\u9875\u200b\uff0c\u200b\u5373\u200b\u6309\u200b\u9700\u200b\u5206\u9875\u200b\uff08Demand Paging\uff09\u3002</p>"},{"location":"core/csapp/ch9/#_7","title":"\u5206\u914d\u200b\u9875\u9762","text":"<p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u5206\u914d\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\uff08\u200b\u5982\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b<code>malloc</code>\uff09\u200b\u540e\u200b\u9875\u8868\u200b\u7684\u200b\u53d8\u5316\u200b\u3002\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u5148\u200b\u5728\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u5f00\u8f9f\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u7136\u540e\u200b\u66f4\u65b0\u200b PTE 5 \u200b\u4f7f\u200b VP 5 \u200b\u6307\u5411\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u65b0\u521b\u5efa\u200b\u7684\u200b\u9875\u9762\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_8","title":"\u865a\u62df\u5185\u5b58\u200b\u4f5c\u4e3a\u200b\u5185\u5b58\u200b\u7ba1\u7406\u200b\u7684\u200b\u5de5\u5177","text":"<p>\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u7ef4\u62a4\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u5355\u72ec\u200b\u7684\u200b\u9875\u8868\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6240\u6709\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u62e5\u6709\u200b\u81ea\u5df1\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u8fdb\u7a0b\u200b i \u200b\u7684\u200b\u9875\u8868\u200b\u5c06\u200b VP 1 \u200b\u6620\u5c04\u200b\u5230\u200b PP 2\uff0c\u200b\u5c06\u200b VP 2 \u200b\u6620\u5c04\u200b\u5230\u200b PP 7\uff1b\u200b\u8fdb\u7a0b\u200b j \u200b\u7684\u200b\u9875\u8868\u200b\u5c06\u200b VP 1 \u200b\u6620\u5c04\u200b\u5230\u200b PP 7\uff0c\u200b\u5c06\u200b VP 2 \u200b\u6620\u5c04\u200b\u5230\u200b PP 10\u3002\u200b\u591a\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u53ef\u4ee5\u200b\u6620\u5c04\u200b\u5230\u200b\u540c\u4e00\u4e2a\u200b\u5171\u4eab\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u3002\u200b\u865a\u62df\u5185\u5b58\u200b\u7cfb\u7edf\u200b\u7b80\u5316\u200b\u4e86\u200b\u94fe\u63a5\u200b\u3001\u200b\u52a0\u8f7d\u200b\u3001\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u7684\u200b\u5171\u4eab\u200b\u4ee5\u53ca\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\uff1a</p> <ul> <li>\u200b\u7b80\u5316\u200b\u94fe\u63a5\u200b\uff1a\u200b\u72ec\u7acb\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5141\u8bb8\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u4f7f\u7528\u200b\u76f8\u540c\u200b\u7684\u200b \u200b\u5185\u5b58\u200b\u7ed3\u6784\u200b\uff0c\u200b\u56e0\u6b64\u200b\u94fe\u63a5\u200b\u5668\u200b\u65e0\u9700\u200b\u8003\u8651\u200b\u53ef\u6267\u884c\u6587\u4ef6\u200b\u7684\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u5728\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u7684\u200b\u5b9e\u9645\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u8fd9\u79cd\u200b\u7edf\u4e00\u6027\u200b\u6781\u5927\u200b\u5730\u200b\u7b80\u5316\u200b\u4e86\u200b\u94fe\u63a5\u200b\u5668\u200b\u7684\u200b\u8bbe\u8ba1\u200b\u548c\u200b\u5b9e\u73b0\u200b\uff1b</li> <li>\u200b\u7b80\u5316\u200b\u52a0\u8f7d\u200b\uff1a\u200b\u82e5\u8981\u200b\u5c06\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u7684\u200b .text \u200b\u548c\u200b .data \u200b\u6bb5\u200b\u52a0\u8f7d\u200b\u5230\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u8fdb\u7a0b\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\uff0c\u200b\u52a0\u8f7d\u200b\u5668\u200b\u53ea\u200b\u9700\u4e3a\u200b\u5b83\u4eec\u200b\u5206\u914d\u200b\u865a\u62df\u200b\u9875\u9762\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u6807\u8bb0\u200b\u4e3a\u200b\u672a\u200b\u7f13\u5b58\u200b\uff0c\u200b\u6700\u540e\u200b\u518d\u200b\u5c06\u200b\u9875\u8868\u200b\u6761\u76ee\u200b\u6307\u5411\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u5bf9\u5e94\u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u5b9e\u9645\u4e0a\u200b\u52a0\u8f7d\u200b\u5668\u200b\u4ece\u672a\u200b\u5c06\u200b\u4efb\u4f55\u200b\u6570\u636e\u200b\u4ece\u200b\u78c1\u76d8\u200b\u590d\u5236\u5230\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u53ea\u6709\u200b\u5728\u200b\u88ab\u200b\u7b2c\u4e00\u6b21\u200b\u5f15\u7528\u200b\u65f6\u624d\u200b\u4f1a\u200b\u6309\u200b\u9700\u200b\u5206\u9875\u200b\uff1b</li> <li>\u200b\u7b80\u5316\u200b\u5171\u4eab\u200b\uff1a\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e0d\u540c\u200b\u8fdb\u7a0b\u200b\u4e2d\u200b\u7684\u200b\u4e0d\u540c\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u6620\u5c04\u200b\u5230\u200b\u76f8\u540c\u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\uff0c\u200b\u4ece\u800c\u200b\u5b9e\u73b0\u200b\u8fdb\u7a0b\u200b\u4e4b\u95f4\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u7684\u200b\u5171\u4eab\u200b\uff1b</li> <li>\u200b\u7b80\u5316\u200b\u5185\u5b58\u200b\u5206\u914d\u200b\uff1a\u200b\u5f53\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7533\u8bf7\u200b\u989d\u5916\u200b\u7684\u200b\u5185\u5b58\u200b\u65f6\u200b\uff0c\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u4f1a\u4e3a\u200b\u5176\u200b\u5206\u914d\u200b\u4e00\u5b9a\u200b\u6570\u91cf\u200b\u7684\u200b\u8fde\u7eed\u200b\u865a\u62df\u200b\u9875\u9762\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5b83\u4eec\u200b\u6620\u5c04\u200b\u5230\u200b\u4efb\u610f\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u3002\u200b\u8fd9\u4e9b\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u65e0\u9700\u200b\u8fde\u7eed\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u5728\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u968f\u673a\u200b\u5206\u5e03\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch9/#_9","title":"\u865a\u62df\u5185\u5b58\u200b\u4f5c\u4e3a\u200b\u5185\u5b58\u4fdd\u62a4\u200b\u7684\u200b\u5de5\u5177","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b PTE \u200b\u4e2d\u200b\u6dfb\u52a0\u200b\u4e00\u4e9b\u200b\u6743\u9650\u200b\u4f4d\u6765\u200b\u7ba1\u7406\u200b\u8fdb\u7a0b\u200b\u5bf9\u200b\u9875\u9762\u200b\u7684\u200b\u8bbf\u95ee\u200b\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cSUP \u200b\u8868\u793a\u200b\u662f\u5426\u200b\u53ea\u6709\u200b\u5728\u200b\u5185\u6838\u200b\u6001\u200b\u8fd0\u884c\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u624d\u80fd\u200b\u8bbf\u95ee\u200b\u8be5\u200b\u9875\u9762\u200b\uff0cREAD \u200b\u548c\u200b WRITE \u200b\u5219\u200b\u5206\u522b\u200b\u8868\u793a\u200b\u9875\u9762\u200b\u662f\u5426\u200b\u53ef\u200b\u8bfb\u5199\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u8fdb\u7a0b\u200b i \u200b\u5728\u200b\u7528\u6237\u200b\u6001\u4e2d\u200b\u8fd0\u884c\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u8bfb\u53d6\u200b VP 0\uff0c\u200b\u8bfb\u53d6\u200b\u548c\u200b\u5199\u5165\u200b VP 1\uff0c\u200b\u4f46\u200b\u65e0\u6cd5\u8bbf\u95ee\u200b VP 2\u3002</p> <p>\u200b\u5982\u679c\u200b\u67d0\u6761\u200b\u6307\u4ee4\u200b\u8fdd\u53cd\u200b\u4e86\u200b\u4e0a\u8ff0\u200b\u6743\u9650\u200b\uff0cCPU \u200b\u5c31\u200b\u4f1a\u200b\u89e6\u53d1\u200b\u901a\u7528\u200b\u4fdd\u62a4\u200b\u6545\u969c\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u5230\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u3002\u200b\u8be5\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4f1a\u200b\u5411\u200b\u95ee\u9898\u200b\u8fdb\u7a0b\u200b\u53d1\u9001\u200b\u4e00\u4e2a\u200b SIGSEGV \u200b\u4fe1\u53f7\u200b\uff0cLinux Shell \u200b\u901a\u5e38\u200b\u5c06\u200b\u6b64\u200b\u5f02\u5e38\u200b\u62a5\u544a\u200b\u4e3a\u200b\u5206\u6bb5\u200b\u6545\u969c\u200b\uff08Segmentation Fault\uff09\u3002</p>"},{"location":"core/csapp/ch9/#_10","title":"\u5730\u5740\u200b\u8f6c\u6362","text":"<p> CPU \u200b\u4e2d\u200b\u7684\u200b\u9875\u8868\u200b\u57fa\u5740\u200b\u5bc4\u5b58\u5668\u200b\uff08Page Table Base Register \uff0cPTBR\uff09\u200b\u6307\u5411\u200b\u5f53\u524d\u200b\u9875\u8868\u200b\uff0cn \u200b\u4f4d\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7531\u200b p \u200b\u4f4d\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u504f\u79fb\u91cf\u200b\uff08Virtual Page Offset\uff0cVPO\uff09\u200b\u548c\u200b n-p \u200b\u4f4d\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u7f16\u53f7\u200b\uff08Virtual Page Number\uff0cVPN\uff09\u200b\u7ec4\u6210\u200b\u3002MMU \u200b\u6839\u636e\u200b VPN \u200b\u7684\u200b\u503c\u200b\u9009\u62e9\u200b\u5bf9\u5e94\u200b\u7684\u200b PTE\uff0c\u200b\u5982\u200b VPN 0 \u200b\u9009\u62e9\u200b PTE 0\uff0cVPN 1 \u200b\u9009\u62e9\u200b PTE 1\u3002\u200b\u7531\u4e8e\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u548c\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u7684\u200b\u5927\u5c0f\u200b\u76f8\u540c\u200b\uff0cVPO \u200b\u4e0e\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u504f\u79fb\u91cf\u200b\uff08Physical Page Offset\uff0cPPO\uff09\u200b\u4e5f\u200b\u5c31\u200b\u76f8\u540c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9875\u8868\u200b\u6761\u76ee\u200b\u4e2d\u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u7f16\u53f7\u200b\uff08Physical Page Number\uff0cPPN\uff09\u200b\u4e0e\u200b VPO \u200b\u5171\u540c\u200b\u7ec4\u6210\u200b\u4e86\u200b\u8f6c\u6362\u200b\u540e\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\u3002</p> <p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u9875\u9762\u200b\u547d\u4e2d\u200b\u65f6\u200b\u7684\u200b CPU \u200b\u786c\u4ef6\u200b\u64cd\u4f5c\u6b65\u9aa4\u200b\uff1a</p> <ol> <li>\u200b\u5904\u7406\u5668\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u865a\u62df\u5730\u5740\u200b VA \u200b\u5e76\u53d1\u200b\u9001\u5230\u200b MMU\uff1b</li> <li>MMU \u200b\u751f\u6210\u200b PTE \u200b\u5730\u5740\u200b PTEA \u200b\u5e76\u200b\u5411\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u53d1\u8d77\u200b\u8bf7\u6c42\u200b\uff1b</li> <li>\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u5c06\u200b PTE \u200b\u8fd4\u56de\u200b\u7ed9\u200b MMU\uff1b</li> <li>MMU \u200b\u6784\u9020\u200b\u7269\u7406\u5730\u5740\u200b PA \u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u53d1\u9001\u5230\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\uff1b</li> <li>\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u5c06\u200b\u8bf7\u6c42\u200b\u7684\u200b\u6570\u636e\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5904\u7406\u5668\u200b\u3002</li> </ol> <p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\u65f6\u200b\u7684\u200b CPU \u200b\u786c\u4ef6\u200b\u64cd\u4f5c\u6b65\u9aa4\u200b\uff1a</p> <ol> <li>\u200b\u5904\u7406\u5668\u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u865a\u62df\u5730\u5740\u200b VA \u200b\u5e76\u53d1\u200b\u9001\u5230\u200b MMU\uff1b</li> <li>MMU \u200b\u751f\u6210\u200b PTE \u200b\u5730\u5740\u200b PTEA \u200b\u5e76\u200b\u5411\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u53d1\u8d77\u200b\u8bf7\u6c42\u200b\uff1b</li> <li>\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u5c06\u200b PTE \u200b\u8fd4\u56de\u200b\u7ed9\u200b MMU\uff1b</li> <li>PTE \u200b\u4e2d\u200b\u7684\u200b\u6709\u6548\u200b\u4f4d\u4e3a\u200b 0\uff0c\u200b\u56e0\u6b64\u200b MMU \u200b\u89e6\u53d1\u200b\u5f02\u5e38\u200b\u5e76\u200b\u5c06\u200b\u63a7\u5236\u6743\u200b\u8f6c\u79fb\u200b\u7ed9\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\uff1b</li> <li>\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u4ece\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u9009\u53d6\u200b\u53d7\u5bb3\u8005\u200b\u9875\u9762\u200b\u6362\u200b\u51fa\u200b\u3002\u200b\u82e5\u8be5\u200b\u9875\u9762\u200b\u5df2\u200b\u88ab\u200b\u4fee\u6539\u200b\uff0c\u200b\u5219\u200b\u8fd8\u8981\u200b\u5c06\u200b\u5176\u200b\u590d\u5236\u5230\u200b\u78c1\u76d8\u200b\u4e2d\u200b\uff1b</li> <li>\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u5c06\u200b\u65b0\u9875\u9762\u200b\u6362\u5165\u200b\u5e76\u200b\u66f4\u65b0\u200b PTE\uff1b</li> <li>\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u8fd4\u56de\u200b\u5230\u200b\u539f\u6765\u200b\u7684\u200b\u8fdb\u7a0b\u200b\uff0c\u200b\u4e4b\u524d\u200b\u5f15\u53d1\u200b\u7f3a\u9875\u200b\u6545\u969c\u200b\u7684\u200b\u6307\u4ee4\u200b\u91cd\u65b0\u200b\u6267\u884c\u200b\u3002\u200b\u6b64\u65f6\u200b\u8fdb\u7a0b\u200b\u8bf7\u6c42\u200b\u7684\u200b\u9875\u9762\u200b\u5df2\u200b\u7f13\u5b58\u200b\uff0c\u200b\u56e0\u6b64\u200b CPU \u200b\u968f\u540e\u200b\u7684\u200b\u64cd\u4f5c\u200b\u4e0e\u200b\u9875\u9762\u200b\u547d\u4e2d\u200b\u65f6\u200b\u76f8\u540c\u200b\u3002</li> </ol>"},{"location":"core/csapp/ch9/#_11","title":"\u9ad8\u901f\u7f13\u5b58\u200b\u4e0e\u200b\u865a\u62df\u5185\u5b58","text":"<p>\u200b\u5927\u90e8\u5206\u200b\u540c\u65f6\u200b\u4f7f\u7528\u200b\u865a\u62df\u5185\u5b58\u200b\u548c\u200b\u9ad8\u901f\u7f13\u5b58\u200b\uff08SRAM \u200b\u7f13\u5b58\u200b\uff09\u200b\u7684\u200b\u7cfb\u7edf\u200b\u5747\u200b\u91c7\u7528\u200b\u7269\u7406\u200b\u5bfb\u5740\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8bbf\u95ee\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u4e24\u8005\u200b\u7684\u200b\u96c6\u6210\u200b\u65b9\u5f0f\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch9/#tlb","title":"\u4f7f\u7528\u200b TLB \u200b\u52a0\u901f\u200b\u5730\u5740\u200b\u8f6c\u6362","text":"<p>CPU \u200b\u6bcf\u6b21\u200b\u751f\u6210\u200b\u865a\u62df\u5730\u5740\u200b\u65f6\u200b\uff0cMMU \u200b\u90fd\u200b\u5fc5\u987b\u200b\u5f15\u7528\u200b PTE \u200b\u624d\u80fd\u200b\u5b8c\u6210\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u3002\u200b\u5982\u679c\u200b PTE \u200b\u4f4d\u4e8e\u200b\u4e3b\u5b58\u200b\u800c\u200b\u975e\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u4e2d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u7684\u200b\u901f\u5ea6\u200b\u5c06\u200b\u5927\u5927\u200b\u4e0b\u964d\u200b\u3002\u200b\u5927\u591a\u6570\u200b\u7cfb\u7edf\u200b\u7684\u200b MMU \u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u8f6c\u6362\u200b\u540e\u5907\u200b\u7f13\u51b2\u533a\u200b\uff08Translation Lookaside Buffer\uff0cTLB\uff09\u200b\u7684\u200b\u5c0f\u578b\u200b PTE \u200b\u7f13\u5b58\u200b\uff0c\u200b\u5176\u200b\u6bcf\u4e2a\u200b\u7f13\u5b58\u200b\u884c\u4e2d\u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u7531\u200b\u5355\u6761\u200b PTE \u200b\u7ec4\u6210\u200b\u7684\u200b Block\u3002\u200b\u7528\u4e8e\u200b \u200b\u96c6\u5408\u200b\u9009\u62e9\u200b\u548c\u884c\u200b\u5339\u914d\u200b \u200b\u7684\u200b Set Index \u200b\u548c\u200b Tag \u200b\u662f\u4ece\u200b\u865a\u62df\u5730\u5740\u200b\u7684\u200b VPN \u200b\u4e2d\u200b\u63d0\u53d6\u200b\u7684\u200b\uff1a</p> <p> \u200b\u5982\u679c\u200b TLB \u200b\u6709\u200b T = \\(2^t\\) \u200b\u4e2a\u200b\u96c6\u5408\u200b\uff0c\u200b\u5219\u200b Set Index\uff08TLBI\uff09\u200b\u7531\u200b VPN \u200b\u4e2d\u200b t \u200b\u4e2a\u200b\u6700\u4f4e\u200b\u4f4d\u200b\u7ec4\u6210\u200b\uff0cTag\uff08TLBT\uff09\u200b\u7531\u200b VPN \u200b\u4e2d\u200b\u7684\u200b\u5269\u4f59\u200b\u9ad8\u4f4d\u200b\u7ec4\u6210\u200b\u3002</p> <p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b TLB \u200b\u547d\u4e2d\u200b\u65f6\u200b\u7684\u200b CPU \u200b\u786c\u4ef6\u200b\u64cd\u4f5c\u6b65\u9aa4\u200b\u3002\u200b\u7531\u4e8e\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u5747\u200b\u5728\u200b CPU \u200b\u82af\u7247\u200b\u4e0a\u200b\u7684\u200b MMU \u200b\u4e2d\u200b\u6267\u884c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u901f\u5ea6\u200b\u5f88\u5feb\u200b\uff1a</p> <ol> <li>CPU \u200b\u751f\u6210\u200b\u4e00\u4e2a\u200b\u865a\u62df\u5730\u5740\u200b VA\uff1b</li> <li>MMU \u200b\u5411\u200b TLB \u200b\u53d1\u9001\u200b VPN \u200b\u4ee5\u200b\u8bf7\u6c42\u200b PTE\uff1b</li> <li>TLB \u200b\u5c06\u200b PTE \u200b\u8fd4\u56de\u200b\u7ed9\u200b MMU\uff1b</li> <li>MMU \u200b\u5c06\u200b\u865a\u62df\u5730\u5740\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u7269\u7406\u5730\u5740\u200b PA \u200b\u5e76\u53d1\u200b\u9001\u5230\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\uff1b</li> <li>\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u5c06\u200b\u8bf7\u6c42\u200b\u7684\u200b\u6570\u636e\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u5904\u7406\u5668\u200b\u3002</li> </ol> <p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b TLB \u200b\u672a\u200b\u547d\u4e2d\u200b\u65f6\u200b\u7684\u200b CPU \u200b\u786c\u4ef6\u200b\u64cd\u4f5c\u6b65\u9aa4\u200b\u3002MMU \u200b\u5fc5\u987b\u200b\u4ece\u200b\u9ad8\u901f\u7f13\u5b58\u200b\u6216\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u83b7\u53d6\u200b PTE \u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u5b58\u50a8\u200b\u5728\u200b TLB \u200b\u4e2d\u200b\uff0c\u200b\u8fd9\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u8986\u76d6\u200b\u73b0\u6709\u200b\u6761\u76ee\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_12","title":"\u591a\u7ea7\u200b\u9875\u8868","text":"<p>\u200b\u5728\u200b\u4e4b\u524d\u200b\u7684\u200b\u8ba8\u8bba\u200b\u4e2d\u200b\uff0c\u200b\u6211\u4eec\u200b\u5047\u8bbe\u200b\u7cfb\u7edf\u200b\u53ea\u200b\u4f7f\u7528\u200b\u5355\u7ea7\u200b\u9875\u8868\u200b\u8fdb\u884c\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u3002\u200b\u4f46\u200b\u5982\u679c\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u6709\u200b 32 \u200b\u4f4d\u200b\uff0c\u200b\u4e00\u4e2a\u200b\u9875\u9762\u200b 4 KB \u200b\u5e76\u4e14\u200b\u4e00\u6761\u200b PTE 4 \u200b\u5b57\u8282\u200b\u3002\u200b\u90a3\u4e48\u200b\u5373\u4f7f\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u53ea\u200b\u5f15\u7528\u200b\u4e00\u5c0f\u90e8\u5206\u200b\u865a\u62df\u5185\u5b58\u200b\uff0c\u200b\u6211\u4eec\u200b\u4e5f\u200b\u9700\u8981\u200b\u4e00\u4e2a\u200b 4 MB \u200b\u7684\u200b\u9875\u8868\u200b\u5e38\u9a7b\u200b\u5728\u200b\u5185\u5b58\u200b\u4e2d\u200b\uff1a</p> \\[n=32, P=4K=2^{12}, n(PTE)=2^{n-p}=2^{20}=1M\\] <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u5bf9\u200b\u9875\u8868\u200b\u5206\u7ea7\u200b\u6765\u200b\u538b\u7f29\u200b\u9875\u8868\u200b\u7684\u200b\u5927\u5c0f\u200b\uff1a</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u6709\u200b 1024 \u200b\u6761\u200b PTE\uff0c\u200b\u6bcf\u6761\u200b PTE \u200b\u90fd\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b 1024 \u200b\u4e2a\u200b\u8fde\u7eed\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5757\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5757\u200b\u7684\u200b\u5927\u5c0f\u200b\u4e3a\u200b 1024 * 4 KB = 4 MB\uff0c\u200b\u56e0\u6b64\u200b 1024 \u200b\u6761\u200b PTE \u200b\u5c31\u200b\u53ef\u4ee5\u200b\u8986\u76d6\u200b 32 \u200b\u4f4d\u200b\uff084 MB * 1024 = 4 GB = \\(2^{32}\\) B\uff09\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5757\u200b\u4e2d\u200b\u7684\u200b\u6240\u6709\u200b\u9875\u9762\u200b\u5747\u200b\u672a\u200b\u5206\u914d\u200b\uff0c\u200b\u5219\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\u5bf9\u5e94\u200b\u7684\u200b PTE \u200b\u4e3a\u7a7a\u200b\uff08\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b PTE 2\uff5e7\uff09\uff1b\u200b\u5982\u679c\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5757\u200b\u4e2d\u200b\u81f3\u5c11\u200b\u6709\u200b\u4e00\u4e2a\u200b\u9875\u9762\u200b\u5df2\u200b\u5206\u914d\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\u5bf9\u5e94\u200b\u7684\u200b PTE \u200b\u5c31\u200b\u6307\u5411\u200b\u4e8c\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u8be5\u200b\u5757\u200b\u7684\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\uff08\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b PTE 0\uff5e1\uff09\u3002\u200b\u4e8c\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u6761\u200b PTE \u200b\u90fd\u200b\u6620\u5c04\u200b\u5230\u200b\u4e00\u4e2a\u200b 4 KB \u200b\u7684\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u9875\u200b\uff0c\u200b\u8fd9\u200b\u4e0e\u200b\u6211\u4eec\u200b\u4e4b\u524d\u200b\u67e5\u770b\u200b\u7684\u200b\u5355\u7ea7\u200b\u9875\u8868\u200b\u76f8\u540c\u200b\u3002</p> <p>\u200b\u82e5\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\u7684\u200b PTE \u200b\u4e3a\u7a7a\u200b\uff0c\u200b\u90a3\u4e48\u200b\u4e8c\u7ea7\u200b\u9875\u8868\u200b\u5185\u200b\u5bf9\u5e94\u200b\u7684\u200b\u6761\u76ee\u200b\u5c31\u200b\u65e0\u9700\u200b\u5b58\u5728\u200b\u3002\u200b\u591a\u6570\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u5927\u90e8\u5206\u200b\u9875\u9762\u200b\u662f\u200b\u672a\u200b\u5206\u914d\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8fd9\u200b\u5c06\u200b\u663e\u8457\u200b\u5730\u200b\u964d\u4f4e\u200b\u9875\u8868\u200b\u7684\u200b\u5185\u5b58\u200b\u5360\u7528\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ea\u200b\u9700\u200b\u5728\u200b\u4e3b\u5b58\u200b\u4e2d\u200b\u7ef4\u62a4\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u548c\u200b\u88ab\u200b\u8c03\u7528\u200b\u6700\u4e3a\u200b\u9891\u7e41\u200b\u7684\u200b\u4e8c\u7ea7\u200b\u9875\u8868\u200b\uff0c\u200b\u5176\u5b83\u200b\u7684\u200b\u4e8c\u7ea7\u200b\u9875\u8868\u200b\u53ef\u4ee5\u200b\u7531\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u6309\u200b\u9700\u200b\u521b\u5efa\u200b\u548c\u200b\u5206\u9875\u200b\u3002</p> <p> \u200b\u5728\u200b k \u200b\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\uff0c\u200b\u865a\u62df\u5730\u5740\u200b\u88ab\u200b\u5212\u5206\u200b\u4e3a\u200b k \u200b\u4e2a\u200b VPN \u200b\u548c\u200b\u4e00\u4e2a\u200b VPO\uff0cVPN i\uff081 \u2264 i \u2264 k\uff09\u200b\u662f\u200b\u7b2c\u200b i \u200b\u7ea7\u200b\u9875\u8868\u200b\u7684\u200b\u7d22\u5f15\u200b\u3002\u200b\u9664\u200b\u7b2c\u200b k \u200b\u7ea7\u200b\u9875\u8868\u200b\u5916\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u9875\u8868\u200b\u4e2d\u200b\u7684\u200b PTE \u200b\u5747\u200b\u6307\u5411\u200b\u4e0b\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u7684\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u800c\u200b\u7b2c\u200b k \u200b\u7ea7\u8868\u5185\u200b\u7684\u200b\u6bcf\u6761\u200b PTE \u200b\u5219\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u5bf9\u5e94\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u7684\u200b PPN\u3002\u200b\u4e0e\u200b\u5355\u7ea7\u200b\u9875\u8868\u200b\u4e00\u6837\u200b\uff0cPPO \u200b\u4e0e\u200b VPO \u200b\u76f8\u540c\u200b\u3002MMU \u200b\u5fc5\u987b\u200b\u5148\u200b\u8bf7\u6c42\u200b k \u200b\u4e2a\u200b PTE\uff0c\u200b\u7136\u540e\u200b\u624d\u80fd\u200b\u786e\u5b9a\u200b PPN \u200b\u4ee5\u200b\u751f\u6210\u200b\u5b8c\u6574\u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\u3002TLB \u200b\u53ef\u4ee5\u200b\u7f13\u5b58\u200b\u591a\u7ea7\u200b\u9875\u8868\u200b\u4e2d\u200b\u7684\u200b PTE\uff0c\u200b\u8fd9\u200b\u4f7f\u5f97\u200b\u591a\u7ea7\u200b\u9875\u8868\u200b\u7684\u200b\u5730\u5740\u200b\u8f6c\u6362\u200b\u901f\u5ea6\u200b\u5e76\u4e0d\u6bd4\u200b\u5355\u7ea7\u200b\u9875\u8868\u200b\u6162\u200b\u5f88\u591a\u200b\u3002</p>"},{"location":"core/csapp/ch9/#intel-core-i7linux","title":"Intel Core i7/Linux \u200b\u5185\u5b58\u200b\u7cfb\u7edf","text":"<p>\u200b\u5c3d\u7ba1\u200b\u5e95\u5c42\u200b\u7684\u200b Haswell \u200b\u5fae\u200b\u67b6\u6784\u200b\u80fd\u591f\u200b\u652f\u6301\u200b\u5b8c\u6574\u200b\u7684\u200b 64 \u200b\u4f4d\u200b\u865a\u62df\u200b\u548c\u200b\u7269\u7406\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u4f46\u200b\u76ee\u524d\u200b Core i7 \u200b\u4ec5\u200b\u63d0\u4f9b\u200b\u4e86\u200b 48 \u200b\u4f4d\u200b (256 TB) \u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u548c\u200b 52 \u200b\u4f4d\u200b (4 PB ) \u200b\u7684\u200b\u7269\u7406\u5730\u5740\u200b\u7a7a\u95f4\u200b\uff0c\u200b\u4ee5\u53ca\u200b\u4e00\u4e2a\u200b\u652f\u6301\u200b 32 \u200b\u4f4d\u200b (4 GB) \u200b\u865a\u62df\u200b\u548c\u200b\u7269\u7406\u5730\u5740\u200b\u7a7a\u95f4\u200b\u7684\u200b\u517c\u5bb9\u200b\u6a21\u5f0f\u200b\u3002</p>"},{"location":"core/csapp/ch9/#core-i7","title":"Core i7 \u200b\u5730\u5740\u200b\u8f6c\u6362","text":"<p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cCore i7 \u200b\u4f7f\u7528\u200b\u56db\u7ea7\u200b\u9875\u8868\u200b\u7ed3\u6784\u200b\u3002CR 3 \u200b\u63a7\u5236\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u4fdd\u5b58\u200b\u4e86\u200b\u4e00\u7ea7\u200b (L1) \u200b\u9875\u8868\u200b\u7684\u200b\u8d77\u59cb\u200b\u7269\u7406\u5730\u5740\u200b\uff0c\u200b\u5176\u503c\u200b\u662f\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u7684\u200b\u4e00\u90e8\u5206\u200b\u5e76\u200b\u5728\u200b\u4e0a\u4e0b\u6587\u200b\u5207\u6362\u200b\u65f6\u200b\u6062\u590d\u200b\u300248 \u200b\u4f4d\u200b\u7684\u200b\u865a\u62df\u5730\u5740\u200b\u5305\u542b\u200b\u4e86\u200b 36 \u200b\u4f4d\u200b\u7684\u200b VPN \u200b\u548c\u200b 12 \u200b\u4f4d\u200b\uff084 K = \\(2^{12}\\)\uff09\u200b\u7684\u200b VPO\uff0c\u200b\u5176\u4e2d\u200b VPN \u200b\u53c8\u200b\u88ab\u200b\u5212\u5206\u200b\u4e3a\u200b\u56db\u4e2a\u200b 9 \u200b\u4f4d\u200b\u7684\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5757\u200b\u3002</p>"},{"location":"core/csapp/ch9/#linux","title":"Linux \u200b\u865a\u62df\u5185\u5b58\u200b\u7cfb\u7edf","text":"<p>\u200b\u6ce8\u200b\uff1a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u5730\u5740\u200b\u7a7a\u95f4\u200b\u91cc\u200b\u7684\u200b\u5185\u6838\u200b\u90e8\u5206\u200b\u90fd\u200b\u662f\u200b\u76f8\u540c\u200b\u7684\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\"Different for each process\"\u200b\u6709\u8bef\u200b\u3002</p> <p>Linux \u200b\u5c06\u200b\u865a\u62df\u5185\u5b58\u200b\u5212\u5206\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u533a\u57df\u200b\u6216\u6bb5\u200b\uff08Area \u200b\u6216\u200b Segment\uff09\uff0c\u200b\u6bcf\u4e2a\u200b\u533a\u57df\u200b\u90fd\u200b\u662f\u200b\u4e00\u4e9b\u200b\u5df2\u200b\u5206\u914d\u200b\u4e14\u200b\u5728\u200b\u67d0\u4e9b\u200b\u65b9\u9762\u200b\u76f8\u5173\u200b\u7684\u200b\u8fde\u7eed\u200b\u9875\u9762\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u4ee3\u7801\u6bb5\u200b\u3001\u200b\u6570\u636e\u200b\u6bb5\u200b\u3001\u200b\u5806\u200b\u3001\u200b\u5171\u4eab\u200b\u5e93\u6bb5\u200b\u548c\u200b\u7528\u6237\u200b\u6808\u200b\u5206\u522b\u200b\u662f\u200b\u4e0d\u540c\u200b\u7684\u200b\u533a\u57df\u200b\u3002\u200b\u6bcf\u4e2a\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b\u9875\u9762\u200b\u90fd\u200b\u5c5e\u4e8e\u200b\u67d0\u4e2a\u200b\u533a\u57df\u200b\uff0c\u200b\u56e0\u6b64\u200b\u4e0d\u200b\u5c5e\u4e8e\u200b\u4efb\u4f55\u200b\u533a\u57df\u200b\u7684\u200b\u9875\u9762\u200b\u4e0d\u200b\u5b58\u5728\u200b\u4e5f\u200b\u65e0\u6cd5\u200b\u88ab\u200b\u8fdb\u7a0b\u200b\u5f15\u7528\u200b\u3002\u200b\u533a\u57df\u200b\u6982\u5ff5\u200b\u7684\u200b\u5f15\u5165\u200b\u4f7f\u5f97\u200b Linux \u200b\u5141\u8bb8\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u5b58\u5728\u200b\u95f4\u9699\u200b\u3002</p> <p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cLinux \u200b\u5185\u6838\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u7ef4\u62a4\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u72ec\u7279\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b<code>task_struct</code>\uff0c\u200b\u5176\u5b57\u6bb5\u200b\u5305\u542b\u200b\u6216\u200b\u6307\u5411\u200b\u5185\u6838\u200b\u8fd0\u884c\u200b\u8be5\u200b\u8fdb\u7a0b\u200b\u6240\u200b\u9700\u200b\u7684\u200b\u5168\u90e8\u200b\u4fe1\u606f\u200b\uff08\u200b\u5982\u200b PID\u3001\u200b\u7528\u6237\u200b\u6808\u200b\u6307\u9488\u200b\u3001\u200b\u53ef\u200b\u6267\u884c\u200b\u76ee\u6807\u200b\u6587\u4ef6\u540d\u79f0\u200b\u548c\u200b\u7a0b\u5e8f\u200b\u5bc4\u5b58\u5668\u200b\u7b49\u200b\uff09\u3002\u200b\u5176\u4e2d\u200b\uff0c\u200b\u5b57\u200b\u6bb5\u200b<code>mm</code>\u200b\u6307\u5411\u200b<code>mm_struct</code>\uff0c\u200b\u8be5\u200b\u7ed3\u6784\u200b\u4f53\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u865a\u62df\u5185\u5b58\u200b\u7684\u200b\u5f53\u524d\u200b\u72b6\u6001\u200b\u3002<code>mm_struct</code>\u200b\u4e2d\u200b\u7684\u200b<code>pgd</code>\u200b\u5b57\u200b\u6bb5\u200b\u6307\u5411\u200b\u4e00\u7ea7\u200b\u9875\u8868\u200b\u7684\u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u5b83\u200b\u5728\u200b\u8fdb\u7a0b\u200b\u8fd0\u884c\u200b\u65f6\u200b\u88ab\u200b\u5185\u6838\u200b\u5b58\u50a8\u200b\u5728\u200b CR 3 \u200b\u63a7\u5236\u200b\u5bc4\u5b58\u5668\u200b\u4e2d\u200b\u3002\u200b\u800c\u200b<code>mmap</code>\u200b\u5b57\u6bb5\u200b\u5219\u200b\u6307\u5411\u200b\u4e00\u4e2a\u200b\u7531\u200b<code>vm_area_structs</code>\u200b\u7ec4\u6210\u200b\u7684\u200b\u94fe\u8868\u200b\u3002\u200b\u63cf\u8ff0\u200b\u533a\u57df\u200b\u4fe1\u606f\u200b\u7684\u200b\u7ed3\u6784\u200b\u4f53\u200b<code>vm_area_structs</code>\u200b\u5305\u542b\u200b\u4ee5\u4e0b\u200b\u5b57\u200b\u6bb5\u200b\uff1a</p> <ul> <li><code>vm_start</code>\uff1a\u200b\u6307\u5411\u200b\u533a\u57df\u200b\u7684\u200b\u8d77\u70b9\u200b\uff1b</li> <li><code>vm_end</code>\uff1a\u200b\u6307\u5411\u200b\u533a\u57df\u200b\u7684\u200b\u672b\u7aef\u200b\uff1b</li> <li><code>vm_prot</code>\uff1a\u200b\u63cf\u8ff0\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u6240\u6709\u200b\u9875\u9762\u200b\u7684\u200b\u8bfb\u200b/\u200b\u5199\u200b\u6743\u9650\u200b\uff1b</li> <li><code>vm_flags</code>\uff1a\u200b\u63cf\u8ff0\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\u662f\u5426\u200b\u4e0e\u200b\u5176\u4ed6\u200b\u8fdb\u7a0b\u200b\u5171\u4eab\u200b\uff1b</li> <li><code>vm_next</code>\uff1a\u200b\u6307\u5411\u200b\u94fe\u8868\u200b\u4e2d\u200b\u4e0b\u200b\u4e00\u4e2a\u200b<code>vm_area_structs</code>\u3002</li> </ul> <p> \u200b\u5f02\u5e38\u200b\u5904\u7406\u7a0b\u5e8f\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u865a\u62df\u5730\u5740\u200b\u4e0e\u200b<code>vm_start</code>\u200b\u548c\u200b<code>vm_end</code>\u200b\u5b57\u200b\u6bb5\u200b\u6bd4\u8f83\u200b\uff0c\u200b\u4ece\u800c\u200b\u5224\u65ad\u200b\u5b83\u200b\u662f\u5426\u200b\u5c5e\u4e8e\u200b\u67d0\u4e2a\u200b\u533a\u57df\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b \u2460\u3002\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u6839\u636e\u200b<code>vm_prot</code>\u200b\u5b57\u200b\u6bb5\u200b\u5224\u65ad\u200b\u8fdb\u7a0b\u200b\u662f\u5426\u200b\u6709\u200b\u6743\u9650\u200b\u8bbf\u95ee\u200b\u76ee\u6807\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b \u2461\u3002</p>"},{"location":"core/csapp/ch9/#_13","title":"\u5185\u5b58\u200b\u6620\u5c04","text":"<p>Linux \u200b\u4f7f\u7528\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\uff08Memory Mapping\uff09\u200b\u6280\u672f\u200b\u521d\u59cb\u5316\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u4e0e\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u201c\u200b\u5bf9\u8c61\u200b\u201d\u200b\u76f8\u5173\u8054\u200b\u3002\u200b\u8be5\u200b\u201c\u200b\u5bf9\u8c61\u200b\u201d\u200b\u6709\u200b\u4e24\u79cd\u200b\u7c7b\u578b\u200b\uff1a</p> <ul> <li>\u200b\u6587\u4ef6\u7cfb\u7edf\u200b\u4e2d\u200b\u7684\u200b\u5e38\u89c4\u200b\u6587\u4ef6\u200b\uff08Regular File\uff09\uff1a\u200b\u6587\u4ef6\u200b\u88ab\u200b\u5206\u6210\u200b\u591a\u4e2a\u200b\u4e0e\u200b\u9875\u9762\u200b\u5927\u5c0f\u200b\u76f8\u540c\u200b\u7684\u200b\u7247\u6bb5\u200b\uff0c\u200b\u800c\u200b\u6bcf\u4e2a\u200b\u7247\u6bb5\u200b\u90fd\u200b\u5305\u542b\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u7684\u200b\u521d\u59cb\u200b\u5185\u5bb9\u200b\u3002\u200b\u7531\u4e8e\u200b\u64cd\u4f5c\u7cfb\u7edf\u200b\u91c7\u7528\u200b\u6309\u200b\u9700\u200b\u5206\u9875\u200b\u7684\u200b\u7b56\u7565\u200b\uff0c\u200b\u56e0\u6b64\u200b\u9875\u9762\u200b\u5728\u200b\u7b2c\u4e00\u6b21\u200b\u88ab\u200b CPU \u200b\u5f15\u7528\u200b\u524d\u200b\u4e0d\u4f1a\u200b\u88ab\u200b\u6362\u5165\u200b\u5230\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u3002\u200b\u5982\u679c\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\u6bd4\u200b\u6587\u4ef6\u200b\u5927\u200b\uff0c\u200b\u5219\u200b\u591a\u4f59\u200b\u90e8\u5206\u200b\u7528\u200b\u96f6\u200b\u586b\u5145\u200b\uff1b</li> <li>\u200b\u533f\u540d\u200b\u6587\u4ef6\u200b\uff08Anonymous File\uff09\uff1a\u200b\u7531\u200b\u5185\u6838\u200b\u521b\u5efa\u200b\uff0c\u200b\u5176\u200b\u5185\u5bb9\u200b\u5168\u90e8\u200b\u4e3a\u200b\u4e8c\u8fdb\u5236\u200b\u96f6\u200b\u3002\u200b\u5f53\u200b CPU \u200b\u7b2c\u4e00\u6b21\u200b\u5f15\u7528\u200b\u8be5\u200b\u533a\u57df\u200b\u5185\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u5148\u200b\u5728\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u9009\u62e9\u200b\u4e00\u4e2a\u200b\u5408\u9002\u200b\u7684\u200b\u53d7\u5bb3\u8005\u200b\u9875\u9762\u200b\uff08\u200b\u82e5\u8be5\u200b\u9875\u9762\u200b\u5df2\u200b\u88ab\u200b\u4fee\u6539\u200b\u5219\u200b\u9700\u8981\u200b\u5c06\u200b\u5176\u6362\u200b\u51fa\u200b\uff09\u200b\u5e76\u7528\u200b\u4e8c\u8fdb\u5236\u200b\u96f6\u5c06\u200b\u5176\u200b\u8986\u76d6\u200b\uff0c\u200b\u7136\u540e\u200b\u66f4\u65b0\u200b\u9875\u8868\u200b\u4f7f\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u6307\u5411\u200b\u88ab\u200b\u8986\u76d6\u200b\u540e\u200b\u7684\u200b\u7269\u7406\u200b\u9875\u9762\u200b\u3002\u200b\u6574\u4e2a\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u6ca1\u6709\u200b\u6570\u636e\u200b\u88ab\u200b\u6362\u5165\u200b\u5230\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\uff0c\u200b\u56e0\u6b64\u200b\u8be5\u200b\u533a\u57df\u200b\u5185\u200b\u7684\u200b\u9875\u9762\u200b\u53c8\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u96f6\u200b\u9700\u6c42\u200b\u9875\u9762\u200b\uff08Demand-zero Page\uff09\u3002</li> </ul> <p>\u200b\u4e00\u65e6\u200b\u6211\u4eec\u200b\u4f7f\u7528\u200b\u5185\u5b58\u200b\u6620\u5c04\u200b\u521d\u59cb\u5316\u200b\u4e00\u4e2a\u200b\u865a\u62df\u200b\u9875\u9762\u200b\uff0c\u200b\u5b83\u200b\u5c31\u200b\u4f1a\u200b\u5728\u200b\u7531\u200b\u5185\u6838\u200b\u7ef4\u62a4\u200b\u7684\u200b\u4ea4\u6362\u6587\u4ef6\u200b\uff08Swap File\uff09\u200b\u4e0e\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e4b\u95f4\u200b\u6765\u56de\u200b\u4ea4\u6362\u200b\u3002\u200b\u4ea4\u6362\u6587\u4ef6\u200b\u53c8\u79f0\u200b\u4ea4\u6362\u200b\u533a\u200b\uff08Swap Area\uff09\u200b\u6216\u200b\u4ea4\u6362\u200b\u7a7a\u95f4\u200b\uff08Swap Space\uff09\uff0c\u200b\u5b83\u200b\u7684\u200b\u5927\u5c0f\u200b\u9650\u5236\u200b\u4e86\u200b\u5f53\u524d\u200b\u8fd0\u884c\u200b\u8fdb\u7a0b\u200b\u6240\u200b\u80fd\u200b\u7533\u8bf7\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u603b\u91cf\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_14","title":"\u56de\u770b\u200b\u5171\u4eab\u200b\u76ee\u6807\u200b\u6587\u4ef6","text":"<p> \u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0c\u200b\u4e24\u200b\u8fdb\u7a0b\u200b\u5c06\u200b\u76f8\u540c\u200b\u7684\u200b \u200b\u5171\u4eab\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b \u200b\u6620\u5c04\u200b\u5230\u200b\u5404\u81ea\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u7684\u200b\u4e0d\u540c\u200b\u533a\u57df\u200b\uff0c\u200b\u800c\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u200b\u53ea\u200b\u9700\u200b\u5b58\u5728\u200b\u5355\u4e2a\u200b\u6587\u4ef6\u200b\u526f\u672c\u200b\u3002\u200b\u8fdb\u7a0b\u200b 1 \u200b\u5bf9\u200b\u8be5\u200b\u5171\u4eab\u200b\u533a\u57df\u200b\u7684\u200b\u4efb\u4f55\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u5bf9\u200b\u8fdb\u7a0b\u200b 2 \u200b\u53ef\u89c1\u200b\uff0c\u200b\u5e76\u4e14\u200b\u8fd9\u4e9b\u200b\u66f4\u6539\u200b\u8fd8\u4f1a\u200b\u540c\u6b65\u200b\u5230\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u539f\u59cb\u200b\u6587\u4ef6\u200b\u3002</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b (a) \u200b\u6240\u793a\u200b\uff0c\u200b\u4e24\u200b\u8fdb\u7a0b\u200b\u5c06\u200b\u79c1\u6709\u200b\u76ee\u6807\u200b\u6587\u4ef6\u200b\u6620\u5c04\u200b\u5230\u200b\u5404\u81ea\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u7684\u200b\u4e0d\u540c\u200b\u533a\u57df\u200b\u3002\u200b\u8fdb\u7a0b\u200b 1 \u200b\u5bf9\u200b\u8be5\u200b\u79c1\u6709\u200b\u533a\u57df\u200b\u7684\u200b\u4efb\u4f55\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u90fd\u200b\u5bf9\u200b\u8fdb\u7a0b\u200b 2 \u200b\u4e0d\u200b\u53ef\u89c1\u200b\uff0c\u200b\u5e76\u4e14\u200b\u8fd9\u4e9b\u200b\u66f4\u6539\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u540c\u6b65\u200b\u5230\u200b\u78c1\u76d8\u200b\u4e0a\u200b\u7684\u200b\u539f\u59cb\u200b\u6587\u4ef6\u200b\u3002\u200b\u5982\u4e0a\u56fe\u200b (b) \u200b\u6240\u793a\u200b\uff0c\u200b\u5f53\u200b\u8fdb\u7a0b\u200b 2 \u200b\u8bd5\u56fe\u200b\u4fee\u6539\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u5185\u5bb9\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u200b\u5728\u200b\u7269\u7406\u200b\u5185\u5b58\u200b\u4e2d\u4e3a\u200b\u9875\u9762\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u526f\u672c\u200b\u5e76\u200b\u66f4\u65b0\u200b\u9875\u8868\u200b\u6761\u76ee\u200b\u4f7f\u200b\u5176\u200b\u6307\u5411\u200b\u5b83\u200b\u3002\u200b\u7531\u4e8e\u200b\u9875\u9762\u200b\u590d\u5236\u200b\u53d1\u751f\u200b\u5728\u200b\u5199\u5165\u200b\u64cd\u4f5c\u524d\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u6280\u672f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5199\u65f6\u200b\u590d\u5236\u200b\uff08Copy-on-Write\uff09\uff0c\u200b\u8fd9\u4e9b\u200b\u533a\u57df\u200b\u5219\u200b\u662f\u200b\u79c1\u6709\u200b\u5199\u65f6\u200b\u590d\u5236\u200b\u7684\u200b\uff08Private Copy-on-Write\uff09\u3002</p>"},{"location":"core/csapp/ch9/#fork","title":"\u56de\u770b\u200b fork \u200b\u51fd\u6570","text":"<p>\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b <code>fork</code> \u200b\u51fd\u6570\u200b\u540e\u200b\uff0c\u200b\u5185\u6838\u200b\u4f1a\u4e3a\u5b50\u200b\u8fdb\u7a0b\u200b\u5206\u914d\u200b\u4e00\u4e2a\u200b\u552f\u4e00\u200b\u7684\u200b PID \u200b\u5e76\u200b\u4e3a\u200b\u5176\u200b\u521b\u5efa\u200b\u4e0e\u200b\u7236\u200b\u8fdb\u7a0b\u200b\u76f8\u540c\u200b\u7684\u200b<code>mm_struct</code>\u3001<code>vm_area_structs</code>\u200b\u4ee5\u53ca\u200b\u9875\u8868\u200b\u3002\u200b\u5f53\u200b\u4efb\u610f\u200b\u8fdb\u7a0b\u200b\u540e\u7eed\u200b\u6267\u884c\u200b\u5199\u5165\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u5185\u6838\u200b\u5c06\u200b\u4f7f\u7528\u200b\u5199\u65f6\u200b\u590d\u5236\u6280\u672f\u200b\u521b\u5efa\u200b\u65b0\u9875\u9762\u200b\uff0c\u200b\u8fd9\u200b\u4fbf\u200b\u4fdd\u8bc1\u200b\u4e86\u200b\u8fdb\u7a0b\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u7684\u200b\u79c1\u6709\u200b\u6027\u200b\u3002</p>"},{"location":"core/csapp/ch9/#execve","title":"\u56de\u770b\u200b execve \u200b\u51fd\u6570","text":"<p>\u200b\u5982\u679c\u200b\u8fdb\u7a0b\u200b\u8c03\u7528\u200b <code>execve</code> \u200b\u51fd\u6570\u200b\uff0c\u200b\u5982\u200b<code>execve(\"a.out\", NULL, NULL)</code>\uff0c\u200b\u5219\u200b\u52a0\u8f7d\u200b\u5e76\u200b\u8fd0\u884c\u200b<code>a.out</code>\u200b\u7684\u200b\u6b65\u9aa4\u200b\u5982\u4e0b\u200b\uff1a</p> <ol> <li>\u200b\u5220\u9664\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u7528\u6237\u200b\u533a\u57df\u200b\u7684\u200b<code>vm_area_structs</code>\uff1b</li> <li>\u200b\u4e3a\u200b\u65b0\u200b\u7a0b\u5e8f\u200b\u7684\u200b\u4ee3\u7801\u200b\u3001\u200b\u6570\u636e\u200b\u3001bss \u200b\u548c\u200b\u5806\u6808\u200b\u533a\u57df\u200b\u521b\u5efa\u200b<code>vm_area_structs</code>\u3002\u200b\u8fd9\u4e9b\u200b\u533a\u57df\u200b\u90fd\u200b\u662f\u200b\u79c1\u6709\u200b\u5199\u65f6\u200b\u590d\u5236\u200b\u7684\u200b\uff0c\u200b\u4ee3\u7801\u200b\u548c\u200b\u6570\u636e\u200b\u533a\u57df\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b<code>a.out</code>\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b .text \u200b\u548c\u200b .data\uff0cbss \u200b\u533a\u57df\u200b\u5219\u200b\u88ab\u200b\u6620\u5c04\u200b\u5230\u200b\u5927\u5c0f\u200b\u5305\u542b\u200b\u5728\u200b<code>a.out</code>\u200b\u5185\u200b\u7684\u200b\u533f\u540d\u200b\u6587\u4ef6\u200b\u3002\u200b\u5806\u6808\u200b\u7684\u200b\u521d\u59cb\u200b\u957f\u5ea6\u200b\u5747\u200b\u4e3a\u200b 0\uff0c\u200b\u5176\u200b\u9875\u9762\u200b\u662f\u200b\u96f6\u200b\u9700\u6c42\u200b\u7684\u200b\uff1b</li> <li>\u200b\u5982\u679c\u200b<code>a.out</code>\u200b\u6587\u4ef6\u200b\u94fe\u63a5\u200b\u4e86\u200b\u5171\u4eab\u200b\u5e93\u200b\uff0c\u200b\u5982\u200b C \u200b\u6807\u51c6\u200b\u5e93\u200b<code>libc.so</code>\uff0c\u200b\u90a3\u4e48\u200b\u8fd8\u200b\u9700\u8981\u200b\u628a\u200b\u8fd9\u4e9b\u200b\u5bf9\u8c61\u200b\u52a8\u6001\u200b\u94fe\u63a5\u200b\u5230\u200b\u7a0b\u5e8f\u200b\u4e2d\u200b\uff0c\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u6620\u5c04\u200b\u5230\u200b\u865a\u62df\u5730\u5740\u200b\u7a7a\u95f4\u200b\u4e2d\u200b\u7684\u200b\u5171\u4eab\u200b\u533a\u57df\u200b\u5185\u200b\uff1b</li> <li>\u200b\u4f7f\u200b\u5f53\u524d\u200b\u8fdb\u7a0b\u200b\u4e0a\u4e0b\u6587\u200b\u4e2d\u200b\u7684\u200b\u7a0b\u5e8f\u200b\u8ba1\u6570\u5668\u200b\u6307\u5411\u200b\u65b0\u200b\u7a0b\u5e8f\u4ee3\u7801\u200b\u533a\u57df\u200b\u7684\u200b\u5165\u53e3\u200b\u70b9\u200b\u3002</li> </ol> <p></p>"},{"location":"core/csapp/ch9/#mmap","title":"mmap \u200b\u51fd\u6570","text":"<pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/mman.h&gt;\nvoid  *mmap(void *start, size_t length, int prot, int flags,\n            int fd, off_t offset);\n// Returns: pointer to mapped area if OK, MAP_FAILED (\u22121) on error\n</code></pre> <p><code>mmap</code>\u200b\u51fd\u6570\u200b\u8bf7\u6c42\u200b\u5185\u6838\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u8d77\u59cb\u200b\u5730\u5740\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>start</code>\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\uff0c\u200b\u8be5\u200b\u533a\u57df\u200b\u6620\u5c04\u200b\u5230\u200b\u6587\u4ef6\u200b\u63cf\u8ff0\u7b26\u200b<code>fd</code>\u200b\u6240\u200b\u6307\u5b9a\u200b\u7684\u200b\u5bf9\u8c61\u200b\u3002\u200b\u8fde\u7eed\u200b\u5bf9\u8c61\u200b\u7684\u200b\u957f\u5ea6\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>length</code>\uff0c\u200b\u5176\u200b\u9996\u90e8\u200b\u5728\u200b\u6587\u4ef6\u200b\u4e2d\u200b\u7684\u200b\u504f\u79fb\u91cf\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>offset</code>\uff1a</p> <p></p> <p>\u200b\u53c2\u6570\u200b<code>prot</code>\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u63cf\u8ff0\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\u8bbf\u95ee\u200b\u6743\u9650\u200b\u7684\u200b\u4f4d\u200b\uff0c\u200b\u5373\u200b<code>vm_area_structs</code>\u200b\u4e2d\u200b\u7684\u200b<code>vm_prot</code>\uff1a</p> <ul> <li><code>PROT_EXEC</code>\uff1a\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\u5305\u542b\u200b\u53ef\u200b\u6267\u884c\u200b\u6307\u4ee4\u200b\uff1b</li> <li><code>PROT_READ</code>\uff1a\u200b\u53ef\u4ee5\u200b\u9605\u8bfb\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\uff1b</li> <li><code>PROT_WRITE</code>\uff1a\u200b\u53ef\u4ee5\u200b\u5199\u5165\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\uff1b</li> <li><code>PROT_NONE</code>\uff1a\u200b\u65e0\u6cd5\u8bbf\u95ee\u200b\u8be5\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u9875\u9762\u200b\u3002</li> </ul> <p>\u200b\u53c2\u6570\u200b<code>flag</code>\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b\u63cf\u8ff0\u200b\u4e86\u200b\u6620\u5c04\u200b\u5bf9\u8c61\u200b\u7c7b\u578b\u200b\u7684\u200b\u4f4d\u200b\uff1a</p> <ul> <li><code>MAP_SHARED</code>\uff1a\u200b\u5171\u4eab\u200b\u5bf9\u8c61\u200b\uff1b</li> <li><code>MAP_PRIVATE</code>\uff1a\u200b\u79c1\u6709\u200b\u5199\u65f6\u200b\u590d\u5236\u200b\u5bf9\u8c61\u200b\uff1b</li> <li><code>MAP_ANON</code>\uff1a\u200b\u533f\u540d\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u865a\u62df\u200b\u9875\u9762\u200b\u662f\u200b\u96f6\u200b\u9700\u6c42\u200b\u9875\u9762\u200b\u3002</li> </ul> <p><code>munmap</code>\u200b\u51fd\u6570\u200b\u5220\u9664\u200b\u8d77\u200b\u59cb\u4e8e\u200b\u865a\u62df\u5730\u5740\u200b<code>start</code>\u3001\u200b\u957f\u5ea6\u200b\u4e3a\u200b<code>length</code>\u200b\u7684\u200b\u533a\u57df\u200b\uff0c\u200b\u540e\u7eed\u200b\u5bf9\u200b\u5df2\u200b\u5220\u9664\u200b\u533a\u57df\u200b\u7684\u200b\u5f15\u7528\u200b\u4f1a\u200b\u5f15\u53d1\u200b\u5206\u6bb5\u200b\u6545\u969c\u200b\u3002</p> <pre><code>#include &lt;unistd.h&gt;\n#include &lt;sys/mman.h&gt;\nint munmap(void *start, size_t length);\n// Returns: 0 if OK, \u22121 on error\n</code></pre>"},{"location":"core/csapp/ch9/#_15","title":"\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d","text":"<p>\u200b\u76f8\u6bd4\u200b\u4e8e\u200b\u4f4e\u7ea7\u200b\u522b\u7684\u200b<code>mmap</code>\u200b\u51fd\u6570\u200b\uff0cC \u200b\u7a0b\u5e8f\u5458\u200b\u66f4\u200b\u503e\u5411\u200b\u4e8e\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u8c03\u7528\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u5668\u200b\uff08Dynamic Memory Allocator\uff09\u200b\u6765\u200b\u521b\u5efa\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\u3002\u200b\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u5668\u200b\u4e3a\u200b\u8fdb\u7a0b\u200b\u7ef4\u62a4\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u533a\u57df\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5806\u200b\uff08Heap\uff09\uff0c\u200b\u5176\u200b\u4e00\u822c\u200b\u7ed3\u6784\u200b\u4e3a\u200b\uff1a</p> <p></p> <p>\u200b\u5806\u200b\u5411\u4e0a\u200b\u589e\u957f\u200b\uff0c\u200b\u5185\u6838\u200b\u4e3a\u200b\u6bcf\u4e2a\u200b\u8fdb\u7a0b\u200b\u90fd\u200b\u7ef4\u62a4\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b\u5806\u9876\u200b\u7684\u200b\u53d8\u91cf\u200b<code>brk</code>\u3002\u200b\u5206\u914d\u5668\u200b\u5c06\u200b\u5806\u200b\u770b\u4f5c\u200b\u4e00\u4e2a\u200b\u5305\u542b\u200b\u4e0d\u540c\u200b\u5c3a\u5bf8\u200b Block \u200b\u7684\u200b\u96c6\u5408\u200b\uff0c\u200b\u6bcf\u4e2a\u200b Block \u200b\u90fd\u200b\u662f\u200b\u4e00\u4e2a\u200b\u8fde\u7eed\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u5757\u200b\u3002Block \u200b\u6709\u200b\u4e24\u79cd\u200b\u72b6\u6001\u200b\uff0c\u200b\u5df2\u200b\u5206\u914d\u200b\uff08Allocated\uff09\u200b\u548c\u200b\u7a7a\u95f2\u200b\uff08Free\uff09\u3002\u200b\u6240\u6709\u200b\u5206\u914d\u5668\u200b\u5747\u200b\u663e\u5f0f\u200b\u5730\u4e3a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5206\u914d\u200b Block\uff0c\u200b\u4f46\u200b\u8d1f\u8d23\u200b\u91ca\u653e\u200b\u5df2\u200b\u5206\u914d\u200b Block \u200b\u7684\u200b\u5b9e\u4f53\u200b\u53ef\u80fd\u200b\u6709\u6240\u4e0d\u540c\u200b\uff1a</p> <ul> <li>\u200b\u663e\u5f0f\u200b\u5206\u914d\u5668\u200b\uff1a\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u663e\u5f0f\u200b\u5730\u200b\u91ca\u653e\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block\u3002C \u200b\u548c\u200b C++ \u200b\u7a0b\u5e8f\u200b\u5206\u522b\u200b\u8c03\u7528\u200b<code>malloc</code>\u200b\u548c\u200b<code>new</code>\u200b\u51fd\u6570\u200b\u8bf7\u6c42\u200b Block\uff0c\u200b\u8c03\u7528\u200b<code>free</code>\u200b\u548c\u200b<code>delete</code>\u200b\u51fd\u6570\u200b\u91ca\u653e\u200b Block\uff1b</li> <li>\u200b\u9690\u5f0f\u200b\u5206\u914d\u5668\u200b\uff1a\u200b\u5206\u914d\u5668\u200b\u81ea\u884c\u200b\u91ca\u653e\u200b\u7a0b\u5e8f\u200b\u4e0d\u518d\u200b\u4f7f\u7528\u200b\u7684\u200b\u5df2\u200b\u5206\u914d\u200b Block\uff0c\u200b\u8be5\u200b\u8fc7\u7a0b\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5783\u573e\u200b\u56de\u6536\u200b\uff08Garbage Collection\uff09\u3002Lisp\u3001ML \u200b\u548c\u200b Java \u200b\u7b49\u200b\u9ad8\u7ea7\u200b\u8bed\u8a00\u200b\u5747\u200b\u91c7\u7528\u200b\u8fd9\u79cd\u200b\u65b9\u6cd5\u200b\u3002</li> </ul>"},{"location":"core/csapp/ch9/#malloc-free","title":"malloc \u200b\u548c\u200b free \u200b\u51fd\u6570","text":"<pre><code>#include &lt;stdlib.h&gt;\nvoid *malloc(size_t size);\n// Returns: pointer to allocated block if OK, NULL on error\n</code></pre> <p><code>malloc</code>\u200b\u51fd\u6570\u200b\u8bf7\u6c42\u200b\u5806\u4e2d\u200b\u7684\u200b\u4e00\u5757\u200b Block \u200b\u5e76\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u8be5\u200b Block \u200b\u7684\u200b\u6307\u9488\u200b\u3002Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u81f3\u5c11\u200b\u4e3a\u200b\u53c2\u6570\u200b<code>size</code>\uff0c\u200b\u5e76\u200b\u53ef\u80fd\u200b\u6839\u636e\u200b\u5176\u200b\u4fdd\u5b58\u200b\u7684\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\u7c7b\u578b\u200b\u8fdb\u884c\u200b\u9002\u5f53\u200b\u5bf9\u9f50\u200b\u3002\u200b\u5728\u200b 32 \u200b\u4f4d\u200b\u7f16\u8bd1\u200b\u6a21\u5f0f\u200b\u4e0b\u200b\uff0cBlock \u200b\u7684\u200b\u5730\u5740\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 8 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u800c\u200b\u5728\u200b 64 \u200b\u4f4d\u4e2d\u200b\u5219\u200b\u4e3a\u200b 16 \u200b\u7684\u200b\u500d\u6570\u200b\u3002\u200b\u5982\u679c\u200b\u6267\u884c\u200b<code>malloc</code>\u200b\u9047\u5230\u200b\u95ee\u9898\u200b\uff0c\u200b\u5982\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u7684\u200b Block \u200b\u5927\u5c0f\u200b\u8d85\u8fc7\u200b\u4e86\u200b\u53ef\u7528\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\uff0c\u200b\u5219\u200b\u51fd\u6570\u200b\u8fd4\u56de\u200b<code>NULL</code>\u200b\u5e76\u200b\u8bbe\u7f6e\u200b <code>errno</code>\u3002\u200b\u6211\u4eec\u200b\u8fd8\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b<code>malloc</code>\u200b\u7684\u200b\u5305\u88c5\u200b\u51fd\u6570\u200b<code>calloc</code>\uff0c\u200b\u5b83\u4f1a\u200b\u5c06\u200b\u5206\u914d\u200b\u7684\u200b\u5185\u5b58\u200b\u521d\u59cb\u5316\u200b\u4e3a\u200b\u96f6\u200b\u3002\u200b\u7c7b\u4f3c\u200b\u5730\u200b\uff0c<code>realloc</code>\u200b\u51fd\u6570\u200b\u53ef\u4ee5\u200b\u66f4\u6539\u200b\u5df2\u200b\u5206\u914d\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u3002</p> <pre><code>#include &lt;unistd.h&gt;\nvoid *sbrk(intptr_t incr);\n// Returns: old brk pointer on success, \u22121 on error\n</code></pre> <p><code>sbrk</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u53c2\u6570\u200b<code>incr</code>\u200b\u4e0e\u200b\u5185\u6838\u200b\u4e2d\u200b\u7684\u200b<code>brk</code>\u200b\u6307\u9488\u200b\u76f8\u200b\u52a0\u4ee5\u200b\u589e\u5927\u200b\u6216\u200b\u7f29\u5c0f\u200b\u5806\u200b\u3002\u200b\u82e5\u200b\u6267\u884c\u200b\u6210\u529f\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b<code>brk</code>\u200b\u7684\u200b\u65e7\u503c\u200b\uff0c\u200b\u5426\u5219\u200b\u5c06\u200b\u8fd4\u56de\u200b -1 \u200b\u5e76\u200b\u5c06\u200b<code>errno</code>\u200b\u8bbe\u7f6e\u200b\u4e3a\u200b<code>ENOMEM</code>\u3002</p> <pre><code>#include &lt;stdlib.h&gt;\nvoid free(void *ptr);\n// Returns: nothing\n</code></pre> <p><code>free</code>\u200b\u51fd\u6570\u200b\u5c06\u200b\u53c2\u6570\u200b<code>ptr</code>\u200b\u6307\u5411\u200b\u7684\u200b Block \u200b\u91ca\u653e\u200b\uff0c\u200b\u800c\u200b\u8fd9\u4e9b\u200b Block \u200b\u5fc5\u987b\u200b\u662f\u200b\u7531\u200b<code>malloc</code>\u3001<code>calloc</code>\u200b\u6216\u200b<code>realloc</code>\u200b\u5206\u914d\u200b\u7684\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u6ca1\u6709\u200b\u8fd4\u56de\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f88\u200b\u5bb9\u6613\u200b\u4ea7\u751f\u200b\u4e00\u4e9b\u200b\u4ee4\u4eba\u8d39\u89e3\u200b\u7684\u200b\u8fd0\u884c\u200b\u65f6\u200b\u9519\u8bef\u200b\u3002</p> <p> \u200b\u4e0a\u200b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b C \u200b\u7a0b\u5e8f\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b<code>malloc</code>\u200b\u548c\u200b<code>free</code>\u200b\u7ba1\u7406\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u4e3a\u200b 16 \u200b\u5b57\u200b\uff08\u200b\u5b57\u957f\u200b\u4e3a\u200b 4 \u200b\u5b57\u8282\u200b\uff09\u200b\u7684\u200b\u5806\u200b\u3002\u200b\u56fe\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u65b9\u6846\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u5b57\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u88ab\u200b\u7c97\u7ebf\u200b\u5206\u9694\u200b\u7684\u200b\u77e9\u5f62\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b Block\u3002\u200b\u6709\u200b\u9634\u5f71\u200b\u7684\u200b Block \u200b\u4ee3\u8868\u200b\u5df2\u200b\u5206\u914d\u200b\uff0c\u200b\u65e0\u200b\u9634\u5f71\u200b\u7684\u200b Block \u200b\u5219\u200b\u4ee3\u8868\u200b\u7a7a\u95f2\u200b\u3002</p> <p>\u200b\u5982\u4e0a\u56fe\u200b (a) \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b 4 \u200b\u5b57\u200b\u7684\u200b Block\uff0c<code>malloc</code>\u200b\u4ece\u200b\u7a7a\u95f2\u200b\u5757\u200b\u4e2d\u5207\u200b\u51fa\u200b\u4e00\u4e2a\u200b 4 \u200b\u5b57\u200b\u7684\u200b Block \u200b\u5e76\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u8be5\u200b Block \u200b\u4e2d\u200b\u7b2c\u4e00\u4e2a\u200b\u5b57\u200b\u7684\u200b\u6307\u9488\u200b<code>p1</code>\uff1b\u200b\u5982\u4e0a\u56fe\u200b (b) \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b 5 \u200b\u5b57\u200b\u7684\u200b Block\uff0c<code>malloc</code>\u200b\u4ece\u200b\u7a7a\u95f2\u200b\u5757\u200b\u4e2d\u5207\u200b\u51fa\u200b\u4e00\u4e2a\u200b 6 \u200b\u5b57\u200b\u7684\u200b Block \u200b\u4ee5\u200b\u5b9e\u73b0\u200b\u53cc\u5b57\u200b\u5bf9\u9f50\u200b\uff1b\u200b\u5982\u4e0a\u56fe\u200b \u00a9 \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b 6 \u200b\u5b57\u200b\u7684\u200b Block\uff0c<code>malloc</code>\u200b\u4ece\u200b\u7a7a\u95f2\u200b\u5757\u200b\u4e2d\u5207\u200b\u51fa\u200b\u4e00\u4e2a\u200b 6 \u200b\u5b57\u200b\u7684\u200b Block\uff1b\u200b\u5982\u4e0a\u56fe\u200b (d) \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u91ca\u653e\u200b\u56fe\u200b (b) \u200b\u4e2d\u200b\u5206\u914d\u200b\u7684\u200b Block\u3002<code>free</code>\u200b\u8fd4\u56de\u200b\u540e\u200b\uff0c\u200b\u6307\u9488\u200b<code>p2</code>\u200b\u4f9d\u7136\u200b\u6307\u5411\u200b\u5df2\u200b\u91ca\u653e\u200b\u7684\u200b Block\uff0c\u200b\u56e0\u6b64\u200b\u7a0b\u5e8f\u200b\u4e0d\u5e94\u200b\u5728\u200b\u91cd\u65b0\u200b\u521d\u59cb\u5316\u200b<code>p2</code>\u200b\u524d\u200b\u7ee7\u7eed\u200b\u4f7f\u7528\u200b\u5b83\u200b\uff1b\u200b\u5982\u4e0a\u56fe\u200b (e) \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b 2 \u200b\u5b57\u200b\u7684\u200b Block\u3002<code>malloc</code>\u200b\u4ece\u200b\u4e0a\u200b\u4e00\u6b65\u200b\u91ca\u653e\u200b\u7684\u200b Block \u200b\u4e2d\u5207\u200b\u51fa\u200b\u4e00\u90e8\u5206\u200b\u5e76\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u65b0\u200b Block \u200b\u7684\u200b\u6307\u9488\u200b<code>p4</code>\u3002</p>"},{"location":"core/csapp/ch9/#_16","title":"\u52a8\u6001\u5185\u5b58\u200b\u5206\u914d\u200b\u7684\u200b\u539f\u56e0","text":"<p>\u200b\u5728\u200b\u7a0b\u5e8f\u200b\u5b9e\u9645\u200b\u8fd0\u884c\u200b\u4e4b\u524d\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u80fd\u200b\u5e76\u4e0d\u77e5\u9053\u200b\u67d0\u4e9b\u200b\u6570\u636e\u7ed3\u6784\u200b\u7684\u200b\u5927\u5c0f\u200b\u3002\u200b\u793a\u4f8b\u200b C \u200b\u7a0b\u5e8f\u200b\u5c06\u200b<code>n</code>\u200b\u4e2a\u200b ASCII \u200b\u6574\u578b\u200b\u4ece\u200b\u6807\u51c6\u200b\u8f93\u5165\u200b\u8bfb\u53d6\u200b\u5230\u200b\u6570\u7ec4\u200b<code>array[MAXN]</code>\u200b\u4e2d\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n#define MAXN 15213\n\nint array[MAXN];\n\nint main()\n{\n    int i, n;\n    scanf(\"%d\", &amp;n);\n    if (n &gt; MAXN)\n        app_error(\"Input file too big\");\n    for (i = 0; i &lt; n; i++)\n        scanf(\"%d\", &amp;array[i]);\n    exit(0);\n}\n</code></pre> <p>\u200b\u7531\u4e8e\u200b\u6211\u4eec\u200b\u65e0\u6cd5\u200b\u9884\u6d4b\u200b<code>n</code>\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u53ea\u80fd\u200b\u5c06\u200b\u6570\u7ec4\u200b\u5927\u5c0f\u5199\u200b\u6b7b\u4e3a\u200b<code>MAXN</code>\u3002<code>MAXN</code>\u200b\u7684\u200b\u503c\u200b\u662f\u200b\u4efb\u610f\u200b\u7684\u200b\uff0c\u200b\u53ef\u80fd\u200b\u8d85\u51fa\u200b\u7cfb\u7edf\u200b\u53ef\u7528\u200b\u7684\u200b\u865a\u62df\u5185\u5b58\u200b\u91cf\u200b\u3002\u200b\u53e6\u5916\u200b\uff0c\u200b\u4e00\u65e6\u200b\u7a0b\u5e8f\u200b\u60f3\u8981\u200b\u8bfb\u53d6\u200b\u4e00\u4e2a\u200b\u6bd4\u200b<code>MAXN</code>\u200b\u8fd8\u200b\u5927\u200b\u7684\u200b\u6587\u4ef6\u200b\uff0c\u200b\u552f\u4e00\u200b\u7684\u200b\u529e\u6cd5\u200b\u5c31\u662f\u200b\u589e\u5927\u200b<code>MAXN</code>\u200b\u7684\u200b\u503c\u200b\u5e76\u200b\u91cd\u65b0\u200b\u7f16\u8bd1\u7a0b\u5e8f\u200b\u3002\u200b\u5982\u679c\u200b\u6211\u4eec\u200b\u5728\u200b\u8fd0\u884c\u200b\u65f6\u200b\u6839\u636e\u200b<code>n</code>\u200b\u7684\u200b\u5927\u5c0f\u200b\u52a8\u6001\u200b\u5206\u914d\u5185\u5b58\u200b\uff0c\u200b\u4ee5\u4e0a\u200b\u95ee\u9898\u200b\u4fbf\u200b\u8fce\u5203\u800c\u89e3\u200b\uff1a</p> <pre><code>#include \"csapp.h\"\n\nint main()\n{\n    int *array, i, n;\n    scanf(\"%d\", &amp;n);\n    array = (int *)Malloc(n * sizeof(int));\n    for (i = 0; i &lt; n; i++)\n        scanf(\"%d\", &amp;array[i]);\n    free(array);\n    exit(0);\n}\n</code></pre>"},{"location":"core/csapp/ch9/#_17","title":"\u5bf9\u200b\u5206\u914d\u5668\u200b\u7684\u200b\u8981\u6c42\u200b\u548c\u200b\u76ee\u6807","text":"<p>\u200b\u663e\u5f0f\u200b\u5206\u914d\u5668\u200b\u5fc5\u987b\u200b\u5728\u200b\u82e5\u5e72\u200b\u9650\u5236\u200b\u6761\u4ef6\u200b\u4e0b\u200b\u8fd0\u884c\u200b\uff1a</p> <ul> <li>\u200b\u5904\u7406\u200b\u4efb\u610f\u200b\u987a\u5e8f\u200b\u7684\u200b\u8bf7\u6c42\u200b\uff1a\u200b\u5206\u914d\u5668\u200b\u4e0d\u80fd\u200b\u5bf9\u200b<code>malloc</code>\u200b\u548c\u200b<code>free</code>\u200b\u7684\u200b\u8bf7\u6c42\u200b\u987a\u5e8f\u200b\u4f5c\u51fa\u200b\u5047\u8bbe\u200b\u3002\u200b\u4f8b\u5982\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u4e0d\u80fd\u200b\u5047\u8bbe\u200b\u6240\u6709\u200b\u7684\u200b<code>malloc</code>\u200b\u90fd\u200b\u7d27\u8ddf\u200b\u4e00\u4e2a\u200b\u4e0e\u200b\u4e4b\u200b\u5339\u914d\u200b\u7684\u200b<code>free</code>\uff1b</li> <li>\u200b\u7acb\u5373\u200b\u54cd\u5e94\u200b\u8bf7\u6c42\u200b\uff1a\u200b\u5206\u914d\u5668\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u8bf7\u6c42\u200b\u91cd\u65b0\u200b\u6392\u5e8f\u200b\u6216\u200b\u7f13\u51b2\u200b\uff08Buffer\uff09\u200b\u4ee5\u200b\u63d0\u9ad8\u200b\u6027\u80fd\u200b\uff1b</li> <li>\u200b\u4ec5\u200b\u4f7f\u7528\u200b\u5806\u200b\uff1a\u200b\u5206\u914d\u5668\u200b\u4f7f\u7528\u200b\u7684\u200b\u6570\u636e\u7ed3\u6784\u200b\u5fc5\u987b\u200b\u5b58\u50a8\u200b\u5728\u200b\u5806\u200b\u4e2d\u200b\uff1b</li> <li>\u200b\u5bf9\u9f50\u200b Block\uff1a\u200b\u5206\u914d\u5668\u200b\u5fc5\u987b\u200b\u5bf9\u9f50\u200b Block \u200b\u4ee5\u4f7f\u200b\u5176\u200b\u80fd\u591f\u200b\u5bb9\u7eb3\u200b\u4efb\u4f55\u200b\u7c7b\u578b\u200b\u7684\u200b\u6570\u636e\u200b\u5bf9\u8c61\u200b\uff1b</li> <li>\u200b\u4e0d\u200b\u4fee\u6539\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block\uff1a\u200b\u5206\u914d\u5668\u200b\u65e0\u6cd5\u200b\u4fee\u6539\u200b\u3001\u200b\u79fb\u52a8\u200b\u6216\u200b\u538b\u7f29\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block\u3002</li> </ul> <p>\u200b\u8861\u91cf\u200b\u5206\u914d\u5668\u200b\u6027\u80fd\u200b\u7684\u200b\u6307\u6807\u200b\u6709\u200b\uff1a</p> <ul> <li>\u200b\u541e\u5410\u91cf\u200b\uff08Throughput\uff09\uff1a\u200b\u5355\u4f4d\u200b\u65f6\u95f4\u200b\u5185\u200b\u5b8c\u6210\u200b\u7684\u200b\u8bf7\u6c42\u200b\u6570\u200b\uff1b</li> <li>\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\uff08Memory Utilization\uff09\uff1a\u200b\u5373\u5806\u200b\u5185\u5b58\u200b\u7684\u200b\u4f7f\u7528\u7387\u200b\u3002</li> </ul> <p>\u200b\u6700\u5927\u5316\u200b\u541e\u5410\u91cf\u200b\u548c\u200b\u6700\u5927\u5316\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u4e4b\u95f4\u200b\u5b58\u5728\u200b\u77db\u76fe\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5728\u200b\u8bbe\u8ba1\u200b\u5206\u914d\u5668\u200b\u65f6\u200b\u9700\u8981\u200b\u627e\u5230\u200b\u4e8c\u8005\u200b\u7684\u200b\u5e73\u8861\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_18","title":"\u788e\u7247","text":"<p>\u200b\u6211\u4eec\u200b\u5c06\u200b\u7a7a\u95f2\u200b\u5806\u200b\u5185\u5b58\u200b\u65e0\u6cd5\u200b\u6ee1\u8db3\u200b\u5206\u914d\u200b\u8bf7\u6c42\u200b\u7684\u200b\u73b0\u8c61\u200b\u79f0\u4e3a\u200b\u788e\u7247\u200b\uff08Fragmentation\uff09\uff0c\u200b\u5b83\u200b\u662f\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u4f4e\u200b\u7684\u200b\u4e3b\u8981\u200b\u539f\u56e0\u200b\u3002\u200b\u788e\u7247\u200b\u6709\u200b\u4e24\u79cd\u200b\u5f62\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u5185\u90e8\u200b\u788e\u7247\u200b\uff08Internal Fragmentation\uff09\uff1a\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block \u200b\u6bd4\u200b\u8fdb\u7a0b\u200b\u8bf7\u6c42\u200b\u7684\u200b Block\uff08\u200b\u5373\u200b Payload\uff09\u200b\u5927\u200b\uff0c\u200b\u901a\u5e38\u200b\u56e0\u200b\u5206\u914d\u5668\u200b\u4e3a\u200b\u6ee1\u8db3\u200b\u5bf9\u9f50\u200b\u8981\u6c42\u200b\u800c\u200b\u4ea7\u751f\u200b\uff1b</li> <li>\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\uff08External Fragmentation\uff09\uff1a\u200b\u7a7a\u95f2\u200b\u5185\u5b58\u200b\u5145\u8db3\u200b\u4f46\u200b\u5374\u200b\u6ca1\u6709\u200b\u7a7a\u95f2\u200b\u7684\u200b Block \u200b\u80fd\u591f\u200b\u6ee1\u8db3\u200b\u5206\u914d\u200b\u8bf7\u6c42\u200b\u3002\u200b\u4f8b\u5982\u200b\u5806\u4e2d\u200b\u6709\u200b 4 \u200b\u4e2a\u200b\u7a7a\u95f2\u200b\u7684\u200b\u5b57\u4e14\u200b\u5206\u5e03\u200b\u5728\u200b\u4e24\u4e2a\u200b\u4e0d\u200b\u76f8\u90bb\u200b\u7684\u200b Block \u200b\u4e0a\u200b\uff0c\u200b\u6b64\u65f6\u200b\u82e5\u200b\u8fdb\u7a0b\u200b\u7533\u8bf7\u200b\u4e00\u4e2a\u200b 4 \u200b\u5b57\u200b\u7684\u200b Block \u200b\u5c31\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\u3002</li> </ul> <p>\u200b\u5185\u90e8\u200b\u788e\u7247\u200b\u5f88\u200b\u5bb9\u6613\u200b\u91cf\u5316\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u53ea\u662f\u200b\u5df2\u200b\u5206\u914d\u200b Block \u200b\u4e0e\u200b Payload \u200b\u4e4b\u95f4\u200b\u5927\u5c0f\u200b\u5dee\u5f02\u200b\u7684\u200b\u603b\u548c\u200b\uff0c\u200b\u5176\u200b\u6570\u91cf\u200b\u4ec5\u200b\u53d6\u51b3\u4e8e\u200b\u5148\u524d\u200b\u7684\u200b\u8bf7\u6c42\u200b\u6a21\u5f0f\u200b\u548c\u200b\u5206\u914d\u5668\u200b\u7684\u200b\u5b9e\u73b0\u200b\u65b9\u5f0f\u200b\uff1b\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\u5219\u200b\u96be\u4ee5\u200b\u91cf\u5316\u200b\uff0c\u200b\u56e0\u4e3a\u200b\u5b83\u200b\u8fd8\u8981\u200b\u53d7\u5230\u200b\u672a\u6765\u200b\u8bf7\u6c42\u200b\u6a21\u5f0f\u200b\u7684\u200b\u5f71\u54cd\u200b\u3002\u200b\u4e3a\u4e86\u200b\u51cf\u5c11\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\u7684\u200b\u4ea7\u751f\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u529b\u6c42\u200b\u7ef4\u62a4\u200b\u5c11\u91cf\u200b\u8f83\u5927\u200b\u7684\u200b\u7a7a\u95f2\u200b Block \u200b\u800c\u200b\u975e\u200b\u5927\u91cf\u200b\u8f83\u200b\u5c0f\u200b\u7684\u200b\u7a7a\u95f2\u200b Block\u3002</p>"},{"location":"core/csapp/ch9/#_19","title":"\u5206\u914d\u5668\u200b\u7684\u200b\u5b9e\u73b0\u200b\u96be\u70b9","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u60f3\u8c61\u200b\u4e00\u4e2a\u200b\u7b80\u5355\u200b\u7684\u200b\u5206\u914d\u5668\u200b\uff0c\u200b\u5b83\u200b\u5c06\u200b\u5806\u200b\u770b\u4f5c\u200b\u4e00\u4e2a\u200b\u5927\u578b\u200b\u7684\u200b\u5b57\u8282\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6307\u9488\u200b<code>p</code>\u200b\u6307\u5411\u200b\u8be5\u200b\u6570\u7ec4\u200b\u7684\u200b\u7b2c\u4e00\u4e2a\u200b\u5b57\u8282\u200b\u3002\u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u8bf7\u6c42\u200b<code>size</code>\u200b\u5927\u5c0f\u200b\u7684\u200b Block \u200b\u65f6\u200b\uff0c<code>malloc</code>\u200b\u5148\u200b\u628a\u200b<code>p</code>\u200b\u7684\u200b\u5f53\u524d\u200b\u503c\u200b\u4fdd\u5b58\u200b\u5728\u200b\u6808\u200b\u4e2d\u200b\uff0c\u200b\u7136\u540e\u200b\u5c06\u200b\u5176\u200b\u52a0\u4e0a\u200b<code>size</code>\uff0c\u200b\u6700\u540e\u200b\u8fd4\u56de\u200b<code>p</code>\u200b\u7684\u200b\u65e7\u503c\u200b\u3002\u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u60f3\u8981\u200b\u91ca\u653e\u200b Block \u200b\u65f6\u200b\uff0c<code>free</code>\u200b\u5219\u200b\u53ea\u662f\u200b\u7b80\u5355\u200b\u5730\u200b\u8fd4\u56de\u200b\u7ed9\u200b\u8c03\u7528\u8005\u200b\u800c\u200b\u4e0d\u200b\u505a\u200b\u4efb\u4f55\u200b\u4e8b\u60c5\u200b\u3002</p> <p>\u200b\u7531\u4e8e\u200b<code>malloc</code>\u200b\u548c\u200b<code>free</code>\u200b\u4ec5\u200b\u7531\u200b\u5c11\u91cf\u200b\u6307\u4ee4\u200b\u7ec4\u6210\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u5206\u914d\u5668\u200b\u7684\u200b\u541e\u5410\u91cf\u200b\u5f88\u5927\u200b\u3002\u200b\u7136\u800c\u200b<code>malloc</code>\u200b\u4e0d\u4f1a\u200b\u91cd\u7528\u200b\u4efb\u4f55\u200b Block\uff0c\u200b\u56e0\u6b64\u200b\u5806\u200b\u5185\u5b58\u200b\u7684\u200b\u5229\u7528\u7387\u200b\u975e\u5e38\u4f4e\u200b\u3002\u200b\u80fd\u591f\u200b\u5728\u200b\u541e\u5410\u91cf\u200b\u548c\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u4e4b\u95f4\u200b\u53d6\u5f97\u200b\u826f\u597d\u200b\u5e73\u8861\u200b\u7684\u200b\u5206\u914d\u5668\u200b\u5fc5\u987b\u200b\u8003\u8651\u200b\u4ee5\u4e0b\u200b\u95ee\u9898\u200b\uff1a</p> <ul> <li>\u200b\u7ec4\u7ec7\u200b\uff08Organization\uff09\uff1a\u200b\u5982\u4f55\u200b\u8ddf\u8e2a\u200b\u7a7a\u95f2\u200b\u7684\u200b Block\uff1f</li> <li>\u200b\u653e\u7f6e\u200b\uff08Placement\uff09\uff1a\u200b\u5982\u4f55\u200b\u4ece\u200b\u7a7a\u95f2\u200b\u7684\u200b Block \u200b\u4e2d\u200b\u9009\u62e9\u200b\u5408\u9002\u200b\u7684\u200b\u6765\u200b\u653e\u7f6e\u200b\u65b0\u200b\u5206\u914d\u200b\u7684\u200b Block\uff1f</li> <li>\u200b\u5206\u5272\u200b\uff08Splitting\uff09\uff1a\u200b\u5b8c\u6210\u200b\u653e\u7f6e\u200b\u540e\u200b\uff0c\u200b\u5982\u4f55\u200b\u5904\u7406\u200b\u5269\u4f59\u200b\u7684\u200b\u7a7a\u95f2\u200b Block\uff1f</li> <li>\u200b\u5408\u5e76\u200b\uff08Coalescing\uff09\uff1a\u200b\u5982\u4f55\u200b\u5904\u7406\u200b\u521a\u521a\u200b\u88ab\u200b\u91ca\u653e\u200b\u7684\u200b Block\uff1f</li> </ul>"},{"location":"core/csapp/ch9/#_20","title":"\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868","text":"<p>\u200b\u5927\u591a\u6570\u200b\u5206\u914d\u5668\u200b\u901a\u8fc7\u200b\u5c06\u200b\u4e00\u4e9b\u200b\u6570\u636e\u7ed3\u6784\u200b\u5d4c\u5165\u200b\u5230\u200b Block \u200b\u4e2d\u4ee5\u200b\u5206\u8fa8\u200b\u5176\u200b\u8fb9\u754c\u200b\u548c\u200b\u72b6\u6001\u200b\uff0c\u200b\u4f8b\u5982\u200b\uff1a</p> <p></p> <p>\u200b\u5982\u4e0a\u56fe\u200b\u6240\u793a\u200b\uff0cBlock \u200b\u7531\u200b\u4e00\u4e2a\u200b\u5355\u5b57\u200b\uff08\u200b\u56db\u200b\u5b57\u8282\u200b\uff09\u200b\u7684\u200b\u5934\u90e8\u200b\uff08Header\uff09\u3001\u200b\u6709\u6548\u200b\u8d1f\u8f7d\u200b\uff08Payload\uff09\u200b\u548c\u200b\u4e00\u4e9b\u200b\u989d\u5916\u200b\u586b\u5145\u200b\uff08Padding\uff09\u200b\u7ec4\u6210\u200b\uff0c\u200b\u5934\u90e8\u200b\u4e2d\u200b\u5305\u542b\u200b\u4e86\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\uff08Block Size\uff09\u200b\u548c\u200b\u72b6\u6001\u200b\u4fe1\u606f\u200b\uff08Allocated or Free\uff09\u3002\u200b\u5982\u679c\u200b\u7cfb\u7edf\u200b\u91c7\u7528\u200b\u53cc\u5b57\u200b\u5bf9\u9f50\u200b\u7b56\u7565\u200b\uff0c\u200b\u90a3\u4e48\u200b\u6bcf\u4e2a\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 8 \u200b\u7684\u200b\u500d\u6570\u200b\uff0c\u200b\u5176\u200b\u4e8c\u8fdb\u5236\u200b\u8868\u8fbe\u200b\u7684\u200b\u540e\u200b 3 \u200b\u4f4d\u200b\u59cb\u7ec8\u200b\u4e3a\u200b 0\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u4ec5\u200b\u5728\u200b\u5934\u90e8\u200b\u4e2d\u200b\u5b58\u50a8\u200b\u8be5\u5b57\u200b\u6bb5\u200b\u7684\u200b\u524d\u200b 29 \u200b\u4f4d\u200b\uff0c\u200b\u5269\u4f59\u200b 3 \u200b\u4f4d\u200b\u7528\u6765\u200b\u5b58\u50a8\u200b\u5176\u4ed6\u200b\u4fe1\u606f\u200b\u3002\u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4f4d\u200b\u201ca\u201d\u200b\u4fbf\u200b\u6307\u793a\u200b\u4e86\u200b\u6b64\u200b Block \u200b\u662f\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b\u8fd8\u662f\u200b\u7a7a\u95f2\u200b\u7684\u200b\u3002\u200b\u586b\u5145\u200b\u7684\u200b\u5927\u5c0f\u200b\u662f\u200b\u4efb\u610f\u200b\u7684\u200b\uff0c\u200b\u5b83\u200b\u53ef\u80fd\u200b\u662f\u200b\u5206\u914d\u5668\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\u4ea7\u751f\u200b\u800c\u200b\u8bbe\u7f6e\u200b\u7684\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u80fd\u200b\u662f\u200b\u4e3a\u4e86\u200b\u6ee1\u8db3\u200b\u5bf9\u9f50\u200b\u8981\u6c42\u200b\u800c\u200b\u5b58\u5728\u200b\u7684\u200b\u3002</p> <p>\u200b\u57fa\u4e8e\u200b\u8fd9\u79cd\u200b Block \u200b\u683c\u5f0f\u200b\uff0c\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5806\u200b\u7ec4\u7ec7\u200b\u6210\u200b\u4e00\u7cfb\u5217\u200b\u8fde\u7eed\u200b\u7684\u200b\u5df2\u200b\u5206\u914d\u200b Block \u200b\u548c\u200b\u7a7a\u95f2\u200b Block\uff1a</p> <p> Block \u200b\u901a\u8fc7\u200b\u5176\u200b\u5934\u90e8\u200b\u4e2d\u200b\u7684\u200b\u5927\u5c0f\u200b\u5b57\u6bb5\u200b\u9690\u5f0f\u200b\u5730\u200b\u94fe\u63a5\u200b\u8d77\u6765\u200b\uff08addr(next_block) = addr(current_block) + block_size\uff09\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5c06\u200b\u8fd9\u79cd\u200b\u5806\u200b\u7ec4\u7ec7\u200b\u65b9\u5f0f\u200b\u79f0\u4e3a\u200b\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff08Implicit Free List\uff09\uff0c\u200b\u5206\u914d\u5668\u200b\u5fc5\u987b\u200b\u904d\u5386\u200b\u5806\u4e2d\u200b\u6240\u6709\u200b\u7684\u200b Block \u200b\u624d\u80fd\u200b\u5f97\u5230\u200b\u5168\u90e8\u200b\u7a7a\u95f2\u200b\u7684\u200b Block\u3002\u200b\u6211\u4eec\u200b\u8fd8\u200b\u9700\u8981\u200b\u4e00\u4e2a\u200b\u7279\u6b8a\u200b\u7684\u200b Block \u200b\u4ee5\u200b\u6807\u8bb0\u200b\u5806\u200b\u7684\u200b\u7ed3\u5c3e\u200b\uff0c\u200b\u5982\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b \u201c0/1\u201d\u3002\u200b\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u7684\u200b\u4f18\u70b9\u200b\u662f\u200b\u7b80\u5355\u200b\uff0c\u200b\u4f46\u200b\u4efb\u4f55\u200b\u641c\u7d22\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u64cd\u4f5c\u200b\uff08\u200b\u5982\u200b\u653e\u7f6e\u200b\u65b0\u200b\u5206\u914d\u200b\u7684\u200b Block\uff09\u200b\u7684\u200b\u6210\u672c\u200b\u90fd\u200b\u4e0e\u200b\u5806\u200b\u4e2d\u200b Block \u200b\u7684\u200b\u603b\u6570\u200b\u6210\u6b63\u6bd4\u200b\u3002</p>"},{"location":"core/csapp/ch9/#block","title":"\u653e\u7f6e\u200b\u65b0\u200b\u5206\u914d\u200b\u7684\u200b Block","text":"<p>\u200b\u5f53\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b Block \u200b\u65f6\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u9700\u8981\u200b\u5728\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u4e2d\u200b\u9009\u53d6\u200b\u4e00\u4e2a\u200b\u8db3\u591f\u200b\u5927\u200b\u7684\u200b Block \u200b\u4ee5\u200b\u54cd\u5e94\u200b\u3002\u200b\u5206\u914d\u5668\u200b\u641c\u7d22\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u65b9\u5f0f\u200b\u7531\u200b\u653e\u7f6e\u200b\u7b56\u7565\u200b\uff08Placement Policy\uff09\u200b\u6240\u200b\u51b3\u5b9a\u200b\uff1a</p> <ul> <li>\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\uff08First Fit\uff09\uff1a\u200b\u4ece\u5934\u5f00\u59cb\u200b\u904d\u5386\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5e76\u200b\u9009\u62e9\u200b\u7b2c\u4e00\u4e2a\u200b\u6ee1\u8db3\u6761\u4ef6\u200b\u7684\u200b Block\uff1b</li> <li>\u200b\u4e0b\u200b\u4e00\u6b21\u200b\u62df\u5408\u200b\uff08Next Fit\uff09\uff1a\u200b\u4ece\u200b\u4e0a\u200b\u4e00\u6b21\u200b\u641c\u7d22\u200b\u505c\u6b62\u200b\u7684\u200b\u5730\u65b9\u200b\u5f00\u59cb\u200b\u904d\u5386\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5e76\u200b\u9009\u62e9\u200b\u7b2c\u4e00\u4e2a\u200b\u6ee1\u8db3\u6761\u4ef6\u200b\u7684\u200b Block\uff1b</li> <li>\u200b\u6700\u4f73\u200b\u62df\u5408\u200b\uff08Best Fit\uff09\uff1a\u200b\u904d\u5386\u200b\u6240\u6709\u200b Block \u200b\u5e76\u200b\u9009\u62e9\u200b\u6ee1\u8db3\u6761\u4ef6\u200b\u4e14\u200b\u6700\u5c0f\u200b\u7684\u200b Block\u3002</li> </ul> <p>\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\u7684\u200b\u4f18\u70b9\u200b\u662f\u200b\u8f83\u5927\u200b\u7684\u200b Block \u200b\u901a\u5e38\u200b\u5b58\u7559\u200b\u5728\u200b\u94fe\u8868\u200b\u672b\u5c3e\u200b\uff0c\u200b\u4f46\u200b\u4e00\u4e9b\u200b\u8f83\u200b\u5c0f\u200b\u7684\u200b Block \u200b\u4e5f\u200b\u4f1a\u200b\u6563\u843d\u200b\u5728\u200b\u94fe\u8868\u200b\u5f00\u5934\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u589e\u52a0\u200b\u641c\u7d22\u200b\u8f83\u5927\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u3002\u200b\u5982\u679c\u200b\u94fe\u8868\u200b\u5f00\u5934\u200b\u5b58\u5728\u200b\u5927\u91cf\u200b\u8f83\u200b\u5c0f\u200b\u7684\u200b Block\uff0c\u200b\u4e0b\u200b\u4e00\u6b21\u200b\u62df\u5408\u200b\u5c31\u200b\u6bd4\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\u5feb\u200b\u5f88\u591a\u200b\u3002\u200b\u7136\u800c\u200b\u7814\u7a76\u200b\u8868\u660e\u200b\uff0c\u200b\u4e0b\u200b\u4e00\u6b21\u200b\u62df\u5408\u200b\u7684\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u6bd4\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\u4f4e\u200b\u3002\u200b\u6700\u4f73\u200b\u62df\u5408\u200b\u7684\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u901a\u5e38\u200b\u6bd4\u200b\u5176\u4ed6\u200b\u4e24\u79cd\u200b\u7b56\u7565\u200b\u9ad8\u200b\uff0c\u200b\u4f46\u200b\u5bf9\u200b\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u6765\u8bf4\u200b\uff0c\u200b\u5176\u200b\u641c\u7d22\u200b\u65f6\u95f4\u200b\u663e\u7136\u200b\u8981\u200b\u6bd4\u200b\u5b83\u4eec\u200b\u6162\u200b\u5f88\u591a\u200b\u3002</p>"},{"location":"core/csapp/ch9/#block_1","title":"\u5206\u5272\u200b\u7a7a\u95f2\u200b\u7684\u200b Block","text":"<p>\u200b\u5982\u679c\u200b\u5206\u914d\u5668\u200b\u627e\u5230\u200b\u4e86\u200b\u5408\u9002\u200b\u7684\u200b Block \u200b\u5e76\u200b\u5c06\u200b\u6574\u4e2a\u200b Block \u200b\u5206\u914d\u200b\u7ed9\u200b\u7a0b\u5e8f\u200b\uff0c\u200b\u5c31\u200b\u6709\u200b\u53ef\u80fd\u200b\u4ea7\u751f\u200b\u5185\u90e8\u200b\u788e\u7247\u200b\u3002\u200b\u4e3a\u4e86\u200b\u907f\u514d\u200b\u8fd9\u4e00\u200b\u95ee\u9898\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u9009\u53d6\u200b\u7684\u200b Block \u200b\u5206\u6210\u200b\u4e00\u4e2a\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block \u200b\u548c\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u7a7a\u95f2\u200b Block\uff1a</p> <p> \u200b\u5982\u56fe\u200b 9.37 \u200b\u6240\u793a\u200b\uff0c\u200b\u7a0b\u5e8f\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b 3 \u200b\u5b57\u200b\u7684\u200b Block\uff0c\u200b\u4e8e\u662f\u200b\u5206\u914d\u5668\u200b\u5c06\u200b\u56fe\u200b 9.36 \u200b\u4e2d\u200b 8 \u200b\u5b57\u200b\u7684\u200b\u7a7a\u95f2\u200b Block \u200b\u62c6\u200b\u5206\u4e3a\u200b\u4e24\u4e2a\u200b 4 \u200b\u5b57\u200b\u7684\u200b Block \u200b\u5e76\u200b\u5c06\u200b\u5176\u4e2d\u200b\u4e4b\u4e00\u200b\u5206\u914d\u200b\u7ed9\u200b\u5b83\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_21","title":"\u83b7\u53d6\u200b\u989d\u5916\u200b\u7684\u200b\u5806\u200b\u5185\u5b58","text":"<p>\u200b\u5982\u679c\u200b\u5206\u914d\u5668\u200b\u65e0\u6cd5\u200b\u627e\u5230\u200b\u5408\u9002\u200b\u7684\u200b Block\uff0c\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u5c1d\u8bd5\u200b\u5c06\u200b\u76f8\u90bb\u200b\u7684\u200b\u7a7a\u95f2\u200b Block \u200b\u5408\u5e76\u200b\u4ee5\u200b\u83b7\u53d6\u200b\u66f4\u5927\u200b\u7684\u200b Block\u3002\u200b\u4f46\u200b\u5982\u679c\u200b\u4ecd\u7136\u200b\u65e0\u6cd5\u200b\u6ee1\u8db3\u200b\u8bf7\u6c42\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u4fbf\u4f1a\u200b\u8c03\u7528\u200b<code>sbrk</code>\u200b\u51fd\u6570\u200b\u5411\u200b\u5185\u6838\u200b\u8bf7\u6c42\u200b\u989d\u5916\u200b\u7684\u200b\u5806\u200b\u5185\u5b58\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u65b0\u200b\u7684\u200b\u7a7a\u95f2\u200b Block\u3002</p>"},{"location":"core/csapp/ch9/#block_2","title":"\u5408\u5e76\u200b\u7a7a\u95f2\u200b\u7684\u200b Block","text":"<p>\u200b\u5206\u914d\u5668\u200b\u91ca\u653e\u200b Block \u200b\u540e\u200b\uff0c\u200b\u53ef\u80fd\u200b\u4f1a\u200b\u6709\u200b\u5176\u4ed6\u200b\u7a7a\u95f2\u200b\u7684\u200b Block \u200b\u4e0e\u200b\u4e4b\u200b\u76f8\u90bb\u200b\u3002\u200b\u6b64\u65f6\u200b\u5185\u5b58\u200b\u4e2d\u5c06\u200b\u4ea7\u751f\u200b\u4e00\u79cd\u200b\u7279\u6b8a\u200b\u7684\u200b\u5916\u90e8\u200b\u788e\u7247\u200b\u73b0\u8c61\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u5176\u4e3a\u200b\u865a\u5047\u200b\u788e\u7247\u200b\uff08False Fagmentation\uff09\u3002</p> <p> \u200b\u5982\u56fe\u200b 9.38 \u200b\u6240\u793a\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u5c06\u200b\u56fe\u200b 9.37 \u200b\u4e2d\u200b\u7b2c\u4e8c\u4e2a\u200b 4 \u200b\u5b57\u200b Block \u200b\u91ca\u653e\u200b\u3002\u200b\u5c3d\u7ba1\u200b\u4e24\u4e2a\u200b\u8fde\u7eed\u200b\u7a7a\u95f2\u200b Block \u200b\u4e2d\u5747\u200b\u6709\u200b 3 \u200b\u5b57\u200b\u7684\u200b\u6709\u6548\u200b\u8d1f\u8f7d\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4e5f\u200b\u65e0\u6cd5\u200b\u6ee1\u8db3\u200b\u4e00\u4e2a\u200b 4 \u200b\u5b57\u200b\u7684\u200b\u5206\u914d\u200b\u8bf7\u6c42\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u5fc5\u987b\u200b\u5c06\u200b\u76f8\u90bb\u200b\u7a7a\u95f2\u200b\u7684\u200b Block \u200b\u5408\u5e76\u200b\u3002</p> <p>\u200b\u5206\u914d\u5668\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6bcf\u6b21\u200b\u91ca\u653e\u200b Block \u200b\u540e\u200b\u7acb\u5373\u200b\u5408\u5e76\u200b Block\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u7b49\u5230\u200b\u67d0\u4e2a\u200b\u65f6\u523b\u200b\uff0c\u200b\u6bd4\u5982\u200b\u5206\u914d\u200b\u8bf7\u6c42\u200b\u5931\u8d25\u200b\u65f6\u624d\u200b\u5408\u5e76\u200b\u5806\u4e2d\u200b\u6240\u6709\u200b\u7a7a\u95f2\u200b\u7684\u200b Block\u3002\u200b\u7acb\u5373\u200b\u5408\u5e76\u200b\u5f88\u200b\u7b80\u5355\u200b\uff0c\u200b\u4f46\u200b\u5b83\u200b\u4e5f\u200b\u6709\u200b\u53ef\u80fd\u200b\u9020\u6210\u200b\u201c\u200b\u98a0\u7c38\u200b\u201d\uff0c\u200b\u5373\u200b\u67d0\u4e2a\u200b Block \u200b\u5728\u200b\u77ed\u65f6\u95f4\u200b\u5185\u200b\u88ab\u200b\u591a\u6b21\u200b\u5408\u5e76\u200b\u548c\u200b\u5206\u5272\u200b\u3002</p>"},{"location":"core/csapp/ch9/#block_3","title":"\u4f7f\u7528\u200b\u8fb9\u754c\u200b\u6807\u8bb0\u200b\u5408\u5e76\u200b Block","text":"<p>\u200b\u6211\u4eec\u200b\u628a\u200b\u5373\u5c06\u200b\u91ca\u653e\u200b\u7684\u200b Block \u200b\u79f0\u4e3a\u200b\u5f53\u524d\u200b\uff08Current\uff09Block\uff0c\u200b\u5176\u200b\u5934\u90e8\u200b\u6307\u5411\u200b\u4e0b\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u5934\u90e8\u200b\uff08addr(next_block) = addr(current_block) + block_size\uff09\u3002\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u5f88\u200b\u5bb9\u6613\u200b\u5224\u65ad\u200b\u4e0b\u200b\u4e00\u4e2a\u200b Block \u200b\u662f\u5426\u200b\u7a7a\u95f2\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ea\u200b\u9700\u200b\u5c06\u200b\u5f53\u524d\u200b Block \u200b\u5934\u90e8\u200b\u4e2d\u200b\u7684\u200b\u5927\u5c0f\u200b\u5b57\u6bb5\u200b\u4e0e\u200b\u4e4b\u200b\u76f8\u52a0\u200b\u5373\u53ef\u200b\u5b8c\u6210\u200b\u5408\u5e76\u200b\u3002</p> <p>\u200b\u4f46\u200b\u82e5\u200b\u8981\u200b\u5408\u5e76\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block\uff0c\u200b\u6211\u4eec\u200b\u53ea\u80fd\u200b\u904d\u5386\u200b\u6574\u4e2a\u200b\u94fe\u8868\u200b\uff0c\u200b\u5e76\u200b\u5728\u200b\u5230\u8fbe\u200b\u5f53\u524d\u200b Block \u200b\u524d\u200b\u4e0d\u65ad\u200b\u8bb0\u4e0b\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u56e0\u6b64\u200b\u5bf9\u4e8e\u200b\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff0c\u200b\u5408\u5e76\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u4e0e\u200b\u5806\u200b\u5185\u5b58\u200b\u7684\u200b\u5927\u5c0f\u200b\u6210\u6b63\u6bd4\u200b\u3002</p> <p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6bcf\u4e2a\u200b Block \u200b\u672b\u5c3e\u200b\u90fd\u200b\u6dfb\u52a0\u200b\u4e00\u4e2a\u200b\u5934\u90e8\u200b\u7684\u200b\u526f\u672c\u200b\u4ee5\u200b\u4f7f\u200b\u5408\u5e76\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u53d8\u4e3a\u200b\u5e38\u6570\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u6280\u672f\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u8fb9\u754c\u200b\u6807\u8bb0\u200b\uff08Boundary Tags\uff09\uff1a</p> <p> \u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u5c3e\u90e8\u200b\u59cb\u7ec8\u200b\u4e0e\u200b\u5f53\u524d\u200b Block \u200b\u7684\u200b\u5934\u90e8\u200b\u76f8\u8ddd\u200b\u4e00\u4e2a\u200b\u5b57\u957f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5206\u914d\u5668\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u68c0\u67e5\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u5c3e\u90e8\u200b\u6765\u200b\u786e\u5b9a\u200b\u5176\u200b\u4f4d\u7f6e\u200b\u548c\u200b\u72b6\u6001\u200b\u3002\u200b\u4e0b\u56fe\u200b\u5c55\u793a\u200b\u4e86\u200b\u5206\u914d\u5668\u200b\u662f\u200b\u5982\u4f55\u200b\u4f7f\u7528\u200b\u8fb9\u754c\u200b\u6807\u8bb0\u200b\u5408\u5e76\u200b Block \u200b\u7684\u200b\uff1a</p> <p> \u200b\u7531\u4e8e\u200b\u6bcf\u4e2a\u200b Block \u200b\u90fd\u200b\u5305\u542b\u200b\u5934\u90e8\u200b\u548c\u200b\u5c3e\u90e8\u200b\uff0c\u200b\u5f53\u200b Block \u200b\u6570\u91cf\u200b\u8f83\u591a\u65f6\u200b\uff0c\u200b\u8fb9\u754c\u200b\u6807\u8bb0\u200b\u663e\u8457\u200b\u5730\u200b\u589e\u52a0\u200b\u4e86\u200b\u5185\u5b58\u200b\u7684\u200b\u5f00\u9500\u200b\u3002\u200b\u8003\u8651\u200b\u5230\u200b\u5206\u914d\u5668\u200b\u53ea\u6709\u200b\u5728\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7a7a\u95f2\u200b\u65f6\u624d\u200b\u9700\u8981\u200b\u83b7\u53d6\u200b\u5176\u200b\u5c3e\u90e8\u200b\u5185\u200b\u7684\u200b Block \u200b\u5927\u5c0f\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u4e0a\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u72b6\u6001\u200b\u5b58\u50a8\u200b\u5728\u200b\u5f53\u524d\u200b Block \u200b\u5934\u90e8\u200b\u7684\u200b\u591a\u4f59\u200b\u4f4e\u4f4d\u200b\u4e2d\u200b\uff0c\u200b\u8fd9\u6837\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block \u200b\u4fbf\u200b\u4e0d\u200b\u9700\u8981\u200b\u5c3e\u90e8\u200b\u4e86\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_22","title":"\u663e\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868","text":"<p>\u200b\u7531\u4e8e\u200b\u5206\u914d\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u4e0e\u200b Block \u200b\u7684\u200b\u603b\u6570\u200b\u6210\u6b63\u6bd4\u200b\uff0c\u200b\u9690\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u4e0d\u9002\u200b\u7528\u4e8e\u200b\u901a\u7528\u200b\u5206\u914d\u5668\u200b\u3002\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5728\u200b\u6bcf\u4e2a\u200b\u7a7a\u95f2\u200b Block \u200b\u4e2d\u200b\u52a0\u5165\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b\u4e0a\u200b\u4e00\u4e2a\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u524d\u9a71\u200b\uff08Predecessor\uff09\u200b\u6307\u9488\u200b\u548c\u200b\u4e00\u4e2a\u200b\u6307\u5411\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u540e\u7ee7\u200b\uff08Successor\uff09\u200b\u6307\u9488\u200b\uff0c\u200b\u8fd9\u6837\u200b\u5806\u200b\u7684\u200b\u7ec4\u7ec7\u200b\u7ed3\u6784\u200b\u5c31\u200b\u53d8\u6210\u200b\u4e86\u200b\u4e00\u4e2a\u200b\u53cc\u5411\u200b\u94fe\u8868\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u5176\u4e3a\u200b\u663e\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff08Explicit Free List\uff09\u3002  \u200b\u5982\u679c\u200b\u91c7\u7528\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\u7b56\u7565\u200b\uff0c\u200b\u663e\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5206\u914d\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u4e0e\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u6570\u91cf\u200b\u6210\u6b63\u6bd4\u200b\uff0c\u200b\u800c\u200b\u91ca\u653e\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u5219\u200b\u53d6\u51b3\u4e8e\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u6392\u5e8f\u200b\u65b9\u5f0f\u200b\uff1a</p> <ul> <li>\u200b\u540e\u8fdb\u5148\u51fa\u200b\uff08Last-in First-out\uff0cLIFO\uff09\uff1a\u200b\u5c06\u200b\u521a\u200b\u88ab\u200b\u91ca\u653e\u200b\u7684\u200b Block \u200b\u63d2\u5165\u200b\u5230\u200b\u94fe\u8868\u200b\u5f00\u5934\u200b\uff0c\u200b\u56e0\u6b64\u200b\u91ca\u653e\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u4e3a\u200b\u5e38\u6570\u200b\uff0c\u200b\u5e76\u4e14\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u8fb9\u754c\u200b\u6807\u8bb0\u200b\u4f7f\u200b\u5408\u5e76\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u4e5f\u200b\u4e3a\u200b\u5e38\u6570\u200b\uff1b</li> <li>\u200b\u6309\u200b\u5730\u5740\u200b\u987a\u5e8f\u200b\uff08Address Order\uff09\uff1a\u200b\u4f7f\u200b\u94fe\u8868\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b Block \u200b\u7684\u200b\u5730\u5740\u200b\u5747\u200b\u5c0f\u4e8e\u200b\u5176\u200b\u540e\u7ee7\u200b Block \u200b\u7684\u200b\u5730\u5740\u200b\u3002\u200b\u5728\u200b\u8fd9\u79cd\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u91ca\u653e\u200b Block \u200b\u9700\u8981\u200b\u4e00\u5b9a\u200b\u7684\u200b\u65f6\u95f4\u200b\u6765\u200b\u5bfb\u627e\u200b\u5408\u9002\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u4f46\u200b\u5806\u200b\u5185\u5b58\u200b\u7684\u200b\u5229\u7528\u7387\u200b\u6bd4\u200b\u540e\u8fdb\u5148\u51fa\u200b\u9ad8\u200b\u3002</li> </ul> <p>\u200b\u663e\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u7684\u200b\u7f3a\u70b9\u200b\u5728\u4e8e\u200b\u6307\u9488\u200b\u7684\u200b\u5f15\u5165\u200b\u589e\u52a0\u200b\u4e86\u200b\u7a7a\u95f2\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\uff0c\u200b\u8fd9\u200b\u5c06\u200b\u589e\u5927\u200b\u5185\u90e8\u200b\u788e\u7247\u200b\u53d1\u751f\u200b\u7684\u200b\u53ef\u80fd\u6027\u200b\u3002</p>"},{"location":"core/csapp/ch9/#_23","title":"\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868","text":"<p>\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5806\u200b\u7ec4\u7ec7\u200b\u6210\u200b\u591a\u4e2a\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u94fe\u8868\u200b\u4e2d\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u90fd\u200b\u5927\u81f4\u76f8\u540c\u200b\uff0c\u200b\u8fd9\u79cd\u200b\u7ed3\u6784\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff08Segregated Free List\uff09\u3002\u200b\u4e3a\u4e86\u200b\u5b9e\u73b0\u200b\u8fd9\u4e00\u200b\u7ed3\u6784\u200b\uff0c\u200b\u6211\u4eec\u200b\u9700\u8981\u200b\u628a\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u5212\u5206\u200b\u4e3a\u200b\u591a\u4e2a\u200b\u5927\u5c0f\u200b\u7c7b\u200b\uff08Size Class\uff09\uff0c\u200b\u5982\u200b\uff1a</p> \\[\\lbrace1\\rbrace, \\lbrace2\\rbrace, \\lbrace3, 4\\rbrace, \\lbrace5\u20138\\rbrace,..., \\lbrace1025\u20132048\\rbrace, \\lbrace2049\u20134096\\rbrace, \\lbrace4097\u2013\u221e\\rbrace\\] <p>\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u8ba9\u200b\u6bcf\u4e2a\u200b\u8f83\u200b\u5c0f\u200b\u7684\u200b Block \u200b\u72ec\u81ea\u200b\u6210\u4e3a\u200b\u4e00\u4e2a\u200b\u5927\u5c0f\u200b\u7c7b\u200b\uff0c\u200b\u8f83\u5927\u200b\u7684\u200b Block \u200b\u4f9d\u7136\u200b\u6309\u200b 2 \u200b\u7684\u200b\u5e42\u200b\u5212\u5206\u200b\uff1a</p> \\[\\lbrace1\\rbrace, \\lbrace2\\rbrace, \\lbrace3\\rbrace,..., \\lbrace1024\\rbrace, \\lbrace1025\u20132048\\rbrace, \\lbrace2049\u20134096\\rbrace, \\lbrace4097\u2013\u221e\\rbrace\\] <p>\u200b\u6bcf\u4e2a\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u90fd\u200b\u5c5e\u4e8e\u200b\u67d0\u4e2a\u200b\u5927\u5c0f\u200b\u7c7b\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6211\u4eec\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5806\u200b\u770b\u6210\u200b\u4e00\u4e2a\u200b\u6309\u200b\u5927\u5c0f\u200b\u7c7b\u200b\u9012\u589e\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u6570\u7ec4\u200b\u3002\u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b Block \u200b\u65f6\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u4f1a\u200b\u6839\u636e\u200b\u5176\u200b\u5927\u5c0f\u200b\u5728\u200b\u9002\u5f53\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u4e2d\u200b\u641c\u7d22\u200b\u3002\u200b\u5982\u679c\u200b\u627e\u200b\u4e0d\u5230\u200b\u6ee1\u8db3\u8981\u6c42\u200b\u7684\u200b Block\uff0c\u200b\u5b83\u200b\u4fbf\u200b\u4f1a\u200b\u7ee7\u7eed\u200b\u641c\u7d22\u200b\u4e0b\u200b\u4e00\u4e2a\u200b\u94fe\u8868\u200b\u3002</p> <p>\u200b\u4e0d\u540c\u200b\u7684\u200b\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5728\u200b\u5b9a\u4e49\u200b\u5927\u5c0f\u200b\u7c7b\u200b\u7684\u200b\u65b9\u5f0f\u200b\u3001\u200b\u5408\u5e76\u200b Block \u200b\u7684\u200b\u65f6\u673a\u200b\u4ee5\u53ca\u200b\u662f\u5426\u200b\u5141\u8bb8\u200b\u5206\u5272\u200b Block \u200b\u7b49\u200b\u65b9\u9762\u200b\u6709\u6240\u4e0d\u540c\u200b\uff0c\u200b\u5176\u4e2d\u200b\u6700\u200b\u57fa\u672c\u200b\u7684\u200b\u4e24\u79cd\u200b\u7c7b\u578b\u200b\u4e3a\u200b\u7b80\u5355\u200b\u5206\u79bb\u200b\u5b58\u50a8\u200b\uff08Simple Segregated Storage\uff09\u200b\u548c\u200b\u5206\u79bb\u200b\u62df\u5408\u200b\uff08Segregated Fits\uff09\u3002</p> <p>\u200b\u5728\u200b\u7b80\u5355\u200b\u5206\u79bb\u200b\u5b58\u50a8\u200b\u4e2d\u200b\uff0c\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5185\u200b\u6bcf\u4e2a\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u5747\u200b\u7b49\u4e8e\u200b\u5176\u200b\u6240\u5c5e\u200b\u5927\u5c0f\u200b\u7c7b\u4e2d\u200b\u6700\u5927\u200b\u7684\u200b\u5143\u7d20\u200b\u3002\u200b\u5982\u200b\u67d0\u4e2a\u200b\u5927\u5c0f\u200b\u7c7b\u4e3a\u200b {17-32}\uff0c\u200b\u5219\u200b\u5176\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u4e2d\u200b Block \u200b\u7684\u200b\u5927\u5c0f\u200b\u90fd\u200b\u662f\u200b 32\u3002</p> <p>\u200b\u5f53\u200b\u8fdb\u7a0b\u200b\u8bf7\u6c42\u200b\u4e00\u4e2a\u200b Block \u200b\u65f6\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u9009\u53d6\u200b\u6ee1\u8db3\u200b\u8bf7\u6c42\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u5e76\u200b\u5206\u914d\u200b\u5176\u4e2d\u200b\u7b2c\u4e00\u4e2a\u200b Block\uff1b\u200b\u5f53\u200b\u67d0\u4e2a\u200b Block \u200b\u88ab\u200b\u91ca\u653e\u200b\u540e\u200b\uff0c\u200b\u5206\u914d\u5668\u200b\u5c06\u200b\u5176\u200b\u63d2\u5165\u200b\u5230\u200b\u5408\u9002\u200b\u7684\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u524d\u9762\u200b\u3002\u200b\u56e0\u6b64\u200b\uff0c\u200b\u7b80\u5355\u200b\u5206\u79bb\u200b\u5b58\u50a8\u200b\u5206\u914d\u200b\u548c\u200b\u91ca\u653e\u200b Block \u200b\u7684\u200b\u65f6\u95f4\u200b\u5747\u200b\u4e3a\u200b\u5e38\u91cf\u200b\u3002</p> <p>\u200b\u4f7f\u7528\u200b\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u7684\u200b\u5206\u914d\u5668\u200b\u53ea\u4f1a\u200b\u5728\u200b\u5806\u200b\u4e2d\u200b\u67d0\u4e2a\u200b\u7279\u5b9a\u200b\u90e8\u5206\u200b\u641c\u7d22\u200b\u7a7a\u95f2\u200b Block\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u541e\u5410\u91cf\u200b\u8f83\u5927\u200b\uff1b\u200b\u5bf9\u200b\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u4f7f\u7528\u200b\u7b2c\u4e00\u6b21\u200b\u62df\u5408\u200b\u7684\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u4e0e\u200b\u5bf9\u200b\u6574\u4e2a\u200b\u5806\u200b\u4f7f\u7528\u200b\u6700\u4f73\u200b\u62df\u5408\u200b\u7684\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u8fd1\u4f3c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5176\u200b\u5185\u5b58\u200b\u5229\u7528\u7387\u200b\u8f83\u200b\u9ad8\u200b\u3002\u200b\u5927\u591a\u6570\u200b\u9ad8\u6027\u80fd\u200b\u7684\u200b\u5206\u914d\u5668\u200b\u5747\u200b\u91c7\u7528\u200b\u5206\u79bb\u5f0f\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\uff0c\u200b\u5982\u200b C \u200b\u6807\u51c6\u200b\u5e93\u200b\u63d0\u4f9b\u200b\u7684\u200b GNU <code>malloc</code>\u3002</p>"},{"location":"core/csapp/ch9/#_24","title":"\u5783\u573e\u200b\u56de\u6536","text":"<p>\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\uff08Garbage Collector\uff09\u200b\u662f\u200b\u4e00\u79cd\u200b\u52a8\u6001\u5b58\u50a8\u5206\u914d\u200b\u5668\u200b\uff0c\u200b\u5b83\u4f1a\u200b\u81ea\u52a8\u200b\u91ca\u653e\u200b\u7a0b\u5e8f\u200b\u4e0d\u518d\u200b\u9700\u8981\u200b\u7684\u200b Block\uff08\u200b\u5783\u573e\u200b\uff09\u3002</p>"},{"location":"core/csapp/ch9/#_25","title":"\u57fa\u672c\u200b\u601d\u60f3","text":"<p>\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u5c06\u200b\u5185\u5b58\u200b\u770b\u4f5c\u200b\u4e00\u4e2a\u200b\u6709\u200b\u5411\u200b\u53ef\u8fbe\u6027\u200b\u56fe\u200b\uff1a</p> <p> \u200b\u56fe\u4e2d\u200b\u7684\u200b\u8282\u70b9\u200b\u88ab\u200b\u5206\u4e3a\u200b\u4e00\u7ec4\u200b\u6839\u200b\u8282\u70b9\u200b\uff08Root Nodes\uff09\u200b\u548c\u200b\u4e00\u7ec4\u200b\u5806\u200b\u8282\u70b9\u200b\uff08Heap Nodes\uff09\uff0c\u200b\u6bcf\u4e2a\u200b\u5806\u200b\u8282\u70b9\u200b\u90fd\u200b\u5bf9\u5e94\u200b\u4e8e\u200b\u4e00\u4e2a\u200b\u5806\u4e2d\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block\u3002\u200b\u6709\u200b\u5411\u200b\u8fb9\u200b \\(p \\to q\\) \u200b\u8868\u793a\u200b Block \\(p\\) \u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u4f4d\u7f6e\u200b\u6307\u5411\u200b Block \\(q\\) \u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u4f4d\u7f6e\u200b\u3002\u200b\u6839\u200b\u8282\u70b9\u200b\u5bf9\u5e94\u200b\u4e8e\u200b\u4e0d\u200b\u5728\u200b\u5806\u200b\u4e2d\u200b\u5374\u200b\u5305\u542b\u200b\u4e86\u200b\u6307\u5411\u200b\u5806\u200b\u7684\u200b\u6307\u9488\u200b\u7684\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u8fd9\u4e9b\u200b\u4f4d\u7f6e\u200b\u53ef\u4ee5\u200b\u662f\u200b\u5bc4\u5b58\u5668\u200b\u3001\u200b\u6808\u4e2d\u200b\u7684\u200b\u53d8\u91cf\u200b\u6216\u200b\u53ef\u200b\u8bfb\u5199\u200b\u6570\u636e\u200b\u533a\u57df\u200b\u4e2d\u200b\u7684\u200b\u5168\u5c40\u53d8\u91cf\u200b\u3002</p> <p>\u200b\u5982\u679c\u200b\u6839\u200b\u8282\u70b9\u200b\u4e0e\u200b\u5806\u200b\u8282\u70b9\u200b\u4e4b\u95f4\u200b\u5b58\u5728\u200b\u4e00\u6761\u200b\u6709\u200b\u5411\u200b\u8def\u5f84\u200b\uff0c\u200b\u6211\u4eec\u200b\u5c31\u200b\u79f0\u200b\u8be5\u200b\u5806\u200b\u8282\u70b9\u200b\u662f\u200b\u53ef\u8fbe\u200b\u7684\u200b\uff08Reachable\uff09\u3002\u200b\u5728\u200b\u4efb\u4f55\u65f6\u523b\u200b\uff0c\u200b\u4e0d\u53ef\u200b\u8fbe\u200b\u7684\u200b\u8282\u70b9\u200b\u90fd\u200b\u4e0e\u200b\u7a0b\u5e8f\u200b\u4e0d\u518d\u200b\u4f7f\u7528\u200b\u7684\u200b Block \u200b\u5bf9\u5e94\u200b\u3002\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u5b9a\u671f\u200b\u91ca\u653e\u200b\u4e0d\u53ef\u200b\u8fbe\u200b\u8282\u70b9\u200b\u5e76\u200b\u5c06\u200b\u5176\u200b\u8fd4\u56de\u200b\u5230\u200b\u7a7a\u95f2\u200b\u94fe\u8868\u200b\u3002</p> <p>ML \u200b\u548c\u200b Java \u200b\u7b49\u200b\u8bed\u8a00\u200b\u7684\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u5bf9\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u4f7f\u7528\u200b\u6307\u9488\u200b\u7684\u200b\u65b9\u5f0f\u200b\u8fdb\u884c\u200b\u4e86\u200b\u4e25\u683c\u200b\u7684\u200b\u9650\u5236\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5b83\u200b\u53ef\u4ee5\u200b\u7ef4\u62a4\u200b\u4e00\u4e2a\u200b\u7cbe\u786e\u200b\u7684\u200b\u53ef\u8fbe\u6027\u200b\u56fe\u200b\uff0c\u200b\u4ece\u800c\u200b\u56de\u6536\u200b\u6240\u6709\u200b\u7684\u200b\u5783\u573e\u200b\u3002\u200b\u800c\u200b C \u200b\u548c\u200b C++ \u200b\u7b49\u200b\u8bed\u8a00\u200b\u7684\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u5219\u200b\u65e0\u6cd5\u200b\u4fdd\u8bc1\u200b\u53ef\u8fbe\u6027\u200b\u56fe\u200b\u7684\u200b\u7cbe\u786e\u6027\u200b\uff0c\u200b\u4e00\u4e9b\u200b\u4e0d\u53ef\u200b\u8fbe\u200b\u7684\u200b\u8282\u70b9\u200b\u53ef\u80fd\u200b\u88ab\u200b\u9519\u8bef\u200b\u5730\u200b\u8bc6\u522b\u200b\u4e3a\u200b\u53ef\u8fbe\u200b\u7684\u200b\uff0c\u200b\u6211\u4eec\u200b\u79f0\u5176\u4e3a\u200b\u4fdd\u5b88\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\uff08Conservative Garbage Collector\uff09\u3002</p> <p>\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u53ef\u4ee5\u200b\u6309\u200b\u9700\u200b\u63d0\u4f9b\u200b\u670d\u52a1\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u4f5c\u4e3a\u200b\u5355\u72ec\u200b\u7684\u200b\u8fdb\u7a0b\u200b\u4e0e\u200b\u5e94\u7528\u7a0b\u5e8f\u200b\u5e76\u884c\u200b\u8fd0\u884c\u200b\uff0c\u200b\u4e0d\u65ad\u66f4\u65b0\u200b\u53ef\u8fbe\u6027\u200b\u56fe\u200b\u5e76\u200b\u56de\u6536\u200b\u5783\u573e\u200b\uff1a</p> <p></p>"},{"location":"core/csapp/ch9/#marksweep","title":"Mark&amp;Sweep \u200b\u7b97\u6cd5","text":"<p>Mark&amp;Sweep \u200b\u662f\u200b\u5e38\u7528\u200b\u7684\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u7b97\u6cd5\u200b\u4e4b\u4e00\u200b\uff0c\u200b\u5b83\u200b\u5206\u4e3a\u200b\u4e24\u4e2a\u200b\u9636\u6bb5\u200b\uff1a</p> <ul> <li>\u200b\u6807\u8bb0\u200b\uff08Mark\uff09\u200b\u9636\u6bb5\u200b\uff1a\u200b\u6807\u8bb0\u200b\u6240\u6709\u200b\u53ef\u8fbe\u200b\u7684\u200b\u6839\u200b\u8282\u70b9\u200b\u540e\u4ee3\u200b\u3002\u200b\u901a\u5e38\u200b\u6211\u4eec\u200b\u5c06\u200b Block \u200b\u5934\u90e8\u200b\u7684\u200b\u591a\u4f59\u200b\u4f4e\u4f4d\u200b\u4e4b\u4e00\u200b\u7528\u4e8e\u200b\u6307\u793a\u200b\u8be5\u200b Block \u200b\u662f\u5426\u200b\u88ab\u200b\u6807\u8bb0\u200b\uff1b</li> <li>\u200b\u6e05\u9664\u200b\uff08Sweep\uff09\u200b\u9636\u6bb5\u200b\uff1a\u200b\u91ca\u653e\u200b\u6240\u6709\u200b\u672a\u200b\u6807\u8bb0\u200b\u4e14\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block\u3002</li> </ul> <p>\u200b\u4e3a\u4e86\u200b\u66f4\u597d\u200b\u5730\u200b\u7406\u89e3\u200b Mark&amp;Sweep \u200b\u7b97\u6cd5\u200b\uff0c\u200b\u6211\u4eec\u200b\u4f5c\u51fa\u200b\u4ee5\u4e0b\u200b\u5047\u8bbe\u200b\uff1a</p> <ul> <li><code>ptr</code>\uff1a\u200b\u7531\u200b<code>typedef void *ptr</code>\u200b\u5b9a\u4e49\u200b\u7684\u200b\u7c7b\u578b\u200b\uff1b</li> <li><code>ptr isPtr(ptr p)</code>\uff1a\u200b\u82e5\u200b<code>p</code>\u200b\u6307\u5411\u200b\u5df2\u200b\u5206\u914d\u200b Block \u200b\u4e2d\u200b\u7684\u200b\u67d0\u4e2a\u200b\u5b57\u200b\uff0c\u200b\u5219\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u8be5\u200b Block \u200b\u8d77\u59cb\u200b\u4f4d\u7f6e\u200b\u7684\u200b\u6307\u9488\u200b<code>b</code>\uff0c\u200b\u5426\u5219\u200b\u8fd4\u56de\u200b<code>NULL</code>\uff1b</li> <li><code>int blockMarked(ptr b)</code>\uff1a\u200b\u5982\u679c\u200b\u8be5\u200b Block \u200b\u5df2\u200b\u88ab\u200b\u6807\u8bb0\u200b\u5219\u200b\u8fd4\u56de\u200b<code>true</code>\uff1b</li> <li><code>int blockAllocated(ptr b)</code>\uff1a\u200b\u5982\u679c\u200b\u8be5\u200b Block \u200b\u5df2\u200b\u5206\u914d\u200b\u5219\u200b\u8fd4\u56de\u200b<code>true</code>\uff1b</li> <li><code>void markBlock(ptr b)</code>\uff1a\u200b\u6807\u8bb0\u200b Block\uff1b</li> <li><code>int length(ptr b)</code>\uff1a\u200b\u8fd4\u56de\u200b Block \u200b\u9664\u200b\u5934\u90e8\u200b\u5916\u200b\u7684\u200b\u5b57\u957f\u200b\uff1b</li> <li><code>void unmarkBlock(ptr b)</code>\uff1a\u200b\u5c06\u200b Block \u200b\u7684\u200b\u72b6\u6001\u200b\u4ece\u200b\u5df2\u200b\u6807\u8bb0\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u672a\u200b\u6807\u8bb0\u200b\uff1b</li> <li><code>ptr nextBlock(ptr b)</code>\uff1a\u200b\u8fd4\u56de\u200b\u6307\u5411\u200b\u4e0b\u200b\u4e00\u4e2a\u200b Block \u200b\u7684\u200b\u6307\u9488\u200b\u3002</li> </ul> <p>\u200b\u90a3\u4e48\u200b\u6b64\u200b\u7b97\u6cd5\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u7528\u200b\u4e0b\u56fe\u200b\u4e2d\u200b\u7684\u200b\u4f2a\u7801\u200b\u8868\u793a\u200b\uff1a</p> <p> \u200b\u5728\u200b\u6807\u8bb0\u200b\u9636\u6bb5\u200b\uff0c\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u4e3a\u200b\u6bcf\u4e2a\u200b\u6839\u200b\u8282\u70b9\u200b\u8c03\u7528\u200b\u4e00\u6b21\u200b<code>mark</code>\u200b\u51fd\u6570\u200b\u3002\u200b\u82e5\u200b<code>p</code>\u200b\u672a\u200b\u6307\u5411\u200b\u5df2\u200b\u5206\u914d\u200b\u4e14\u200b\u672a\u200b\u6807\u8bb0\u200b\u7684\u200b Block\uff0c\u200b\u5219\u200b\u8be5\u200b\u51fd\u6570\u200b\u76f4\u63a5\u200b\u8fd4\u56de\u200b\u3002\u200b\u5426\u5219\u200b\uff0c\u200b\u5b83\u200b\u6807\u8bb0\u200b\u8be5\u200b Block \u200b\u5e76\u200b\u5c06\u200b\u5176\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u5b57\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u200b\u9012\u5f52\u200b\u5730\u200b\u8c03\u7528\u200b\u81ea\u8eab\u200b\uff08<code>mark(b[i])</code>\uff09\u3002\u200b\u6b64\u200b\u9636\u6bb5\u200b\u7ed3\u675f\u200b\u65f6\u200b\uff0c\u200b\u4efb\u4f55\u200b\u672a\u200b\u6807\u8bb0\u200b\u4e14\u200b\u5df2\u200b\u5206\u914d\u200b\u7684\u200b Block \u200b\u90fd\u200b\u662f\u200b\u4e0d\u53ef\u200b\u8fbe\u200b\u7684\u200b\uff1b\u200b\u5728\u200b\u626b\u63cf\u200b\u9636\u6bb5\u200b\uff0c\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u53ea\u200b\u8c03\u7528\u200b\u4e00\u6b21\u200b<code>sweep</code>\u200b\u51fd\u6570\u200b\u3002\u200b\u8be5\u200b\u51fd\u6570\u200b\u904d\u5386\u200b\u5806\u4e2d\u200b\u7684\u200b\u6bcf\u200b\u4e00\u4e2a\u200b Block\uff0c\u200b\u91ca\u653e\u200b\u6240\u6709\u200b\u5df2\u200b\u5206\u914d\u200b\u4e14\u200b\u672a\u200b\u6807\u8bb0\u200b\u7684\u200b Block\u3002</p> <p> \u200b\u4e0a\u56fe\u200b\u4e2d\u200b\u7684\u200b\u6bcf\u4e2a\u200b\u65b9\u6846\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b\u5b57\u200b\uff0c\u200b\u6bcf\u4e2a\u200b\u88ab\u200b\u7c97\u7ebf\u200b\u5206\u9694\u200b\u7684\u200b\u77e9\u5f62\u200b\u4ee3\u8868\u200b\u4e00\u4e2a\u200b Block\uff0c\u200b\u800c\u200b\u6bcf\u4e2a\u200b Block \u200b\u90fd\u200b\u6709\u200b\u4e00\u4e2a\u200b\u5355\u5b57\u200b\u7684\u200b\u5934\u90e8\u200b\u3002\u200b\u6700\u521d\u200b\uff0c\u200b\u5806\u4e2d\u200b\u6709\u200b 6 \u200b\u4e2a\u200b\u5df2\u200b\u5206\u914d\u200b\u4e14\u200b\u672a\u200b\u6807\u8bb0\u200b\u7684\u200b Block\u3002Block 3 \u200b\u4e2d\u200b\u5305\u542b\u200b\u6307\u5411\u200b Block 1 \u200b\u7684\u200b\u6307\u9488\u200b\uff0cBlock 4 \u200b\u4e2d\u200b\u5305\u542b\u200b\u6307\u5411\u200b Block 3 \u200b\u548c\u200b 6 \u200b\u7684\u200b\u6307\u9488\u200b\u3002\u200b\u6839\u200b\u8282\u70b9\u200b\u6307\u5411\u200b Block 4\uff0c\u200b\u56e0\u6b64\u200b Block 1\u30013\u30014 \u200b\u548c\u200b 6 \u200b\u4ece\u6839\u200b\u8282\u70b9\u200b\u53ef\u200b\u8fbe\u200b\uff0c\u200b\u5b83\u4eec\u200b\u4f1a\u200b\u88ab\u200b\u5783\u573e\u200b\u56de\u6536\u200b\u5668\u200b\u6807\u8bb0\u200b\u3002\u200b\u5728\u200b\u626b\u63cf\u200b\u9636\u6bb5\u200b\u5b8c\u6210\u200b\u540e\u200b\uff0c\u200b\u5269\u4f59\u200b\u4e0d\u53ef\u200b\u8fbe\u200b\u7684\u200b Block 2 \u200b\u548c\u200b 5 \u200b\u5c06\u200b\u88ab\u200b\u91ca\u653e\u200b\u3002</p>"},{"location":"langs/","title":"Langs.","text":""},{"location":"langs/#c","title":"C++","text":"C++ \u200b\u96f6\u788e\u200b\u6742\u8bb0\u200b <p>\u200b\u9876\u5c42\u200bconst\u200b\u4e0e\u200b\u5e95\u5c42\u200bconst</p> <p>\u200b\u503c\u200b\u7c7b\u578b\u200b\u4e0e\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b</p> <p>\u200b\u6570\u7ec4\u200b\u6307\u9488\u200b\u4e0e\u200b\u51fd\u6570\u6307\u9488\u200b</p> <p>C++\u200b\u7c7b\u200b\u5bf9\u8c61\u200b\u5e03\u5c40\u200b</p> <p>C++\u200b\u4e2d\u200b\u7684\u200b\u591a\u6001\u200b\u4e0e\u200bRTTI</p> Effective Modern C++ <p>Deducing Types</p> <ul> <li>item1\uff1a\u200b\u7406\u89e3\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b</li> <li>item2\uff1a\u200b\u7406\u89e3\u200bauto\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b</li> <li>item3\uff1a\u200b\u7406\u89e3\u200bdecltype</li> </ul> <p>auto</p> <p>Moving to Modern C++</p> <ul> <li>item7\uff1a\u200b\u533a\u522b\u200b\u4f7f\u7528\u200b()\u200b\u548c\u200b{}\u200b\u521b\u5efa\u5bf9\u8c61\u200b</li> <li>item9\uff1a\u200b\u4f18\u5148\u200b\u8003\u8651\u200b\u522b\u540d\u200b\u58f0\u660e\u200b\u800c\u200b\u975e\u200btypedef</li> </ul> <p>Smart Pointers</p> <p>Rvalue References, Move Semantics, and Perfect Forwarding</p> <ul> <li>item23\uff1a\u200b\u7406\u89e3\u200bstd::move\u200b\u548c\u200bstd::forward</li> </ul> <p>Lambda Expressions</p> <p>The Concurrency API</p> <p>Tweaks</p>"},{"location":"langs/cpp/effective/item1/","title":"item1\uff1a\u200b\u7406\u89e3\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc","text":"item1 <ul> <li>\u200b\u5728\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u65f6\u200b\uff0c\u200b\u6709\u200b\u5f15\u7528\u200b\u7684\u200b\u5b9e\u200b\u53c2\u4f1a\u200b\u88ab\u200b\u89c6\u4e3a\u200b\u65e0\u200b\u5f15\u7528\u200b\uff0c\u200b\u4ed6\u4eec\u200b\u7684\u200b\u5f15\u7528\u200b\u4f1a\u200b\u88ab\u200b\u5ffd\u7565\u200b</li> <li>\u200b\u5bf9\u4e8e\u200b\u901a\u7528\u200b\u5f15\u7528\u200b\u7684\u200b\u63a8\u5bfc\u200b\uff0c\u200b\u5de6\u503c\u5b9e\u200b\u53c2\u4f1a\u200b\u88ab\u200b\u7279\u6b8a\u200b\u5bf9\u5f85\u200b</li> <li>\u200b\u5bf9\u4e8e\u200b\u4f20\u503c\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\uff0c<code>const</code>\u200b\u548c\u200b/\u200b\u6216\u200b<code>volatile</code>\u200b\u5b9e\u200b\u53c2\u4f1a\u200b\u88ab\u200b\u8ba4\u4e3a\u200b\u662f\u200bnon-<code>const</code>\u200b\u7684\u200b\u548c\u200bnon-<code>volatile</code>\u200b\u7684\u200b</li> <li>\u200b\u5728\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u65f6\u200b\uff0c\u200b\u6570\u7ec4\u540d\u200b\u6216\u8005\u200b\u51fd\u6570\u200b\u540d\u5b9e\u200b\u53c2\u4f1a\u200b\u9000\u5316\u200b\u4e3a\u200b\u6307\u9488\u200b\uff0c\u200b\u9664\u975e\u200b\u5b83\u4eec\u200b\u88ab\u200b\u7528\u4e8e\u200b\u521d\u59cb\u5316\u200b\u5f15\u7528\u200b </li> </ul> <p>\u200b\u5bf9\u4e8e\u200b\u4e0b\u9762\u200b\u4e24\u79cd\u200b\u5199\u6cd5\u200b\uff0c\u200b\u662f\u200b\u4e00\u6837\u200b\u7684\u200b\uff0cT\u200b\u90fd\u200b\u662f\u200b\u7528\u6765\u200b\u4fee\u9970\u200bparam\u200b\u7684\u200b\uff0c\u200b\u8fd9\u4e2a\u200bconst\u200b\u90fd\u200b\u4f5c\u4e3a\u200b\u9876\u5c42\u200bconst</p> <pre><code>template &lt;typename T&gt;\nvoid f(const T param);\nvoid f(T const param);\n</code></pre> <p>\u200b\u4e0b\u9762\u200b\u4e24\u4e2a\u200bfun\u200b\u51fd\u6570\u200b\u4e0d\u200b\u6784\u6210\u200b\u91cd\u8f7d\u200b\uff0c\u200b\u539f\u56e0\u200b\u662f\u200b\u9876\u5c42\u200bconst\u200b\u4e0d\u200b\u6784\u6210\u200b\u91cd\u8f7d\u200b</p> <pre><code>void fun(int a) {}\nvoid fun(const int a) {}\n</code></pre> <p>\u200b\u6307\u9488\u200b\u7684\u200b\u5f15\u7528\u200b\uff1a</p> <pre><code>int *a = &amp;b;\nint *&amp;c = a;\n</code></pre> <p>\u200b\u51fd\u6570\u6307\u9488\u200b\u4e0e\u200b\u51fd\u6570\u200b\u5f15\u7528\u200b\uff1a</p> <ul> <li>\u200b\u51fd\u6570\u6307\u9488\u200b\u7684\u200b\u5e95\u5c42\u200bconst\u200b\u4f3c\u4e4e\u200b\u53ea\u80fd\u200b\u7531\u200b\u7c7b\u578b\u200b\u522b\u540d\u200b\u8868\u793a\u200b\u51fa\u6765\u200b</li> <li>\u200b\u51fd\u6570\u200b\u5f15\u7528\u200b\u7684\u200b\u5e95\u5c42\u200bconst\u200b\u4f1a\u200b\u88ab\u200b\u7f16\u8bd1\u5668\u200b\u81ea\u52a8\u200b\u5ffd\u7565\u200b</li> </ul> <pre><code>int fun2(int) { return 10; }\nint (*fun2ptr)(int) = fun2;\nint (*const fun2ptr1)(int) = fun2;  // \u200b\u9876\u5c42\u200bconst\n// const int (*fun2ptr2)(int) = fun2;  \u200b\u5e95\u5c42\u200bconst\u200b\u62a5\u9519\u200b\nint (&amp;fun2ref)(int) = fun2;\nusing F = int(int);\nconst F *aaa = fun2;\nF *const bbb = fun2;\nconst F &amp;ccc = fun2;\n</code></pre> <pre><code>template &lt;typename T&gt; // \u200b\u5199\u6cd5\u200b\u56fa\u5b9a\u200b\nvoid f(ParamType param);\n\nf(expr); // \u200b\u8c03\u7528\u200b\n</code></pre> <p>ParamType: </p> <ul> <li>T; T*;</li> <li>T&amp;; T&amp;&amp;;</li> <li>const T; const T*;</li> <li>const T&amp;; const T&amp;&amp;;</li> <li>T* const; const T* const;</li> </ul> <p>expr:</p> <ul> <li>\u200b\u4e0a\u9762\u200b\u7684\u200bT\u200b\u5168\u200b\u6362\u6210\u200bint; \u200b\u5b57\u9762\u200b\u91cf\u200b;</li> <li>int[10]; int(*)[10];</li> <li>int(&amp;)[10]; bool(int,int);</li> <li>bool(*)(int,int); bool(&amp;)(int,int);</li> </ul> <p>Note</p> <p>1\u3001\u200b\u7406\u89e3\u200b\u9876\u5c42\u200b\u4e0e\u200b\u5e95\u5c42\u200bconst\uff0c\u200b\u7f3a\u200b\u5565\u200b\u8865\u200b\u5565\u200b: T;T;T&amp;;const T;const T;const T&amp;;T* const;const T* const;\u200b\u4e0a\u9762\u200b\u7684\u200bT\u200b\u5168\u200b\u6362\u6210\u200bint;\u200b\u5b57\u9762\u200b\u91cf\u200b;\u200b\u7531\u4e8e\u200b\u9876\u5c42\u200bconst\u200b\u4e0d\u200b\u6784\u6210\u200b\u91cd\u8f7d\u200b\uff0c\u200b\u4e8e\u662f\u200b const T = T\uff0cT* const = T\uff0cconst T const = const T*</p> <p>2\u3001\u200b\u7406\u89e3\u200b\u6570\u7ec4\u200b\u4e0e\u200b\u51fd\u6570\u200b\u80fd\u591f\u200b\u9000\u5316\u200b\u6210\u200b\u6307\u9488\u200b\u5373\u53ef\u200b int[10];int(*)[10];int(&amp;)[10];bool(int,int);bool(*)(int,int);bool(&amp;)(int,int);</p> <p>3\u3001\u200b\u901a\u7528\u200b\u5f15\u7528\u200b\uff08\u200b\u4e07\u80fd\u200b\u5f15\u7528\u200b\uff09\uff1a\u200b\u4f20\u5165\u200b\u5de6\u503c\u200b   ParamType\u200b\u4e3a\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\uff1b\u200b\u4f20\u5165\u200b\u53f3\u503c\u200b\uff0cParamType\u200b\u4e3a\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b   T&amp;&amp;;const T&amp;&amp;;  \u200b\u6ce8\u610f\u200b\u5f15\u7528\u200b\u6298\u53e0\u200b\uff0c\u200b\u5f53\u200bint &amp; \u200b\u548c\u200b &amp;&amp; \u200b\u53ef\u6298\u53e0\u200b\u4e3a\u200bint &amp; \uff0c\u200b\u4e07\u80fd\u200b\u5f15\u7528\u200b\u53ea\u80fd\u200b\u5199\u4f5c\u200b T&amp;&amp; \uff0cconst T&amp;&amp;\u200b\u53ea\u662f\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b</p> <p>\u200b\u5b8c\u6574\u200b\u793a\u4f8b\u200b\u4ee3\u7801\u200b</p> <pre><code>#include &lt;iostream&gt;\n\n// void fun(int a) {}\n// void fun(const int a) {} // \u200b\u62a5\u9519\u200b\uff0c\u200b\u9876\u5c42\u200bconst\u200b\u4e0d\u200b\u6784\u6210\u200b\u91cd\u8f7d\u200b\n\ntemplate &lt;typename T&gt;\nvoid f(T param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid f(T *param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\ntemplate &lt;typename T&gt;\nvoid h(const T *param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid g(T &amp;param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid k(const T &amp;param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid q(T &amp;&amp;param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\ntemplate &lt;typename T&gt;\nvoid p(const T &amp;&amp;param) {\n  std::cout &lt;&lt; param &lt;&lt; std::endl;\n}\n\n// void f(const T param);\n// void f(T const param);\n\nvoid func(int, int) {}\n\n/*\nint fun2(int) { return 10; }\nint (*fun2ptr)(int) = fun2;\nint (*const fun2ptr1)(int) = fun2;  // \u200b\u9876\u5c42\u200bconst\n// const int (*fun2ptr2)(int) = fun2;  \u200b\u5e95\u5c42\u200bconst\u200b\u62a5\u9519\u200b\nint (&amp;fun2ref)(int) = fun2;\nusing F = int(int);\nconst F *aaa = fun2;\nF *const bbb = fun2;\nconst F &amp;ccc = fun2;\n*/\n\nint main() {\n  {  // void f(T param) \u200b\u5bf9\u5e94\u200b\u7684\u200b\u60c5\u51b5\u200b\n    int a = 10;\n    int *aptr = &amp;a;\n    int &amp;aref = a;\n    int &amp;&amp;arref = std::move(a);\n    f(a);      // void f&lt;int&gt;(int param)\n    f(aptr);   // void f&lt;int *&gt;(int *param)\n    f(aref);   // void f&lt;int&gt;(int param) \u200b\u5f15\u7528\u200b\u5728\u200b\u7b49\u200b\u53f7\u200b\u53f3\u4fa7\u200b\uff0c\u200b\u5ffd\u7565\u200b&amp;\n    f(arref);  // void f&lt;int&gt;(int param)\n\n    const int ca = 20;\n    const int *captr = &amp;ca;\n    const int &amp;caref = ca;\n    const int &amp;&amp;carref = std::move(ca);\n    int *const acptr = &amp;a;\n    const int *const cacptr = &amp;a;\n    f(ca);      // void f&lt;int&gt;(int param) \u200b\u9876\u5c42\u200bconst\n    f(captr);   // void f&lt;const int *&gt;(const int *param) \u200b\u5e95\u5c42\u200bconst\n    f(caref);   // void f&lt;int&gt;(int param)\n    f(carref);  // void f&lt;int&gt;(int param)\n    f(acptr);   // void f&lt;int *&gt;(int *param)\n    f(cacptr);  // void f&lt;const int *&gt;(const int *param)\n    f(10);      // void f&lt;int&gt;(int param)\n\n    int array[2] = {0, 1};\n    f(array);  // void f&lt;int *&gt;(int *param) \u200b\u9000\u5316\u200b\n    const char aaa[12] = \"hello world\";\n    // \u200b\u6570\u7ec4\u200b\u9000\u5316\u200b\u6210\u200b\u6307\u9488\u200b,\u200b\u9876\u5c42\u200bconst\u200b\u53d8\u6210\u200b\u5e95\u5c42\u200bconst\n    f(aaa);            // void f&lt;const char *&gt;(const char *param)\n    f(\"hello world\");  // void f&lt;const char *&gt;(const char *param)\n    int(*arrayptr)[2] = &amp;array;\n    int(&amp;arrayref)[2] = array;\n    f(arrayptr);  // void f&lt;int (*)[2]&gt;(int (*param)[2])\n    f(arrayref);  // void f&lt;int *&gt;(int *param)\n\n    f(func);  // void f&lt;void (*)(int, int)&gt;(void (*param)(int, int)) \u200b\u9000\u5316\u200b\u4e3a\u200b\u6307\u9488\u200b\n    void (*funcptr)(int, int) = func;\n    void (&amp;funcref)(int, int) = func;\n    f(funcptr);  // void f&lt;void (*)(int, int)&gt;(void (*param)(int, int))\n    f(funcref);  // void f&lt;void (*)(int, int)&gt;(void (*param)(int, int))\n  }\n\n  {  // void f(T* param) \u200b\u5bf9\u5e94\u200b\u7684\u200b\u60c5\u51b5\u200b\n    int a = 10;\n    int *aptr = &amp;a;\n    int &amp;aref = a;\n    int &amp;&amp;arref = std::move(a);\n    // f(a);      // \u200b\u62a5\u9519\u200b\n    f(aptr);  // void f&lt;int&gt;(int *param)\n    // f(aref);   // \u200b\u62a5\u9519\u200b\n    // f(arref);  // \u200b\u62a5\u9519\u200b\n\n    const int ca = 20;\n    const int *captr = &amp;ca;\n    const int &amp;caref = ca;\n    const int &amp;&amp;carref = std::move(ca);\n    int *const acptr = &amp;a;\n    const int *const cacptr = &amp;a;\n    // f(ca);      // \u200b\u62a5\u9519\u200b\n    // f(captr);   // \u200b\u62a5\u9519\u200b\n    // f(caref);   // \u200b\u62a5\u9519\u200b\n    // f(carref);  // \u200b\u62a5\u9519\u200b\n    f(acptr);   // void f&lt;int&gt;(int *param)\n    f(cacptr);  // void f&lt;const int&gt;(const int *param)\n    // f(10);      // \u200b\u62a5\u9519\u200b\n\n    int array[2] = {0, 1};\n    f(array);  // void f&lt;int&gt;(int *param) \u200b\u9000\u5316\u200b\n    const char aaa[12] = \"hello world\";\n    f(aaa);            // void f&lt;const char&gt;(const char *param)\n    f(\"hello world\");  // void f&lt;const char&gt;(const char *param)\n    int(*arrayptr)[2] = &amp;array;\n    int(&amp;arrayref)[2] = array;\n    f(arrayptr);  // void f&lt;int[2]&gt;(int *param[2])\n    f(arrayref);  // void f&lt;int&gt;(int *param)\n\n    f(func);  // void f&lt;void(int, int)&gt;(void (*param)(int, int)) \u200b\u9000\u5316\u200b\u4e3a\u200b\u6307\u9488\u200b\n    void (*funcptr)(int, int) = func;\n    void (&amp;funcref)(int, int) = func;\n    f(funcptr);  // void f&lt;void(int, int)&gt;(void (*param)(int, int))\n    f(funcref);  // void f&lt;void(int, int)&gt;(void (*param)(int, int))\n  }\n\n  {  // void g(T&amp; param) \u200b\u5bf9\u5e94\u200b\u7684\u200b\u60c5\u51b5\u200b\n    int a = 10;\n    int *aptr = &amp;a;\n    int &amp;aref = a;\n    int &amp;&amp;arref = std::move(a);\n    g(a);      // void g&lt;int&gt;(int param)\n    g(aptr);   // void g&lt;int *&gt;(int *param)\n    g(aref);   // void g&lt;int&gt;(int param) \u200b\u5f15\u7528\u200b\u5728\u200b\u7b49\u200b\u53f7\u200b\u53f3\u4fa7\u200b\uff0c\u200b\u5ffd\u7565\u200b&amp;\n    g(arref);  // void g&lt;int&gt;(int param)\n\n    const int ca = 20;\n    const int *captr = &amp;ca;\n    const int &amp;caref = ca;\n    const int &amp;&amp;carref = std::move(ca);\n    int *const acptr = &amp;a;\n    const int *const cacptr = &amp;a;\n    g(ca);      // void g&lt;const int&gt;(const int &amp;param)\n    g(captr);   // void g&lt;const int *&gt;(const int *&amp;param)\n    g(caref);   // void g&lt;const int&gt;(const int &amp;param)\n    g(carref);  // void g&lt;const int&gt;(const int &amp;param)\n    g(acptr);   // void g&lt;int *const&gt;(int *const &amp;param)\n    g(cacptr);  // void g&lt;const int *const&gt;(const int *const &amp;param)\n    // g(10);      // \u200b\u62a5\u9519\u200b\n\n    int array[2] = {0, 1};\n    g(array);  // void g&lt;int[2]&gt;(int &amp;param[2]) \u200b\u6570\u7ec4\u200b\u7684\u200b\u5f15\u7528\u200b\u4e0d\u200b\u53d1\u751f\u200b\u9000\u5316\u200b\n    const char aaa[12] = \"hello world\";\n    g(aaa);            // void g&lt;const char[12]&gt;(const char &amp;param[12])\n    g(\"hello world\");  // void g&lt;const char[12]&gt;(const char &amp;param[12])\n    int(*arrayptr)[2] = &amp;array;\n    int(&amp;arrayref)[2] = array;\n    g(arrayptr);  // void g&lt;int (*)[2]&gt;(int (*&amp;param)[2])\n    g(arrayref);  // void g&lt;int[2]&gt;(int &amp;param[2])\n\n    g(func);  // void g&lt;void(int, int)&gt;(void (&amp;param)(int, int)) \u200b\u5f15\u7528\u200b\u4e0d\u200b\u53d1\u751f\u200b\u9000\u5316\u200b\n    void (*funcptr)(int, int) = func;\n    void (&amp;funcref)(int, int) = func;\n    g(funcptr);  // void g&lt;void (*)(int, int)&gt;(void (*&amp;param)(int, int))\n    g(funcref);  // void g&lt;void(int, int)&gt;(void (&amp;param)(int, int))\n  }\n\n  {  // void h(const T* param) \u200b\u5bf9\u5e94\u200b\u7684\u200b\u60c5\u51b5\u200b\n    int a = 10;\n    int *aptr = &amp;a;\n    int &amp;aref = a;\n    int &amp;&amp;arref = std::move(a);\n    // h(a);      // \u200b\u62a5\u9519\u200b\n    h(aptr);  // void h&lt;int&gt;(const int *param)\n    // h(aref);   // \u200b\u62a5\u9519\u200b\n    // h(arref);  // \u200b\u62a5\u9519\u200b\n\n    const int ca = 20;\n    const int *captr = &amp;ca;\n    const int &amp;caref = ca;\n    const int &amp;&amp;carref = std::move(ca);\n    int *const acptr = &amp;a;\n    const int *const cacptr = &amp;a;\n    // h(ca);      // \u200b\u62a5\u9519\u200b\n    h(captr);  // void h&lt;int&gt;(const int *param)\n    // h(caref);   // \u200b\u62a5\u9519\u200b\n    // h(carref);  // \u200b\u62a5\u9519\u200b\n    h(acptr);   // void h&lt;int&gt;(const int *param)\n    h(cacptr);  // void h&lt;int&gt;(const int *param)\n    // h(10);      // \u200b\u62a5\u9519\u200b\n\n    int array[2] = {0, 1};\n    h(array);  // void h&lt;int&gt;(const int *param)\n    const char aaa[12] = \"hello world\";\n    h(aaa);            // void h&lt;char&gt;(const char *param)\n    h(\"hello world\");  // void h&lt;char&gt;(const char *param)\n    int(*arrayptr)[2] = &amp;array;\n    int(&amp;arrayref)[2] = array;\n    h(arrayptr);  // void h&lt;int[2]&gt;(const int *param[2])\n    h(arrayref);  // void h&lt;int&gt;(const int *param)\n\n    // h(func);  // \u200b\u62a5\u9519\u200b \u200b\u63a8\u5bfc\u200b\u4e0d\u200b\u51fa\u6765\u200b\u5e95\u5c42\u200bconst\n    void (*funcptr)(int, int) = func;\n    void (&amp;funcref)(int, int) = func;\n    // h(funcptr);  //  \u200b\u62a5\u9519\u200b\n    // h(funcref);  //  \u200b\u62a5\u9519\u200b\n  }\n\n  {           // void h(const T&amp; param) \u200b\u53ef\u4ee5\u200b\u63a5\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\n    k(func);  // void k&lt;void(int, int)&gt;(void (&amp;param)(int, int)) &amp;\u200b\u88ab\u200b\u5ffd\u7565\u200b\n  }\n\n  {  // void q(T&amp;&amp; param) \u200b\u5f15\u7528\u200b\u6298\u53e0\u200b \u200b\u4e07\u80fd\u200b\u5f15\u7528\u200b\n    int a = 10;\n    int *aptr = &amp;a;\n    int &amp;aref = a;\n    int &amp;&amp;arref = std::move(a);\n    q(a);      // void q&lt;int &amp;&gt;(int &amp;param)\n    q(aptr);   // void q&lt;int *&amp;&gt;(int *&amp;param)\n    q(aref);   // void q&lt;int &amp;&gt;(int &amp;param)\n    q(arref);  // void q&lt;int &amp;&gt;(int &amp;param)\n    const int ca = 20;\n    const int *captr = &amp;ca;\n    const int &amp;caref = ca;\n    const int &amp;&amp;carref = std::move(ca);\n    int *const acptr = &amp;a;\n    const int *const cacptr = &amp;a;\n    q(ca);     // void q&lt;const int &amp;&gt;(const int &amp;param)\n    q(captr);  // void q&lt;const int *&amp;&gt;(const int *&amp;param)\n    q(caref);  // void q&lt;const int &amp;&gt;(const int &amp;param)\n    q(carref);  // void q&lt;const int &amp;&gt;(const int &amp;param) \u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u4ecd\u7136\u200b\u662f\u200b\u5de6\u503c\u200b\n    q(acptr);   // void q&lt;int *const &amp;&gt;(int *const &amp;param)\n    q(cacptr);  // void q&lt;const int *const &amp;&gt;(const int *const &amp;param)\n    q(10);      // void q&lt;int&gt;(int &amp;&amp;param)\n    // \u200b\u6570\u7ec4\u200b\u51fd\u6570\u200b\u540c\u7406\u200b\n  }\n\n  {  // void p(const T&amp;&amp; param) \u200b\u53ea\u662f\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\n    int a = 10;\n    // p(a); // \u200b\u62a5\u9519\u200b,\u200b\u53ea\u80fd\u200b\u4f20\u5165\u200b\u53f3\u503c\u200b\n    p(10);\n    // \u200b\u5176\u4f59\u200b\u5168\u90e8\u200b\u62a5\u9519\u200b\n  }\n\n  return 0;\n}\n</code></pre>"},{"location":"langs/cpp/effective/item2/","title":"item2\uff1a\u200b\u7406\u89e3\u200bauto\u200b\u7c7b\u578b\u200b\u63a8\u5bfc","text":"item2 <ul> <li><code>auto</code>\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u901a\u5e38\u200b\u548c\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u76f8\u540c\u200b\uff0c\u200b\u4f46\u662f\u200b<code>auto</code>\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u5047\u5b9a\u200b\u82b1\u200b\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u4ee3\u8868\u200b<code>std::initializer_list</code>\uff0c\u200b\u800c\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u4e0d\u200b\u8fd9\u6837\u200b\u505a\u200b</li> <li>\u200b\u5728\u200bC++14\u200b\u4e2d\u200b<code>auto</code>\u200b\u5141\u8bb8\u200b\u51fa\u73b0\u200b\u5728\u200b\u51fd\u6570\u200b\u8fd4\u56de\u503c\u200b\u6216\u8005\u200blambda\u200b\u51fd\u6570\u200b\u5f62\u53c2\u4e2d\u200b\uff0c\u200b\u4f46\u662f\u200b\u5b83\u200b\u7684\u200b\u5de5\u4f5c\u200b\u673a\u5236\u200b\u662f\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\u90a3\u200b\u4e00\u5957\u200b\u65b9\u6848\u200b\uff0c\u200b\u800c\u200b\u4e0d\u662f\u200b<code>auto</code>\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b</li> </ul> <p>\u200b\u4e07\u80fd\u200b\u5f15\u7528\u200b\u7684\u200b\u7b2c\u4e8c\u79cd\u200b\u5199\u6cd5\u200b auto&amp;&amp; (\u200b\u63a8\u5bfc\u200b\u7ed3\u679c\u200b\u8be6\u7ec6\u200b\u89c1\u200bitem1)</p> <p>{}\u200b\u7684\u200bauto\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b <pre><code>auto x1 = 27;   // int\nauto x2(27);    // int\nauto x3{27};    // int\nauto x4 = {27}; // initializer_list&lt;int&gt;\n// auto x5{10, 27}; //error\n// auto x6 = {10, 27, 7.}; // error:\u200b\u7981\u6b62\u200b\u9690\u5f0f\u200b\u7f29\u7a84\u200b\u8f6c\u6362\u200b \n</code></pre></p> <p>{}\u200b\u7684\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b <pre><code>template &lt;typename T&gt; void f(T param) {}\n\ntemplate &lt;typename T&gt; void g(std::initializer_list&lt;T&gt; param) {}\n\n// main\n// f({1, 2, 3}); // error\uff1aT\u200b\u63a8\u5bfc\u200b\u4e0d\u200b\u51fa\u200binitializer_list\ng({1, 2, 3});\n</code></pre></p> <p>C++14\u200b\u4e2d\u200b\uff0cauto\u200b\u53ef\u4ee5\u200b\u4f5c\u4e3a\u200b\u51fd\u6570\u200b\u8fd4\u56de\u503c\u200b\uff0c\u200b\u4f46\u200b\u89c4\u5219\u200b\u5374\u662f\u200b\u6a21\u677f\u200b\u7684\u200b\u89c4\u5219\u200b <pre><code>// auto createInitList() { return {1, 2, 3}; } // error\uff1aauto\u200b\u76f8\u5f53\u4e8e\u200bT\uff0c\u200b\u63a8\u5bfc\u200b\u4e0d\u200b\u51fa\u200b\nauto createInitList() -&gt; std::initializer_list&lt;int&gt; { return {1, 2, 3}; }\n</code></pre></p>"},{"location":"langs/cpp/effective/item23/","title":"item23\uff1a\u200b\u7406\u89e3\u200bstd::move\u200b\u548c\u200bstd::forward","text":"item23 <ul> <li><code>std::move</code>\u200b\u6267\u884c\u200b\u5230\u200b\u53f3\u503c\u200b\u7684\u200b\u65e0\u6761\u4ef6\u200b\u7684\u200b\u8f6c\u6362\u200b\uff0c\u200b\u4f46\u200b\u5c31\u200b\u81ea\u8eab\u200b\u800c\u8a00\u200b\uff0c\u200b\u5b83\u200b\u4e0d\u200b\u79fb\u52a8\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\u3002</li> <li><code>std::forward</code>\u200b\u53ea\u6709\u200b\u5f53\u200b\u5b83\u200b\u7684\u200b\u53c2\u6570\u200b\u88ab\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u4e00\u4e2a\u200b\u53f3\u503c\u200b\u65f6\u200b\uff0c\u200b\u624d\u200b\u5c06\u200b\u53c2\u6570\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u53f3\u503c\u200b\u3002</li> <li><code>std::move</code>\u200b\u548c\u200b<code>std::forward</code>\u200b\u5728\u200b\u8fd0\u884c\u200b\u671f\u200b\u4ec0\u4e48\u200b\u4e5f\u200b\u4e0d\u200b\u505a\u200b\u3002</li> </ul>"},{"location":"langs/cpp/effective/item23/#stdmove","title":"std::move\u200b\u5b9e\u73b0","text":"<p><pre><code>// \u200b\u6709\u200b\u95ee\u9898\u200b\u7684\u200b\u5b9e\u73b0\u200b\u7248\u672c\u200b\ntemplate &lt;typename T&gt;\nT &amp;&amp;mymove(T &amp;&amp;param) {\n  return static_cast&lt;T&amp;&amp;&gt;(param);\n}\n// main\nint m = 10;\n// int &amp;&amp;n = mymove(m); //error\n</code></pre> \u200b\u4e0a\u8ff0\u200bmymove\u200b\u5b9e\u73b0\u200b\u7684\u200b\u95ee\u9898\u200b\u5728\u4e8e\u200b\u5f53\u200bmymove\u200b\u63a5\u6536\u200b\u4e00\u4e2a\u200b\u5de6\u503c\u200b\u65f6\u200b\uff0c\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u4f1a\u200b\u88ab\u200b\u63a8\u5bfc\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u63a5\u7740\u200bT&amp;&amp;\u200b\u4f1a\u200b\u53d1\u751f\u200b\u5f15\u7528\u200b\u6298\u53e0\u200b\uff0c\u200b\u8fdb\u800c\u200bT&amp;&amp;\u200b\u4e5f\u200b\u4f1a\u200b\u88ab\u200b\u63a8\u5bfc\u200b\u4e3a\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u5373\u200b<code>int &amp;mymove&lt;int &amp;&gt;(int &amp;param)</code>\uff0c\u200b\u8fd9\u6837\u200b\u7528\u200b\u4e00\u4e2a\u200b\u53f3\u503c\u200b\u63a5\u6536\u200b\u5c31\u200b\u4f1a\u200b\u51fa\u9519\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5728\u200b\u63a5\u6536\u200b\u8fd9\u4e2a\u200b\u7c7b\u578b\u200bT\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5c06\u200b\u5f15\u7528\u200b\u5220\u9664\u200b\uff0c\u200b\u8fd9\u200b\u5c31\u7528\u5230\u200b\u4e86\u200bitem9\u200b\u4e2d\u200b\u63d0\u53ca\u200b\u7684\u200b\u7c7b\u578b\u200b\u8403\u53d6\u200b\u5668\u200b\uff0c\u200b\u6b63\u786e\u200b\u7684\u200b\u5b9e\u73b0\u200b\u5982\u4e0b\u200b\uff1a <pre><code>template &lt;typename T&gt;\ntypename std::remove_reference&lt;T&gt;::type &amp;&amp;move(T &amp;&amp;param)  // c++11\n{\n  using ReturnType = typename std::remove_reference&lt;T&gt;::type &amp;&amp;;\n  return static_cast&lt;ReturnType&gt;(param);\n}\ntemplate &lt;typename T&gt;\ndecltype(auto) move2(T &amp;&amp;param)  // C++14\n{\n  using ReturnType = std::remove_reference_t&lt;T&gt; &amp;&amp;;\n  return static_cast&lt;ReturnType&gt;(param);\n}\n</code></pre></p>"},{"location":"langs/cpp/effective/item23/#stdmove_1","title":"std::move","text":"<p>std::move\u200b\u5b9e\u9645\u200b\u505a\u200b\u7684\u200b\u4e8b\u60c5\u200b\u662f\u200b\u5c06\u200b\u5b9e\u53c2\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u53f3\u503c\u200b\uff08\u200b\u6709\u4e9b\u200b\u63d0\u8bae\u200b\u8bf4\u200b\u5b83\u200b\u7684\u200b\u540d\u5b57\u200b\u53eb\u200brvalue_cost\u200b\u66f4\u597d\u200b\uff09</p> <p>\u200b\u5bf9\u200b\u4e00\u4e2a\u200b\u5bf9\u8c61\u200b\u4f7f\u7528\u200bstd::move\u200b\u5c31\u662f\u200b\u544a\u8bc9\u200b\u7f16\u8bd1\u5668\u200b\u8fd9\u4e2a\u200b\u5bf9\u8c61\u200b\u5f88\u200b\u9002\u5408\u200b\u88ab\u200b\u79fb\u52a8\u200b</p> <p>std::move\u200b\u672c\u8d28\u200b\uff1a\u200b\u603b\u662f\u200b\u5c06\u200b\u4efb\u4f55\u200b\u503c\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u53f3\u503c\u200b</p> \u200b\u5bf9\u4e8e\u200bconst\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u53ea\u80fd\u200b\u5339\u914d\u200b\u4e0a\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b <p><pre><code>struct A {\nA(int value) : b(value) { std::cout &lt;&lt; \"create\" &lt;&lt; std::endl; }\nA(const A &amp;value) {\n    std::cout &lt;&lt; \"copy\" &lt;&lt; std::endl;\n    b = value.b;\n}\nA(A &amp;&amp;value) {\n    std::cout &lt;&lt; \"move\" &lt;&lt; std::endl;\n    b = value.b;\n    value.b = 0;\n}\n\nint b;\n};\n\nclass Annotation {\npublic:\nexplicit Annotation(const A a) : a_param(std::move(a)) {}\n\nprivate:\nA a_param;\n};\n\nint main() {\nAnnotation aa{10};\n\nconst A cc{12};\n// A &amp;&amp;m = std::move(cc); //error\n}\n</code></pre> <code>Annotation aa{10};</code>\u200b\u53ea\u4f1a\u200b\u8c03\u7528\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b\uff0c\u200b\u5373\u4f7f\u200b\u5728\u200b\u5b9e\u73b0\u200b\u4e2d\u200b\u4f7f\u7528\u200b\u4e86\u200bstd::move\uff0c\u200b\u8fd9\u662f\u200b\u7531\u4e8e\u200b10\u200b\u662f\u200b\u4e00\u4e2a\u200b\u53f3\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f53\u200baa{10}\u200b\u88ab\u200b\u521d\u59cb\u5316\u200b\u540e\u200b\uff0cconst aa\u200b\u5219\u200b\u88ab\u200b\u89e3\u91ca\u200b\u4e3a\u4e86\u200b\u4e00\u4e2a\u200bconst\u200b\u7684\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u8fd9\u200b\u4e0e\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u4e2d\u200b\u7684\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u5e76\u200b\u4e0d\u200b\u5339\u914d\u200b\uff0c\u200b\u800c\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b\u4e2d\u200b\u7684\u200bconst &amp;\u200b\u53ef\u4ee5\u200b\u5339\u914d\u200b\u4e00\u5207\u200b\uff0c\u200b\u8fdb\u800c\u200b\u5c31\u200b\u4f1a\u200b\u8c03\u7528\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b</p>"},{"location":"langs/cpp/effective/item23/#stdforward","title":"\u521d\u63a2\u200bstd::forward","text":"<p><pre><code>void process(const A &amp;lvalArg) { std::cout &lt;&lt; \"deal lvalArg\" &lt;&lt; std::endl; }\nvoid process(A &amp;&amp;rvalArg) { std::cout &lt;&lt; \"deal rvalArg\" &lt;&lt; std::endl; }\n\ntemplate &lt;typename T&gt;\nvoid logAndProcess(T &amp;&amp;param) {\n  // process(param);\n  // process(std::move(param));\n  process(std::forward&lt;T&gt;(param));  // \u200b\u5b9e\u53c2\u200b\u7528\u53f3\u503c\u200b\u521d\u59cb\u5316\u200b\u65f6\u200b\uff0c\u200b\u8f6c\u6362\u200b\u4e3a\u200b\u4e00\u4e2a\u200b\u53f3\u503c\u200b\n}\n\nint main() {\n  A m{10};\n  logAndProcess(m);\n  logAndProcess(std::move(m));\n}\n</code></pre> \u200b\u65e0\u8bba\u200blogAndProcess\u200b\u4f20\u5165\u200b\u7684\u200b\u53c2\u6570\u200b\u662f\u200bm\u200b\u8fd8\u662f\u200bstd::move(m)\uff0clogAndProcess\u200b\u4e2d\u200b\u63a5\u6536\u200b\u5230\u200b\u7684\u200bparam\u200b\u6700\u7ec8\u200b\u90fd\u200b\u4f1a\u200b\u53d8\u6210\u200b\u5de6\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u5f53\u200b\u6211\u4eec\u200b\u5e0c\u671b\u200b\u5c06\u200bparam\u200b\u5de6\u53f3\u200b\u503c\u200b\u4fe1\u606f\u200b\u4fdd\u7559\u200b\u5e76\u200b\u4f20\u9012\u200b\u7684\u200b\u65f6\u5019\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u7528\u5230\u200bstd::forward</p> <p><code>std::forward&lt;T&gt;</code>\u200b\u7684\u200b\u672c\u8d28\u200b\uff1a\u200b\u6709\u200b\u6761\u4ef6\u200b\u7684\u200bmove\uff0c\u200b\u53ea\u6709\u200b\u5f53\u200b\u5b9e\u53c2\u200b\u7528\u53f3\u503c\u200b\u521d\u59cb\u5316\u200b\u624d\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u53f3\u503c\u200b</p>"},{"location":"langs/cpp/effective/item3/","title":"item3\uff1a\u200b\u7406\u89e3\u200bdecltype","text":"item3 <ul> <li><code>decltype</code>\u200b\u603b\u662f\u200b\u4e0d\u200b\u52a0\u200b\u4fee\u6539\u200b\u7684\u200b\u4ea7\u751f\u200b\u53d8\u91cf\u200b\u6216\u8005\u200b\u8868\u8fbe\u5f0f\u200b\u7684\u200b\u7c7b\u578b\u200b\u3002</li> <li>\u200b\u5bf9\u4e8e\u200b<code>T</code>\u200b\u7c7b\u578b\u200b\u7684\u200b\u4e0d\u662f\u200b\u5355\u7eaf\u200b\u7684\u200b\u53d8\u91cf\u540d\u200b\u7684\u200b\u5de6\u503c\u200b\u8868\u8fbe\u5f0f\u200b\uff0c<code>decltype</code>\u200b\u603b\u662f\u200b\u4ea7\u51fa\u200b<code>T</code>\u200b\u7684\u200b\u5f15\u7528\u200b\u5373\u200b<code>T&amp;</code>\u3002</li> <li>C++14\u200b\u652f\u6301\u200b<code>decltype(auto)</code>\uff0c\u200b\u5c31\u200b\u50cf\u200b<code>auto</code>\u200b\u4e00\u6837\u200b\uff0c\u200b\u63a8\u5bfc\u200b\u51fa\u200b\u7c7b\u578b\u200b\uff0c\u200b\u4f46\u662f\u200b\u5b83\u200b\u4f7f\u7528\u200b<code>decltype</code>\u200b\u7684\u200b\u89c4\u5219\u200b\u8fdb\u884c\u200b\u63a8\u5bfc\u200b\u3002</li> </ul>"},{"location":"langs/cpp/effective/item3/#decltype","title":"decltype + \u200b\u53d8\u91cf","text":"<p>\u200b\u6240\u6709\u200b\u4fe1\u606f\u200b\u90fd\u200b\u4f1a\u200b\u88ab\u200b\u4fdd\u7559\u200b\uff0c\u200b\u6570\u7ec4\u200b\u4e0e\u200b\u51fd\u6570\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u9000\u5316\u200b</p> <pre><code>int a = 10;\ndecltype(a) b; // b -&gt; int\nint &amp;&amp;arref = std::move(a);\ndecltype(arref) ref; // ref -&gt; int &amp;&amp;\nconst int ca = 20;\nconst int &amp;&amp;carref = std::move(ca);\ndecltype(carref) cb;  // cb -&gt; const int &amp;&amp;\nint array[2] = {0, 1};\ndecltype(array) arr; // arr -&gt; int[2]\n</code></pre>"},{"location":"langs/cpp/effective/item3/#decltype_1","title":"decltype + \u200b\u8868\u8fbe\u5f0f","text":"<p>\u200b\u4f1a\u200b\u8fd4\u56de\u200b\u8868\u8fbe\u5f0f\u200b\u7ed3\u679c\u200b\u5bf9\u5e94\u200b\u7684\u200b\u7c7b\u578b\u200b</p> <p>\u200b\u8868\u8fbe\u5f0f\u200b\u7ed3\u679c\u200b\u4e0d\u662f\u200b\u5de6\u503c\u200b\u5c31\u662f\u200b\u53f3\u503c\u200b</p> <ul> <li>\u200b\u5de6\u503c\u200b\uff1a\u200b\u5f97\u5230\u200b\u8be5\u200b\u7c7b\u578b\u200b\u7684\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b</li> <li>\u200b\u53f3\u503c\u200b\uff1a\u200b\u5f97\u5230\u200b\u8be5\u200b\u7c7b\u578b\u200b</li> </ul> <pre><code>int *const acptr = &amp;a;\nconst int *const cacptr = &amp;a;\ndecltype(*cacptr) cc;  // cc -&gt; const int &amp;\n10;\ndecltype(10) aa; // aa -&gt; int\n\nint value = 10;\nint *ptr = &amp;value;\ndecltype(*ptr) ref = value;  // ref -&gt; int &amp;\ndecltype(ptr) val;           // val -&gt; int *\ndecltype((value)) ref2 = value;  // ref2 -&gt;int &amp;\ndecltype((((value)))) ref3 = value;  // ref3 -&gt;int &amp;\ndecltype(value + 10) value2 = value;  // value2 -&gt; int\n\nconst int cvalue = 20;\nconst int *cptr = &amp;cvalue;\nint *const ptrc = &amp;value;\ndecltype(*cptr) cref = cvalue;  // cref -&gt; const int &amp;\ndecltype(*ptrc) refc = value;   // refc -&gt; int &amp;\ndecltype((cvalue + 10)) value3 = value;  // value3 -&gt; int\n</code></pre> <p><code>int *ptr = &amp;value;</code> \u200b\u4e2d\u200b *ptr \u200b\u662f\u200b\u5de6\u503c\u200b\uff0c\u200b\u56e0\u6b64\u200b\u63a8\u5bfc\u200b\u5f97\u5230\u200b\u7684\u200b\u662f\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u5373\u200bint &amp;</p> <p>\u200b\u4f46\u662f\u200b <code>decltype(ptr) val;</code> val \u200b\u7684\u200b\u7c7b\u578b\u200b\u786e\u5b9e\u200bint *\uff0c\u200b\u800c\u200bptr\u200b\u4e5f\u200b\u662f\u200b\u5de6\u503c\u200b\uff0c\u200b\u8fd9\u200b\u662f\u56e0\u4e3a\u200b\uff1adecltype\u200b\u5355\u72ec\u200b\u4f5c\u7528\u200b\u4e8e\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u6ca1\u6709\u200b\u4f7f\u7528\u200b\u5bf9\u8c61\u200b\u7684\u200b\u8868\u8fbe\u5f0f\u200b\u5c5e\u6027\u200b\uff0c\u200b\u800c\u662f\u200b\u76f4\u63a5\u200b\u83b7\u5f97\u200b\u53d8\u91cf\u200b\u7c7b\u578b\u200b\uff0c\u200b\u60f3\u8981\u200b\u5c06\u200b\u53d8\u91cf\u200b\u4f5c\u4e3a\u200b\u8868\u8fbe\u5f0f\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u52a0\u200b\u62ec\u53f7\u200b</p> <p>decltype \u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u5b9e\u9645\u200b\u8ba1\u7b97\u200b\u8868\u8fbe\u5f0f\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u5206\u6790\u200b\u8868\u8fbe\u5f0f\u200b\u5e76\u200b\u5f97\u5230\u200b\u7c7b\u578b\u200b</p> <p>\u200b\u5bf9\u4e8e\u200b\u4e0b\u9762\u200b\u8fd9\u4e2a\u200b\u4f8b\u5b50\u200b\u4e2d\u200b\uff0c\u200b\u5e76\u200b\u4e0d\u4f1a\u200b\u6267\u884c\u200bfun\u200b\u51fd\u6570\u200b\u6253\u5370\u200b\uff0cdecltype\u200b\u4f1a\u200b\u5206\u6790\u200b\u5f97\u5230\u200bfun\u200b\u8fd4\u56de\u200b\u7c7b\u578b\u200b\u4e3a\u200bint\uff0c\u200b\u7136\u540e\u200b\u63a8\u5bfc\u200bvalue4\u200b\u4e3a\u200bint <pre><code>int fun(int x) {\n  std::cout &lt;&lt; \"fun\" &lt;&lt; std::endl;\n  return x;\n}\n// main\nint value = 10;\ndecltype(fun(value)) value4;\n</code></pre></p>"},{"location":"langs/cpp/effective/item3/#decltype_2","title":"decltype\u200b\u4f7f\u7528\u200b\u573a\u666f","text":"<p>\u200b\u67d0\u4e9b\u200b\u60c5\u51b5\u200b\u6a21\u677f\u200b\u51fd\u6570\u200b\u7684\u200b\u8fd4\u56de\u503c\u200b\u662f\u200b\u65e0\u6cd5\u200b\u63d0\u524d\u200b\u5f97\u5230\u200b\u7684\u200b</p> <p>\u200b\u5bf9\u4e8e\u200bstd::vector&lt;&gt;\u200b\u7684\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u4f7f\u7528\u200boperator[]\u200b\u901a\u5e38\u200b\u4f1a\u200b\u8fd4\u56de\u200bT&amp;\uff0c\u200b\u4f46\u662f\u200b\u5bf9\u4e8e\u200bstd::vector&lt; bool &gt; \u200b\u5374\u662f\u200b\u4e00\u4e2a\u200b\u4f8b\u5916\u200b\uff0c\u200b\u56e0\u6b64\u200b\u6b64\u65f6\u200b\u7684\u200b\u6a21\u677f\u200b\u51fd\u6570\u200b\u7684\u200b\u8fd4\u56de\u503c\u200b\u5fc5\u987b\u200b\u662f\u200b\u81ea\u52a8\u200b\u63a8\u5bfc\u200b</p> <p>C++ 11 \u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b\u5c3e\u7f6e\u200b\u8fd4\u56de\u200b\u7c7b\u578b\u200b\u8bed\u6cd5\u200b auto + decltype(xxx)</p> <p>C++ 14 \u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bauto\uff0c\u200b\u4f46\u662f\u200bauto\u200b\u4f5c\u4e3a\u200b\u51fd\u6570\u200b\u8fd4\u56de\u503c\u200b\u8d70\u200b\u7684\u200b\u662f\u200b\u6a21\u677f\u200b\u7c7b\u578b\u200b\u63a8\u5bfc\u200b\uff0c\u200b\u6240\u6709\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200bdecltype(auto)\u200b\u6765\u200b\u4fdd\u7559\u200bxxx\u200b\u7684\u200b\u6240\u6709\u200b\u4fee\u9970\u200b</p> <pre><code>struct Point {\n  int x, y;\n  Point &amp;operator=(Point p) {\n    std::cout &lt;&lt; \"operator=\" &lt;&lt; std::endl;\n    return *this;\n  }\n};\n\ntemplate &lt;typename Container, typename Index&gt;  // \u200b\u53ef\u4ee5\u200b\u5de5\u4f5c\u200b\uff0c\nauto testFun(Container &amp;c, Index i)            // \u200b\u4f46\u662f\u200b\u9700\u8981\u200b\u6539\u826f\u200b\n    -&gt; decltype(c[i])  // c++11\u200b\u7684\u200b\u5199\u6cd5\u200b \u200b\u5c3e\u7f6e\u200b\u8fd4\u56de\u200b\u7c7b\u578b\u200b\u8bed\u6cd5\u200b\n{\n  // do something...\n  return c[i];\n}\n\ntemplate &lt;typename Container, typename Index&gt;  // C++14\u200b\u7248\u672c\u200b\uff0c\nauto testFun_error(\n    Container &amp;c,\n    Index i)  // \u200b\u4e0d\u200b\u90a3\u4e48\u200b\u6b63\u786e\u200b \u200b\u56e0\u4e3a\u200bauto\u200b\u4f5c\u4e3a\u200b\u51fd\u6570\u200b\u8fd4\u56de\u503c\u200b\u7684\u200b\u65f6\u5019\u200b\u8d70\u200b\u7684\u200b\u662f\u200b\u6a21\u677f\u200b\u63a8\u5bfc\u200b\u7684\u200b\u5957\u8def\u200b\n{\n  // do something...\n  return c[i];  // \u200b\u4ece\u200bc[i]\u200b\u4e2d\u200b\u63a8\u5bfc\u200b\u8fd4\u56de\u200b\u7c7b\u578b\u200b\n}\n\ntemplate &lt;typename Container, typename Index&gt;  // C++14\u200b\u7248\u672c\u200b\uff0c\ndecltype(auto) testFun_right(Container &amp;c, Index i)  // \u200b\u53ef\u4ee5\u200b\u5de5\u4f5c\u200b\uff0c\u200b\u4f46\u662f\u200b\u8fd8\u200b\u9700\u8981\u200b\u6539\u826f\u200b\n{\n  // do something...\n  return c[i];\n}\n\ntemplate &lt;typename Container, typename Index&gt;\ndecltype(auto) testFun_better(Container &amp;&amp;c, Index i) {\n  // do something...\n  // return c[i];\n  return std::forward&lt;Container&gt;(c)[i];\n}\n\nint main() {\n  int value = 10;\n  Point point{1, 2};\n  std::vector&lt;bool&gt; vec = {true, false, true};\n  decltype(vec[1]) value6;  // value6 -&gt; std::vector&lt;bool&gt;::reference\n  std::vector&lt;int&gt; vec2 = {1, 2, 3};\n  decltype(vec2[1]) value7 = value;  // value7 -&gt; int &amp;\n  std::vector&lt;Point&gt; vec3 = {{1, 2}, {3, 4}, {2, 3}};\n  decltype(vec3[1]) value8 = point; // value8 -&gt; Point &amp;\n\n  testFun(vec, 1) = true;\n  testFun(vec2, 1) = 10;\n  testFun(vec3, 1) = {4, 8};\n\n  testFun_error(vec, 1) = true;\n  // testFun_error(vec2, 1) = 10;  // error testFun_error(vec2, 1) \u200b\u662f\u200b\u53f3\u503c\u200b\n  testFun_error(vec3, 1) =\n      point;  // testFun_error(vec3, 1) \u200b\u4e5f\u200b\u662f\u200b\u53f3\u503c\u200b\uff0c\u200b\u4f46\u662f\u200b\u4ed6\u200b\u5728\u200b\u6267\u884c\u200b Point &amp;operator=(Point p) \u200b\u51fd\u6570\u200b\n\n  testFun_right(vec, 1) = true;\n  testFun_right(vec2, 1) = 20;\n  testFun_right(vec3, 1) = {5, 15};\n}\n</code></pre>"},{"location":"langs/cpp/effective/item7/","title":"item7\uff1a\u200b\u533a\u522b\u200b\u4f7f\u7528\u200b()\u200b\u548c\u200b{}\u200b\u521b\u5efa\u5bf9\u8c61","text":"item7 <ul> <li>\u200b\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u662f\u200b\u6700\u200b\u5e7f\u6cdb\u200b\u4f7f\u7528\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\u8bed\u6cd5\u200b\uff0c\u200b\u5b83\u200b\u9632\u6b62\u200b\u53d8\u7a84\u200b\u8f6c\u6362\u200b\uff0c\u200b\u5e76\u4e14\u200b\u5bf9\u4e8e\u200bC++\u200b\u6700\u200b\u4ee4\u4eba\u200b\u5934\u75bc\u200b\u7684\u200b\u89e3\u6790\u200b\u6709\u200b\u5929\u751f\u200b\u7684\u200b\u514d\u75ab\u6027\u200b</li> <li>\u200b\u5728\u200b\u6784\u9020\u51fd\u6570\u200b\u91cd\u8f7d\u200b\u51b3\u8bae\u200b\u4e2d\u200b\uff0c\u200b\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u5c3d\u200b\u6700\u5927\u200b\u53ef\u80fd\u200b\u4e0e\u200b<code>std::initializer_list</code>\u200b\u53c2\u6570\u200b\u5339\u914d\u200b\uff0c\u200b\u5373\u4fbf\u200b\u5176\u4ed6\u200b\u6784\u9020\u51fd\u6570\u200b\u770b\u8d77\u6765\u200b\u662f\u200b\u66f4\u597d\u200b\u7684\u200b\u9009\u62e9\u200b</li> <li>\u200b\u5bf9\u4e8e\u200b\u6570\u503c\u200b\u7c7b\u578b\u200b\u7684\u200b<code>std::vector</code>\u200b\u6765\u8bf4\u200b\u4f7f\u7528\u200b\u82b1\u200b\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u548c\u200b\u5c0f\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u4f1a\u200b\u9020\u6210\u200b\u5de8\u5927\u200b\u7684\u200b\u4e0d\u540c\u200b</li> <li>\u200b\u5728\u200b\u6a21\u677f\u200b\u7c7b\u200b\u9009\u62e9\u200b\u4f7f\u7528\u200b\u5c0f\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u6216\u200b\u4f7f\u7528\u200b\u82b1\u200b\u62ec\u53f7\u200b\u521d\u59cb\u5316\u200b\u521b\u5efa\u5bf9\u8c61\u200b\u662f\u200b\u4e00\u4e2a\u200b\u6311\u6218\u200b\u3002</li> </ul>"},{"location":"langs/cpp/effective/item7/#_1","title":"{}\u200b\u7684\u200b\u5f15\u5165","text":"<pre><code>struct A {\n  A(int a) { std::cout &lt;&lt; \"A(int a)\" &lt;&lt; std::endl; }\n  A(const A &amp;a) { std::cout &lt;&lt; \"A(const A&amp; a)\" &lt;&lt; std::endl; }\n};\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\nA a = 10; // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\nA b(10); // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\nA c = (10);  // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\nA d{10};  // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\nA e = {10};  // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\n// d\u200b\u548c\u200be\u200b\u662f\u200bc++11\u200b\u4e4b\u540e\u200b\u63d0\u51fa\u200b\u7684\u200b d\u200b\u548c\u200be\u200b\u5728\u200bc++14\u200b\u524d\u200b\u7b49\u4ef7\u200b\uff0c14\u200b\u53ca\u200b\u4e4b\u540e\u200b\u4e0d\u7b49\u4ef7\u200b\n</code></pre> <p>1\u3001<code>A a = 10;</code>\u200b\u95ee\u9898\u200b\uff1a\u200b\u53ea\u80fd\u200b\u63a5\u6536\u200b\u4e00\u4e2a\u200b\u53c2\u6570\u200b\uff1b\u200b\u8981\u200b\u989d\u5916\u200b\u6267\u884c\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u6709\u4e9b\u200b\u7c7b\u200b\u8fd8\u200b\u4e0d\u53ef\u200b\u62f7\u8d1d\u200b</p> <p>2\u3001<code>A a(10);</code> \u200b\u95ee\u9898\u200b\uff1a\u200b\u88ab\u200b\u7528\u505a\u200b\u51fd\u6570\u53c2\u6570\u200b\u6216\u200b\u8fd4\u56de\u503c\u200b\u65f6\u200b\u8fd8\u662f\u200b\u4f1a\u200b\u6267\u884c\u200b\u62f7\u8d1d\u200b</p> <p>3\u3001<code>A a{10};</code>\u200b\u7684\u200b\u4f18\u52bf\u200b\uff1a{}\u200b\u53ef\u4ee5\u200b\u5b8c\u7f8e\u200b\u89e3\u51b3\u200b\u4e0a\u9762\u200b\u95ee\u9898\u200b\uff0c\u200b\u5e76\u4e14\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7f29\u7a84\u200b\u8f6c\u6362\u200b\uff1b\u200b\u5927\u5927\u7b80\u5316\u200b\u4e86\u200b\u805a\u5408\u200b\u7c7b\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\uff1b{}\u200b\u5bf9\u200bc++\u200b\u6700\u200b\u4ee4\u4eba\u200b\u5934\u75bc\u200b\u7684\u200b\u89e3\u6790\u200b\u95ee\u9898\u200b\u5929\u751f\u200b\u514d\u75ab\u200b\uff08\u200b\u7c7b\u5185\u200b\u521d\u59cb\u5316\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u4f7f\u7528\u200b2\u3001\uff09</p> <pre><code>struct people {\n//  private: // private\u200b\u5c31\u200b\u4e0d\u662f\u200b\u805a\u5408\u200b\u7c7b\u200b\u4e86\u200b\uff0c{}\u200b\u521d\u59cb\u5316\u200b\u62a5\u9519\u200b\n  // people() = default;\n  int age;\n  // int age(10); // ()\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u7c7b\u5185\u200b\u521d\u59cb\u5316\u200b \u200b\u62a5\u9519\u200b\uff0c()\u200b\u4f1a\u200b\u89e3\u6790\u200b\u6210\u200b\u51fd\u6570\u200b\n  std::string name;\n  float height;\n};\nstruct A {\n  A(int a) { std::cout &lt;&lt; \"A(int a)\" &lt;&lt; std::endl; }\n  A(int a, int b) { std::cout &lt;&lt; \"A(int a,int b)\" &lt;&lt; std::endl; }\n  A(const A &amp;a) { std::cout &lt;&lt; \"A(const A&amp; a)\" &lt;&lt; std::endl; }\n};\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\n// A f = 10, 5; // \u200b\u53ea\u80fd\u200b\u63a5\u6536\u200b\u4e00\u4e2a\u200b\u53c2\u6570\u200b\uff0c\u200b\u9519\u8bef\u200b\nA g(10, 5);     //\u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\nA gg(10, 5.);   // \u200b\u4e0d\u200b\u5b89\u5168\u200b\nA i = {10, 5};  // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\n// A j = {10,5.}; // \u200b\u62a5\u9519\u200b\uff0c\u200b\u4e0d\u200b\u5141\u8bb8\u200b\u7f29\u7a84\u200b\u8f6c\u6362\u200b\nA j = {10, static_cast&lt;int&gt;(5.)};\nfun1(A(10, 5));  // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\nfun1({10, 5});   // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\nA k = fun2();    // \u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\u4e24\u6b21\u200b\u62f7\u8d1d\u200b\nA m = fun3();  //\u200b\u4e00\u6b21\u200b\u6784\u9020\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b \u200b\u6700\u540e\u200b\u8d4b\u503c\u200b\u7ed9\u200bm\u200b\u65f6\u4f1a\u200b\u62f7\u8d1d\u200b\u4e00\u6b21\u200b\uff0c\u200b\u53ef\u4ee5\u200b\u7528\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\npeople aa{19, \"cxk\", 191.};  // \u200b\u805a\u5408\u200b\u7c7b\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\n</code></pre>"},{"location":"langs/cpp/effective/item7/#most-vexing-parse","title":"most vexing parse(\u200b\u6700\u200b\u4ee4\u4eba\u200b\u5934\u75bc\u200b\u7684\u200b\u89e3\u6790\u200b\u95ee\u9898\u200b)","text":"<ul> <li>\u200b\u5bf9\u8c61\u200b\u53c2\u6570\u200b\u7684\u200b\u521b\u5efa\u200b</li> <li>\u200b\u51fd\u6570\u200b\u7c7b\u578b\u200b\u7684\u200b\u89c4\u7ea6\u200b</li> </ul> <p>\u200b\u5bf9\u4e8e\u200b\u4e0b\u9762\u200b\u8fd9\u4e2a\u200b\u4f8b\u5b50\u200b\uff0c\u200b\u6709\u200b\u4e24\u79cd\u200b\u770b\u6cd5\u200b\uff1a</p> <ul> <li>\u200b\u65b0\u5efa\u200b\u4e00\u4e2a\u200bint\u200b\u7c7b\u578b\u200b\u7684\u200b\u53d8\u91cf\u200b\uff08\u200b\u5c06\u200bvalue\u200b\u5f3a\u200b\u8f6c\u4e3a\u200bint\uff09\uff0c\u200b\u4e0b\u9762\u200b\u7684\u200bint(value)\u200b\u5e76\u200b\u4e0d\u662f\u200b\u5f3a\u5236\u200b\u8f6c\u6362\u200b\uff0c\u200b\u800c\u662f\u200b\u521b\u5efa\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b</li> <li>\u200b\u58f0\u660e\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200bint i(int value)\uff1bC\u200b\u8bed\u8a00\u200b\u5141\u8bb8\u200b\u53c2\u6570\u200b\u88ab\u200b\u591a\u4f59\u200b\u7684\u200b\u62ec\u53f7\u200b\u5305\u88f9\u200b</li> </ul> <p>\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u89e3\u91ca\u200b\u6210\u200b\u7b2c\u4e8c\u79cd\u200b\uff0c\u200b\u89c6\u4f5c\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u58f0\u660e\u200b\u800c\u200b\u975e\u200b()\u200b\u7684\u200b\u521d\u59cb\u5316\u200b</p> <pre><code>void f(double value) { int i(int(value)); }\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b\u4e0b\u9762\u200b\u8fd9\u4e2a\u200b\u4f8b\u5b50\u200b\uff0c\u200b\u540c\u6837\u200b\u4f1a\u200b\u89c6\u4e3a\u200b\u4e00\u4e2a\u200b\u51fd\u6570\u200b\u58f0\u660e\u200b\u800c\u200b\u975e\u200b()\u200b\u7684\u200b\u521d\u59cb\u5316\u200b</p> <pre><code>struct Timer {};\nstruct TimerKeeper {\n  TimerKeeper(Timer t) {}\n};\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\nTimerKeeper time_keeper(Timer()); // \u200b\u89c6\u4e3a\u200b\u51fd\u6570\u200b\u58f0\u660e\u200b\nTimerKeeper time_keeper{Timer()}; // {}\u200b\u521d\u59cb\u5316\u200b\n</code></pre>"},{"location":"langs/cpp/effective/item7/#_2","title":"\u805a\u5408\u200b\u7c7b\u200b\u7684\u200b\u5b9a\u4e49\u200b\u4e0e\u200b\u4e0d\u540c\u200b\u6807\u51c6\u200b\u7684\u200b\u533a\u522b","text":"<p>C++ 11 \uff1a</p> <ul> <li>\u200b\u6240\u6709\u200b\u6210\u5458\u200b\u90fd\u200b\u662f\u200bpublic</li> <li>\u200b\u6ca1\u6709\u200b\u5b9a\u4e49\u200b\u4efb\u4f55\u200b\u6784\u9020\u51fd\u6570\u200b \u200b\u4f46\u200b\u53ef\u4ee5\u200b\u5199\u51fa\u200b=default</li> <li>\u200b\u6ca1\u6709\u200b\u7c7b\u5185\u200b\u521d\u59cb\u5316\u200b \uff08C++17\u200b\u53d6\u6d88\u200b\uff09\u200b\u5b58\u5728\u200b\u95ee\u9898\u200b\uff1a\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u4efb\u52a1\u200b\u4ea4\u7ed9\u200b\u4e86\u200b\u7528\u6237\u200b</li> <li>\u200b\u6ca1\u6709\u200b\u57fa\u7c7b\u200b\uff0c\u200b\u4e5f\u200b\u6ca1\u6709\u200bvirtual\u200b\u51fd\u6570\u200b</li> </ul> <pre><code>struct people{\n  // people() = default;\n  int age;\n  std::string name;\n  float height;\n};\n</code></pre> <p>C++17\uff1a\u200b\u53ef\u4ee5\u200b\u6709\u200b\u57fa\u7c7b\u200b\uff0c\u200b\u4f46\u200b\u5fc5\u987b\u200b\u662f\u200b\u516c\u6709\u200b\u7ee7\u627f\u200b\u4e14\u200b\u5fc5\u987b\u200b\u662f\u975e\u200b\u865a\u200b\u7ee7\u627f\u200b\uff08\u200b\u57fa\u7c7b\u200b\u53ef\u4ee5\u200b\u4e0d\u662f\u200b\u805a\u5408\u200b\u7c7b\u200b\uff09</p> <p>\u200b\u603b\u662f\u200b\u5047\u8bbe\u200b\u57fa\u7c7b\u200b\u662f\u200b\u4e00\u79cd\u200b\u5728\u200b\u6240\u6709\u200b\u6570\u636e\u200b\u6210\u5458\u200b\u4e4b\u524d\u200b\u58f0\u660e\u200b\u7684\u200b\u7279\u6b8a\u200b\u6210\u5458\u200b</p> <pre><code>class MyStringWithIndex : public std::string {\n public:\n  int index = 0;\n};\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\nMyStringWithIndex s{{\"hello world!\"}, 1};\n// MyStringWithIndex s{\"hello world!\", 1}; \u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b{}\nstd::cout &lt;&lt; s.index &lt;&lt; std::endl;\n</code></pre>"},{"location":"langs/cpp/effective/item7/#stdarraystdarraycpp","title":"std::array\uff08std::array\u200b\u662f\u200bcpp\u200b\u4e2d\u200b\u6570\u7ec4\u200b\u7684\u200b\u66f4\u4f18\u200b\u9009\u62e9\u200b\uff09","text":"<pre><code>template &lt;typename T, size_t N&gt;\nstruct MyArray{\n    T data[N];\n};\nint a1[3]{1, 2, 3};  // \u200b\u7b80\u5355\u200b\u7c7b\u578b\u200b\uff0c\u200b\u539f\u751f\u200b\u6570\u7ec4\u200b\nint a2[3] = {1, 2, 3};\nstd::array&lt;int, 3&gt; a3{1, 2, 3};      // \u200b\u7b80\u5355\u200b\u7c7b\u578b\u200b\uff0cstd::array\nstd::array&lt;int, 3&gt; a4 = {1, 2, 3};   // \u200b\u7b80\u5355\u200b\u7c7b\u578b\u200b\uff0cstd::array\nS a5[3] = {{1, 2}, {3, 4}, {5, 6}};  // \u200b\u590d\u5408\u200b\u7c7b\u578b\u200b\uff0c\u200b\u539f\u751f\u200b\u6570\u7ec4\u200b\nS a6[3] = {1, 2, 3, 4, 5, 6};        // \u200b\u5927\u62ec\u53f7\u200b\u7684\u200b\u7701\u7565\u200b\n// \u200b\u590d\u5408\u200b\u7c7b\u578b\u200b\uff0cstd::array\uff0c\u200b\u7f16\u8bd1\u200b\u5931\u8d25\u200b\uff01\n// std::array&lt;S, 3&gt; a7{{1, 2}, {3, 4}, {5, 6}}; // \u200b\u62a5\u9519\u200b\nstd::array&lt;S, 3&gt; a7{{{1, 2}, {3, 4}, {5, 6}}};\nstd::array&lt;S, 3&gt; a8{1, 2, 3, 4, 5, 6};  // \u200b\u4e0d\u200b\u63a8\u8350\u200b\n</code></pre> <p>\u200b\u521d\u59cb\u5316\u200b\u590d\u5408\u200b\u7c7b\u578b\u200b\u7684\u200b\u65f6\u5019\u200b\u9700\u8981\u200b\u5728\u200b\u5916\u9762\u200b\u518d\u200b\u52a0\u4e2a\u200b{}\uff0c\u200b\u539f\u56e0\u200b\u662f\u200b\uff1aarray\u200b\u91cc\u9762\u200b\u662f\u200b\u4e00\u4e2a\u200b\u539f\u751f\u200b\u6570\u7ec4\u200b\uff0c<code>T data[N] ={{1, 2}, {3, 4}, {5, 6}}</code> \u200b\u662f\u200b\u6570\u7ec4\u200b\u7684\u200b\u521d\u59cb\u5316\u200b\uff0c\u200b\u800c\u200b\u521d\u59cb\u5316\u200b\u8fd9\u4e2a\u200bdata\u200b\u8fd8\u200b\u9700\u8981\u200b\u4e00\u4e2a\u200b{}\uff0c\u200b\u5f88\u200b\u5408\u7406\u200b\uff0c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b\u53ea\u200b\u5199\u200b\u6700\u200b\u5916\u9762\u200b\u4e00\u4e2a\u200b{}\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u200b\u81ea\u52a8\u200b\u63a8\u5bfc\u200b\uff0c\u200b\u4f46\u200b\u4e0d\u200b\u63a8\u8350\u200b\u8fd9\u4e48\u200b\u5199\u200b</p>"},{"location":"langs/cpp/effective/item7/#_3","title":"\u5982\u4f55\u200b\u8ba9\u200b\u4e00\u4e2a\u200b\u5bb9\u5668\u200b\u652f\u6301\u200b\u5217\u8868\u200b\u521d\u59cb\u5316","text":"<p><code>std::initializer_list&lt;T&gt;</code> \u300a\u200b\u73b0\u4ee3\u200bc++\u200b\u8bed\u8a00\u200b\u6838\u5fc3\u200b\u7279\u6027\u200b\u89e3\u6790\u200b\u300bP84 / \u300aC++ Primer\u300b P197</p> <p>\u200b\u6ce8\u610f\u200b\uff1a</p> <ul> <li>\u200b\u7981\u6b62\u200b\u9690\u5f0f\u200b\u7f29\u7a84\u200b\u8f6c\u6362\u200b\u300a\u200b\u73b0\u4ee3\u200bc++\u200b\u8bed\u8a00\u200b\u6838\u5fc3\u200b\u7279\u6027\u200b\u89e3\u6790\u200b\u300bP87</li> <li>\u200b\u5217\u8868\u200b\u521d\u59cb\u5316\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u95ee\u9898\u200b\uff08\u200b\u9664\u975e\u200b\u4e07\u4e0d\u5f97\u5df2\u200b\uff0c\u200b\u5426\u5219\u200b\u603b\u662f\u200b\u4f18\u5148\u200b\u5339\u914d\u200b <code>std::initializer_list&lt;T&gt;</code> \u200b\u751a\u81f3\u200b\u662f\u200b\u62a5\u9519\u200b\uff09\uff0c\u200b\u5982\u679c\u200b\u6ca1\u6cd5\u200b\u9690\u5f0f\u200b\u7f29\u7a84\u200b\u8f6c\u6362\u200b\uff0c\u200b\u5c31\u200b\u4e0d\u4f1a\u200b\u5339\u914d\u200bta</li> <li>\u200b\u7a7a\u200b\u7684\u200b{}\uff0c\u200b\u4e0d\u4f1a\u200b\u8c03\u7528\u200b <code>std::initializer_list&lt;T&gt;</code> \u200b\u6784\u9020\u200b\uff0c\u200b\u800c\u662f\u200b\u65e0\u53c2\u200b\u6784\u9020\u200b\u4f46\u662f\u200b{{}} ({}) \u200b\u4f1a\u200b\u8c03\u7528\u200b\uff0c\u200b\u7b2c\u4e00\u4e2a\u200bsize\u200b\u4e3a\u200b1\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200bsize\u200b\u4e3a\u200b0</li> </ul> <pre><code>struct A {\n  A(int a) { std::cout &lt;&lt; \"A(int a)\" &lt;&lt; std::endl; }\n  A(int a, float b) { std::cout &lt;&lt; \"A(int a,float b)\" &lt;&lt; std::endl; }\n  A(int a, std::string b) { std::cout &lt;&lt; \"A(int a,std::string b)\" &lt;&lt; std::endl; }\n  A(const A &amp;a) { std::cout &lt;&lt; \"A(const A&amp; a)\" &lt;&lt; std::endl; }\n  A(std::initializer_list&lt;int&gt; a) {\n    std::cout &lt;&lt; \"C(std::initializer_list&lt;int&gt; a)\" &lt;&lt; std::endl;\n    for (const int *item = a.begin(); item != a.end(); ++item) {\n    }\n  }\n};\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\n// \u200b\u62a5\u9519\u200b \u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u8c03\u7528\u200bA(int ,float) \u200b\u800c\u662f\u200b\u8c03\u7528\u200b A(std::initializer_list&lt;int&gt; a)\n// A aaaa{1, 1.2};\nA{1,\"ssss\"}; // \u200b\u4e0d\u4f1a\u200b\u62a5\u9519\u200b\uff0c\u200b\u4f1a\u200b\u8c03\u7528\u200bA(int,std::string),\u200b\u56e0\u4e3a\u200b\"ssss\"\u200b\u65e0\u6cd5\u200b\u9690\u5f0f\u200b\u8f6c\u6362\u200b\nA aaaaaaa{{}};\nA bbbbbbb({});\n</code></pre>"},{"location":"langs/cpp/effective/item9/","title":"item9\uff1a\u200b\u4f18\u5148\u200b\u8003\u8651\u200b\u522b\u540d\u200b\u58f0\u660e\u200b\u800c\u200b\u975e\u200btypedef","text":"item9 <ul> <li><code>typedef</code>\u200b\u4e0d\u200b\u652f\u6301\u200b\u6a21\u677f\u200b\u5316\u200b\uff0c\u200b\u4f46\u662f\u200b\u522b\u540d\u200b\u58f0\u660e\u200b\u652f\u6301\u200b\u3002</li> <li>\u200b\u522b\u540d\u200b\u6a21\u677f\u200b\u907f\u514d\u200b\u4e86\u200b\u4f7f\u7528\u200b\u201c<code>::type</code>\u201d\u200b\u540e\u7f00\u200b\uff0c\u200b\u800c\u4e14\u200b\u5728\u200b\u6a21\u677f\u200b\u4e2d\u200b\u4f7f\u7528\u200b<code>typedef</code>\u200b\u8fd8\u200b\u9700\u8981\u200b\u5728\u200b\u524d\u9762\u200b\u52a0\u4e0a\u200b<code>typename</code></li> <li>C++14\u200b\u63d0\u4f9b\u200b\u4e86\u200bC++11\u200b\u6240\u6709\u200btype traits\u200b\u8f6c\u6362\u200b\u7684\u200b\u522b\u540d\u200b\u58f0\u660e\u200b\u7248\u672c\u200b</li> </ul>"},{"location":"langs/cpp/effective/item9/#typename","title":"typename \u200b\u5173\u952e\u5b57","text":"<p>\u200b\u7528\u6765\u200b\u6f84\u6e05\u200b\u6a21\u677f\u200b\u5185\u90e8\u200b\u7684\u200b\u4e00\u4e2a\u200b\u6807\u8bc6\u7b26\u200b\uff0c\u200b\u4ee3\u8868\u200b\u7684\u200b\u662f\u200b\u67d0\u79cd\u200b\u7c7b\u578b\u200b</p> <p>Reference</p> <p>\u300aC++\u200b\u6a21\u677f\u200b\uff08\u200b\u7b2c\u4e8c\u200b\u7248\u200b\uff09\u300bP62 \u300aC++ Primer\u300bP593</p> <p>\u200b\u5f53\u200b\u7f16\u8bd1\u5668\u200b\u9047\u5230\u200b\u7c7b\u4f3c\u200b<code>T::xxx</code>\u200b\u8fd9\u6837\u200b\u7684\u200b\u4ee3\u7801\u200b\u65f6\u200b\uff0c\u200b\u5b83\u200b\u4e0d\u200b\u77e5\u9053\u200b<code>xxx</code>\u200b\u662f\u200b\u4e00\u4e2a\u200b\u7c7b\u578b\u200b\u6210\u5458\u200b\u8fd8\u662f\u200b\u4e00\u4e2a\u200b\u6570\u636e\u200b\u6210\u5458\u200b\uff0c\u200b\u76f4\u5230\u200b\u5b9e\u4f8b\u200b\u5316\u200b\u65f6\u200b\u81ea\u5df1\u200b\u624d\u200b\u77e5\u9053\u200b\u3002 \u200b\u4f46\u662f\u200b\u4e3a\u4e86\u200b\u5904\u7406\u200b\u6a21\u677f\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u5fc5\u987b\u200b\u77e5\u9053\u200b\u540d\u5b57\u200b\u662f\u5426\u200b\u8868\u793a\u200b\u4e00\u4e2a\u200b\u7c7b\u578b\u200b\uff0c\u200b\u9ed8\u8ba4\u200b\u60c5\u51b5\u200b\u4e0b\u200bC++\u200b\u4f1a\u200b\u5047\u5b9a\u200b\u901a\u8fc7\u200b\u4f5c\u7528\u57df\u200b\u8fd0\u7b97\u7b26\u200b\u8bbf\u95ee\u200b\u7684\u200b\u540d\u5b57\u200b\u4e0d\u662f\u200b\u7c7b\u578b\u200b</p> <p><pre><code>struct test1 {\n  static int SubType;\n};\ntemplate &lt;typename T&gt;\nclass MyClass {\n public:\n  void foo1() {\n    int ptr = 10;\n    T::SubType *ptr;\n  }\n  void foo2() { typename T::SubType *ptr; }\n};\n\n// main\nMyClass&lt;test1&gt; class1;\nclass1.foo1();\n// class1.foo2(); // \u200b\u8fd0\u884c\u200b\u9519\u8bef\u200b\n</code></pre> \u200b\u5bf9\u4e8e\u200bfoo1\u200b\u51fd\u6570\u200b\u4e2d\u200b\u7684\u200b <code>T::SubType *ptr;</code> *\u200b\u4f1a\u200b\u89e3\u91ca\u200b\u6210\u4e58\u200b\u8fd0\u7b97\u7b26\u200b\uff0cT::SubType \u200b\u662f\u200b\u4e00\u4e2a\u200b\u6570\u636e\u200b\u6210\u5458\u200b</p> <p><pre><code>struct test2 {\n  typedef int SubType;\n};\ntemplate &lt;typename T&gt;\nclass MyClass {\n public:\n  void foo2() { typename T::SubType *ptr; }\n};\n\nMyClass&lt;test2&gt; class2;\nclass2.foo2();\n</code></pre> \u200b\u5bf9\u4e8e\u200b\u8fd9\u91cc\u200b\u7684\u200bfoo2\u200b\u51fd\u6570\u200b\uff0c\u200b\u7531\u4e8e\u200b typename \u200b\u4f1a\u200b\u5c06\u200b T::SubType \u200b\u89e3\u91ca\u200b\u6210\u200b\u4e00\u4e2a\u200b\u7c7b\u578b\u200b\uff0c\u200b\u5373\u200b int</p> <p>Note</p> <p>\u200b\u5982\u679c\u200b\u6ca1\u6709\u200b typename \u200b\u7684\u8bdd\u200b\uff0cSubType \u200b\u4f1a\u200b\u88ab\u200b\u5047\u8bbe\u200b\u6210\u200b\u4e00\u4e2a\u200b\u975e\u200b\u7c7b\u578b\u200b\u6210\u5458\u200b\uff08\u200b\u6bd4\u5982\u200b static \u200b\u6216\u8005\u200b\u4e00\u4e2a\u200b\u679a\u4e3e\u200b\u5e38\u91cf\u200b\uff0c\u200b\u4ea6\u200b\u6216\u662f\u200b\u5185\u90e8\u200b\u5d4c\u5957\u200b\u7c7b\u200b\u6216\u200b using \u200b\u58f0\u660e\u200b\u7684\u200b public \u200b\u522b\u540d\u200b</p>"},{"location":"langs/cpp/effective/item9/#usingtypedef","title":"\u5bf9\u4e8e\u200b\u6a21\u677f\u200b\u6765\u8bf4\u200b\uff0cusing\u200b\u6bd4\u200btypedef\u200b\u66f4\u597d\u200b\u7528","text":"<p><pre><code>// using\ntemplate &lt;class T&gt;\nusing myVector = std::vector&lt;T&gt;;\n\ntemplate &lt;typename T&gt;\nclass Widget {\n public:\n  myVector&lt;T&gt; list;\n};\n// typedef\ntemplate &lt;typename T&gt;\nstruct myVector2 {\n  typedef std::vector&lt;T&gt; type;\n};\n\ntemplate &lt;typename T&gt;\nclass Widget2 {\n public:\n  typename myVector2&lt;T&gt;::type list;\n};\n\ntemplate &lt;&gt;\nclass myVector2&lt;float&gt; {\n  enum class WineType { White, Red, Rose };\n  WineType type;\n};\n// main\nmyVector&lt;int&gt; myvec = {1, 2, 3};\nmyVector2&lt;int&gt;::type myvec2 = {4, 5,6};  // \u200b\u6b64\u5904\u200b\u4e0d\u7528\u200b\u52a0\u200btypename\u200b\u662f\u56e0\u4e3a\u200bT\u200b\u5df2\u7ecf\u200b\u786e\u5b9a\u200b\n</code></pre> \u200b\u663e\u7136\u200b\u4f7f\u7528\u200busing\u200b\u6bd4\u200b\u4f7f\u7528\u200btypedef\u200b\u65b9\u4fbf\u200b\uff0c\u200b\u4f7f\u7528\u200busing\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4f7f\u7528\u200bmyvector\uff0c\u200b\u800c\u200b\u4f7f\u7528\u200btypedef\u200b\u5219\u200b\u5728\u200b\u4f7f\u7528\u200b\u8fc7\u7a0b\u200b\u4e2d\u200b\u9700\u8981\u200b\u5e26\u4e0a\u200b::type\uff1b\u200b\u5982\u200b\u4e0a\u200bfloat\u200b\u7279\u5316\u200b\u6240\u793a\u200b\uff0ctype\u200b\u5728\u200b\u67d0\u4e2a\u200b\u7279\u5316\u200b\u4e0a\u200b\u53ef\u80fd\u200b\u4e0d\u662f\u200b\u522b\u540d\u200b\uff0c\u200b\u6545\u200b\u4f7f\u7528\u200b::\u200b\u65f6\u200b\u9700\u8981\u200b\u5728\u200b\u524d\u9762\u200b\u52a0\u4e0a\u200btypename\u200b\u5c06\u200b\u5176\u200b\u89e3\u91ca\u200b\u6210\u200b\u4e00\u4e2a\u200b\u7c7b\u578b\u200b\u6210\u5458\u200b</p>"},{"location":"langs/cpp/effective/item9/#_1","title":"\u7c7b\u578b\u200b\u8403\u53d6\u200b\u5668","text":"<p>\u200b\u7528\u4e8e\u200b\u6dfb\u52a0\u200b\u6216\u200b\u5220\u9664\u200b\u6a21\u677f\u200bT\u200b\u7684\u200b\u4fee\u9970\u200b</p> <p>\u200b\u5c06\u200bconst T -&gt; T </p> <p>std::remove_const_t::type (C++11) <p>std::remove_const_t (C++14) <pre><code>template&lt;typename _Tp&gt;\nusing remove_const_t = typename remove_const&lt;_Tp&gt;::type;\n</code></pre>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/","title":"\u503c\u200b\u7c7b\u578b\u200b\u4e0e\u200b\u53f3\u503c\u200b\u5f15\u7528","text":""},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#_1","title":"\u4e0b\u9762\u200b\u51fd\u6570\u200b\u6267\u884c\u200b\u51e0\u6b21\u200b\u62f7\u8d1d\u200b\uff1f","text":"<pre><code>int get_x() {\n  int a = 10;\n  return a;\n}\nint x = get_x();\n</code></pre> <p>\u200b\u6267\u884c\u200b\u4e86\u200b\u4e24\u6b21\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u5373\u200b <code>int tmp = a; int x = temp;</code>\uff0c\u200b\u56e0\u6b64\u200b\uff0c\u200b\u5982\u679c\u200b\u5bf9\u4e8e\u200b\u7c7b\u4f3c\u200b\u5927\u200b\u5185\u5b58\u200b\u6c60\u200b\u8fdb\u884c\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u8fdb\u884c\u200b\u4e24\u6b21\u200bcopy\uff0c\u200b\u5c31\u200b\u5341\u5206\u200b\u4f4e\u6548\u200b</p>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#c98","title":"C++98\u200b\u7684\u200b\u8868\u8fbe\u5f0f\u200b\u7c7b\u578b","text":"<ul> <li>\u200b\u5de6\u503c\u200b\uff1a\u200b\u6307\u5411\u200b\u7279\u5b9a\u200b\u5185\u5b58\u200b\u7684\u200b\u5177\u540d\u200b\u5bf9\u8c61\u200b</li> <li>\u200b\u53f3\u503c\u200b\uff1a\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u5b57\u7b26\u4e32\u200b\u9664\u5916\u200b\u7684\u200b\u5b57\u9762\u200b\u91cf\u200b</li> </ul> <p>\u200b\u5224\u65ad\u200b\u4e00\u4e2a\u200b\u8868\u8fbe\u5f0f\u200b\u662f\u200b\u5de6\u503c\u200b\u8fd8\u662f\u200b\u53f3\u503c\u200b\uff1a\u200b\u662f\u5426\u200b\u53ef\u4ee5\u200b\u53d6\u200b\u5730\u5740\u200b</p> <pre><code>  // &amp;get_x(); // get_x()\u200b\u8fd4\u56de\u503c\u200b\u662f\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u662f\u200b\u53f3\u503c\u200b\uff0c\u200b\u4e0d\u80fd\u200b\u53d6\u200b\u5730\u5740\u200b\n  int y = 10;\n  // int *p1 = &amp;y++; // y++ \u200b\u8fd4\u56de\u200b\u7684\u200b\u662f\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u662f\u200b\u53f3\u503c\u200b\uff0c\u200b\u9519\u8bef\u200b\n  int *p2 = &amp;++y;\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b <code>int *p = &amp;x++;</code>\uff0c\u200b\u5bf9\u4e8e\u200b x++ \u200b\u53ef\u4ee5\u200b\u770b\u4e3a\u200b\u4e0b\u9762\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u4f20\u5165\u200b\u4e00\u4e2a\u200b\u5f15\u7528\u200b\uff0c\u200b\u8fd4\u56de\u200b\u4e00\u4e2a\u200b\u4e34\u65f6\u200b\u503c\u200bb\uff1b\u200b\u56e0\u6b64\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u5176\u53d6\u200b\u5730\u5740\u200b\uff0c\u200b\u4ee3\u7801\u200b\u662f\u200b\u9519\u200b\u7684\u200b</p> <pre><code>int fun(int &amp;a) {\n  int b = a;\n  a = a + 1;\n  return b;\n}\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b <code>int *p = &amp;++x;</code>\uff0c\u200b\u5bf9\u4e8e\u200b ++x \u200b\u53ef\u4ee5\u200b\u770b\u4e3a\u200b\u4e0b\u9762\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u4f20\u5165\u200b\u4e00\u4e2a\u200b\u5f15\u7528\u200b\uff0c\u200b\u8fd4\u56de\u200b\u8be5\u200b\u5f15\u7528\u200b\uff1b\u200b\u56e0\u6b64\u200b\u53ef\u4ee5\u200b\u5bf9\u200b\u5176\u53d6\u200b\u5730\u5740\u200b\uff0c\u200b\u662f\u200b\u6b63\u786e\u200b\u7684\u200b</p> <pre><code>int &amp;func(int &amp;a) {\n  a = a + 1;\n  return a;\n}\n</code></pre>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#c11","title":"C++11\u200b\u7684\u200b\u8868\u8fbe\u5f0f\u200b\u7c7b\u578b","text":"<p>expression\uff08\u200b\u8868\u8fbe\u5f0f\u200b\uff09\uff1a</p> <ul> <li>glvalue\uff08\u200b\u6cdb\u200b\u5de6\u503c\u200b\uff09<ul> <li>lvalue\uff08\u200b\u5de6\u503c\u200b\uff09</li> <li>xvalue\uff08\u200b\u5c06\u4ea1\u503c\u200b\uff09</li> </ul> </li> <li>rvalue\uff08\u200b\u53f3\u503c\u200b\uff09<ul> <li>xvalue\uff08\u200b\u5c06\u4ea1\u503c\u200b\uff09</li> <li>prvalue\uff08\u200b\u53f3\u503c\u200b\uff09</li> </ul> </li> </ul>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#_2","title":"\u8d4b\u503c\u200b\u64cd\u4f5c\u200b\u53ea\u6709\u200b\u62f7\u8d1d\u200b\u8fd9\u79cd\u200b\u552f\u4e00\u200b\u89e3\u6cd5\u200b\u5417\u200b\uff1f","text":"<ul> <li>\u200b\u62f7\u8d1d\u200b\u64cd\u4f5c\u200b</li> <li>\u200b\u5f15\u7528\u200b\u64cd\u4f5c\u200b</li> <li>\u200b\u79fb\u52a8\u200b\u64cd\u4f5c\u200b</li> </ul>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#_3","title":"\u53f3\u503c\u200b\u5f15\u7528\u200b\u4e0e\u200b\u79fb\u52a8\u200b\u8bed\u4e49","text":"<p>\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\u4e0d\u200b\u63a5\u53d7\u200b\u53f3\u503c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u51fa\u73b0\u200b\u53ea\u200b\u63a5\u53d7\u200b\u53f3\u503c\u200b\u7684\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b Type &amp;&amp;</p> <p>\u200b\u79fb\u52a8\u200b\u8bed\u4e49\u200b\uff1astd::move\u200b\u53ef\u4ee5\u200b\u5c06\u200b\u5de6\u503c\u200b\u8f6c\u4e3a\u200b\u53f3\u503c\u200b\uff0c\u200b\u5de6\u503c\u200b\u7684\u200b\u751f\u547d\u5468\u671f\u200b\u7ed3\u675f\u200b\uff0c\u200b\u8fd9\u4e2a\u200b\u53f3\u503c\u200b\u88ab\u200b\u79f0\u4e3a\u200b\u5c06\u4ea1\u503c\u200b</p> <p>\u200b\u6ce8\u610f\u200b\uff1a</p> <ul> <li>\u200b\u7eaf\u53f3\u503c\u200b\u4e5f\u200b\u53ef\u4ee5\u200b std::move</li> <li>\u200b\u7c7b\u4e2d\u200b\u672a\u200b\u5b9e\u73b0\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\uff0cstd::move\u200b\u4e4b\u540e\u200b\u4ecd\u200b\u662f\u200b\u62f7\u8d1d\u200b \uff08\u200b\u79fb\u52a8\u200b\u8bed\u4e49\u200b\u6ca1\u200b\u79fb\u52a8\u200b\uff09\uff0cstd::move\u200b\u8fd8\u662f\u200b\u53bb\u200b\u6211\u4eec\u200b\u5b9e\u73b0\u200b\u7684\u200b\u7c7b\u200b\u4e2d\u200b\u5bfb\u627e\u200b\u51fd\u6570\u200b\uff0c\u200b\u5f53\u200b\u53d1\u73b0\u200b\u6ca1\u6709\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u65f6\u200b\uff0c\u200b\u7531\u4e8e\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b\u7684\u200bconst &amp;\u200b\u53ef\u4ee5\u200b\u63a5\u53d7\u200b\u4efb\u4f55\u200b\u503c\u200b\uff0c\u200b\u6240\u4ee5\u200b\u8fdb\u884c\u200b\u4e86\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b</li> <li>\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u4ecd\u200b\u662f\u200b\u5de6\u503c\u200b</li> <li>\u200b\u53f3\u503c\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u4e0a\u200b\u8fde\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u90fd\u200b\u4e0d\u4f1a\u200b\u53d1\u751f\u200b</li> </ul>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E5%80%BC%E7%B1%BB%E5%9E%8B%E4%B8%8E%E5%8F%B3%E5%80%BC%E5%BC%95%E7%94%A8/#_4","title":"\u5982\u4f55\u200b\u5f97\u5230\u200b\u5c06\u4ea1\u503c","text":"<ul> <li>\u200b\u5c06\u6cdb\u200b\u5de6\u503c\u200b\u8f6c\u5316\u200b\u4e3a\u200b\u5c06\u200b\u4ea1\u503c\u200b\uff1a<ul> <li>static_cast(xxx) <li>std::move(xxx) \u200b\u79fb\u52a8\u200b\u8bed\u4e49\u200b\u6ca1\u200b\u79fb\u52a8\u200b</li> <li>\u200b\u4e34\u65f6\u200b\u91cf\u200b\u5b9e\u8d28\u200b\u5316\u200b\uff08c++17\u200b\u5f15\u5165\u200b\uff09</li> <pre><code>  // \u200b\u62f7\u8d1d\u200b\u64cd\u4f5c\u200b\uff0cgetPool()\u200b\u8fdb\u884c\u200b\u4e24\u6b21\u200bcopy\uff0c\n  // \u200b\u6ce8\u610f\u200b\uff1a\u200b\u9700\u8981\u200b\u5728\u200b\u6ca1\u6709\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u7684\u200b\u524d\u63d0\u200b\u4e0b\u200b\uff0c\u200b\u6709\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u65f6\u4f1a\u200b\u8fdb\u884c\u200b\u4e24\u6b21\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\n  BigMemoryPool aaa = getPool();\n  BigMemoryPool bbb = aaa;   //\u200b\u62f7\u8d1d\u200b\u64cd\u4f5c\u200b\n  BigMemoryPool &amp;ccc = aaa;  // \u200b\u5f15\u7528\u200b\u64cd\u4f5c\u200b\n  // \u200b\u53f3\u503c\u200b\u7ed1\u5b9a\u200b\u5230\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u4e0a\u200b\u8fde\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u90fd\u200b\u4e0d\u4f1a\u200b\u53d1\u751f\u200b\uff0ceee\u200b\u53ea\u662f\u200baaa\u200b\u7684\u200b\u4e00\u4e2a\u200b\u522b\u540d\u200b\uff0c\u200b\u64cd\u4f5c\u200baaa\uff0ceee\uff0cccc\u200b\u662f\u200b\u4e00\u6837\u200b\u7684\u200b\n  BigMemoryPool &amp;&amp;eee = std::move(aaa);\n  BigMemoryPool ddd = std::move(aaa);  // \u200b\u79fb\u52a8\u200b\u64cd\u4f5c\u200b\uff0c\u200b\u6b64\u65f6\u200baaa\u200b\u5df2\u7ecf\u200b\u9500\u6bc1\u200b\u4e86\u200b\n\n  int x = get_x();\n  // int &amp;z = 10;  // &amp;z\u200b\u662f\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b,\u200b\u5b57\u9762\u200b\u91cf\u200b10\u200b\u662f\u200b\u53f3\u503c\u200b\uff0c\u200b\u5de6\u503c\u200b\u5f15\u7528\u200b\u4e0d\u200b\u63a5\u53d7\u200b\u53f3\u503c\u200b\n  // int &amp;z = get_x();  // get_x()\u200b\u8fd4\u56de\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b\uff0c\u200b\u9519\u8bef\u200b\u540c\u200b\u4e0a\u200b\n  int &amp;&amp;zz = 10;  // &amp;&amp;z\u200b\u662f\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\uff0c\u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u63a5\u53d7\u200b\u53f3\u503c\u200b\n  // int &amp;&amp;z = x; // \u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u53ea\u80fd\u200b\u7ed1\u5b9a\u200b\u53f3\u503c\u200b\uff0c\u200b\u9519\u8bef\u200b\n  int &amp;&amp;z = std::move(x);\n  &amp;z;  // \u200b\u53f3\u503c\u200b\u5f15\u7528\u200b\u4ecd\u200b\u662f\u200b\u5de6\u503c\u200b\n  const int k = 10;\n  const int &amp;&amp;kk = std::move(k);  // const &amp;&amp;\n</code></pre> <pre><code>BigMemoryPool get_pool(const BigMemoryPool &amp;pool) { return pool; }\n\nBigMemoryPool make_pool() {\n  BigMemoryPool pool;\n  return get_pool(pool);\n}\nBigMemoryPool kkk= make_pool();\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b\u4e0a\u9762\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\uff0c\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u65f6\u200b\uff1a</p> <p>\u200b\u5982\u679c\u200b\u7c7b\u4e2d\u200b\u6709\u200b\u62f7\u8d1d\u200b\u6784\u9020\u200b\u548c\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\u7684\u200b\u60c5\u51b5\u200b\u4e0b\u200b\uff0c\u200b\u4f1a\u200b\u6267\u884c\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\u4e24\u6b21\u200b\u79fb\u52a8\u200b\uff0c\u200b\u539f\u56e0\u200b\u5982\u4e0b\u200b\uff1a</p> <pre><code>BigMemoryPool get_pool(const BigMemoryPool &amp;pool) {\n  return pool;  // \u200b\u8fd9\u91cc\u200b\u7684\u200bpool\u200b\u662f\u200b\u4e2a\u200b\u5de6\u503c\u200b\n}\n// BigMemoryPool temp = pool;\n// \u200b\u9000\u51fa\u200b\u4e0a\u9762\u200b\u8fd9\u4e2a\u200b\u51fd\u6570\u200b\u65f6\u200b\uff0c\u200b\u4f1a\u200b\u51fa\u73b0\u200b\u8fd9\u4e2a\u200b\u4e34\u65f6\u200b\u53d8\u91cf\u200b\uff0c\u200b\u56e0\u4e3a\u200bpool\u200b\u662f\u200b\u5de6\u503c\u200b\uff0c\u200b\u8fd9\u91cc\u200b\u53d1\u751f\u200b\u7b2c\u4e00\u4e2a\u200b\u62f7\u8d1d\u200b\nBigMemoryPool make_pool() {\n  BigMemoryPool pool;  // \u200b\u8c03\u7528\u200b\u65e0\u53c2\u200b\u6784\u9020\u51fd\u6570\u200b\u4ec0\u4e48\u200b\u90fd\u200b\u4e0d\u200b\u53d1\u751f\u200b\n  return get_pool(pool);\n}\n// BigMemoryPool temp2 = temp; // \u200b\u7531\u4e8e\u200b\u8fd9\u91cc\u200btemp\u200b\u662f\u200b\u4e34\u65f6\u200b\u53d8\u91cf\u200b\uff0c\u200b\u6240\u4ee5\u200b\u53d1\u751f\u200b\u79fb\u52a8\u200b\n// \u200b\u4e0b\u9762\u200b\u662f\u200bmain\u200b\u51fd\u6570\u200b\u5185\u200b\nBigMemoryPool kkk = make_pool();\n// BigMemoryPool kkk = temp2; \u200b\u8fd9\u91cc\u200b\u53d1\u751f\u200b\u7b2c\u4e8c\u6b21\u200b\u79fb\u52a8\u200b\uff0c\u200b\u5c06\u200btemp2\u200b\u8d4b\u7ed9\u200bkkk\n</code></pre> <p>\u200b\u5982\u679c\u200b\u7c7b\u4e2d\u200b\u6ca1\u6709\u200b\u5b9e\u73b0\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\uff0c\u200b\u5c31\u200b\u4f1a\u200b\u6267\u884c\u200b\u4e09\u6b21\u200b\u62f7\u8d1d\u200b</p> <p>\u200b\u6ce8\u200b\uff1a\u200b\u4e0a\u8ff0\u200b\u4ee3\u7801\u8fd0\u884c\u200b\u65f6\u200b\uff0c\u200b\u9700\u8981\u200b\u5728\u200bCMakeLists.txt\u200b\u4e2d\u200b\u52a0\u5165\u200b <code>set(CMAKE_CXX_FLAGS -fno-elide-constructors) #\u200b\u7981\u6b62\u200b\u8fd4\u56de\u503c\u200b\u4f18\u5316\u200b</code> \uff0c\u200b\u5426\u5219\u200b\uff0c\u200b\u6267\u884c\u200b\u4ee3\u7801\u200b\u65f6\u200b\uff0c\u200b\u4e0d\u7ba1\u200b\u5199\u200b\u4e0d\u200b\u5199\u200b\u79fb\u52a8\u200b\u6784\u9020\u200b\uff0c\u200b\u90fd\u200b\u53ea\u4f1a\u200b\u53d1\u751f\u200b\u4e00\u6b21\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u7f16\u8bd1\u5668\u200b\u4f1a\u5e2e\u200b\u6211\u4eec\u200b\u505a\u200b\u8fd4\u56de\u503c\u200b\u4f18\u5316\u200b</p>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/","title":"\u6570\u7ec4\u200b\u6307\u9488\u200b\u4e0e\u200b\u51fd\u6570\u6307\u9488","text":""},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/#c","title":"\u6570\u7ec4\u200b\u76f8\u5173\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b\uff08\u200b\u592a\u200b\u590d\u6742\u200b\u4e86\u200b\uff0cc++\u200b\u4e0d\u200b\u5efa\u8bae\u200b\u4f7f\u7528\u200b[]\uff09","text":"<p><code>int array[5] ={0,1,2,3,4};</code> array\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b\u200b\u662f\u200bint [5]\uff0c\u200b\u4e0d\u662f\u200bint *</p> <pre><code>int a = 10;\nint array[5] = {0, 1, 2, 3, 4};\nint *ptr = array;  // \u200b\u5c06\u200b\u6570\u7ec4\u540d\u200b\u76f4\u63a5\u200b\u8d4b\u503c\u200b\u7ed9\u200b\u4e00\u4e2a\u200b\u6307\u9488\u200b\u4f1a\u200b\u53d1\u751f\u200b\u3010\u200b\u9000\u5316\u200b\u3011\n// int(*ptr2)[5] = array;\nint *ptr3[5] = {&amp;a, &amp;a, &amp;a, &amp;a, &amp;a}; // \u200b\u6570\u7ec4\u200b\u6307\u9488\u200b\uff08\u200b\u662f\u200b\u6307\u9488\u200b\uff09\n// int (*) [5]  \u200b\u6307\u9488\u200b\u6570\u7ec4\u200b\uff08\u200b\u662f\u200b\u6570\u7ec4\u200b\uff09 \u200b\u5bf9\u200b\u6570\u7ec4\u540d\u200b\u53d6\u200b\u5730\u5740\u200b\u90a3\u4e48\u200b\u5c31\u200b\u6ca1\u6709\u200b\u9000\u5316\u200b\u8fd9\u4e00\u8bf4\u200b\nint(*ptr4)[5] = &amp;array;\nint(&amp;ref)[5] = array;  // int (&amp;) [5] \u200b\u6570\u7ec4\u200b\u5f15\u7528\u200b\n</code></pre> <p>\u200b\u6570\u7ec4\u540d\u200b\u53d6\u200b\u5730\u5740\u200b\u7684\u200b\u7c7b\u578b\u200b\uff08int \u200b\u6570\u7ec4\u200b\u6307\u9488\u200b\uff09\u200b\u4e0d\u200b\u7b49\u4e8e\u200b \u200b\u6570\u7ec4\u540d\u200b\u7684\u200b\u7c7b\u578b\u200b\uff08int \u200b\u6307\u9488\u200b\uff09</p> <p>ptr4\u200b\u548c\u200bref\u200b\u8981\u52a0\u200b\u62ec\u53f7\u200b\u7684\u200b\u539f\u56e0\u200b\u662f\u200b[]\u200b\u7684\u200b\u4f18\u5148\u7ea7\u200b\u9ad8\u4e8e\u200b*\uff0c\u200b\u4e0d\u200b\u52a0\u200b\u62ec\u53f7\u200b\u5c31\u662f\u200bptr3\u200b\u90a3\u200b\u884c\u200b\u4ee3\u7801\u200b\uff0c\u200b\u610f\u601d\u200b\u662f\u200bptr3\u200b\u662f\u200b\u4e2a\u200b\u6570\u7ec4\u200b\uff0c\u200b\u6570\u7ec4\u200b\u4e2d\u200b\u6bcf\u4e2a\u200b\u5143\u7d20\u200b\u7684\u200b\u7c7b\u578b\u200b\u662f\u200bint *\uff0c\u200b\u8be6\u89c1\u200b\u300aC++ Primer\u300bP147</p> <p><code>\"hello world\";</code> \u200b\u5b57\u7b26\u4e32\u200b\u5b57\u9762\u200b\u91cf\u200b\u662f\u200b\u5de6\u503c\u200b\uff0c\u200b\u539f\u56e0\u200b\u662f\u200b\u7f16\u8bd1\u5668\u200b\u5728\u200b\u7b2c\u4e00\u6b21\u200b\u521b\u5efa\u200b\u8fd9\u4e2a\u200b\u5b57\u9762\u200b\u91cf\u200b\u65f6\u4f1a\u200b\u628a\u200b\u5b83\u200b\u5b58\u653e\u200b\u5728\u200b\u4e00\u4e2a\u200b\u4f4d\u7f6e\u200b\uff0c\u200b\u8fd9\u6837\u200b\u4e4b\u540e\u200b\u7684\u200b\u6bcf\u6b21\u200b\u62f7\u8d1d\u200b\u5c31\u200b\u4e0d\u200b\u9700\u8981\u200b\u4e00\u4e2a\u4e2a\u200b\u5b57\u7b26\u200b\u91cd\u590d\u200b\u521b\u5efa\u200b\u4e34\u65f6\u200b\u5bf9\u8c61\u200b\u4e86\u200b\uff0c\u200b\u4e0d\u7136\u200b\u5b57\u7b26\u4e32\u200b\u5f88\u957f\u200b\u7684\u8bdd\u200b\u5c31\u200b\u663e\u5f97\u200b\u5f88\u8822\u200b\uff01</p> <pre><code>  // &amp;\"hello world\";  // \"hello world\"\u200b\u7c7b\u578b\u200b\u662f\u200bconst char[12]\n  char str[12] = \"hello world\";\n  const char *strr = \"hello world\";  // \u200b\u53d6\u200b\u5730\u5740\u200b\u540e\u200b\u53d8\u6210\u200b\u5e95\u5c42\u200bconst\u200b\u56e0\u6b64\u200b\u524d\u9762\u200b\u9700\u8981\u200b\u52a0\u200bconst\n  // \u200b\u4f46\u662f\u200b\u4e0d\u200b\u52a0\u200bconst\u200b\u4e5f\u200b\u4e0d\u4f1a\u200b\u62a5\u9519\u200b\uff0c\u200b\u4f46\u662f\u200b\u6211\u4eec\u200b\u4f9d\u65e7\u200b\u4e0d\u80fd\u200b\u4fee\u6539\u200bstrrrr\u200b\u7684\u200b\u503c\u200b\n  // char *strrr = \"hello world\";\n  // strrr[1] = 's'; // \u200b\u8fd0\u884c\u200b\u65f6\u4f1a\u200b\u51fa\u73b0\u200b\u6bb5\u200b\u9519\u8bef\u200b\n</code></pre>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/#_1","title":"\u6570\u7ec4\u540d\u200b\u4f5c\u4e3a\u200b\u53c2\u6570\u4f20\u9012\u200b\u65f6\u4f1a\u200b\u53d1\u751f\u200b\u9000\u5316","text":"<p>\u200b\u4e0b\u200b\u9762\u524d\u200b\u4e09\u4e2a\u200b\u51fd\u6570\u200b\u662f\u200b\u7b49\u4ef7\u200b\u7684\u200b\uff0c\u200b\u4f20\u5165\u200b\u7684\u200b\u53c2\u6570\u200b\u90fd\u200b\u662f\u200b int *\uff0c\u200b\u4e0e\u200b\u7b2c\u56db\u4e2a\u200b\u51fd\u6570\u200b\u4e0d\u7b49\u4ef7\u200b\uff0c\u200b\u53c2\u6570\u200b\u7c7b\u578b\u200b\u662f\u200b <code>int (*)[5]</code></p> <pre><code>void func1(int a[]);\nvoid func2(int *a);\nvoid func3(int a[5]);\nvoid func4(int (*a)[5]);\n</code></pre>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E6%95%B0%E7%BB%84%E6%8C%87%E9%92%88%E4%B8%8E%E5%87%BD%E6%95%B0%E6%8C%87%E9%92%88/#_2","title":"\u51fd\u6570\u200b\u76f8\u5173\u200b\u7684\u200b\u6570\u636e\u7c7b\u578b","text":"<pre><code>bool fun(int a, int b) {\n  std::cout &lt;&lt; \"fun\" &lt;&lt; std::endl;\n  return true;\n};                             // =&gt; bool (int,int); \u200b\u51fd\u6570\u200b\u6570\u636e\u7c7b\u578b\u200b\nbool (*funptr)(int a, int b);  // =&gt; bool (*)(int,int); \u200b\u51fd\u6570\u6307\u9488\u200b\u6570\u636e\u7c7b\u578b\u200b\n// \u200b\u51fd\u6570\u6307\u9488\u200b\u8d4b\u503c\u200b bool (*)(int,int); &amp;\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\nbool (*funptr1)(int, int) = &amp;fun;  // = fun \u200b\u51fd\u6570\u200b\u9000\u5316\u200b\u6210\u200b\u51fd\u6570\u6307\u9488\u200b\n// \u200b\u51fd\u6570\u6307\u9488\u200b\u4f7f\u7528\u200b *\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\nbool c = (*funptr1)(1, 2);  // \u200b\u8f93\u51fa\u200bfun\n// \u200b\u51fd\u6570\u6307\u9488\u200b\u4f5c\u4e3a\u200b\u5f62\u53c2\u200b *\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\nvoid fun2(int c, bool (*funptr)(int, int));\n// \u200b\u51fd\u6570\u6307\u9488\u200b\u4f5c\u4e3a\u200b\u8fd4\u56de\u503c\u200b *\u200b\u4e0d\u200b\u53ef\u4ee5\u200b\u7701\u7565\u200b\nbool (*fun3(int c))(int, int);\n// \u200b\u51fd\u6570\u200b\u7684\u200b\u5f15\u7528\u200b\nbool (&amp;funref)(int, int) = fun;\n\n// main\u200b\u51fd\u6570\u200b\u5185\u200b\nbool (*funptr)(int, int) = fun;  // \u200b\u51fd\u6570\u200b\u9000\u5316\u200b\u6210\u200b\u51fd\u6570\u6307\u9488\u200b\n//funptr = fun;\n//funptr = &amp;fun;\nbool xx =funptr(1,2); // \u200b\u8f93\u51fa\u200bfun\nbool yy = (*funptr)(1, 2); //\u200b\u8f93\u51fa\u200bfun\nbool (&amp;funRef)(int, int) = fun;\nbool zz = funRef(1,2); //\u200b\u8f93\u51fa\u200bfun\n</code></pre>"},{"location":"langs/cpp/%E9%9B%B6%E7%A2%8E%E6%9D%82%E8%AE%B0/%E9%A1%B6%E5%B1%82const%E4%B8%8E%E5%BA%95%E5%B1%82const/","title":"\u9876\u5c42\u200bconst\u200b\u4e0e\u200b\u5e95\u5c42\u200bconst","text":"<p>Reference</p> <p>\u300aC++ Primer\u300bP58\uff1a\u200b\u5f53\u200b\u6267\u884c\u200b\u5bf9\u8c61\u200b\u62f7\u8d1d\u200b\u64cd\u4f5c\u200b\u65f6\u200b\uff0c\u200b\u5e38\u91cf\u200b\u7684\u200b\u9876\u5c42\u200bconst\u200b\u4e0d\u200b\u53d7\u200b\u4ec0\u4e48\u200b\u5f71\u54cd\u200b\uff0c\u200b\u800c\u200b\u5e95\u5c42\u200bconst\u200b\u5fc5\u987b\u200b\u4e00\u81f4\u200b</p> <pre><code>  const int a = 10;\n  int b = a;  // \u200b\u62f7\u8d1d\u200ba\u200b\u7684\u200b\u503c\u200b\uff0c\u200b\u9876\u5c42\u200bconst\u200b\u52a0\u4e0d\u52a0\u200b\u4e0d\u53d7\u200b\u5f71\u54cd\u200b\n  const int *const p = new int(10);\n  // int *p1 = p;        // error \u200b\u5e95\u5c42\u200bconst\u200b\u5fc5\u987b\u200b\u4e00\u81f4\u200b\n  // int *const p2 = p;  // error \u200b\u9519\u8bef\u200b\u540c\u200b\u4e0a\u200b\n  const int *p3 = p;  // \u200b\u9876\u5c42\u200bconst\u200b\u53ef\u4ee5\u200b\u5ffd\u7565\u200b\uff0c\u200b\u4f46\u200b\u5e95\u5c42\u200b\u5fc5\u987b\u200b\u4e00\u81f4\u200b\u52a0\u4e0a\u200b\u4e86\u200b\u7b2c\u4e00\u4e2a\u200bconst\n  // int *p4 = &amp;a;  // error a\u200b\u867d\u7136\u200b\u662f\u200b\u9876\u5c42\u200bconst\uff0c&amp;a\u200b\u53d8\u6210\u200b\u4e86\u200b\u5e95\u5c42\u200bconst \u200b\u6ce8\u610f\u200b\uff01\uff01\uff01\n  const int *p4 = &amp;a;\n  const int &amp;r1 = a;  //\u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u5de6\u4fa7\u200b\uff0c\u200b\u53f3\u4fa7\u200b\u53ef\u4ee5\u200b\u63a5\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\n  const int &amp;rr1 = b;  //\u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u5de6\u4fa7\u200b\uff0c\u200b\u53f3\u4fa7\u200b\u53ef\u4ee5\u200b\u63a5\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\n  const int &amp;rr2 = 40;  //\u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u5de6\u4fa7\u200b\uff0c\u200b\u53f3\u4fa7\u200b\u53ef\u4ee5\u200b\u63a5\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b\n  // int &amp;r2 = a;          // error \u200b\u975e\u5e38\u200b\u91cf\u200b\u5f15\u7528\u200b = \u200b\u5e38\u91cf\u200b\n  // int &amp;r3 = r1;  // \u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u7b49\u200b\u53f7\u200b\u53f3\u4fa7\u200b\uff0c\u200b\u8bf7\u200b\u5ffd\u7565\u200b&amp; \uff0c\u200b\u9519\u8bef\u200b\u540c\u200b\u4e0a\u200b\n  int c = a;  // \u200b\u7b49\u4e8e\u200bint c = a; \u200b\u975e\u5e38\u200b\u91cf\u200b = \u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b\n</code></pre> <p>\u200b\u5bf9\u4e8e\u200b  <code>const int *const p = new int(10)</code>; \u200b\u7b2c\u4e00\u4e2a\u200bconst\u200b\u4e3a\u200b\u5e95\u5c42\u200bconst\uff0c\u200b\u7b2c\u4e8c\u4e2a\u200bconst\u200b\u4e3a\u200b\u9876\u5c42\u200bconst</p> <p>(const) p ---&gt; 10(const) , \u200b\u82e5\u200bpa---&gt;10(const) \u200b\u663e\u7136\u200b\uff0c\u200b\u5982\u679c\u200b\u8bed\u53e5\u200b\u7f16\u8bd1\u200b\u901a\u8fc7\u200b\u90a3\u200b*pa=11\u200b\u5c31\u200b\u53ef\u4ee5\u200b\u6267\u884c\u200b\uff0cpa\u200b\u53ef\u4ee5\u200b\u76f4\u63a5\u200b\u4fee\u6539\u200b\u8fd9\u4e2a\u200b10\uff0c\u200b\u8fd9\u200b\u662f\u200b\u4e0d\u200b\u5bf9\u200b\u7684\u200b\uff0c<code>int *pa = p</code>\u200b\u662f\u200b\u9519\u8bef\u200b\u7684\u200b</p> <p>\u200b\u800c\u200b\u5bf9\u4e8e\u200b <code>int *const p = new int(10);</code>\u200b\u6765\u8bf4\u200b\uff0c(const) p ---&gt; 10,\u200b\u90a3\u4e48\u200bpa---&gt;10\u200b\u662f\u200b\u53ef\u4ee5\u200b\u7684\u200b\uff0c\u200b\u4e8e\u662f\u200b <code>int *pa = p</code>\u200b\u662f\u200b\u53ef\u4ee5\u200b\u901a\u8fc7\u200b\u7684\u200b</p> <p>Note</p> <p>\u200b\u5173\u4e8e\u200b\u5f15\u7528\u200b&amp;\u200b\u603b\u7ed3\u200b\u5982\u4e0b\u200b\u51e0\u70b9\u200b\uff1a</p> <ul> <li>\u200b\u5f15\u7528\u200b\u4e0d\u662f\u200b\u5bf9\u8c61\u200b\u4e14\u200b\u4e0d\u200b\u8fdb\u884c\u200b\u62f7\u8d1d\u200b\uff0c\u200b\u4e0d\u200b\u6ee1\u8db3\u200b\u4e0a\u9762\u200b\u7684\u200b\u539f\u5219\u200b</li> <li>\u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u5de6\u4fa7\u200b\uff0c\u200b\u53f3\u4fa7\u200b\u53ef\u4ee5\u200b\u63a5\u200b\u4efb\u4f55\u200b\u4e1c\u897f\u200b</li> <li>\u200b\u975e\u5e38\u200b\u91cf\u200b\u5f15\u7528\u200b = \u200b\u5e38\u91cf\u200b \uff08\u200b\u62a5\u9519\u200b\uff01\uff01\uff01\uff09</li> <li>\u200b\u5f15\u7528\u200b\u5982\u679c\u200b\u5728\u200b\u7b49\u200b\u53f7\u200b\u53f3\u4fa7\u200b\uff0c\u200b\u8bf7\u200b\u5ffd\u7565\u200b&amp;</li> <li>\u200b\u975e\u5e38\u200b\u91cf\u200b = \u200b\u5e38\u91cf\u200b\u5f15\u7528\u200b \uff08\u200b\u6b63\u786e\u200b\uff09</li> </ul>"},{"location":"tag/","title":"Tags","text":"<p>Tip</p> <p>\u200b\u4ee5\u4e0b\u200b\u662f\u200b\u76f8\u5173\u200b\u6807\u7b7e\u200b\u7684\u200b\u5217\u8868\u200b</p>"}]}